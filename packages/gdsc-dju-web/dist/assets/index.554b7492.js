var NR=Object.defineProperty;var PR=(n,e,t)=>e in n?NR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var In=(n,e,t)=>(PR(n,typeof e!="symbol"?e+"":e,t),t);import a0,{memo as Zi,useEffect as ht,useRef as uo,useState as He,lazy as iu,useCallback as c0,forwardRef as uE,Suspense as OR}from"react";import{useLocation as ho,Routes as hE,Route as dr}from"react-router";import g,{css as ue,useTheme as xg,createGlobalStyle as MR,ThemeProvider as LR}from"styled-components";import{atom as La,useRecoilState as Lt,useRecoilValue as ru,selector as FR,RecoilRoot as $R}from"recoil";import{motion as ee,AnimatePresence as er,LayoutGroup as UR}from"framer-motion";import{Link as BR,useNavigate as Fa,Routes as dE,Route as Bo,useSearchParams as Ag,BrowserRouter as VR}from"react-router-dom";import fE from"lottie-web";import{ErrorBoundary as qR}from"react-error-boundary";import GR from"browser-detect";import{_registerComponent as Ue,registerVersion as _e,_getProvider as tr,getApp as l0,SDK_VERSION as fn,initializeApp as jR}from"@firebase/app";import Ii from"axios";import Ze from"@firebase/app-compat";import C_ from"@emailjs/browser";import zR from"react-dom";const WR=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};WR();const KR=g.div`
  display: flex;
  align-items: center;
  flex-direction: row;
  padding: 15px 0;
  justify-content: center;
  text-align: center;
  width: 100%;
  opacity: 80%;
  z-index: 3;
  ${({alertColor:n})=>n&&ue`
      color: ${n};
    `}
`,HR=g.div`
  font-size: ${n=>n.theme.fontSize.h7};
  opacity: 100%;
  margin-left: 5px;
  display: flex;
  align-items: center;
  color: ${n=>n.theme.colors.grey900};
  @media (max-width: 500px) {
    font-size: ${({theme:n})=>n.fontSize.body1};
  }
  @media (max-width: 320px) {
    font-size: ${({theme:n})=>n.fontSize.body2};
  }
`,QR=g(ee.div)`
  position: fixed;
  background: ${({theme:n})=>n.colors.grey100};
  border-radius: 10px;
  border: 1px solid ${({theme:n})=>n.colors.grey100};
  padding: 7px 30px;
  top: 100px;
  flex: 1;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 9999;
  & :hover {
    cursor: default;
  }
`,YR=g(ee.div)`
  position: fixed;
  top: 100px;
  width: 100%;
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
`,XR="alert",JR={alertHandle:!1,alertMessage:"\uD14C\uC2A4\uD2B8\uD14C\uC2A4\uD2B8\uD14C\uC2A4\uD2B8",alertStatus:"warning"},pE=La({key:XR,default:JR});var u0={exports:{}},h0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZR=a0,e3=Symbol.for("react.element"),t3=Symbol.for("react.fragment"),n3=Object.prototype.hasOwnProperty,i3=ZR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r3={key:!0,ref:!0,__self:!0,__source:!0};function mE(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)n3.call(e,i)&&!r3.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:e3,type:n,key:s,ref:o,props:r,_owner:i3.current}}h0.Fragment=t3;h0.jsx=mE;h0.jsxs=mE;u0.exports=h0;const f=u0.exports.jsx,R=u0.exports.jsxs,fo=u0.exports.Fragment,s3={active:{opacity:1,scale:1},unActive:{opacity:0,scale:.5}},o3=()=>{const[n,e]=Lt(pE);ht(()=>{const i=setTimeout(()=>{e({...n,alertHandle:!1}),clearTimeout(i)},4e3)},[n.alertHandle]);const t={success:"#55af7a",error:"#f44336",warning:"#ffa50e"};return f(er,{children:n.alertHandle&&f(YR,{children:f(QR,{variants:s3,exit:"unActive",animate:"active",initial:{opacity:0,scale:0},transition:{duration:.5},children:f(KR,{alertColor:t[n.alertStatus],children:f(HR,{children:n.alertMessage})})})})})};var a3=Zi(o3);g.footer`
  display: flex;
  justify-content: center;
  max-width: 1064px;
  margin: auto;
  padding: 0 67px;
  box-sizing: border-box;
`;g.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
`;const sh=g.a`
  font-size: ${n=>n.theme.fontSize.body2};
  font-weight: 600;
  margin-right: 20px;
  color: ${n=>n.theme.colors.grey600};
  cursor: pointer;
  white-space: nowrap;
  @media (max-width: ${n=>n.theme.windowSize.tablet}px) {
    margin-top: 10px;
  }
  ${n=>n.google&&ue`
      font-size: ${e=>e.theme.fontSize.h7};
      font-weight: 700;
      color: ${e=>e.theme.colors.grey700};
    `}
`,c3=g.span`
  display: inline-block;
  position: relative;
  font-size: ${n=>n.theme.fontSize.body3};
  color: ${n=>n.theme.colors.grey600};
  white-space: nowrap;
  @media (max-width: ${n=>n.theme.windowSize.mobile}px) {
    font-size: ${n=>n.theme.fontSize.body4};
  }
`,l3=g.div`
  ${({disable:n})=>n&&ue`
      display: none;
    `}
  display: flex;
  bottom: 0;
  padding: 30px 40px;
  justify-content: space-between;
  width: 100vw;
  box-sizing: border-box;
  align-items: flex-end;
  background-color: rgba(0, 0, 0, 0.01);
  backdrop-filter: blur(10px);
  @media (max-width: ${n=>n.theme.windowSize.mobile}px) {
    padding: 30px 20px;
  }
`,u3=g.div`
  display: flex;
  align-items: center;
  flex-direction: row;
  flex: 1;
  @media (max-width: ${n=>n.theme.windowSize.tablet}px) {
    height: 100%;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
  }
`;g.div`
  margin-right: 20px;
`;g.img`
  height: 30px;

  padding-right: 5px;
  @media (max-width: 500px) {
    height: 30px;
  }
`;const h3=({disable:n=!0})=>R(l3,{disable:n,children:[R(u3,{children:[f(sh,{google:!0,href:"https://developers.google.com/",children:"Google"}),f(sh,{href:"https://developers.google.com/community-guidelines",children:"Community guidelines"}),f(sh,{href:"https://gdsc-dju-blog.web.app/",children:"GDSC DJU Tech Blog"}),f(sh,{href:"https://gdsc-dju-shared.web.app/",children:"GDSC DJU Shared"})]}),R(c3,{children:["Copyright \xA9 ","GDSC Daejin 2021"]})]}),d3="Modal",vt={ADMIN_SIGN_IN:"adminSignIn",ADMIN_SIGN_UP:"adminSignUp",ADMIN_SET_PROFILE:"adminSetProfile",ADMIN_EDIT_MEMBER:"adminEditMember",ADMIN_APPLICANT:"adminApplicant",ADMIN_EMAIL_CHECK:"adminEmailCheck",MEMBER_CARD:"memberCard",APPLY_CHECK:"applyCheck"},f3={[vt.ADMIN_SIGN_IN]:!1,[vt.ADMIN_SIGN_UP]:!1,[vt.ADMIN_SET_PROFILE]:!1,[vt.ADMIN_EDIT_MEMBER]:!1,[vt.MEMBER_CARD]:!1,[vt.APPLY_CHECK]:!1,[vt.ADMIN_APPLICANT]:!1,[vt.ADMIN_EMAIL_CHECK]:!1,selectedId:""},po=La({key:d3,default:f3}),p3=()=>(Lt(po),f(er,{}));var d0="/assets/GDSCLogo.a7a27ddd.svg";const m3="menu",Fc={APPMENU:"appMenu",NAV:"nav",FOOTER:"footer"},g3={[Fc.APPMENU]:!1,[Fc.NAV]:!0,[Fc.FOOTER]:!0},Rg=La({key:m3,default:g3}),y3=g(ee.button)`
  outline: none;
  border: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  cursor: pointer;
  position: relative;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  @media (min-width: ${n=>n.theme.windowSize.mobile}px) {
    display: none;
  }
`,_3=()=>{const[n,e]=Lt(Rg),t=xg();return f(y3,{initial:!1,animate:n.appMenu?"open":"closed",onClick:()=>e({...n,[Fc.APPMENU]:!n.appMenu}),children:R("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:t.colors.grey900,children:[f(ee.path,{fill:t.colors.grey900,strokeWidth:"3",stroke:t.colors.grey900,strokeLinecap:"round",variants:{closed:{d:"M 2 2.5 L 20 2.5"},open:{d:"M 3 16.5 L 17 2.5"}}}),f(ee.path,{fill:t.colors.grey900,strokeWidth:"3",stroke:t.colors.grey900,strokeLinecap:"round",d:"M 2 9.423 L 20 9.423",variants:{closed:{opacity:1},open:{opacity:0}},transition:{duration:.1}}),f(ee.path,{fill:t.colors.grey900,strokeWidth:"3",stroke:t.colors.grey900,strokeLinecap:"round",variants:{closed:{d:"M 2 16.346 L 20 16.346"},open:{d:"M 3 2.5 L 17 16.346"}}})]})})},w3=g(ee.nav)`
  position: fixed;
  top: 0;
  z-index: 90;
  height: 70px;
  width: 100vw;
  display: flex;
  ${n=>n.background?ue`
          //background-color: rgba(255, 255, 255, 0.1);
          backdrop-filter: saturate(50%) blur(8px);
        `:ue`
          background: ${({theme:e})=>e.colors.background};
          box-shadow: 0 4px 30px ${({theme:e})=>e.colors.greyOpacity100};
          border-bottom: 1px solid ${e=>e.theme.colors.grey200};
        `}
  ${n=>n.disable&&ue`
      display: none;
    `}
`,gE=g.div`
  display: flex;
  flex-direction: row;
  width: 100%;
  margin: auto;
  height: 100%;
`,yE=g.div`
  width: 92%;
  margin: 0 auto;
  display: flex;
  align-items: center;
`,_E=g(BR)`
  display: flex;
  align-items: center;
  font-size: 1.6rem;
`,wE=g.img`
  height: 20px;
  width: 100%;
  padding: 0 8px;
`,vE=g.div`
  color: ${n=>n.theme.colors.grey800};
  margin-right: 5px;
  font-weight: bold;
  font-size: 2rem;
`,kE=g.div`
  color: ${n=>n.theme.colors.grey600};
  font-size: ${n=>n.theme.fontSize.body3};
  margin-top: 4px;
  margin-right: 5px;
  font-weight: 500;
`,bE=g.div`
  color: ${n=>n.theme.colors.grey600};
  font-size: ${n=>n.theme.fontSize.body3};
  margin-top: 4px;
  margin-right: 3px;
  display: flex;
  font-weight: 500;
`,v3=g.div`
  z-index: 999;
  margin-left: 20px;
  @media (max-width: ${n=>n.theme.windowSize.mobile}px) {
    display: none;
  }
`,k3=g(ee.nav)`
  position: fixed;
  width: 100vw;
  height: 100vh;
  top: 0;
  right: 100vw;
  z-index: 91;
  @media (min-width: 500px) {
    display: none;
  }
`,EE=g(ee.div)`
  text-decoration: none;
  list-style: none;
  display: flex;
  align-items: center;
  padding: 10px 15px;
  border-radius: 8px;
  transition-duration: 0.3s;
  transition-timing-function: ease;
  font-size: ${({theme:n})=>n.fontSize.body2};
  transition-delay: 0s;
  color: ${({theme:n})=>n.colors.grey900};
  ${({isRoute:n})=>n&&ue`
      color: ${({theme:e})=>e.colors.tossBlueActive};
    `};
  &:hover {
    color: ${({theme:n})=>n.colors.tossBlueActive};
    background-color: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    text-decoration: none;
  }
`,Dg=g.li`
  display: flex;
  align-items: center;
  margin: 0 5px;
  cursor: pointer;
  color: ${n=>n.theme.colors.grey800};
  font-size: 1.4rem;
  font-weight: 500;
  word-break: keep-all;
  list-style: none;
  text-decoration: none;
  border-radius: 8px;
`,Ng=g.ul`
  display: flex;
  flex: 1;
  align-items: center;
  list-style: none;
  padding-left: 0;
`;g.div`
  display: flex;
  align-items: center;
  margin-right: 15px;
  padding: 7px 7px;
  border-radius: 10px;
  transition-delay: 0.05s;
  transition-duration: 0.2s;
  transition-timing-function: ease;
  :hover {
    background: ${n=>n.theme.colors.grey100};
    cursor: pointer;
  }
`;const b3=()=>{const n=ho(),e=Fa(),t=i=>n.pathname.includes(i);return f(v3,{children:f(Ng,{children:IE.map((i,r)=>f(Dg,{children:f(EE,{onClick:()=>{e(i.route)},isRoute:t(i.route),children:i.title})},r))})})},E3={open:{transition:{staggerChildren:.07,delayChildren:.2}},closed:{transition:{staggerChildren:.05,staggerDirection:-1}}},I3={open:n=>({x:"100vw",transition:{duration:.5}}),closed:n=>({x:"-100vw",transition:{duration:.5}})},T3=g.div`
  display: flex;
  flex-direction: column;
  margin-top: 100px;
  align-items: center;
`,C3=g(ee.div)`
  margin-top: 50px;
  padding: 25px;
  width: 200px;
  z-index: 999;
`,S3=g.img`
  width: 100px;
`,x3=g(ee.div)`
  list-style: none;
  margin-bottom: 20px;
  display: flex;
  cursor: pointer;
  flex-direction: column;
  justify-content: flex-start;
`,A3=g.div`
  background: ${({theme:n})=>n.colors.grey200};
  height: 1px;
  width: 100%;
  opacity: 50;
`;const R3=()=>{const n=Fa(),[e,t]=Lt(Rg);return R(T3,{children:[f("picture",{children:f(S3,{src:d0})}),f(C3,{variants:E3,initial:!1,children:IE.map((i,r)=>R(x3,{onClick:()=>{n(i.route),t({...e,[Fc.APPMENU]:!1})},children:[f(EE,{children:i.title}),f(A3,{})]},r))})]})};g.div`
  position: absolute;
  bottom: -50%;
  left: 0;
  transform: translate(-50%, -50%);
`;const D3=g(ee.div)`
  overflow: hidden;
  position: relative;
  width: 100%;
  height: 100%;
  background: ${({theme:n})=>n.colors.background};
  border: 0;
  z-index: 900;
  display: flex;
  flex-direction: column;
  align-items: center;
  border-color: ${n=>n.theme.colors.grey200};
`,N3=()=>{const[n,e]=Lt(Rg);return f(k3,{initial:!1,animate:n.appMenu?"open":"closed",children:f(D3,{variants:I3,children:f(R3,{})})})},P3=()=>{const n=xg();return f("svg",{className:"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-uqopch",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-testid":"DarkModeIcon",fill:n.colors.grey700,children:f("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"})})},O3=()=>{const n=xg();return f("svg",{className:"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-uqopch",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-testid":"LightModeIcon",fill:n.colors.grey700,children:f("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})},M3=g.button`
  padding: 7px;
  width: 40px;
  height: 40px;
  background: transparent;
  border: 0 solid transparent;
  cursor: pointer;
`,L3=({theme:n,toggleButton:e})=>f(M3,{onClick:e,children:n==="light"?f(P3,{}):f(O3,{})}),IE=[{route:"/introduce",title:"Introduce"},{route:"/recruit",title:"Recruiting"},{route:"/faq",title:"FAQ"}],F3=({theme:n,toggleTheme:e})=>{const t=ho(),i=t.pathname=="/";return R(w3,{background:i,disable:(()=>{let s=!1;return t.pathname.includes("auth")&&(s=!0),t.pathname.includes("admin")&&(s=!0),s})(),children:[f(gE,{children:R(yE,{children:[f(Ng,{children:R(Dg,{children:[R(_E,{to:"/",children:[f(wE,{src:d0,alt:"GDSC-Chapter-Logo"}),f(vE,{children:"GDSC "}),f(bE,{children:"Daejin"}),f(kE,{children:"Univ."})]}),f(b3,{})]})}),f(L3,{theme:n,toggleButton:e}),f(_3,{})]})}),f(N3,{})]})},$3=g(ee.div)`
  display: flex;
  background: rgba(255, 255, 255, 0.7);
  ${n=>n.background&&ue`
      background: rgba(0, 0, 0, 0.7);
    `}

  width: 100vw;
  height: 100vh;
  align-items: center;
  justify-content: center;
  position: fixed;
  z-index: 1000;
`,U3=g(ee.div)`
  width: 100px;
  height: 100px;
  z-index: 2000;
`,B3="5.5.7",V3={g:"LottieFiles AE 0.1.20",a:"",k:"",d:"",tc:""},q3=60,G3=0,j3=364,z3=512,W3=512,K3="Google G Dots",H3=0,Q3=[{id:"comp_0",layers:[{ddd:0,ind:2,ty:4,nm:"Layer 1",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.248],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[16.936,0],[9.981,29.758],[0,0],[-5.268,15.618],[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[-17.837,-35.533],[-47.549,0],[-20.84,19.223],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[-11.269,7.651],[-32.808,0],[0,0],[-5.268,-15.618],[9.935,-29.805],[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[-17.837,35.533],[21.348,42.466],[33.917,0],[0,0],[23.784,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.98],[45.273,64.011],[2.53,75.995],[-68.077,24.102],[-68.123,24.102],[-68.123,-24.047],[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-109.896,56.495],[2.484,125.761],[85.844,95.402],[85.819,95.382]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647063732,.262745112181,.207843139768,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:3,ty:0,nm:"C G 2",tt:1,refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[256,256,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:512,h:512,ip:0,op:3868,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"G dash",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.573,y:1},o:{x:.609,y:0},t:41,s:[256,256,0],to:[12.167,0,0],ti:[-12.167,0,0]},{t:66,s:[329,256,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.573,.573,.573],y:[1,1,1]},o:{x:[.609,.609,.609],y:[0,0,0]},t:41,s:[100,100,100]},{t:66,s:[33,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[58,-23.828],[58.75,23],[-58.75,23],[-58.75,-23.828]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[60.75,1],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:64,st:0,bm:0}]},{id:"comp_1",layers:[{ddd:0,ind:1,ty:4,nm:"G Matte R",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256.558,256.05,0],ix:2},a:{a:0,k:[.558,.05,0],ix:1},s:{a:0,k:[103,103,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.069,-49.401],[66.91,0],[0,54.999],[-54.862,-.827]],o:[[-.08,57.41],[-54.868,0],[0,-50.468],[66.994,1.01]],v:[[98.75,-.344],[.34,100.991],[-97.634,-.652],[.443,-100.88]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.180392161012,.192156866193,.572549045086,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:55,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.573],y:[1]},o:{x:[.609],y:[0]},t:0,s:[49]},{t:61,s:[81]}],ix:1},e:{a:0,k:79.77,ix:2},o:{a:0,k:30,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"G logo R",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[0,0]],o:[[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[0,0],[9.935,-29.805]],v:[[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-68.123,-24.047]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.262745098039,.207843152214,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-5.268,15.618],[0,0],[0,0],[-17.837,-35.533]],o:[[-5.268,-15.618],[0,0],[0,0],[-17.837,35.533],[0,0]],v:[[-68.123,24.102],[-68.123,-24.047],[-68.123,-56.439],[-109.896,-56.439],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.262745098039,.207843152214,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-47.549,0],[-20.84,19.223],[0,0],[16.959,0],[9.981,29.758],[0,0],[0,0]],o:[[33.917,0],[0,0],[-11.275,7.67],[-32.808,0],[0,0],[0,0],[21.348,42.466]],v:[[2.484,125.761],[85.844,95.402],[45.319,63.981],[2.53,75.995],[-68.077,24.102],[-109.896,24.102],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.262745098039,.207843152214,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.26],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[0,0],[23.797,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.981],[45.273,95.402],[85.798,95.402]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.262745098039,.207843152214,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"G Matte Y",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256.558,256.05,0],ix:2},a:{a:0,k:[.558,.05,0],ix:1},s:{a:0,k:[103,103,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.069,-49.401],[21.843,-18.291],[28.188,0],[15.115,35.338],[0,14.469],[-5.622,12.573],[-40.128,-.605]],o:[[-.046,33.224],[-15.901,13.315],[-40.433,0],[-5.396,-12.615],[0,-13.554],[15.313,-34.242],[66.994,1.01]],v:[[98.75,-.344],[66.318,79.88],[.34,100.991],[-89.255,40.323],[-97.634,-.652],[-88.895,-40.341],[.443,-100.88]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.180392161012,.192156866193,.572549045086,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:55,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:86.5,ix:1},e:{a:1,k:[{i:{x:[.573],y:[1]},o:{x:[.609],y:[0]},t:22,s:[35]},{t:83,s:[79]}],ix:2},o:{a:0,k:30,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"G logo Y",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[0,0]],o:[[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[0,0],[9.935,-29.805]],v:[[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-68.123,-24.047]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313785329,.737254901961,.01568627451,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-5.268,15.618],[0,0],[0,0],[-17.837,-35.533]],o:[[-5.268,-15.618],[0,0],[0,0],[-17.837,35.533],[0,0]],v:[[-68.123,24.102],[-68.123,-24.047],[-68.123,-56.439],[-109.896,-56.439],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313785329,.737254901961,.01568627451,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-47.549,0],[-20.84,19.223],[0,0],[16.959,0],[9.981,29.758],[0,0],[0,0]],o:[[33.917,0],[0,0],[-11.275,7.67],[-32.808,0],[0,0],[0,0],[21.348,42.466]],v:[[2.484,125.761],[85.844,95.402],[45.319,63.981],[2.53,75.995],[-68.077,24.102],[-109.896,24.102],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313785329,.737254901961,.01568627451,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.26],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[0,0],[23.797,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.981],[45.273,95.402],[85.798,95.402]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313785329,.737254901961,.01568627451,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"G Matte G",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256.558,256.05,0],ix:2},a:{a:0,k:[.558,.05,0],ix:1},s:{a:0,k:[103,103,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.08,57.41],[66.994,1.01],[0,-50.468],[-54.868,0]],o:[[.069,-49.401],[-54.862,-.827],[0,54.999],[66.91,0]],v:[[98.75,-.344],[.443,-100.88],[-97.634,-.652],[.34,100.991]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.180392161012,.192156866193,.572549045086,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:55,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.573],y:[1]},o:{x:[.609],y:[0]},t:41,s:[76]},{t:102,s:[1]}],ix:2},o:{a:0,k:30,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"G logo G",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[0,0]],o:[[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[0,0],[9.935,-29.805]],v:[[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-68.123,-24.047]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921583587,.658823529412,.325490196078,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-5.268,15.618],[0,0],[0,0],[-17.837,-35.533]],o:[[-5.268,-15.618],[0,0],[0,0],[-17.837,35.533],[0,0]],v:[[-68.123,24.102],[-68.123,-24.047],[-68.123,-56.439],[-109.896,-56.439],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921583587,.658823529412,.325490196078,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-47.549,0],[-20.84,19.223],[0,0],[16.959,0],[9.981,29.758],[0,0],[0,0]],o:[[33.917,0],[0,0],[-11.275,7.67],[-32.808,0],[0,0],[0,0],[21.348,42.466]],v:[[2.484,125.761],[85.844,95.402],[45.319,63.981],[2.53,75.995],[-68.077,24.102],[-109.896,24.102],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921583587,.658823529412,.325490196078,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.26],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[0,0],[23.797,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.981],[45.273,95.402],[85.798,95.402]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921583587,.658823529412,.325490196078,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"G Matte B 3",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256.558,256.05,0],ix:2},a:{a:0,k:[.558,.05,0],ix:1},s:{a:0,k:[103,103,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.08,57.41],[66.994,1.01],[0,-50.468],[-54.868,0]],o:[[.069,-49.401],[-54.862,-.827],[0,54.999],[66.91,0]],v:[[98.75,-.344],[.443,-100.88],[-97.634,-.652],[.34,100.991]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.180392161012,.192156866193,.572549045086,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:55,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.573],y:[1]},o:{x:[.609],y:[0]},t:61,s:[100]},{t:110,s:[1]}],ix:1},e:{a:0,k:0,ix:2},o:{a:0,k:20,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:"G logo B3",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[0,0]],o:[[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[0,0],[9.935,-29.805]],v:[[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-68.123,-24.047]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-5.268,15.618],[0,0],[0,0],[-17.837,-35.533]],o:[[-5.268,-15.618],[0,0],[0,0],[-17.837,35.533],[0,0]],v:[[-68.123,24.102],[-68.123,-24.047],[-68.123,-56.439],[-109.896,-56.439],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-47.549,0],[-20.84,19.223],[0,0],[16.959,0],[9.981,29.758],[0,0],[0,0]],o:[[33.917,0],[0,0],[-11.275,7.67],[-32.808,0],[0,0],[0,0],[21.348,42.466]],v:[[2.484,125.761],[85.844,95.402],[45.319,63.981],[2.53,75.995],[-68.077,24.102],[-109.896,24.102],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.26],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[0,0],[23.797,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.981],[45.273,95.402],[85.798,95.402]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0}]},{id:"comp_2",layers:[{ddd:0,ind:3,ty:4,nm:"G dash",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.98],y:[1]},o:{x:[.021],y:[.488]},t:41,s:[193.298]},{t:79,s:[256]}],ix:3},y:{a:0,k:255.924,ix:4}},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.573,.573,.573],y:[1,1,1]},o:{x:[.609,.609,.609],y:[0,0,0]},t:41,s:[0,100,100]},{t:59,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.43,-13.961],[0,0],[0,0],[0,0]],o:[[0,0],[.43,13.961],[0,0],[0,0],[0,0]],v:[[60.25,-23.813],[62.07,1.539],[61,23.219],[-58.75,23],[-58.75,-23.891]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[60.75,1],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:34,op:250,st:11,bm:0},{ddd:0,ind:7,ty:4,nm:"Layer 1",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.248],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[16.936,0],[9.981,29.758],[0,0],[-5.268,15.618],[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[-17.837,-35.533],[-47.549,0],[-20.84,19.223],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[-11.269,7.651],[-32.808,0],[0,0],[-5.268,-15.618],[9.935,-29.805],[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[-17.837,35.533],[21.348,42.466],[33.917,0],[0,0],[23.784,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.98],[45.273,64.011],[2.53,75.995],[-68.077,24.102],[-68.123,24.102],[-68.123,-24.047],[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-109.896,56.495],[2.484,125.761],[85.844,95.402],[85.819,95.382]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647063732,.262745112181,.207843139768,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:8,ty:0,nm:"C G",tt:1,refId:"comp_3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[256,256,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:512,h:512,ip:0,op:3868,st:0,bm:0}]},{id:"comp_3",layers:[{ddd:0,ind:1,ty:4,nm:"G Matte B 3",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256.558,256.05,0],ix:2},a:{a:0,k:[.558,.05,0],ix:1},s:{a:0,k:[103,103,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.08,57.41],[66.994,1.01],[0,-50.468],[-54.868,0]],o:[[.069,-49.401],[-54.862,-.827],[0,54.999],[66.91,0]],v:[[98.75,-.344],[.443,-100.88],[-97.634,-.652],[.34,100.991]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.180392161012,.192156866193,.572549045086,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:55,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:100,ix:1},e:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.396],y:[0]},t:41.461,s:[100]},{t:94.078125,s:[78.5]}],ix:2},o:{a:0,k:20,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:4038,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"G logo B3",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[0,0]],o:[[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[0,0],[9.935,-29.805]],v:[[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-68.123,-24.047]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-5.268,15.618],[0,0],[0,0],[-17.837,-35.533]],o:[[-5.268,-15.618],[0,0],[0,0],[-17.837,35.533],[0,0]],v:[[-68.123,24.102],[-68.123,-24.047],[-68.123,-56.439],[-109.896,-56.439],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-47.549,0],[-20.84,19.223],[0,0],[16.959,0],[9.981,29.758],[0,0],[0,0]],o:[[33.917,0],[0,0],[-11.275,7.67],[-32.808,0],[0,0],[0,0],[21.348,42.466]],v:[[2.484,125.761],[85.844,95.402],[45.319,63.981],[2.53,75.995],[-68.077,24.102],[-109.896,24.102],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.26],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[0,0],[23.797,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.981],[45.273,95.402],[85.798,95.402]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823529412,.521568627451,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"G Matte G",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256.558,256.05,0],ix:2},a:{a:0,k:[.558,.05,0],ix:1},s:{a:0,k:[103,103,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.08,57.41],[66.994,1.01],[0,-50.468],[-54.868,0]],o:[[.069,-49.401],[-54.862,-.827],[0,54.999],[66.91,0]],v:[[98.75,-.344],[.443,-100.88],[-97.634,-.652],[.34,100.991]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.180392161012,.192156866193,.572549045086,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:55,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.274],y:[0]},t:26.846,s:[100]},{t:97,s:[48.4]}],ix:1},e:{a:0,k:100,ix:2},o:{a:0,k:30,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:4038,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"G logo G",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[0,0]],o:[[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[0,0],[9.935,-29.805]],v:[[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-68.123,-24.047]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921583587,.658823529412,.325490196078,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-5.268,15.618],[0,0],[0,0],[-17.837,-35.533]],o:[[-5.268,-15.618],[0,0],[0,0],[-17.837,35.533],[0,0]],v:[[-68.123,24.102],[-68.123,-24.047],[-68.123,-56.439],[-109.896,-56.439],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921583587,.658823529412,.325490196078,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-47.549,0],[-20.84,19.223],[0,0],[16.959,0],[9.981,29.758],[0,0],[0,0]],o:[[33.917,0],[0,0],[-11.275,7.67],[-32.808,0],[0,0],[0,0],[21.348,42.466]],v:[[2.484,125.761],[85.844,95.402],[45.319,63.981],[2.53,75.995],[-68.077,24.102],[-109.896,24.102],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921583587,.658823529412,.325490196078,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.26],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[0,0],[23.797,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.981],[45.273,95.402],[85.798,95.402]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921583587,.658823529412,.325490196078,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"G Matte Y",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256.558,256.05,0],ix:2},a:{a:0,k:[.558,.05,0],ix:1},s:{a:0,k:[103,103,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.069,-49.401],[21.843,-18.291],[28.188,0],[15.115,35.338],[0,14.469],[-5.622,12.573],[-40.128,-.605]],o:[[-.046,33.224],[-15.901,13.315],[-40.433,0],[-5.396,-12.615],[0,-13.554],[15.313,-34.242],[66.994,1.01]],v:[[98.75,-.344],[66.318,79.88],[.34,100.991],[-89.255,40.323],[-97.634,-.652],[-88.895,-40.341],[.443,-100.88]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.180392161012,.192156866193,.572549045086,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:55,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.274],y:[0]},t:23.924,s:[0]},{t:94.078125,s:[62.6]}],ix:1},e:{a:0,k:0,ix:2},o:{a:0,k:-19,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:4038,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"G logo Y",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[0,0]],o:[[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[0,0],[9.935,-29.805]],v:[[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-68.123,-24.047]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313785329,.737254901961,.01568627451,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-5.268,15.618],[0,0],[0,0],[-17.837,-35.533]],o:[[-5.268,-15.618],[0,0],[0,0],[-17.837,35.533],[0,0]],v:[[-68.123,24.102],[-68.123,-24.047],[-68.123,-56.439],[-109.896,-56.439],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313785329,.737254901961,.01568627451,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-47.549,0],[-20.84,19.223],[0,0],[16.959,0],[9.981,29.758],[0,0],[0,0]],o:[[33.917,0],[0,0],[-11.275,7.67],[-32.808,0],[0,0],[0,0],[21.348,42.466]],v:[[2.484,125.761],[85.844,95.402],[45.319,63.981],[2.53,75.995],[-68.077,24.102],[-109.896,24.102],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313785329,.737254901961,.01568627451,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.26],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[0,0],[23.797,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.981],[45.273,95.402],[85.798,95.402]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313785329,.737254901961,.01568627451,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"G Matte R",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256.558,256.05,0],ix:2},a:{a:0,k:[.558,.05,0],ix:1},s:{a:0,k:[103,103,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.08,57.41],[66.994,1.01],[0,-50.468],[-54.868,0]],o:[[.069,-49.401],[-54.862,-.827],[0,54.999],[66.91,0]],v:[[98.75,-.344],[.443,-100.88],[-97.634,-.652],[.34,100.991]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.180392161012,.192156866193,.572549045086,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:55,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.735],y:[1]},o:{x:[.588],y:[0]},t:2,s:[100]},{t:72.154296875,s:[0]}],ix:1},e:{a:0,k:100,ix:2},o:{a:0,k:30,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:4038,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:"G logo R",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-32.808,0],[-12.984,-12.385],[0,0],[31.237,-.37],[21.348,-42.513],[0,0]],o:[[17.929,-.278],[0,0],[-22.734,-21.348],[-47.549,0],[0,0],[9.935,-29.805]],v:[[2.484,-75.985],[50.726,-57.132],[86.63,-93.037],[2.484,-125.752],[-109.896,-56.439],[-68.123,-24.047]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.262745098039,.207843152214,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-5.268,15.618],[0,0],[0,0],[-17.837,-35.533]],o:[[-5.268,-15.618],[0,0],[0,0],[-17.837,35.533],[0,0]],v:[[-68.123,24.102],[-68.123,-24.047],[-68.123,-56.439],[-109.896,-56.439],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.262745098039,.207843152214,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-47.549,0],[-20.84,19.223],[0,0],[16.959,0],[9.981,29.758],[0,0],[0,0]],o:[[33.917,0],[0,0],[-11.275,7.67],[-32.808,0],[0,0],[0,0],[21.348,42.466]],v:[[2.484,125.761],[85.844,95.402],[45.319,63.981],[2.53,75.995],[-68.077,24.102],[-109.896,24.102],[-109.896,56.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.262745098039,.207843152214,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,38.26],[1.48,8.41],[0,0],[0,0],[0,0],[13.262,-8.78],[0,0],[0,0]],o:[[0,-8.549],[0,0],[0,0],[0,0],[-2.819,15.618],[0,0],[0,0],[23.797,-21.902]],v:[[123.273,2.893],[121.101,-22.661],[2.484,-22.661],[2.484,25.766],[70.41,25.766],[45.273,63.981],[45.273,95.402],[85.798,95.402]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.262745098039,.207843152214,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:3868,st:0,bm:0}]}],Y3=[{ddd:0,ind:6,ty:0,nm:"G 2",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[256,256,0],ix:1},s:{a:0,k:[72,72,100],ix:6}},ao:0,w:512,h:512,ip:249,op:4117,st:249,bm:0},{ddd:0,ind:7,ty:0,nm:"G 1",refId:"comp_2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[256,256,0],ix:2},a:{a:0,k:[256,256,0],ix:1},s:{a:0,k:[72,72,100],ix:6}},ao:0,w:512,h:512,ip:132,op:249,st:132,bm:0},{ddd:0,ind:8,ty:4,nm:"Blue 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.261],y:[1.457]},t:141,s:[150.552]},{i:{x:[.108],y:[1]},o:{x:[.182],y:[0]},t:160,s:[110.52]},{t:223,s:[326.552]}],ix:3},y:{a:1,k:[{i:{x:[.27],y:[1.388]},o:{x:[.68],y:[-.388]},t:160,s:[256]},{t:184,s:[256.75]}],ix:4}},a:{a:0,k:[-105.448,0,0],ix:1},s:{a:1,k:[{i:{x:[1,1,.999],y:[1,1,1]},o:{x:[.713,.713,1],y:[0,0,0]},t:160,s:[100,100,100]},{t:184,s:[90,90,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-9.838,0],[0,-9.838],[9.838,0],[0,9.838]],o:[[9.838,0],[0,9.838],[-9.838,0],[0,-9.838]],v:[[-105.448,-17.825],[-87.624,0],[-105.448,17.825],[-123.273,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823543787,.521568655968,.956862747669,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:99,op:249,st:160,bm:0},{ddd:0,ind:10,ty:4,nm:"Red 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.502,y:0},o:{x:.26,y:0},t:100.277,s:[220.851,256,0],to:[-6,-33.613,0],ti:[-27.871,11.346,0]},{i:{x:.865,y:1},o:{x:.709,y:1},t:128.496,s:[249,191.5,0],to:[59.5,-22.5,0],ti:[7.75,-42,0]},{t:163,s:[325,268.5,0]}],ix:2},a:{a:0,k:[-35.149,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-9.838,0],[0,-9.838],[9.838,0],[0,9.838]],o:[[9.838,0],[0,9.838],[-9.838,0],[0,-9.838]],v:[[-35.149,-17.825],[-17.325,0],[-35.149,17.825],[-52.974,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647063732,.262745112181,.207843139768,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:99,op:161,st:99,bm:0},{ddd:0,ind:11,ty:4,nm:"Yellow 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.644,y:.341},o:{x:.3,y:0},t:100.725,s:[291.15,256,0],to:[9,14.387,0],ti:[32.779,1.604,0]},{i:{x:.667,y:1},o:{x:.373,y:.352},t:121.232,s:[254.221,299.396,0],to:[-32.097,-5.538,0],ti:[-9.368,30.009,0]},{i:{x:.776,y:1},o:{x:.333,y:0},t:135.029,s:[218.504,227.666,0],to:[22.996,-73.666,0],ti:[12.5,-82.75,0]},{t:170,s:[325.5,266.5,0]}],ix:2},a:{a:0,k:[35.15,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-9.838,0],[0,-9.838],[9.838,0],[0,9.838]],o:[[9.838,0],[0,9.838],[-9.838,0],[0,-9.838]],v:[[35.15,-17.825],[52.974,0],[35.15,17.825],[17.325,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313726425,.737254917622,.019607843831,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:99,op:171,st:99,bm:0},{ddd:0,ind:12,ty:4,nm:"Green 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.638,y:.436},o:{x:.264,y:0},t:105,s:[361.449,256,0],to:[-6,16.387,0],ti:[56.779,19.604,0]},{i:{x:.685,y:.687},o:{x:.345,y:.309},t:134.006,s:[254.221,299.396,0],to:[-31.865,-6.749,0],ti:[-9.368,30.009,0]},{i:{x:.857,y:1},o:{x:.457,y:.548},t:146,s:[218.504,227.666,0],to:[22.996,-73.666,0],ti:[6.5,-81.25,0]},{t:175,s:[326.5,266.5,0]}],ix:2},a:{a:0,k:[105.449,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-9.838,0],[0,-9.838],[9.838,0],[0,9.838]],o:[[9.838,0],[0,9.838],[-9.838,0],[0,-9.838]],v:[[105.449,-17.825],[123.273,0],[105.449,17.825],[87.624,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921571374,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:99,op:177,st:99,bm:0},{ddd:0,ind:13,ty:4,nm:"Blue",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.907,y:0},t:0,s:[150.552,228.344,0],to:[0,0,0],ti:[0,7.744,0]},{t:35,s:[150.552,256,0]}],ix:2,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 3.05;
    freq = 2;
    decay = 2;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},a:{a:0,k:[-105.448,0,0],ix:1},s:{a:1,k:[{i:{x:[.368,.368,.66],y:[1,1,1]},o:{x:[.268,.268,.333],y:[0,0,0]},t:8,s:[0,0,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.105,.105,.252],y:[0,0,0]},t:24,s:[100,100,100]},{t:85,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-9.838,0],[0,-9.838],[9.838,0],[0,9.838]],o:[[9.838,0],[0,9.838],[-9.838,0],[0,-9.838]],v:[[-105.448,-17.825],[-87.624,0],[-105.448,17.825],[-123.273,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.258823543787,.521568655968,.956862747669,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:100,st:0,bm:0},{ddd:0,ind:14,ty:4,nm:"Red",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.907,y:0},t:6,s:[220.851,228.344,0],to:[0,0,0],ti:[0,7.744,0]},{t:39,s:[220.851,256,0]}],ix:2,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 3.05;
    freq = 2;
    decay = 2;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},a:{a:0,k:[-35.149,0,0],ix:1},s:{a:1,k:[{i:{x:[.368,.368,.66],y:[1,1,1]},o:{x:[.268,.268,.333],y:[0,0,0]},t:14,s:[0,0,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.105,.105,.252],y:[0,0,0]},t:27,s:[100,100,100]},{t:91,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-9.838,0],[0,-9.838],[9.838,0],[0,9.838]],o:[[9.838,0],[0,9.838],[-9.838,0],[0,-9.838]],v:[[-35.149,-17.825],[-17.325,0],[-35.149,17.825],[-52.974,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647063732,.262745112181,.207843139768,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:100,st:0,bm:0},{ddd:0,ind:15,ty:4,nm:"Yellow",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.907,y:0},t:9,s:[291.15,228.344,0],to:[0,0,0],ti:[0,7.744,0]},{t:42,s:[291.15,256,0]}],ix:2,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 3.05;
    freq = 2;
    decay = 2;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},a:{a:0,k:[35.15,0,0],ix:1},s:{a:1,k:[{i:{x:[.368,.368,.66],y:[1,1,1]},o:{x:[.268,.268,.333],y:[0,0,0]},t:16,s:[0,0,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.105,.105,.252],y:[0,0,0]},t:31,s:[100,100,100]},{t:93,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-9.838,0],[0,-9.838],[9.838,0],[0,9.838]],o:[[9.838,0],[0,9.838],[-9.838,0],[0,-9.838]],v:[[35.15,-17.825],[52.974,0],[35.15,17.825],[17.325,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313726425,.737254917622,.019607843831,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:100,st:0,bm:0},{ddd:0,ind:16,ty:4,nm:"Green",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.907,y:0},t:13,s:[361.449,228.344,0],to:[0,0,0],ti:[0,7.744,0]},{t:49,s:[361.449,256,0]}],ix:2,x:`var $bm_rt;
var n, n, t, t, v, amp, freq, decay;
$bm_rt = n = 0;
if (numKeys > 0) {
    $bm_rt = n = nearestKey(time).index;
    if (key(n).time > time) {
        n--;
    }
}
if (n == 0) {
    $bm_rt = t = 0;
} else {
    $bm_rt = t = $bm_sub(time, key(n).time);
}
if (n > 0 && t < 1) {
    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));
    amp = 3.05;
    freq = 2;
    decay = 2;
    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));
} else {
    $bm_rt = value;
}`},a:{a:0,k:[105.449,0,0],ix:1},s:{a:1,k:[{i:{x:[.368,.368,.66],y:[1,1,1]},o:{x:[.268,.268,.333],y:[0,0,0]},t:19,s:[0,0,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.105,.105,.252],y:[0,0,0]},t:37,s:[100,100,100]},{t:96,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-9.838,0],[0,-9.838],[9.838,0],[0,9.838]],o:[[9.838,0],[0,9.838],[-9.838,0],[0,-9.838]],v:[[105.449,-17.825],[123.273,0],[105.449,17.825],[87.624,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.203921571374,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:100,st:0,bm:0}],X3=[];var J3={v:B3,meta:V3,fr:q3,ip:G3,op:j3,w:z3,h:W3,nm:K3,ddd:H3,assets:Q3,layers:Y3,markers:X3};const Z3="loader",e6={load:!1},TE=La({key:Z3,default:e6}),CE=n=>{const e=ru(TE),{background:t}=n,i=uo(null);return ht(()=>void fE.loadAnimation({container:i.current,renderer:"svg",loop:!0,autoplay:!0,animationData:J3}),[e.load]),f(er,{children:e.load&&f($3,{background:t,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:f(U3,{ref:i,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1}})})})},t6=()=>{const[n,e]=He(),t=()=>i(n==="light"?"dark":"light"),i=r=>{window.localStorage.setItem("theme",r),e(r)};return ht(()=>{let s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";const o=localStorage.getItem("theme");o&&(s=o,e(s))},[]),{theme:n,toggleTheme:t}},n6="modulepreload",S_={},i6="/",su=function(e,t){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=`${i6}${i}`,i in S_)return;S_[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":n6,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((a,c)=>{o.addEventListener("load",a),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},r6=()=>{const n=ho();return ht(()=>{window.scrollTo(0,0)},[n]),null},s6=iu(()=>su(()=>import("./index.f6c206fa.js").then(function(n){return n.i}),["assets/index.f6c206fa.js","assets/index.94c0e8c0.js","assets/index.d4e0045e.js"]).then(n=>({default:n.default}))),o6=iu(()=>su(()=>import("./index.2f199693.js"),["assets/index.2f199693.js","assets/index.94c0e8c0.js","assets/layouts.217aada7.js","assets/index.296e2a3f.js","assets/index.f2a7bf38.js"]).then(n=>({default:n.default}))),a6=iu(()=>su(()=>import("./index.c46a86c2.js"),["assets/index.c46a86c2.js","assets/layouts.217aada7.js","assets/index.296e2a3f.js","assets/index.d4e0045e.js","assets/index.94c0e8c0.js"]).then(n=>({default:n.default}))),c6=iu(()=>su(()=>import("./index.64450eaa.js"),["assets/index.64450eaa.js","assets/layouts.217aada7.js","assets/index.f2a7bf38.js"]).then(n=>({default:n.default}))),l6=iu(()=>su(()=>import("./index.91eab3e7.js"),["assets/index.91eab3e7.js","assets/layouts.217aada7.js","assets/index.296e2a3f.js","assets/index.94c0e8c0.js"]).then(n=>({default:n.default}))),u6=()=>R(fo,{children:[f(r6,{}),R(hE,{children:[f(dr,{path:"/*",element:f(s6,{})}),f(dr,{path:"/introduce",element:f(a6,{})}),f(dr,{path:"/recruit/*",element:f(o6,{})}),f(dr,{path:"/conduct",element:f(c6,{})}),f(dr,{path:"/faq/*",element:f(l6,{})})]})]}),h6=g.div`
  width: 100%;
  display: flex;
  flex-direction: row;
  background: ${({theme:n})=>n.colors.grey900};
`,d6=g.div`
  width: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
`,f6=g.div`
  position: relative;
  top: -30%;
  left: -30%;
`,p6=g.div`
  width: 50%;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  @media (max-width: ${n=>n.theme.windowSize.tablet}px) {
    width: 100%;
    display: flex;
    justify-content: center;
  }
`,m6=g.div`
  padding: 40px 50px;
  background: white;
  border: 1px solid ${n=>n.theme.colors.grey300};
  border-radius: 10px;
  background: ${({theme:n})=>n.colors.white};
  box-shadow: 0 2px 12px rgba(25, 31, 40, 0.08);
`,g6=g.img`
  height: 20px;
  margin-right: 15px;
`,rs=g.div`
  width: 400px;
  display: flex;
  align-items: ${n=>n.align};
  margin-bottom: 15px;
  flex-direction: ${n=>n.direction};
`,y6=g.p`
  height: 20px;
  padding: 0 10px;
  margin-bottom: 10px;
  font-size: 1.4rem;
  color: ${n=>n.theme.colors.tossRed};
`,_6=g.div`
  display: flex;
  justify-content: flex-end;
  margin-bottom: 15px;
`,w6=g.button`
  display: flex;
  align-items: center;
  border: 0 solid;
  border-radius: 50px;
  padding: 13px 40px;
  color: white;
  font-size: 1.6rem;
  font-weight: bold;
  background: ${n=>n.theme.colors.tossBlueActive};
  &:hover {
    cursor: pointer;
  }
`,v6=g.h1`
  font-size: 3.2rem;
  font-weight: bold;
  color: ${n=>n.theme.colors.grey800};
`,x_=g.h4`
  font-size: 1.6rem;
  word-break: keep-all;
  justify-content: flex-start;
  font-weight: normal;
  color: ${n=>n.theme.colors.grey600};
  margin-right: 10px;
  &:nth-child(n + 1):nth-child(-n + 2) {
    margin-bottom: 10px;
  }
`,A_=g.input`
  height: 50px;
  border: 1px solid;
  border-radius: 10px;
  border-color: ${n=>n.theme.colors.grey300};
  padding: 0 20px;
`;g.a`
  font-size: 1.2rem;
  font-weight: 500;
  color: ${n=>n.theme.colors.tossBlue};
  margin-right: 10px;
  &:hover {
    cursor: pointer;
  }
`;const R_=g.div`
  font-size: 1.8rem;
  font-weight: ${n=>n.border};
  margin-right: 5px;
`,k6=g.text`
  font-size: 1.6rem;
  color: ${n=>n.theme.colors.grey400};
  margin: 0 10px;
`,D_=g.hr`
  display: block;
  height: 1px;
  border: 0;
  border-top: 1px solid ${n=>n.theme.colors.grey400};
  margin: 1em 0;
  padding: 0;
  width: 100%;
`,SE=g.button`
  border: 1px solid ${n=>n.theme.colors.grey300};
  border-radius: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  height: 50px;
  width: 100%;
  &:hover {
    cursor: pointer;
  }
`,Kh=g.div`
  font-size: 1.6rem;
  font-weight: ${n=>n.weight};
  color: ${n=>n.theme.colors.grey800};
`,xE=g.img`
  height: 25px;
  margin-right: 7px;
`;var b6="/assets/GoogleLogo.70a1c084.svg",E6="/assets/GithubLogo.11a20290.svg";const I6=({line:n})=>{const e=Math.round(Math.random()*20+10),t=Math.round(Math.random()*(70-20)+20),i=Math.round(Math.random()*(100-20)+20),r=["#4285F4","#EA4335","#FBBC04","#34A853"],s=r[Math.floor(Math.random()*r.length)];return f(T6,{path:n,color:s,size:t,initial:{offsetDistance:`${i}%`},animate:{offsetDistance:`${100+i}%`},transition:{duration:10+e,ease:"linear",repeat:1/0}})},T6=g(ee.div)`
  width: ${({size:n})=>n}px;
  height: ${({size:n})=>n}px;
  border-radius: 50%;
  position: absolute;
  background: ${({color:n})=>n};
  top: 0;
  left: 0;
  ${({path:n})=>n===1&&ue`
      offset-path: path(
        'M250 499.5C387.795 499.5 499.5 387.795 499.5 250C499.5 112.205 387.795 0.5 250 0.5C112.205 0.5 0.5 112.205 0.5 250C0.5 387.795 112.205 499.5 250 499.5Z'
      );
    `}${({path:n})=>n===2&&ue`
      offset-path: path(
        'M493 985.5C765 985.5 985.5 765 985.5 493C985.5 221 765 0.5 493 0.5C221 0.5 0.5 221 0.5 493C0.5 765 221 985.5 493 985.5Z'
      );
    `}${({path:n})=>n===3&&ue`
      offset-path: path(
        'M621.5 1242.5C964.469 1242.5 1242.5 964.469 1242.5 621.5C1242.5 278.531 964.469 0.5 621.5 0.5C278.531 0.5 0.5 278.531 0.5 621.5C0.5 964.469 278.531 1242.5 621.5 1242.5Z'
      );
    `}
`;var Li=Zi(I6);const C6=({line:n})=>{const e=Math.round(Math.random()*20+10),t=Math.round(Math.random()*(60-20)+20),i=Math.round(Math.random()*360),r=["#4285F4","#EA4335","#FBBC04","#34A853"],s=r[Math.floor(Math.random()*r.length)],o={1:"M250 499.5C387.795 499.5 499.5 387.795 499.5 250C499.5 112.205 387.795 0.5 250 0.5C112.205 0.5 0.5 112.205 0.5 250C0.5 387.795 112.205 499.5 250 499.5Z",2:"M493 985.5C765 985.5 985.5 765 985.5 493C 985.5 221 765 0.5 493 0.5C221 0.5 0.5 221 0.5 493C0.5 765 221 985.5 493 985.5Z",3:"M621.5 1242.5C964.469 1242.5 1242.5 964.469 1242.5 621.5C1242.5 278.531 964.469 0.5 621.5 0.5C278.531 0.5 0.5 278.531 0.5 621.5C0.5 964.469 278.531 1242.5 621.5 1242.5Z"};return f("circle",{r:t,fill:s,children:f("animateMotion",{dur:`${e}s`,repeatCount:"indefinite",path:o[n],from:`${i} ${i}`,to:`${i+360} ${i+360}`})})};var Fi=Zi(C6);const $a=g.div``,S6=()=>R($a,{children:[f("svg",{width:"500",height:"500",viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f(ee.path,{opacity:"1",d:"M250 499.5C387.795 499.5 499.5 387.795 499.5 250C499.5 112.205 387.795 0.5 250 0.5C112.205 0.5 0.5 112.205 0.5 250C0.5 387.795 112.205 499.5 250 499.5Z",stroke:"#e7e7e7"})}),f(Li,{line:1}),f(Li,{line:1}),f(Li,{line:1})]}),x6=()=>f($a,{children:R("svg",{width:"700",height:"700",viewBox:"-100 -100 700 700",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f(ee.path,{opacity:"1",d:"M250 499.5C387.795 499.5 499.5 387.795 499.5 250C499.5 112.205 387.795 0.5 250 0.5C112.205 0.5 0.5 112.205 0.5 250C0.5 387.795 112.205 499.5 250 499.5Z",stroke:"#e7e7e7"}),f(Fi,{line:1}),f(Fi,{line:1}),f(Fi,{line:1})]})}),A6=()=>R($a,{children:[f("svg",{width:"986",height:"986",viewBox:"0 0 986 986",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f(ee.path,{opacity:"1",d:"M493 985.5C765 985.5 985.5 765 985.5 493C985.5 221 765 0.5 493 0.5C221 0.5 0.5 221 0.5 493C0.5 765 221 985.5 493 985.5Z",stroke:"#e7e7e7"})}),f(Li,{line:2}),f(Li,{line:2}),f(Li,{line:2})]}),R6=()=>f($a,{children:R("svg",{width:"1186",height:"1186",viewBox:"-100 -100 1186 1186",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f(ee.path,{opacity:"1",d:"M493 985.5C765 985.5 985.5 765 985.5 493C985.5 221 765 0.5 493 0.5C221 0.5 0.5 221 0.5 493C0.5 765 221 985.5 493 985.5Z",stroke:"#e7e7e7"}),f(Fi,{line:2}),f(Fi,{line:2}),f(Fi,{line:2})]})}),D6=()=>R($a,{children:[f("svg",{width:"1243",height:"1243",viewBox:"0 0 1243 1243",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f(ee.path,{opacity:"1",d:"M621.5 1242.5C964.469 1242.5 1242.5 964.469 1242.5 621.5C1242.5 278.531 964.469 0.5 621.5 0.5C278.531 0.5 0.5 278.531 0.5 621.5C0.5 964.469 278.531 1242.5 621.5 1242.5Z",stroke:"#e7e7e7"})}),f(Li,{line:3}),f(Li,{line:3}),f(Li,{line:3})]}),N6=()=>f($a,{children:R("svg",{width:"1443",height:"1443",viewBox:"-100 -100 1443 1443",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f(ee.path,{opacity:"1",d:"M621.5 1242.5C964.469 1242.5 1242.5 964.469 1242.5 621.5C1242.5 278.531 964.469 0.5 621.5 0.5C278.531 0.5 0.5 278.531 0.5 621.5C0.5 964.469 278.531 1242.5 621.5 1242.5Z",stroke:"#e7e7e7"}),f(Fi,{line:3}),f(Fi,{line:3}),f(Fi,{line:3})]})}),ip=g.div`
  display: flex;
  flex-direction: column;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`,P6=()=>{const e=GR().name==="safari";return R("div",{children:[f(ip,{children:e?f(x6,{}):f(S6,{})}),f(ip,{children:e?f(R6,{}):f(A6,{})}),f(ip,{children:e?f(N6,{}):f(D6,{})})]})};var O6=Zi(P6);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S=function(n,e){if(!n)throw Ua(e)},Ua=function(n){return new Error("Firebase Database ("+AE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},M6=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},f0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,p=l&63;c||(p=64,o||(d=64)),i.push(t[u],t[h],t[d],t[p])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):M6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const l=r<n.length?t[n.charAt(r)]:64;++r;const h=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||h==null)throw Error();const d=s<<2|a>>4;if(i.push(d),l!==64){const p=a<<4&240|l>>2;if(i.push(p),h!==64){const m=l<<6&192|h;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},DE=function(n){const e=RE(n);return f0.encodeByteArray(e,!0)},N_=function(n){return DE(n).replace(/\./g,"")},Hh=function(n){try{return f0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(n){return NE(void 0,n)}function NE(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!F6(t)||(n[t]=NE(n[t],e[t]));return n}function F6(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[N_(JSON.stringify(t)),N_(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ba(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ie())}function Og(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mo(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function go(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PE(){return ie().indexOf("Electron/")>=0}function ou(){const n=ie();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function OE(){return ie().indexOf("MSAppHost/")>=0}function ME(){return AE.NODE_ADMIN===!0}function $6(){return!Og()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kn(){return typeof indexedDB=="object"}function p0(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function m0(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}function U6(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="FirebaseError";class Ce extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=B6,Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}}class tn{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?V6(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ce(r,a,i)}}function V6(n,e){return n.replace(q6,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const q6=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(n){return JSON.parse(n)}function Ke(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=function(n){let e={},t={},i={},r="";try{const s=n.split(".");e=sl(Hh(s[0])||""),t=sl(Hh(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}},G6=function(n){const e=Mg(n).claims;return typeof e=="object"&&e.hasOwnProperty("iat")?e.iat:null},j6=function(n){const e=Mg(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},z6=function(n){const e=Mg(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ns(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ol(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qh(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function LE(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(P_(s)&&P_(o)){if(!LE(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function P_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Un(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ti(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)i[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const d=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(d<<1|d>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let h=0;h<80;h++){h<40?h<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):h<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);const d=(r<<5|r>>>27)+l+c+u+i[h]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=d}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<t;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function FE(n,e){const t=new K6(n,e);return t.subscribe.bind(t)}class K6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");H6(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=rp),r.error===void 0&&(r.error=rp),r.complete===void 0&&(r.complete=rp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H6(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rp(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G=function(n,e,t,i){let r;if(i<e?r="at least "+e:i>t&&(r=t===0?"none":"no more than "+t),r){const s=n+" failed: Was called with "+i+(i===1?" argument.":" arguments.")+" Expects "+r+".";throw new Error(s)}};function dn(n,e){return`${n} failed: ${e} argument `}function rt(n,e,t,i){if(!(i&&!t)&&typeof t!="function")throw new Error(dn(n,e)+"must be a valid function.")}function O_(n,e,t,i){if(!(i&&!t)&&(typeof t!="object"||t===null))throw new Error(dn(n,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,S(i<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},g0=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=1e3,J6=2,Z6=4*60*60*1e3,eD=.5;function Yh(n,e=X6,t=J6){const i=e*Math.pow(t,n),r=Math.round(eD*i*(Math.random()-.5)*2);return Math.min(Z6,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(n){return n&&n._delegate?n._delegate:n}function Va(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Q||(Q={}));const tD={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},nD=Q.INFO,iD={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},rD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=iD[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ei{constructor(e){this.name=e,this._logLevel=nD,this._logHandler=rD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...e),this._logHandler(this,Q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...e),this._logHandler(this,Q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...e),this._logHandler(this,Q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...e),this._logHandler(this,Q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...e),this._logHandler(this,Q.ERROR,...e)}}class fe{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new We;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oD(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(!!i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:sD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sD(n){return n===as?void 0:n}function oD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $E(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}function UE(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cD=UE,BE=new tn("auth","Firebase",UE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Ei("@firebase/auth");function xh(n,...e){M_.logLevel<=Q.ERROR&&M_.error(`Auth (${fn}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(n,...e){throw Lg(n,...e)}function oi(n,...e){return Lg(n,...e)}function lD(n,e,t){const i=Object.assign(Object.assign({},cD()),{[e]:t});return new tn("auth","Firebase",i).create(e,{appName:n.name})}function Lg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return BE.create(n,...e)}function K(n,e,...t){if(!n)throw Lg(e,...t)}function Ri(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xh(e),new Error(e)}function Wi(n,e){n||Ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=new Map;function Di(n){Wi(n instanceof Function,"Expected a class definition");let e=L_.get(n);return e?(Wi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,L_.set(n,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n,e){const t=tr(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(LE(s,e!=null?e:{}))return r;jn(r,"already-initialized")}return t.initialize({options:e})}function hD(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Di);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function dD(){return F_()==="http:"||F_()==="https:"}function F_(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dD()||mo()||"connection"in navigator)?navigator.onLine:!0}function pD(){if(typeof navigator=="undefined")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wi(t>e,"Short delay should be less than long delay!"),this.isMobile=Ba()||go()}get(){return fD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(n,e){Wi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=new au(3e4,6e4);function cu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function lu(n,e,t,i,r={}){return qE(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Mn(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),VE.fetch()(GE(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function qE(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},mD),e);try{const r=new yD(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw oh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw oh(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw oh(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw oh(n,"user-disabled",o);const u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lD(n,u,l);jn(n,u)}}catch(r){if(r instanceof Ce)throw r;jn(n,"network-request-failed")}}async function uu(n,e,t,i,r={}){const s=await lu(n,e,t,i,r);return"mfaPendingCredential"in s&&jn(n,"multi-factor-auth-required",{_serverResponse:s}),s}function GE(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?Fg(n.config,r):`${n.config.apiScheme}://${r}`}class yD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(oi(this.auth,"network-request-failed")),gD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function oh(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=oi(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(n,e){return lu(n,"POST","/v1/accounts:delete",e)}async function wD(n,e){return lu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){if(!!n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vD(n,e=!1){const t=k(n),i=await t.getIdToken(e),r=$g(i);K(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:$c(sp(r.auth_time)),issuedAtTime:$c(sp(r.iat)),expirationTime:$c(sp(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function sp(n){return Number(n)*1e3}function $g(n){var e;const[t,i,r]=n.split(".");if(t===void 0||i===void 0||r===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Hh(i);return s?JSON.parse(s):(xh("Failed to decode base64 JWT payload"),null)}catch(s){return xh("Caught error parsing JWT payload as JSON",(e=s)===null||e===void 0?void 0:e.toString()),null}}function kD(n){const e=$g(n);return K(e,"internal-error"),K(typeof e.exp!="undefined","internal-error"),K(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ce&&bD(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function bD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(t){((e=t)===null||e===void 0?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$c(this.lastLoginAt),this.creationTime=$c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xh(n){var e;const t=n.auth,i=await n.getIdToken(),r=await al(n,wD(t,{idToken:i}));K(r==null?void 0:r.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?CD(s.providerUserInfo):[],a=TD(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jE(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function ID(n){const e=k(n);await Xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TD(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function CD(n){return n.map(e=>{var{providerId:t}=e,i=Va(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(n,e){const t=await qE(n,{},async()=>{const i=Mn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=GE(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",VE.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken!="undefined","internal-error"),K(typeof e.refreshToken!="undefined","internal-error");const t="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):kD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return K(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await SD(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new cl;return i&&(K(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(K(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(n,e){K(typeof n=="string"||typeof n=="undefined","internal-error",{appName:e})}class Is{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Va(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ED(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jE(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await al(this,this.stsTokenManager.getToken(this.auth,e));return K(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vD(this,e)}reload(){return ID(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Xh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await al(this,_D(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,l,u;const h=(i=t.displayName)!==null&&i!==void 0?i:void 0,d=(r=t.email)!==null&&r!==void 0?r:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,y=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,x=(l=t.createdAt)!==null&&l!==void 0?l:void 0,N=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:A,emailVerified:O,isAnonymous:W,providerData:V,stsTokenManager:$}=t;K(A&&$,e,"internal-error");const pe=cl.fromJSON(this.name,$);K(typeof A=="string",e,"internal-error"),cr(h,e.name),cr(d,e.name),K(typeof O=="boolean",e,"internal-error"),K(typeof W=="boolean",e,"internal-error"),cr(p,e.name),cr(m,e.name),cr(_,e.name),cr(y,e.name),cr(x,e.name),cr(N,e.name);const we=new Is({uid:A,auth:e,email:d,emailVerified:O,displayName:h,isAnonymous:W,photoURL:m,phoneNumber:p,tenantId:_,stsTokenManager:pe,createdAt:x,lastLoginAt:N});return V&&Array.isArray(V)&&(we.providerData=V.map(Ao=>Object.assign({},Ao))),y&&(we._redirectEventId=y),we}static async _fromIdTokenResponse(e,t,i=!1){const r=new cl;r.updateFromServerResponse(t);const s=new Is({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Xh(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zE.type="NONE";const $_=zE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(n,e,t){return`firebase:${n}:${e}:${t}`}class zo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ah(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ah("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new zo(Di($_),e,i);const r=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=r[0]||Di($_);const o=Ah(i,e.config.apiKey,e.name);let a=null;for(const l of t)try{const u=await l._get(o);if(u){const h=Is._fromJSON(e,u);l!==s&&(a=h),s=l;break}}catch{}const c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new zo(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new zo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YE(e))return"Blackberry";if(XE(e))return"Webos";if(Ug(e))return"Safari";if((e.includes("chrome/")||KE(e))&&!e.includes("edge/"))return"Chrome";if(QE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function WE(n=ie()){return/firefox\//i.test(n)}function Ug(n=ie()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KE(n=ie()){return/crios\//i.test(n)}function HE(n=ie()){return/iemobile/i.test(n)}function QE(n=ie()){return/android/i.test(n)}function YE(n=ie()){return/blackberry/i.test(n)}function XE(n=ie()){return/webos/i.test(n)}function y0(n=ie()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xD(n=ie()){var e;return y0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AD(){return ou()&&document.documentMode===10}function JE(n=ie()){return y0(n)||QE(n)||XE(n)||YE(n)||/windows phone/i.test(n)||HE(n)}function RD(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n,e=[]){let t;switch(n){case"Browser":t=U_(ie());break;case"Worker":t=`${U_(ie())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fn}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){var t;if(this.auth.currentUser===e)return;const i=[];try{for(const r of this.queue)await r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(t=r)===null||t===void 0?void 0:t.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,i){this.app=e,this.heartbeatServiceProvider=t,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B_(this),this.idTokenSubscription=new B_(this),this.beforeStateQueue=new DD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BE,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Di(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c==null?void 0:c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){var t;try{await Xh(e)}catch(i){if(((t=i)===null||t===void 0?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?k(e):null;return t&&K(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tn("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Di(e)||this._popupRedirectResolver;K(t,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[Di(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return K(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof t=="function"?e.addObserver(t,i,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(t["X-Firebase-Client"]=i),t}}function _0(n){return k(n)}class B_{constructor(e){this.auth=e,this.observer=null,this.addObserver=FE(t=>this.observer=t)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,t){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}async function PD(n,e){return lu(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(n,e){return uu(n,"POST","/v1/accounts:signInWithPassword",cu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(n,e){return uu(n,"POST","/v1/accounts:signInWithEmailLink",cu(n,e))}async function LD(n,e){return uu(n,"POST","/v1/accounts:signInWithEmailLink",cu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends Bg{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ll(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ll(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if((t==null?void 0:t.email)&&(t==null?void 0:t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return OD(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return MD(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return PD(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return LD(e,{idToken:t,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(n,e){return uu(n,"POST","/v1/accounts:signInWithIdp",cu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="http://localhost";class Ps extends Bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Va(t,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Ps(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Wo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Wo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wo(e,t)}buildRequest(){const e={requestUri:FD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mn(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UD(n){const e=Un(ti(n)).link,t=e?Un(ti(e)).deep_link_id:null,i=Un(ti(n)).deep_link_id;return(i?Un(ti(i)).link:null)||i||t||e||n}class Vg{constructor(e){var t,i,r,s,o,a;const c=Un(ti(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(i=c.oobCode)!==null&&i!==void 0?i:null,h=$D((r=c.mode)!==null&&r!==void 0?r:null);K(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=UD(e);try{return new Vg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.providerId=qa.PROVIDER_ID}static credential(e,t){return ll._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Vg.parseLink(t);return K(i,"argument-error"),ll._fromEmailAndCode(e,i.code,i.tenantId)}}qa.PROVIDER_ID="password";qa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends eI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends hu{constructor(){super("facebook.com")}static credential(e){return Ps._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ps._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return xi.credential(t,i)}catch{return null}}}xi.GOOGLE_SIGN_IN_METHOD="google.com";xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends hu{constructor(){super("github.com")}static credential(e){return Ps._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends hu{constructor(){super("twitter.com")}static credential(e,t){return Ps._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return mr.credential(t,i)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(n,e){return uu(n,"POST","/v1/accounts:signUp",cu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const s=await Is._fromIdTokenResponse(e,i,r),o=V_(i);return new Os({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=V_(i);return new Os({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function V_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh extends Ce{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Jh(e,t,i,r)}}function tI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(n,s,e,i):s})}async function VD(n,e,t=!1){const i=await al(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Os._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(n,e,t=!1){var i;const{auth:r}=n,s="reauthenticate";try{const o=await al(n,tI(r,s,e,n),t);K(o.idToken,r,"internal-error");const a=$g(o.idToken);K(a,r,"internal-error");const{sub:c}=a;return K(n.uid===c,r,"user-mismatch"),Os._forOperation(n,s,o)}catch(o){throw((i=o)===null||i===void 0?void 0:i.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(n,e,t=!1){const i="signIn",r=await tI(n,i,e),s=await Os._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}async function GD(n,e){return nI(_0(n),e)}async function jD(n,e,t){const i=_0(n),r=await BD(i,{returnSecureToken:!0,email:e,password:t}),s=await Os._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}function zD(n,e,t){return GD(k(n),qa.credential(e,t))}function WD(n,e,t,i){return k(n).onAuthStateChanged(e,t,i)}function KD(n){return k(n).signOut()}const Zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(){const n=ie();return Ug(n)||y0(n)}const QD=1e3,YD=10;class rI extends iI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=HD()&&RD(),this.fallbackToPolling=JE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const i=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!t)return}const r=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);AD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,YD):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},QD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rI.type="LOCAL";const XD=rI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends iI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sI.type="SESSION";const oI=sI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(n){return Promise.all(n.map(async e=>{try{const t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new w0(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async l=>l(t.origin,s)),c=await JD(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}w0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const l=qg("",20);r.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return window}function eN(n){ai().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return typeof ai().WorkerGlobalScope!="undefined"&&typeof ai().importScripts=="function"}async function tN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function iN(){return aI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firebaseLocalStorageDb",rN=1,ed="firebaseLocalStorage",lI="fbase_key";class du{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function v0(n,e){return n.transaction([ed],e?"readwrite":"readonly").objectStore(ed)}function sN(){const n=indexedDB.deleteDatabase(cI);return new du(n).toPromise()}function om(){const n=indexedDB.open(cI,rN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ed,{keyPath:lI})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ed)?e(i):(i.close(),await sN(),e(await om()))})})}async function q_(n,e,t){const i=v0(n,!0).put({[lI]:e,value:t});return new du(i).toPromise()}async function oN(n,e){const t=v0(n,!1).get(e),i=await new du(t).toPromise();return i===void 0?null:i.value}function G_(n,e){const t=v0(n,!0).delete(e);return new du(t).toPromise()}const aN=800,cN=3;class uI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await om(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>cN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=w0._getInstance(iN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await tN(),!this.activeServiceWorker)return;this.sender=new ZD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);!i||((e=i[0])===null||e===void 0?void 0:e.fulfilled)&&((t=i[0])===null||t===void 0?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await om();return await q_(e,Zh,"1"),await G_(e,Zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>q_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>oN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>G_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=v0(r,!1).getAll();return new du(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uI.type="LOCAL";const lN=uI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}function hN(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=oi("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",uN().appendChild(i)})}function dN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}new au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n,e){return e?Di(e):(K(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends Bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pN(n){return nI(n.auth,new Gg(n),n.bypassAuthState)}function mN(n){const{auth:e,user:t}=n;return K(t,e,"internal-error"),qD(t,new Gg(n),n.bypassAuthState)}async function gN(n){const{auth:e,user:t}=n;return K(t,e,"internal-error"),VD(t,new Gg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pN;case"linkViaPopup":case"linkViaRedirect":return gN;case"reauthViaPopup":case"reauthViaRedirect":return mN;default:jn(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=new au(2e3,1e4);class Vo extends hI{constructor(e,t,i,r,s){super(e,t,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,yN.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="pendingRedirect",Rh=new Map;class wN extends hI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Rh.get(this.auth._key());if(!e){try{const i=await vN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vN(n,e){const t=EN(e),i=bN(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function kN(n,e){Rh.set(n._key(),e)}function bN(n){return Di(n._redirectPersistence)}function EN(n){return Ah(_N,n.config.apiKey,n.name)}async function IN(n,e,t=!1){const i=_0(n),r=fN(i,e),o=await new wN(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=10*60*1e3;class CN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!dI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(oi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TN&&this.cachedEventUids.clear(),this.cachedEventUids.has(j_(e))}saveEventToCache(e){this.cachedEventUids.add(j_(e)),this.lastProcessedEventTime=Date.now()}}function j_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(n,e={}){return lu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RN=/^https?/;async function DN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xN(n);for(const t of e)try{if(NN(t))return}catch{}jn(n,"unauthorized-domain")}function NN(n){const e=sm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!RN.test(t))return!1;if(AN.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new au(3e4,6e4);function z_(){const n=ai().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ON(n){return new Promise((e,t)=>{var i,r,s;function o(){z_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z_(),t(oi(n,"network-request-failed"))},timeout:PN.get()})}if(!((r=(i=ai().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ai().gapi)===null||s===void 0)&&s.load)o();else{const a=dN("iframefcb");return ai()[a]=()=>{gapi.load?o():t(oi(n,"network-request-failed"))},hN(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Dh=null,e})}let Dh=null;function MN(n){return Dh=Dh||ON(n),Dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new au(5e3,15e3),FN="__/auth/iframe",$N="emulator/auth/iframe",UN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VN(n){const e=n.config;K(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Fg(e,$N):`https://${n.config.authDomain}/${FN}`,i={apiKey:e.apiKey,appName:n.name,v:fn},r=BN.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Mn(i).slice(1)}`}async function qN(n){const e=await MN(n),t=ai().gapi;return K(t,n,"internal-error"),e.open({where:document.body,url:VN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UN,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=oi(n,"network-request-failed"),a=ai().setTimeout(()=>{s(o)},LN.get());function c(){ai().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jN=500,zN=600,WN="_blank",KN="http://localhost";class W_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HN(n,e,t,i=jN,r=zN){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},GN),{width:i.toString(),height:r.toString(),top:s,left:o}),l=ie().toLowerCase();t&&(a=KE(l)?WN:t),WE(l)&&(e=e||KN,c.scrollbars="yes");const u=Object.entries(c).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(xD(l)&&a!=="_self")return QN(e||"",a),new W_(null);const h=window.open(e||"",a,u);K(h,n,"popup-blocked");try{h.focus()}catch{}return new W_(h)}function QN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="__/auth/handler",XN="emulator/auth/handler";function K_(n,e,t,i,r,s){K(n.config.authDomain,n,"auth-domain-config-required"),K(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:fn,eventId:r};if(e instanceof eI){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ol(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,l]of Object.entries(s||{}))o[c]=l}if(e instanceof hu){const c=e.getScopes().filter(l=>l!=="");c.length>0&&(o.scopes=c.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];return`${JN(n)}?${Mn(a).slice(1)}`}function JN({config:n}){return n.emulator?Fg(n,XN):`https://${n.authDomain}/${YN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class ZN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oI,this._completeRedirectFn=IN,this._overrideRedirectResult=kN}async _openPopup(e,t,i,r){var s;Wi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=K_(e,t,i,sm(),r);return HN(e,o,qg())}async _openRedirect(e,t,i,r){return await this._originValidation(e),eN(K_(e,t,i,sm(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Wi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await qN(e),i=new CN(e);return t.register("authEvent",r=>(K(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(op,{type:op},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[op];o!==void 0&&t(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=DN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return JE()||Ug()||y0()}}const e8=ZN;var H_="@firebase/auth",Q_="0.20.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{var r;e(((r=i)===null||r===void 0?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function i8(n){Ue(new fe("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=i.options;return((a,c)=>{K(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),K(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const l={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZE(n)},u=new ND(a,c,l);return hD(u,t),u})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ue(new fe("auth-internal",e=>{const t=_0(e.getProvider("auth").getImmediate());return(i=>new t8(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_e(H_,Q_,n8(n)),_e(H_,Q_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(n=l0()){const e=tr(n,"auth");return e.isInitialized()?e.getImmediate():uD(n,{popupRedirectResolver:e8,persistence:[lN,XD,oI]})}i8("Browser");var s8=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},L,jg=jg||{},H=s8||self;function td(){}function am(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function fu(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function o8(n){return Object.prototype.hasOwnProperty.call(n,ap)&&n[ap]||(n[ap]=++a8)}var ap="closure_uid_"+(1e9*Math.random()>>>0),a8=0;function c8(n,e,t){return n.call.apply(n.bind,arguments)}function l8(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Ct(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ct=c8:Ct=l8,Ct.apply(null,arguments)}function ah(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Nt(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Kr(){this.s=this.s,this.o=this.o}var u8=0;Kr.prototype.s=!1;Kr.prototype.na=function(){!this.s&&(this.s=!0,this.M(),u8!=0)&&o8(this)};Kr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},pI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r=typeof n=="string"?n.split(""):n;for(let s=0;s<i;s++)s in r&&e.call(t,r[s],s,n)};function h8(n){e:{var e=nP;const t=n.length,i=typeof n=="string"?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:typeof n=="string"?n.charAt(e):n[e]}function Y_(n){return Array.prototype.concat.apply([],arguments)}function zg(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function nd(n){return/^[\s\xa0]*$/.test(n)}var X_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Wt(n,e){return n.indexOf(e)!=-1}function cp(n,e){return n<e?-1:n>e?1:0}var Kt;e:{var J_=H.navigator;if(J_){var Z_=J_.userAgent;if(Z_){Kt=Z_;break e}}Kt=""}function Wg(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function mI(n){const e={};for(const t in n)e[t]=n[t];return e}var ew="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gI(n,e){let t,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(t in i)n[t]=i[t];for(let s=0;s<ew.length;s++)t=ew[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Kg(n){return Kg[" "](n),n}Kg[" "]=td;function d8(n){var e=m8;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}var f8=Wt(Kt,"Opera"),la=Wt(Kt,"Trident")||Wt(Kt,"MSIE"),yI=Wt(Kt,"Edge"),cm=yI||la,_I=Wt(Kt,"Gecko")&&!(Wt(Kt.toLowerCase(),"webkit")&&!Wt(Kt,"Edge"))&&!(Wt(Kt,"Trident")||Wt(Kt,"MSIE"))&&!Wt(Kt,"Edge"),p8=Wt(Kt.toLowerCase(),"webkit")&&!Wt(Kt,"Edge");function wI(){var n=H.document;return n?n.documentMode:void 0}var id;e:{var lp="",up=function(){var n=Kt;if(_I)return/rv:([^\);]+)(\)|;)/.exec(n);if(yI)return/Edge\/([\d\.]+)/.exec(n);if(la)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(p8)return/WebKit\/(\S+)/.exec(n);if(f8)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(up&&(lp=up?up[1]:""),la){var hp=wI();if(hp!=null&&hp>parseFloat(lp)){id=String(hp);break e}}id=lp}var m8={};function g8(){return d8(function(){let n=0;const e=X_(String(id)).split("."),t=X_("9").split("."),i=Math.max(e.length,t.length);for(let o=0;n==0&&o<i;o++){var r=e[o]||"",s=t[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r[0].length==0&&s[0].length==0)break;n=cp(r[1].length==0?0:parseInt(r[1],10),s[1].length==0?0:parseInt(s[1],10))||cp(r[2].length==0,s[2].length==0)||cp(r[2],s[2]),r=r[3],s=s[3]}while(n==0)}return 0<=n})}var lm;if(H.document&&la){var tw=wI();lm=tw||parseInt(id,10)||void 0}else lm=void 0;var y8=lm,_8=function(){if(!H.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{H.addEventListener("test",td,e),H.removeEventListener("test",td,e)}catch{}return n}();function Ft(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ft.prototype.h=function(){this.defaultPrevented=!0};function ul(n,e){if(Ft.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(_I){e:{try{Kg(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:w8[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ul.Z.h.call(this)}}Nt(ul,Ft);var w8={2:"touch",3:"pen",4:"mouse"};ul.prototype.h=function(){ul.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var pu="closure_listenable_"+(1e6*Math.random()|0),v8=0;function k8(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++v8,this.ca=this.fa=!1}function k0(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function b0(n){this.src=n,this.g={},this.h=0}b0.prototype.add=function(n,e,t,i,r){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=hm(n,e,i,r);return-1<o?(e=n[o],t||(e.fa=!1)):(e=new k8(e,this.src,s,!!i,r),e.fa=t,n.push(e)),e};function um(n,e){var t=e.type;if(t in n.g){var i=n.g[t],r=fI(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(k0(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function hm(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==i)return r}return-1}var Hg="closure_lm_"+(1e6*Math.random()|0),dp={};function vI(n,e,t,i,r){if(i&&i.once)return bI(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)vI(n,e[s],t,i,r);return null}return t=Xg(t),n&&n[pu]?n.N(e,t,fu(i)?!!i.capture:!!i,r):kI(n,e,t,!1,i,r)}function kI(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=fu(r)?!!r.capture:!!r,a=Yg(n);if(a||(n[Hg]=a=new b0(n)),t=a.add(e,t,i,o,s),t.proxy)return t;if(i=b8(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)_8||(r=o),r===void 0&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(II(e.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return t}function b8(){function n(t){return e.call(n.src,n.listener,t)}var e=E8;return n}function bI(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)bI(n,e[s],t,i,r);return null}return t=Xg(t),n&&n[pu]?n.O(e,t,fu(i)?!!i.capture:!!i,r):kI(n,e,t,!0,i,r)}function EI(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)EI(n,e[s],t,i,r);else i=fu(i)?!!i.capture:!!i,t=Xg(t),n&&n[pu]?(n=n.i,e=String(e).toString(),e in n.g&&(s=n.g[e],t=hm(s,t,i,r),-1<t&&(k0(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete n.g[e],n.h--)))):n&&(n=Yg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hm(e,t,i,r)),(t=-1<n?e[n]:null)&&Qg(t))}function Qg(n){if(typeof n!="number"&&n&&!n.ca){var e=n.src;if(e&&e[pu])um(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(II(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Yg(e))?(um(t,n),t.h==0&&(t.src=null,e[Hg]=null)):k0(n)}}}function II(n){return n in dp?dp[n]:dp[n]="on"+n}function E8(n,e){if(n.ca)n=!0;else{e=new ul(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&Qg(n),n=t.call(i,e)}return n}function Yg(n){return n=n[Hg],n instanceof b0?n:null}var fp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xg(n){return typeof n=="function"?n:(n[fp]||(n[fp]=function(e){return n.handleEvent(e)}),n[fp])}function dt(){Kr.call(this),this.i=new b0(this),this.P=this,this.I=null}Nt(dt,Kr);dt.prototype[pu]=!0;dt.prototype.removeEventListener=function(n,e,t,i){EI(this,n,e,t,i)};function St(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,typeof e=="string")e=new Ft(e,n);else if(e instanceof Ft)e.target=e.target||n;else{var r=e;e=new Ft(i,n),gI(e,r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=ch(o,i,!0,e)&&r}if(o=e.g=n,r=ch(o,i,!0,e)&&r,r=ch(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)o=e.g=t[s],r=ch(o,i,!1,e)&&r}dt.prototype.M=function(){if(dt.Z.M.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)k0(t[i]);delete n.g[e],n.h--}}this.I=null};dt.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)};dt.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};function ch(n,e,t,i){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==t){var a=o.listener,c=o.ia||o.src;o.fa&&um(n.i,o),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var Jg=H.JSON.stringify;function I8(){var n=CI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class T8{constructor(){this.h=this.g=null}add(e,t){const i=TI.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}}var TI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new C8,n=>n.reset());class C8{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function S8(n){H.setTimeout(()=>{throw n},0)}function Zg(n,e){dm||x8(),fm||(dm(),fm=!0),CI.add(n,e)}var dm;function x8(){var n=H.Promise.resolve(void 0);dm=function(){n.then(A8)}}var fm=!1,CI=new T8;function A8(){for(var n;n=I8();){try{n.h.call(n.g)}catch(t){S8(t)}var e=TI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}fm=!1}function E0(n,e){dt.call(this),this.h=n||1,this.g=e||H,this.j=Ct(this.kb,this),this.l=Date.now()}Nt(E0,dt);L=E0.prototype;L.da=!1;L.S=null;L.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),St(this,"tick"),this.da&&(e9(this),this.start()))}};L.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function e9(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}L.M=function(){E0.Z.M.call(this),e9(this),delete this.g};function t9(n,e,t){if(typeof n=="function")t&&(n=Ct(n,t));else if(n&&typeof n.handleEvent=="function")n=Ct(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:H.setTimeout(n,e||0)}function SI(n){n.g=t9(()=>{n.g=null,n.i&&(n.i=!1,SI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class R8 extends Kr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:SI(this)}M(){super.M(),this.g&&(H.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hl(n){Kr.call(this),this.h=n,this.g={}}Nt(hl,Kr);var nw=[];function xI(n,e,t,i){Array.isArray(t)||(t&&(nw[0]=t.toString()),t=nw);for(var r=0;r<t.length;r++){var s=vI(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function AI(n){Wg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Qg(e)},n),n.g={}}hl.prototype.M=function(){hl.Z.M.call(this),AI(this)};hl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function I0(){this.g=!0}I0.prototype.Aa=function(){this.g=!1};function D8(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+t+`
`+o})}function N8(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+t+`
`+s+" "+o})}function qo(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+O8(n,t)+(i?" "+i:"")})}function P8(n,e){n.info(function(){return"TIMEOUT: "+e})}I0.prototype.info=function(){};function O8(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Jg(t)}catch{return e}}var yo={},iw=null;function T0(){return iw=iw||new dt}yo.Ma="serverreachability";function RI(n){Ft.call(this,yo.Ma,n)}Nt(RI,Ft);function dl(n){const e=T0();St(e,new RI(e))}yo.STAT_EVENT="statevent";function DI(n,e){Ft.call(this,yo.STAT_EVENT,n),this.stat=e}Nt(DI,Ft);function Ht(n){const e=T0();St(e,new DI(e,n))}yo.Na="timingevent";function NI(n,e){Ft.call(this,yo.Na,n),this.size=e}Nt(NI,Ft);function mu(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return H.setTimeout(function(){n()},e)}var C0={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},PI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function n9(){}n9.prototype.h=null;function rw(n){return n.h||(n.h=n.i())}function OI(){}var gu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function i9(){Ft.call(this,"d")}Nt(i9,Ft);function r9(){Ft.call(this,"c")}Nt(r9,Ft);var pm;function S0(){}Nt(S0,n9);S0.prototype.g=function(){return new XMLHttpRequest};S0.prototype.i=function(){return{}};pm=new S0;function yu(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new hl(this),this.P=M8,n=cm?125:void 0,this.W=new E0(n),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new MI}function MI(){this.i=null,this.g="",this.h=!1}var M8=45e3,mm={},rd={};L=yu.prototype;L.setTimeout=function(n){this.P=n};function gm(n,e,t){n.K=1,n.v=A0(Ki(e)),n.s=t,n.U=!0,LI(n,null)}function LI(n,e){n.F=Date.now(),_u(n),n.A=Ki(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),GI(t.h,"t",i),n.C=0,t=n.l.H,n.h=new MI,n.g=lT(n.l,t?e:null,!n.s),0<n.O&&(n.L=new R8(Ct(n.Ia,n,n.g),n.O)),xI(n.V,n.g,"readystatechange",n.gb),e=n.H?mI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),dl(),D8(n.j,n.u,n.A,n.m,n.X,n.s)}L.gb=function(n){n=n.target;const e=this.L;e&&Ni(n)==3?e.l():this.Ia(n)};L.Ia=function(n){try{if(n==this.g)e:{const u=Ni(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>u)&&(u!=3||cm||this.g&&(this.h.h||this.g.ga()||cw(this.g)))){this.I||u!=4||e==7||(e==8||0>=h?dl(3):dl(2)),x0(this);var t=this.g.ba();this.N=t;t:if(FI(this)){var i=cw(this.g);n="";var r=i.length,s=Ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){gs(this),Uc(this);var o="";break t}this.h.i=new H.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=t==200,N8(this.j,this.u,this.A,this.m,this.X,u,t),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nd(a)){var l=a;break t}}l=null}if(t=l)qo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ym(this,t);else{this.i=!1,this.o=3,Ht(12),gs(this),Uc(this);break e}}this.U?($I(this,u,o),cm&&this.i&&u==3&&(xI(this.V,this.W,"tick",this.fb),this.W.start())):(qo(this.j,this.m,o,null),ym(this,o)),u==4&&gs(this),this.i&&!this.I&&(u==4?sT(this.l,this):(this.i=!1,_u(this)))}else t==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ht(12)):(this.o=0,Ht(13)),gs(this),Uc(this)}}}catch{}finally{}};function FI(n){return n.g?n.u=="GET"&&n.K!=2&&n.l.Ba:!1}function $I(n,e,t){let i=!0,r;for(;!n.I&&n.C<t.length;)if(r=L8(n,t),r==rd){e==4&&(n.o=4,Ht(14),i=!1),qo(n.j,n.m,null,"[Incomplete Response]");break}else if(r==mm){n.o=4,Ht(15),qo(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}else qo(n.j,n.m,r,null),ym(n,r);FI(n)&&r!=rd&&r!=mm&&(n.h.g="",n.C=0),e!=4||t.length!=0||n.h.h||(n.o=1,Ht(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,e=n.l,e.g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),f9(e),e.L=!0,Ht(11))):(qo(n.j,n.m,t,"[Invalid Chunked Response]"),gs(n),Uc(n))}L.fb=function(){if(this.g){var n=Ni(this.g),e=this.g.ga();this.C<e.length&&(x0(this),$I(this,n,e),this.i&&n!=4&&_u(this))}};function L8(n,e){var t=n.C,i=e.indexOf(`
`,t);return i==-1?rd:(t=Number(e.substring(t,i)),isNaN(t)?mm:(i+=1,i+t>e.length?rd:(e=e.substr(i,t),n.C=i+t,e)))}L.cancel=function(){this.I=!0,gs(this)};function _u(n){n.Y=Date.now()+n.P,UI(n,n.P)}function UI(n,e){if(n.B!=null)throw Error("WatchDog timer not null");n.B=mu(Ct(n.eb,n),e)}function x0(n){n.B&&(H.clearTimeout(n.B),n.B=null)}L.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(P8(this.j,this.A),this.K!=2&&(dl(),Ht(17)),gs(this),this.o=2,Uc(this)):UI(this,this.Y-n)};function Uc(n){n.l.G==0||n.I||sT(n.l,n)}function gs(n){x0(n);var e=n.L;e&&typeof e.na=="function"&&e.na(),n.L=null,e9(n.W),AI(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ym(n,e){try{var t=n.l;if(t.G!=0&&(t.g==n||_m(t.i,n))){if(t.I=n.N,!n.J&&_m(t.i,n)&&t.G==3){try{var i=t.Ca.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!t.u){if(t.g)if(t.g.F+3e3<n.F)cd(t),N0(t);else break e;d9(t),Ht(18)}}else t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&t.A==0&&!t.v&&(t.v=mu(Ct(t.ab,t),6e3));if(1>=WI(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else ys(t,11)}else if((n.J||t.g==n)&&cd(t),!nd(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(t.U=l[0],l=l[1],t.G==2)if(l[0]=="c"){t.J=l[1],t.la=l[2];const u=l[3];u!=null&&(t.ma=u,t.h.info("VER="+t.ma));const h=l[4];h!=null&&(t.za=h,t.h.info("SVER="+t.za));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,t.K=i,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const p=n.g;if(p){const m=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=i.i;!s.g&&(Wt(m,"spdy")||Wt(m,"quic")||Wt(m,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(a9(s,s.h),s.h=null))}if(i.D){const _=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(i.sa=_,xe(i.F,i.D,_))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms")),i=t;var o=n;if(i.oa=cT(i,i.H?i.la:null,i.W),o.J){KI(i.i,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(x0(a),_u(a)),i.g=o}else iT(i);0<t.l.length&&P0(t)}else l[0]!="stop"&&l[0]!="close"||ys(t,7);else t.G==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?ys(t,7):h9(t):l[0]!="noop"&&t.j&&t.j.wa(l),t.A=0)}}dl(4)}catch{}}function F8(n){if(n.R&&typeof n.R=="function")return n.R();if(typeof n=="string")return n.split("");if(am(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}e=[],t=0;for(i in n)e[t++]=n[i];return e}function s9(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(am(n)||typeof n=="string")pI(n,e,void 0);else{if(n.T&&typeof n.T=="function")var t=n.T();else if(n.R&&typeof n.R=="function")t=void 0;else if(am(n)||typeof n=="string"){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;i=F8(n),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}}function Ga(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof Ga)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}L=Ga.prototype;L.R=function(){o9(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n};L.T=function(){return o9(this),this.g.concat()};function o9(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];Ms(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)i=n.g[e],Ms(r,i)||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}L.get=function(n,e){return Ms(this.h,n)?this.h[n]:e};L.set=function(n,e){Ms(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e};L.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],s=this.get(r);n.call(e,s,r,this)}};function Ms(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var BI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $8(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ls(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ls){this.g=e!==void 0?e:n.g,sd(this,n.j),this.s=n.s,od(this,n.i),ad(this,n.m),this.l=n.l,e=n.h;var t=new fl;t.i=e.i,e.g&&(t.g=new Ga(e.g),t.h=e.h),sw(this,t),this.o=n.o}else n&&(t=String(n).match(BI))?(this.g=!!e,sd(this,t[1]||"",!0),this.s=Bc(t[2]||""),od(this,t[3]||"",!0),ad(this,t[4]),this.l=Bc(t[5]||"",!0),sw(this,t[6]||"",!0),this.o=Bc(t[7]||"")):(this.g=!!e,this.h=new fl(null,this.g))}Ls.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dc(e,ow,!0),":");var t=this.i;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Dc(e,ow,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.i&&t.charAt(0)!="/"&&n.push("/"),n.push(Dc(t,t.charAt(0)=="/"?G8:q8,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dc(t,z8)),n.join("")};function Ki(n){return new Ls(n)}function sd(n,e,t){n.j=t?Bc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function od(n,e,t){n.i=t?Bc(e,!0):e}function ad(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function sw(n,e,t){e instanceof fl?(n.h=e,W8(n.h,n.g)):(t||(e=Dc(e,j8)),n.h=new fl(e,n.g))}function xe(n,e,t){n.h.set(e,t)}function A0(n){return xe(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function U8(n){return n instanceof Ls?Ki(n):new Ls(n,void 0)}function B8(n,e,t,i){var r=new Ls(null,void 0);return n&&sd(r,n),e&&od(r,e),t&&ad(r,t),i&&(r.l=i),r}function Bc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dc(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,V8),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function V8(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var ow=/[#\/\?@]/g,q8=/[#\?:]/g,G8=/[#\?]/g,j8=/[#\?@]/g,z8=/#/g;function fl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Hr(n){n.g||(n.g=new Ga,n.h=0,n.i&&$8(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}L=fl.prototype;L.add=function(n,e){Hr(this),this.i=null,n=ja(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function VI(n,e){Hr(n),e=ja(n,e),Ms(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,n=n.g,Ms(n.h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&o9(n)))}function qI(n,e){return Hr(n),e=ja(n,e),Ms(n.g.h,e)}L.forEach=function(n,e){Hr(this),this.g.forEach(function(t,i){pI(t,function(r){n.call(e,r,i,this)},this)},this)};L.T=function(){Hr(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],s=0;s<r.length;s++)t.push(e[i]);return t};L.R=function(n){Hr(this);var e=[];if(typeof n=="string")qI(this,n)&&(e=Y_(e,this.g.get(ja(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Y_(e,n[t])}return e};L.set=function(n,e){return Hr(this),this.i=null,n=ja(this,n),qI(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};L.get=function(n,e){return n?(n=this.R(n),0<n.length?String(n[0]):e):e};function GI(n,e,t){VI(n,e),0<t.length&&(n.i=null,n.g.set(ja(n,e),zg(t)),n.h+=t.length)}L.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;i[s]!==""&&(o+="="+encodeURIComponent(String(i[s]))),n.push(o)}}return this.i=n.join("&")};function ja(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function W8(n,e){e&&!n.j&&(Hr(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(VI(this,i),GI(this,r,t))},n)),n.j=e}var K8=class{constructor(n,e){this.h=n,this.g=e}};function jI(n){this.l=n||H8,H.PerformanceNavigationTiming?(n=H.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(H.g&&H.g.Ea&&H.g.Ea()&&H.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var H8=10;function zI(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function WI(n){return n.h?1:n.g?n.g.size:0}function _m(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function a9(n,e){n.g?n.g.add(e):n.h=e}function KI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}jI.prototype.cancel=function(){if(this.i=HI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function HI(n){if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return zg(n.i)}function c9(){}c9.prototype.stringify=function(n){return H.JSON.stringify(n,void 0)};c9.prototype.parse=function(n){return H.JSON.parse(n,void 0)};function Q8(){this.g=new c9}function Y8(n,e,t){const i=t||"";try{s9(n,function(r,s){let o=r;fu(r)&&(o=Jg(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function X8(n,e){const t=new I0;if(H.Image){const i=new Image;i.onload=ah(lh,t,i,"TestLoadImage: loaded",!0,e),i.onerror=ah(lh,t,i,"TestLoadImage: error",!1,e),i.onabort=ah(lh,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=ah(lh,t,i,"TestLoadImage: timeout",!1,e),H.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}function lh(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function wu(n){this.l=n.$b||null,this.j=n.ib||!1}Nt(wu,n9);wu.prototype.g=function(){return new R0(this.l,this.j)};wu.prototype.i=function(n){return function(){return n}}({});function R0(n,e){dt.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=l9,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nt(R0,dt);var l9=0;L=R0.prototype;L.open=function(n,e){if(this.readyState!=l9)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,pl(this)};L.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||H).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};L.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vu(this)),this.readyState=l9};L.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,pl(this)),this.g&&(this.readyState=3,pl(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof H.ReadableStream!="undefined"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QI(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))};function QI(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}L.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?vu(this):pl(this),this.readyState==3&&QI(this)}};L.Ua=function(n){this.g&&(this.response=this.responseText=n,vu(this))};L.Ta=function(n){this.g&&(this.response=n,vu(this))};L.ha=function(){this.g&&vu(this)};function vu(n){n.readyState=4,n.l=null,n.j=null,n.A=null,pl(n)}L.setRequestHeader=function(n,e){this.v.append(n,e)};L.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};L.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function pl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(R0.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var J8=H.JSON.parse;function je(n){dt.call(this),this.headers=new Ga,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=YI,this.K=this.L=!1}Nt(je,dt);var YI="",Z8=/^https?$/i,eP=["POST","PUT"];L=je.prototype;L.ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pm.g(),this.C=this.u?rw(this.u):rw(pm),this.g.onreadystatechange=Ct(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){aw(this,s);return}n=t||"";const r=new Ga(this.headers);i&&s9(i,function(s,o){r.set(o,s)}),i=h8(r.T()),t=H.FormData&&n instanceof H.FormData,!(0<=fI(eP,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ZI(this),0<this.B&&((this.K=tP(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ct(this.pa,this)):this.A=t9(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){aw(this,s)}};function tP(n){return la&&g8()&&typeof n.timeout=="number"&&n.ontimeout!==void 0}function nP(n){return n.toLowerCase()=="content-type"}L.pa=function(){typeof jg!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,St(this,"timeout"),this.abort(8))};function aw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,XI(n),D0(n)}function XI(n){n.D||(n.D=!0,St(n,"complete"),St(n,"error"))}L.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,St(this,"complete"),St(this,"abort"),D0(this))};L.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),D0(this,!0)),je.Z.M.call(this)};L.Fa=function(){this.s||(this.F||this.v||this.l?JI(this):this.cb())};L.cb=function(){JI(this)};function JI(n){if(n.h&&typeof jg!="undefined"&&(!n.C[1]||Ni(n)!=4||n.ba()!=2)){if(n.v&&Ni(n)==4)t9(n.Fa,0,n);else if(St(n,"readystatechange"),Ni(n)==4){n.h=!1;try{const a=n.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=a===0){var r=String(n.H).match(BI)[1]||null;if(!r&&H.self&&H.self.location){var s=H.self.location.protocol;r=s.substr(0,s.length-1)}i=!Z8.test(r?r.toLowerCase():"")}t=i}if(t)St(n,"complete"),St(n,"success");else{n.m=6;try{var o=2<Ni(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.ba()+"]",XI(n)}}finally{D0(n)}}}}function D0(n,e){if(n.g){ZI(n);const t=n.g,i=n.C[0]?td:null;n.g=null,n.C=null,e||St(n,"ready");try{t.onreadystatechange=i}catch{}}}function ZI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(H.clearTimeout(n.A),n.A=null)}function Ni(n){return n.g?n.g.readyState:0}L.ba=function(){try{return 2<Ni(this)?this.g.status:-1}catch{return-1}};L.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};L.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),J8(e)}};function cw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case YI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}L.Da=function(){return this.m};L.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function iP(n){let e="";return Wg(n,function(t,i){e+=i,e+=":",e+=t,e+=`\r
`}),e}function u9(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=iP(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):xe(n,e,t))}function fc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function eT(n){this.za=0,this.l=[],this.h=new I0,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fc("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fc("baseRetryDelayMs",5e3,n),this.$a=fc("retryDelaySeedMs",1e4,n),this.Ya=fc("forwardChannelMaxRetries",2,n),this.ra=fc("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new jI(n&&n.concurrentRequestLimit),this.Ca=new Q8,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||n.Xb!==!1}L=eT.prototype;L.ma=8;L.G=1;function h9(n){if(tT(n),n.G==3){var e=n.V++,t=Ki(n.F);xe(t,"SID",n.J),xe(t,"RID",e),xe(t,"TYPE","terminate"),ku(n,t),e=new yu(n,n.h,e,void 0),e.K=2,e.v=A0(Ki(t)),t=!1,H.navigator&&H.navigator.sendBeacon&&(t=H.navigator.sendBeacon(e.v.toString(),"")),!t&&H.Image&&(new Image().src=e.v,t=!0),t||(e.g=lT(e.l,null),e.g.ea(e.v)),e.F=Date.now(),_u(e)}aT(n)}L.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}};function N0(n){n.g&&(f9(n),n.g.cancel(),n.g=null)}function tT(n){N0(n),n.u&&(H.clearTimeout(n.u),n.u=null),cd(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&H.clearTimeout(n.m),n.m=null)}function pp(n,e){n.l.push(new K8(n.Za++,e)),n.G==3&&P0(n)}function P0(n){zI(n.i)||n.m||(n.m=!0,Zg(n.Ha,n),n.C=0)}function rP(n,e){return WI(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.l=e.D.concat(n.l),!0):n.G==1||n.G==2||n.C>=(n.Xa?0:n.Ya)?!1:(n.m=mu(Ct(n.Ha,n,e),oT(n,n.C)),n.C++,!0)}L.Ha=function(n){if(this.m)if(this.m=null,this.G==1){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new yu(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=mI(s),gI(s,this.P)):s=this.P),this.o===null&&(r.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){t:{var i=this.l[t];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=t;break e}if(e===4096||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=nT(this,r,e),t=Ki(this.F),xe(t,"RID",n),xe(t,"CVER",22),this.D&&xe(t,"X-HTTP-Session-Id",this.D),ku(this,t),this.o&&s&&u9(t,this.o,s),a9(this.i,r),this.Ra&&xe(t,"TYPE","init"),this.ja?(xe(t,"$req",e),xe(t,"SID","null"),r.$=!0,gm(r,t,null)):gm(r,t,e),this.G=2}}else this.G==3&&(n?lw(this,n):this.l.length==0||zI(this.i)||lw(this))};function lw(n,e){var t;e?t=e.m:t=n.V++;const i=Ki(n.F);xe(i,"SID",n.J),xe(i,"RID",t),xe(i,"AID",n.U),ku(n,i),n.o&&n.s&&u9(i,n.o,n.s),t=new yu(n,n.h,t,n.C+1),n.o===null&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=nT(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),a9(n.i,t),gm(t,i,e)}function ku(n,e){n.j&&s9({},function(t,i){xe(e,i,t)})}function nT(n,e,t){t=Math.min(n.l.length,t);var i=n.j?Ct(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const o=["count="+t];s==-1?0<t?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<t;c++){let l=r[c].h;const u=r[c].g;if(l-=s,0>l)s=Math.max(0,r[c].h-100),a=!1;else try{Y8(u,o,"req"+l+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function iT(n){n.g||n.u||(n.Y=1,Zg(n.Ga,n),n.A=0)}function d9(n){return n.g||n.u||3<=n.A?!1:(n.Y++,n.u=mu(Ct(n.Ga,n),oT(n,n.A)),n.A++,!0)}L.Ga=function(){if(this.u=null,rT(this),this.$&&!(this.L||this.g==null||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=mu(Ct(this.bb,this),n)}};L.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ht(10),N0(this),rT(this))};function f9(n){n.B!=null&&(H.clearTimeout(n.B),n.B=null)}function rT(n){n.g=new yu(n,n.h,"rpc",n.Y),n.o===null&&(n.g.H=n.s),n.g.O=0;var e=Ki(n.oa);xe(e,"RID","rpc"),xe(e,"SID",n.J),xe(e,"CI",n.N?"0":"1"),xe(e,"AID",n.U),ku(n,e),xe(e,"TYPE","xmlhttp"),n.o&&n.s&&u9(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=A0(Ki(e)),t.s=null,t.U=!0,LI(t,n)}L.ab=function(){this.v!=null&&(this.v=null,N0(this),d9(this),Ht(19))};function cd(n){n.v!=null&&(H.clearTimeout(n.v),n.v=null)}function sT(n,e){var t=null;if(n.g==e){cd(n),f9(n),n.g=null;var i=2}else if(_m(n.i,e))t=e.D,KI(n.i,e),i=1;else return;if(n.I=e.N,n.G!=0){if(e.i)if(i==1){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;i=T0(),St(i,new NI(i,t)),P0(n)}else iT(n);else if(r=e.o,r==3||r==0&&0<n.I||!(i==1&&rP(n,e)||i==2&&d9(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:ys(n,5);break;case 4:ys(n,10);break;case 3:ys(n,6);break;default:ys(n,2)}}}function oT(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ys(n,e){if(n.h.info("Error code "+e),e==2){var t=null;n.j&&(t=null);var i=Ct(n.jb,n);t||(t=new Ls("//www.google.com/images/cleardot.gif"),H.location&&H.location.protocol=="http"||sd(t,"https"),A0(t)),X8(t.toString(),i)}else Ht(2);n.G=0,n.j&&n.j.va(e),aT(n),tT(n)}L.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ht(2)):(this.h.info("Failed to ping google.com"),Ht(1))};function aT(n){n.G=0,n.I=-1,n.j&&((HI(n.i).length!=0||n.l.length!=0)&&(n.i.i.length=0,zg(n.l),n.l.length=0),n.j.ua())}function cT(n,e,t){let i=U8(t);if(i.i!="")e&&od(i,e+"."+i.i),ad(i,i.m);else{const r=H.location;i=B8(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&Wg(n.aa,function(r,s){xe(i,s,r)}),e=n.D,t=n.sa,e&&t&&xe(i,e,t),xe(i,"VER",n.ma),ku(n,i),i}function lT(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=t&&n.Ba&&!n.qa?new je(new wu({ib:!0})):new je(n.qa),e.L=n.H,e}function uT(){}L=uT.prototype;L.xa=function(){};L.wa=function(){};L.va=function(){};L.ua=function(){};L.Oa=function(){};function ld(){if(la&&!(10<=Number(y8)))throw Error("Environmental error: no available transport.")}ld.prototype.g=function(n,e){return new bn(n,e)};function bn(n,e){dt.call(this),this.g=new eT(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!nd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nd(e)&&(this.g.D=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new za(this)}Nt(bn,dt);bn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Zg(Ct(n.hb,n,e))),Ht(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=cT(n,null,n.W),P0(n)};bn.prototype.close=function(){h9(this.g)};bn.prototype.u=function(n){if(typeof n=="string"){var e={};e.__data__=n,pp(this.g,e)}else this.v?(e={},e.__data__=Jg(n),pp(this.g,e)):pp(this.g,n)};bn.prototype.M=function(){this.g.j=null,delete this.j,h9(this.g),delete this.g,bn.Z.M.call(this)};function hT(n){i9.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}Nt(hT,i9);function dT(){r9.call(this),this.status=1}Nt(dT,r9);function za(n){this.g=n}Nt(za,uT);za.prototype.xa=function(){St(this.g,"a")};za.prototype.wa=function(n){St(this.g,new hT(n))};za.prototype.va=function(n){St(this.g,new dT)};za.prototype.ua=function(){St(this.g,"b")};ld.prototype.createWebChannel=ld.prototype.g;bn.prototype.send=bn.prototype.u;bn.prototype.open=bn.prototype.m;bn.prototype.close=bn.prototype.close;C0.NO_ERROR=0;C0.TIMEOUT=8;C0.HTTP_ERROR=6;PI.COMPLETE="complete";OI.EventType=gu;gu.OPEN="a";gu.CLOSE="b";gu.ERROR="c";gu.MESSAGE="d";dt.prototype.listen=dt.prototype.N;je.prototype.listenOnce=je.prototype.O;je.prototype.getLastError=je.prototype.La;je.prototype.getLastErrorCode=je.prototype.Da;je.prototype.getStatus=je.prototype.ba;je.prototype.getResponseJson=je.prototype.Qa;je.prototype.getResponseText=je.prototype.ga;je.prototype.send=je.prototype.ea;var fT=function(){return new ld},pT=function(){return T0()},Ko=C0,mT=PI,gT=yo,ud={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yT=wu,wr=OI,_T=je;const uw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="9.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Ei("@firebase/firestore");function hw(){return Fs.logLevel}function U(n,...e){if(Fs.logLevel<=Q.DEBUG){const t=e.map(p9);Fs.debug(`Firestore (${Wa}): ${n}`,...t)}}function Dr(n,...e){if(Fs.logLevel<=Q.ERROR){const t=e.map(p9);Fs.error(`Firestore (${Wa}): ${n}`,...t)}}function dw(n,...e){if(Fs.logLevel<=Q.WARN){const t=e.map(p9);Fs.warn(`Firestore (${Wa}): ${n}`,...t)}}function p9(n){if(typeof n=="string")return n;try{return e=n,JSON.stringify(e)}catch{return n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(n="Unexpected state"){const e=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: `+n;throw Dr(e),new Error(e)}function Ie(n,e){n||Y()}function J(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Ce{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nn.UNAUTHENTICATED))}shutdown(){}}class aP{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let s=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $i,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $i)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ie(typeof i.accessToken=="string"),new sP(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new nn(e)}}class cP{constructor(e,t,i){this.type="FirstParty",this.user=nn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class lP{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new cP(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hP{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ie(typeof t.token=="string"),this.p=t.token,new uP(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=dP(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function me(n,e){return n<e?-1:n>e?1:0}function ua(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Qe(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new Qe(0,0))}static max(){return new re(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t,i){t===void 0?t=0:t>e.length&&Y(),i===void 0?i=e.length-t:i>e.length-t&&Y(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Te extends ml{construct(e,t,i){return new Te(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new M(b.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Te(t)}static emptyPath(){return new Te([])}}const fP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends ml{construct(e,t,i){return new Ot(e,t,i)}static isValidIdentifier(e){return fP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new M(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new M(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new M(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new M(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.path=e}static fromPath(e){return new B(Te.fromString(e))}static fromName(e){return new B(Te.fromString(e).popFirst(5))}static empty(){return new B(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new B(new Te(e.slice()))}}function pP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=re.fromTimestamp(i===1e9?new Qe(t+1,0):new Qe(t,i));return new Nr(r,B.empty(),e)}function mP(n){return new Nr(n.readTime,n.key,-1)}class Nr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Nr(re.min(),B.empty(),-1)}static max(){return new Nr(re.max(),B.empty(),-1)}}function gP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _P{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(n){if(n.code!==b.FAILED_PRECONDITION||n.message!==yP)throw n;U("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new T((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof T?t:T.resolve(t)}catch(t){return T.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):T.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):T.reject(t)}static resolve(e){return new T((t,i)=>{t(e)})}static reject(e){return new T((t,i)=>{i(e)})}static waitFor(e){return new T((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=T.resolve(!1);for(const i of e)t=t.next(r=>r?T.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new T((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new T((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}function Eu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.it(i),this.rt=i=>t.writeSequenceNumber(i))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _o(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */m9.ot=-1;class Xe{constructor(e,t){this.comparator=e,this.root=t||kt.EMPTY}insert(e,t){return new Xe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i!=null?i:kt.RED,this.left=r!=null?r:kt.EMPTY,this.right=s!=null?s:kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new kt(e!=null?e:this.key,t!=null?t:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return kt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(n,e,t,i,r){return this}insert(n,e,t){return new kt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pw(this.data.getIterator())}getIteratorFrom(e){return new pw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ye(this.comparator);return t.data=e,t}}class pw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new Ye(Ot.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Rt(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Rt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const wP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(n){if(Ie(!!n),typeof n=="string"){let e=0;const t=wP.exec(n);if(Ie(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qe(n.seconds),nanos:qe(n.nanos)}}function qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ha(n){return typeof n=="string"?Rt.fromBase64String(n):Rt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function bT(n){const e=n.mapValue.fields.__previous_value__;return kT(e)?bT(e):e}function gl(n){const e=Pr(n.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,t,i,r,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class da{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new da("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(n){return n==null}function hd(n){return n===0&&1/n==-1/0}function kP(n){return typeof n=="number"&&Number.isInteger(n)&&!hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kT(n)?4:bP(n)?9007199254740991:10:Y()}function mi(n,e){if(n===e)return!0;const t=$s(n);if(t!==$s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gl(n).isEqual(gl(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Pr(i.timestampValue),o=Pr(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,r){return ha(i.bytesValue).isEqual(ha(r.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return qe(i.geoPointValue.latitude)===qe(r.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return qe(i.integerValue)===qe(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=qe(i.doubleValue),o=qe(r.doubleValue);return s===o?hd(s)===hd(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return ua(n.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(fw(s)!==fw(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!mi(s[a],o[a])))return!1;return!0}(n,e);default:return Y()}}function yl(n,e){return(n.values||[]).find(t=>mi(t,e))!==void 0}function fa(n,e){if(n===e)return 0;const t=$s(n),i=$s(e);if(t!==i)return me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(r,s){const o=qe(r.integerValue||r.doubleValue),a=qe(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return mw(n.timestampValue,e.timestampValue);case 4:return mw(gl(n),gl(e));case 5:return me(n.stringValue,e.stringValue);case 6:return function(r,s){const o=ha(r),a=ha(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){const l=me(o[c],a[c]);if(l!==0)return l}return me(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const o=me(qe(r.latitude),qe(s.latitude));return o!==0?o:me(qe(r.longitude),qe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){const l=fa(o[c],a[c]);if(l)return l}return me(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===hh.mapValue&&s===hh.mapValue)return 0;if(r===hh.mapValue)return 1;if(s===hh.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),c=s.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){const h=me(a[u],l[u]);if(h!==0)return h;const d=fa(o[a[u]],c[l[u]]);if(d!==0)return d}return me(a.length,l.length)}(n.mapValue,e.mapValue);default:throw Y()}}function mw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);const t=Pr(n),i=Pr(e),r=me(t.seconds,i.seconds);return r!==0?r:me(t.nanos,i.nanos)}function Ho(n){return wm(n)}function wm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Pr(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ha(n.bytesValue).toBase64():"referenceValue"in n?(t=n.referenceValue,B.fromName(t).toString()):"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=wm(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${wm(i.fields[a])}`;return s+"}"}(n.mapValue):Y();var e,t}function gw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vm(n){return!!n&&"integerValue"in n}function g9(n){return!!n&&"arrayValue"in n}function yw(n){return!!n&&"nullValue"in n}function _w(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nh(n){return!!n&&"mapValue"in n}function Vc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _o(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Vc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vc(t)}setAll(e){let t=Ot.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Vc(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());Nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Nh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){_o(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new an(Vc(this.value))}}function ET(n){const e=[];return _o(n.fields,(t,i)=>{const r=new Ot([t]);if(Nh(i)){const s=ET(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t,i,r,s,o){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Et(e,0,re.min(),re.min(),an.empty(),0)}static newFoundDocument(e,t,i){return new Et(e,1,t,re.min(),i,0)}static newNoDocument(e,t){return new Et(e,2,t,re.min(),an.empty(),0)}static newUnknownDocument(e,t){return new Et(e,3,t,re.min(),an.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function ww(n,e=null,t=[],i=[],r=null,s=null,o=null){return new EP(n,e,t,i,r,s,o)}function y9(n){const e=J(n);if(e.ut===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Ho(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),O0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ho(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ho(i)).join(",")),e.ut=t}return e.ut}function IP(n){let e=n.path.canonicalString();return n.collectionGroup!==null&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${Ho(i.value)}`;var i}).join(", ")}]`),O0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(t)).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ho(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ho(t)).join(",")),`Target(${e})`}function _9(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!NP(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(t=n.filters[r],i=e.filters[r],t.op!==i.op||!t.field.isEqual(i.field)||!mi(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kw(n.startAt,e.startAt)&&kw(n.endAt,e.endAt)}function km(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Qt extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.ct(e,t,i):new TP(e,t,i):t==="array-contains"?new xP(e,i):t==="in"?new AP(e,i):t==="not-in"?new RP(e,i):t==="array-contains-any"?new DP(e,i):new Qt(e,t,i)}static ct(e,t,i){return t==="in"?new CP(e,i):new SP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.at(fa(t,this.value)):t!==null&&$s(this.value)===$s(t)&&this.at(fa(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class TP extends Qt{constructor(e,t,i){super(e,t,i),this.key=B.fromName(i.referenceValue)}matches(e){const t=B.comparator(e.key,this.key);return this.at(t)}}class CP extends Qt{constructor(e,t){super(e,"in",t),this.keys=IT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SP extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=IT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>B.fromName(i.referenceValue))}class xP extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return g9(t)&&yl(t.arrayValue,this.value)}}class AP extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yl(this.value.arrayValue,t)}}class RP extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!yl(this.value.arrayValue,t)}}class DP extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!g9(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>yl(this.value.arrayValue,i))}}class dd{constructor(e,t){this.position=e,this.inclusive=t}}class Qo{constructor(e,t="asc"){this.field=e,this.dir=t}}function NP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function vw(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=B.comparator(B.fromName(o.referenceValue),t.key):i=fa(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function kw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.lt=null,this.ft=null,this.startAt,this.endAt}}function PP(n,e,t,i,r,s,o,a){return new Ka(n,e,t,i,r,s,o,a)}function M0(n){return new Ka(n)}function OP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function w9(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function v9(n){for(const e of n.filters)if(e.ht())return e.field;return null}function TT(n){return n.collectionGroup!==null}function _l(n){const e=J(n);if(e.lt===null){e.lt=[];const t=v9(e),i=w9(e);if(t!==null&&i===null)t.isKeyField()||e.lt.push(new Qo(t)),e.lt.push(new Qo(Ot.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Qo(Ot.keyField(),s))}}}return e.lt}function Us(n){const e=J(n);if(!e.ft)if(e.limitType==="F")e.ft=ww(e.path,e.collectionGroup,_l(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of _l(e)){const o=s.dir==="desc"?"asc":"desc";t.push(new Qo(s.field,o))}const i=e.endAt?new dd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new dd(e.startAt.position,e.startAt.inclusive):null;e.ft=ww(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.ft}function CT(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function L0(n,e){return _9(Us(n),Us(e))&&n.limitType===e.limitType}function ST(n){return`${y9(Us(n))}|lt:${n.limitType}`}function bm(n){return`Query(target=${IP(Us(n))}; limitType=${n.limitType})`}function k9(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return t.collectionGroup!==null?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):B.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&function(t,i){return!(t.startAt&&!function(r,s,o){const a=vw(r,s,o);return r.inclusive?a<=0:a<0}(t.startAt,_l(t),i)||t.endAt&&!function(r,s,o){const a=vw(r,s,o);return r.inclusive?a>=0:a>0}(t.endAt,_l(t),i))}(n,e)}function MP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xT(n){return(e,t)=>{let i=!1;for(const r of _l(n)){const s=LP(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function LP(n,e,t){const i=n.field.isKeyField()?B.comparator(e.key,t.key):function(r,s,o){const a=s.data.field(r),c=o.data.field(r);return a!==null&&c!==null?fa(a,c):Y()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function RT(n){return{integerValue:""+n}}function FP(n,e){return kP(e)?RT(e):AT(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this._=void 0}}function $P(n,e,t){return n instanceof fd?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof wl?NT(n,e):n instanceof vl?PT(n,e):function(i,r){const s=DT(i,r),o=bw(s)+bw(i._t);return vm(s)&&vm(i._t)?RT(o):AT(i.wt,o)}(n,e)}function UP(n,e,t){return n instanceof wl?NT(n,e):n instanceof vl?PT(n,e):t}function DT(n,e){return n instanceof pd?vm(t=e)||function(i){return!!i&&"doubleValue"in i}(t)?e:{integerValue:0}:null;var t}class fd extends F0{}class wl extends F0{constructor(e){super(),this.elements=e}}function NT(n,e){const t=OT(e);for(const i of n.elements)t.some(r=>mi(r,i))||t.push(i);return{arrayValue:{values:t}}}class vl extends F0{constructor(e){super(),this.elements=e}}function PT(n,e){let t=OT(e);for(const i of n.elements)t=t.filter(r=>!mi(r,i));return{arrayValue:{values:t}}}class pd extends F0{constructor(e,t){super(),this.wt=e,this._t=t}}function bw(n){return qe(n.integerValue||n.doubleValue)}function OT(n){return g9(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function BP(n,e){return n.field.isEqual(e.field)&&function(t,i){return t instanceof wl&&i instanceof wl||t instanceof vl&&i instanceof vl?ua(t.elements,i.elements,mi):t instanceof pd&&i instanceof pd?mi(t._t,i._t):t instanceof fd&&i instanceof fd}(n.transform,e.transform)}class VP{constructor(e,t){this.version=e,this.transformResults=t}}class ci{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ci}static exists(e){return new ci(void 0,e)}static updateTime(e){return new ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ph(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $0{}function MT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new FT(n.key,ci.none()):new Iu(n.key,n.data,ci.none());{const t=n.data,i=an.empty();let r=new Ye(Ot.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Qr(n.key,i,new Rn(r.toArray()),ci.none())}}function qP(n,e,t){n instanceof Iu?function(i,r,s){const o=i.value.clone(),a=Iw(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Qr?function(i,r,s){if(!Ph(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=Iw(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(LT(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function qc(n,e,t,i){return n instanceof Iu?function(r,s,o,a){if(!Ph(r.precondition,s))return o;const c=r.value.clone(),l=Tw(r.fieldTransforms,a,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof Qr?function(r,s,o,a){if(!Ph(r.precondition,s))return o;const c=Tw(r.fieldTransforms,a,s),l=s.data;return l.setAll(LT(r)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(n,e,t,i):function(r,s,o){return Ph(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,e,t)}function GP(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=DT(i.transform,r||null);s!=null&&(t===null&&(t=an.empty()),t.set(i.field,s))}return t||null}function Ew(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(t,i){return t===void 0&&i===void 0||!(!t||!i)&&ua(t,i,(r,s)=>BP(r,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Iu extends $0{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qr extends $0{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Iw(n,e,t){const i=new Map;Ie(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,UP(o,a,t[r]))}return i}function Tw(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,$P(s,o,e))}return i}class FT extends $0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jP extends $0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,ae;function WP(n){switch(n){default:return Y();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function $T(n){if(n===void 0)return Dr("GRPC error has no .code"),b.UNKNOWN;switch(n){case Be.OK:return b.OK;case Be.CANCELLED:return b.CANCELLED;case Be.UNKNOWN:return b.UNKNOWN;case Be.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Be.INTERNAL:return b.INTERNAL;case Be.UNAVAILABLE:return b.UNAVAILABLE;case Be.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Be.NOT_FOUND:return b.NOT_FOUND;case Be.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Be.ABORTED:return b.ABORTED;case Be.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Be.DATA_LOSS:return b.DATA_LOSS;default:return Y()}}(ae=Be||(Be={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return vT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=new Xe(B.comparator);function Hi(){return KP}const UT=new Xe(B.comparator);function Nc(...n){let e=UT;for(const t of n)e=e.insert(t.key,t);return e}function BT(n){let e=UT;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function _s(){return Gc()}function VT(){return Gc()}function Gc(){return new Ha(n=>n.toString(),(n,e)=>n.isEqual(e))}const HP=new Xe(B.comparator),QP=new Ye(B.comparator);function oe(...n){let e=QP;for(const t of n)e=e.add(t);return e}const YP=new Ye(me);function qT(){return YP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,t)),new U0(re.min(),i,qT(),Hi(),oe())}}class Tu{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Tu(Rt.EMPTY_BYTE_STRING,t,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,i,r){this.gt=e,this.removedTargetIds=t,this.key=i,this.yt=r}}class GT{constructor(e,t){this.targetId=e,this.It=t}}class jT{constructor(e,t,i=Rt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Cw{constructor(){this.Tt=0,this.Et=xw(),this.At=Rt.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=oe(),t=oe(),i=oe();return this.Et.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Y()}}),new Tu(this.At,this.Rt,e,t,i)}Dt(){this.bt=!1,this.Et=xw()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class XP{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Hi(),this.Bt=Sw(),this.Lt=new Ye(me)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const i=this.Qt(t);switch(e.state){case 0:this.jt(t)&&i.Vt(e.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(e.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(i.Ot(),i.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),i.Vt(e.resumeToken));break;default:Y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((i,r)=>{this.jt(r)&&t(r)})}zt(e){const t=e.targetId,i=e.It.count,r=this.Ht(t);if(r){const s=r.target;if(km(s))if(i===0){const o=new B(s.path);this.Kt(t,o,Et.newNoDocument(o,re.min()))}else Ie(i===1);else this.Jt(t)!==i&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&km(a.target)){const c=new B(a.target.path);this.$t.get(c)!==null||this.Xt(o,c)||this.Kt(o,c,Et.newNoDocument(c,e))}s.vt&&(t.set(o,s.St()),s.Dt())}});let i=oe();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ht(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(i=i.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const r=new U0(e,t,this.Lt,this.$t,i);return this.$t=Hi(),this.Bt=Sw(),this.Lt=new Ye(me),r}qt(e,t){if(!this.jt(e))return;const i=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,i),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,i){if(!this.jt(e))return;const r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),i&&(this.$t=this.$t.insert(t,i))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Cw,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Ye(me),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=this.Ht(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Cw),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Sw(){return new Xe(B.comparator)}function xw(){return new Xe(B.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),ZP=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class e7{constructor(e,t){this.databaseId=e,this.dt=t}}function md(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zT(n,e){return n.dt?e.toBase64():e.toUint8Array()}function t7(n,e){return md(n,e.toTimestamp())}function Ui(n){return Ie(!!n),re.fromTimestamp(function(e){const t=Pr(e);return new Qe(t.seconds,t.nanos)}(n))}function b9(n,e){return function(t){return new Te(["projects",t.projectId,"databases",t.database])}(n).child("documents").child(e).canonicalString()}function WT(n){const e=Te.fromString(n);return Ie(QT(e)),e}function Em(n,e){return b9(n.databaseId,e.path)}function mp(n,e){const t=WT(e);if(t.get(1)!==n.databaseId.projectId)throw new M(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new M(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(KT(t))}function Im(n,e){return b9(n.databaseId,e)}function n7(n){const e=WT(n);return e.length===4?Te.emptyPath():KT(e)}function Tm(n){return new Te(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KT(n){return Ie(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Aw(n,e,t){return{name:Em(n,e),fields:t.value.mapValue.fields}}function i7(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,l){return c.dt?(Ie(l===void 0||typeof l=="string"),Rt.fromBase64String(l||"")):(Ie(l===void 0||l instanceof Uint8Array),Rt.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=c.code===void 0?b.UNKNOWN:$T(c.code);return new M(l,c.message||"")}(o);t=new jT(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=mp(n,i.document.name),s=Ui(i.document.updateTime),o=new an({mapValue:{fields:i.document.fields}}),a=Et.newFoundDocument(r,s,o),c=i.targetIds||[],l=i.removedTargetIds||[];t=new Oh(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=mp(n,i.document),s=i.readTime?Ui(i.readTime):re.min(),o=Et.newNoDocument(r,s),a=i.removedTargetIds||[];t=new Oh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=mp(n,i.document),s=i.removedTargetIds||[];t=new Oh([],s,r,null)}else{if(!("filter"in e))return Y();{e.filter;const i=e.filter;i.targetId;const r=i.count||0,s=new zP(r),o=i.targetId;t=new GT(o,s)}}return t}function r7(n,e){let t;if(e instanceof Iu)t={update:Aw(n,e.key,e.value)};else if(e instanceof FT)t={delete:Em(n,e.key)};else if(e instanceof Qr)t={update:Aw(n,e.key,e.data),updateMask:p7(e.fieldMask)};else{if(!(e instanceof jP))return Y();t={verify:Em(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof fd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof wl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof vl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof pd)return{fieldPath:s.field.canonicalString(),increment:o._t};throw Y()}(0,i))),e.precondition.isNone||(t.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:t7(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y()}(n,e.precondition)),t}function s7(n,e){return n&&n.length>0?(Ie(e!==void 0),n.map(t=>function(i,r){let s=i.updateTime?Ui(i.updateTime):Ui(r);return s.isEqual(re.min())&&(s=Ui(r)),new VP(s,i.transformResults||[])}(t,e))):[]}function o7(n,e){return{documents:[Im(n,e.path)]}}function a7(n,e){const t={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(t.parent=Im(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Im(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(c){if(c.length===0)return;const l=c.map(u=>function(h){if(h.op==="=="){if(_w(h.value))return{unaryFilter:{field:Ro(h.field),op:"IS_NAN"}};if(yw(h.value))return{unaryFilter:{field:Ro(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(_w(h.value))return{unaryFilter:{field:Ro(h.field),op:"IS_NOT_NAN"}};if(yw(h.value))return{unaryFilter:{field:Ro(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(h.field),op:h7(h.op),value:h.value}}}(u));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(c){if(c.length!==0)return c.map(l=>function(u){return{field:Ro(u.field),direction:u7(u.dir)}}(l))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=function(c,l){return c.dt||O0(l)?l:{value:l}}(n,e.limit);var a;return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),t}function c7(n){let e=n7(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ie(i===1);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=HT(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>function(h){return new Qo(Go(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;t.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,O0(h)?null:h}(t.limit));let c=null;t.startAt&&(c=function(u){const h=!!u.before,d=u.values||[];return new dd(d,h)}(t.startAt));let l=null;return t.endAt&&(l=function(u){const h=!u.before,d=u.values||[];return new dd(d,h)}(t.endAt)),PP(e,r,o,s,a,"F",c,l)}function l7(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Y()}}(0,e.purpose);return t==null?null:{"goog-listen-tags":t}}function HT(n){return n?n.unaryFilter!==void 0?[f7(n)]:n.fieldFilter!==void 0?[d7(n)]:n.compositeFilter!==void 0?n.compositeFilter.filters.map(e=>HT(e)).reduce((e,t)=>e.concat(t)):Y():[]}function u7(n){return JP[n]}function h7(n){return ZP[n]}function Ro(n){return{fieldPath:n.canonicalString()}}function Go(n){return Ot.fromServerFormat(n.fieldPath)}function d7(n){return Qt.create(Go(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}function f7(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Go(n.unaryFilter.field);return Qt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Go(n.unaryFilter.field);return Qt.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Go(n.unaryFilter.field);return Qt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Go(n.unaryFilter.field);return Qt.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}function p7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&qP(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=qc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=qc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=VT();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const c=MT(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(re.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oe())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,(t,i)=>Ew(t,i))&&ua(this.baseMutations,e.baseMutations,(t,i)=>Ew(t,i))}}class E9{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ie(e.mutations.length===i.length);let r=HP;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new E9(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t,i,r,s=re.min(),o=re.min(),a=Rt.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e){this.ne=e}}function _7(n){const e=c7({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?CT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(){this.ze=new v7}addToCollectionParentIndex(e,t){return this.ze.add(t),T.resolve()}getCollectionParents(e,t){return T.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return T.resolve()}deleteFieldIndex(e,t){return T.resolve()}getDocumentsMatchingTarget(e,t){return T.resolve(null)}getIndexType(e,t){return T.resolve(0)}getFieldIndexes(e,t){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,t){return T.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,t){return T.resolve(Nr.min())}updateCollectionGroup(e,t,i){return T.resolve()}updateIndexEntries(e,t){return T.resolve()}}class v7{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ye(Te.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ye(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new pa(0)}static Rn(){return new pa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(){this.changes=new Ha(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?T.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(i!==null&&qc(i.mutation,r,Rn.empty(),Qe.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,oe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=oe()){const r=_s();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Nc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=_s();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,oe()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Hi();const o=Gc(),a=Gc();return t.forEach((c,l)=>{const u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Qr)?s=s.insert(l.key,l):u!==void 0&&(o.set(l.key,u.mutation.getFieldMask()),qc(u.mutation,l,u.mutation.getFieldMask(),Qe.now()))}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new b7(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Gc();let r=new Xe((o,a)=>o-a),s=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=t.get(c);if(l===null)return;let u=i.get(c)||Rn.empty();u=a.applyToLocalView(l,u),i.set(c,u);const h=(r.get(a.batchId)||oe()).add(c);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=VT();u.forEach(d=>{if(!s.has(d)){const p=MT(t.get(d),i.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return T.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return function(r){return B.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):T.resolve(_s());let a=-1,c=s;return o.next(l=>T.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?T.resolve():this.getBaseDocument(e,u,h).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,oe())).next(u=>({batchId:a,changes:BT(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(i=>{let r=Nc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=Nc();return this.indexManager.getCollectionParents(e,r).next(o=>T.forEach(o,a=>{const c=function(l,u){return new Ka(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(t,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,i).next(l=>{l.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(s=>{s.forEach((a,c)=>{const l=c.getKey();r.get(l)===null&&(r=r.insert(l,Et.newInvalidDocument(l)))});let o=Nc();return r.forEach((a,c)=>{const l=s.get(a);l!==void 0&&qc(l.mutation,c,Rn.empty(),Qe.now()),k9(t,c)&&(o=o.insert(a,c))}),o})}getBaseDocument(e,t,i){return i===null||i.mutation.type===1?this.remoteDocumentCache.getEntry(e,t):T.resolve(Et.newInvalidDocument(t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return T.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var i;return this.Jn.set(t.id,{id:(i=t).id,version:i.version,createTime:Ui(i.createTime)}),T.resolve()}getNamedQuery(e,t){return T.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,function(i){return{name:i.name,query:_7(i.bundledQuery),readTime:Ui(i.readTime)}}(t)),T.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(){this.overlays=new Xe(B.comparator),this.Xn=new Map}getOverlay(e,t){return T.resolve(this.overlays.get(t))}getOverlays(e,t){const i=_s();return T.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ie(e,t,s)}),T.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Xn.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(i)),T.resolve()}getOverlaysForCollection(e,t,i){const r=_s(),s=t.length+1,o=new B(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return T.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Xe((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=_s(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=_s(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return T.resolve(a)}ie(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new g7(t,i));let s=this.Xn.get(t);s===void 0&&(s=oe(),this.Xn.set(t,s)),this.Xn.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(){this.Zn=new Ye(nt.ts),this.es=new Ye(nt.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const i=new nt(e,t);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.rs(new nt(e,t))}os(e,t){e.forEach(i=>this.removeReference(i,t))}us(e){const t=new B(new Te([])),i=new nt(t,e),r=new nt(t,e+1),s=[];return this.es.forEachInRange([i,r],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new B(new Te([])),i=new nt(t,e),r=new nt(t,e+1);let s=oe();return this.es.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new nt(e,0),i=this.Zn.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class nt{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return B.comparator(e.key,t.key)||me(e.ls,t.ls)}static ns(e,t){return me(e.ls,t.ls)||B.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Ye(nt.ts)}checkEmpty(e){return T.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new m7(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.ds=this.ds.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,t){return T.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ws(i),s=r<0?0:r;return T.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new nt(t,0),r=new nt(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],o=>{const a=this._s(o.ls);s.push(a)}),T.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ye(me);return t.forEach(r=>{const s=new nt(r,0),o=new nt(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{i=i.add(a.ls)})}),T.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;B.isDocumentKey(s)||(s=s.child(""));const o=new nt(new B(s),0);let a=new Ye(me);return this.ds.forEachWhile(c=>{const l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.ls)),!0)},o),T.resolve(this.gs(a))}gs(e){const t=[];return e.forEach(i=>{const r=this._s(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Ie(this.ys(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.ds;return T.forEach(t.mutations,r=>{const s=new nt(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=i})}In(e){}containsKey(e,t){const i=new nt(t,0),r=this.ds.firstAfterOrEqual(i);return T.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,T.resolve()}ys(e,t){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e){this.ps=e,this.docs=new Xe(B.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.ps(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return T.resolve(i?i.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let i=Hi();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Et.newInvalidDocument(r))}),T.resolve(i)}getAllFromCollection(e,t,i){let r=Hi();const s=new B(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:c}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||gP(mP(c),i)<=0||(r=r.insert(c.key,c.mutableCopy()))}return T.resolve(r)}getAllFromCollectionGroup(e,t,i,r){Y()}Is(e,t){return T.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new x7(this)}getSize(e){return T.resolve(this.size)}}class x7 extends k7{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.zn.addEntry(e,r)):this.zn.removeEntry(i)}),T.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e){this.persistence=e,this.Ts=new Ha(t=>y9(t),_9),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Es=0,this.As=new I9,this.targetCount=0,this.Rs=pa.An()}forEachTarget(e,t){return this.Ts.forEach((i,r)=>t(r)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Es&&(this.Es=t),T.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new pa(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,T.resolve()}updateTargetData(e,t){return this.vn(t),T.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),T.waitFor(s).next(()=>r)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,t){const i=this.Ts.get(t)||null;return T.resolve(i)}addMatchingKeys(e,t,i){return this.As.ss(t,i),T.resolve()}removeMatchingKeys(e,t,i){this.As.os(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),T.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),T.resolve()}getMatchingKeysForTargetId(e,t){const i=this.As.hs(t);return T.resolve(i)}containsKey(e,t){return T.resolve(this.As.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,t){this.bs={},this.overlays={},this.Ps=new m9(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new A7(this),this.indexManager=new w7,this.remoteDocumentCache=function(i){return new S7(i)}(i=>this.referenceDelegate.Ss(i)),this.wt=new y7(t),this.Ds=new I7(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.bs[e.toKey()];return i||(i=new C7(t,this.referenceDelegate),this.bs[e.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,i){U("MemoryPersistence","Starting transaction:",e);const r=new D7(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(s=>this.referenceDelegate.xs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ns(e,t){return T.or(Object.values(this.bs).map(i=>()=>i.containsKey(e,t)))}}class D7 extends _P{constructor(e){super(),this.currentSequenceNumber=e}}class T9{constructor(e){this.persistence=e,this.ks=new I9,this.Os=null}static Ms(e){return new T9(e)}get Fs(){if(this.Os)return this.Os;throw Y()}addReference(e,t,i){return this.ks.addReference(i,t),this.Fs.delete(i.toString()),T.resolve()}removeReference(e,t,i){return this.ks.removeReference(i,t),this.Fs.add(i.toString()),T.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),T.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Fs.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.Fs,i=>{const r=B.fromPath(i);return this.$s(e,r).next(s=>{s||t.removeEntry(r,re.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(i=>{i?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return T.or([()=>T.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Pi=i,this.vi=r}static Vi(e,t){let i=oe(),r=oe();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new C9(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ci(e,t).next(s=>s||this.xi(e,t,r,i)).next(s=>s||this.Ni(e,t))}Ci(e,t){return T.resolve(null)}xi(e,t,i,r){return OP(t)||r.isEqual(re.min())?this.Ni(e,t):this.Di.getDocuments(e,i).next(s=>{const o=this.ki(t,s);return this.Oi(t,o,i,r)?this.Ni(e,t):(hw()<=Q.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),bm(t)),this.Mi(e,o,t,pP(r,-1)))})}ki(e,t){let i=new Ye(xT(e));return t.forEach((r,s)=>{k9(e,s)&&(i=i.add(s))}),i}Oi(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ni(e,t){return hw()<=Q.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",bm(t)),this.Di.getDocumentsMatchingQuery(e,t,Nr.min())}Mi(e,t,i,r){return this.Di.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,t,i,r){this.persistence=e,this.Fi=t,this.wt=r,this.$i=new Xe(me),this.Bi=new Ha(s=>y9(s),_9),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(i)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E7(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function O7(n,e,t,i){return new P7(n,e,t,i)}async function YT(n,e){const t=J(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.qi(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let c=oe();for(const l of r){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({Ki:l,removedBatchIds:o,addedBatchIds:a}))})})}function M7(n,e){const t=J(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){const u=c.batch,h=u.keys();let d=T.resolve();return h.forEach(p=>{d=d.next(()=>l.getEntry(a,p)).next(m=>{const _=c.docVersions.get(p);Ie(_!==null),m.version.compareTo(_)<0&&(u.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),l.addEntry(m)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=oe();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function XT(n){const e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function L7(n,e){const t=J(n),i=e.snapshotVersion;let r=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Ui.newChangeBuffer({trackRemovals:!0});r=t.$i;const a=[];e.targetChanges.forEach((u,h)=>{const d=r.get(h);if(!d)return;a.push(t.Vs.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.Vs.addMatchingKeys(s,u.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(h)?p=p.withResumeToken(Rt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,i)),r=r.insert(h,p),function(m,_,y){return m.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,p,u)&&a.push(t.Vs.updateTargetData(s,p))});let c=Hi(),l=oe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(F7(s,o,e.documentUpdates).next(u=>{c=u.Gi,l=u.Qi})),!i.isEqual(re.min())){const u=t.Vs.getLastRemoteSnapshotVersion(s).next(h=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return T.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.$i=r,s))}function F7(n,e,t){let i=oe(),r=oe();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Hi();return t.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(re.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Gi:o,Qi:r}})}function $7(n,e){const t=J(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function U7(n,e){const t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Vs.getTargetData(i,e).next(s=>s?(r=s,T.resolve(r)):t.Vs.allocateTargetId(i).next(o=>(r=new Ts(e,o,0,i.currentSequenceNumber),t.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.$i.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.$i=t.$i.insert(i.targetId,i),t.Bi.set(e,i.targetId)),i})}async function Cm(n,e,t){const i=J(n),r=i.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Eu(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.$i=i.$i.remove(e),i.Bi.delete(r.target)}function Rw(n,e,t){const i=J(n);let r=re.min(),s=oe();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){const u=J(a),h=u.Bi.get(l);return h!==void 0?T.resolve(u.$i.get(h)):u.Vs.getTargetData(c,l)}(i,o,Us(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Fi.getDocumentsMatchingQuery(o,e,t?r:re.min(),t?s:oe())).next(a=>(B7(i,MP(e),a),{documents:a,ji:s})))}function B7(n,e,t){let i=re.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Li.set(e,i)}class Dw{constructor(){this.activeTargetIds=qT()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V7{constructor(){this.Fr=new Dw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,i){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Dw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.so=t+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,i,r,s){const o=this.oo(e,t);U("RestConnection","Sending: ",o,i);const a={};return this.uo(a,r,s),this.co(e,o,a,i).then(c=>(U("RestConnection","Received: ",c),c),c=>{throw dw("RestConnection",`${e} failed with error: `,c,"url: ",o,"request:",i),c})}ao(e,t,i,r,s,o){return this.ro(e,t,i,r,s)}uo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}oo(e,t){const i=G7[e];return`${this.so}/v1/${t}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,i,r){return new Promise((s,o)=>{const a=new _T;a.listenOnce(mT.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ko.NO_ERROR:const l=a.getResponseJson();U("Connection","XHR received:",JSON.stringify(l)),s(l);break;case Ko.TIMEOUT:U("Connection",'RPC "'+e+'" timed out'),o(new M(b.DEADLINE_EXCEEDED,"Request time out"));break;case Ko.HTTP_ERROR:const u=a.getStatus();if(U("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(p){const m=p.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(m)>=0?m:b.UNKNOWN}(h.status);o(new M(d,h.message))}else o(new M(b.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new M(b.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{U("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(r);a.send(t,"POST",c,i,15)})}ho(e,t,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fT(),o=pT(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new yT({})),this.uo(a.initMessageHeaders,t,i),Ba()||go()||PE()||ou()||OE()||mo()||(a.httpHeadersOverwriteParam="$httpHeaders");const c=r.join("");U("Connection","Creating WebChannel: "+c,a);const l=s.createWebChannel(c,a);let u=!1,h=!1;const d=new j7({jr:m=>{h?U("Connection","Not sending because WebChannel is closed:",m):(u||(U("Connection","Opening WebChannel transport."),l.open(),u=!0),U("Connection","WebChannel sending:",m),l.send(m))},Wr:()=>l.close()}),p=(m,_,y)=>{m.listen(_,x=>{try{y(x)}catch(N){setTimeout(()=>{throw N},0)}})};return p(l,wr.EventType.OPEN,()=>{h||U("Connection","WebChannel transport opened.")}),p(l,wr.EventType.CLOSE,()=>{h||(h=!0,U("Connection","WebChannel transport closed"),d.eo())}),p(l,wr.EventType.ERROR,m=>{h||(h=!0,dw("Connection","WebChannel transport errored:",m),d.eo(new M(b.UNAVAILABLE,"The operation could not be completed")))}),p(l,wr.EventType.MESSAGE,m=>{var _;if(!h){const y=m.data[0];Ie(!!y);const x=y,N=x.error||((_=x[0])===null||_===void 0?void 0:_.error);if(N){U("Connection","WebChannel received error:",N);const A=N.status;let O=function(V){const $=Be[V];if($!==void 0)return $T($)}(A),W=N.message;O===void 0&&(O=b.INTERNAL,W="Unknown error status: "+A+" with message "+N.message),h=!0,d.eo(new M(O,W)),l.close()}else U("Connection","WebChannel received:",y),d.no(y)}}),p(o,gT.STAT_EVENT,m=>{m.stat===ud.PROXY?U("Connection","Detected buffering proxy"):m.stat===ud.NOPROXY&&U("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.Zr()},0),d}}function gp(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n){return new e7(n,!0)}class JT{constructor(e,t,i=1e3,r=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=i,this.fo=r,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,t-i);r>0&&U("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t,i,r,s,o,a,c){this.js=e,this.Ao=i,this.Ro=r,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new JT(e,t)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}async Oo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,t){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():t&&t.code===b.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):t&&t.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(t)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===t&&this.Uo(i,r)},i=>{e(()=>{const r=new M(b.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(e,t){const i=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W7 extends ZT{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=i7(this.wt,e),i=function(r){if(!("targetChange"in r))return re.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Ui(s.readTime):re.min()}(e);return this.listener.Go(t,i)}Qo(e){const t={};t.database=Tm(this.wt),t.addTarget=function(r,s){let o;const a=s.target;return o=km(a)?{documents:o7(r,a)}:{query:a7(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=zT(r,s.resumeToken):s.snapshotVersion.compareTo(re.min())>0&&(o.readTime=md(r,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const i=l7(this.wt,e);i&&(t.labels=i),this.Mo(t)}jo(e){const t={};t.database=Tm(this.wt),t.removeTarget=e,this.Mo(t)}}class K7 extends ZT{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=s7(e.writeResults,e.commitTime),i=Ui(e.commitTime);return this.listener.Jo(i,t)}return Ie(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Tm(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>r7(this.wt,i))};this.Mo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7 extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new M(b.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.bo.ro(e,t,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new M(b.UNKNOWN,r.toString())})}ao(e,t,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ao(e,t,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(b.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class Q7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Dr(t),this.su=!1):U("OnlineStateTracker",t)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(o=>{i.enqueueAndForget(async()=>{wo(this)&&(U("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=J(a);c.lu.add(4),await Cu(c),c._u.set("Unknown"),c.lu.delete(4),await V0(c)}(this))})}),this._u=new Q7(i,r)}}async function V0(n){if(wo(n))for(const e of n.fu)await e(!0)}async function Cu(n){for(const e of n.fu)await e(!1)}function e2(n,e){const t=J(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),A9(t)?x9(t):Qa(t).Co()&&S9(t,e))}function t2(n,e){const t=J(n),i=Qa(t);t.hu.delete(e),i.Co()&&n2(t,e),t.hu.size===0&&(i.Co()?i.ko():wo(t)&&t._u.set("Unknown"))}function S9(n,e){n.wu.Nt(e.targetId),Qa(n).Qo(e)}function n2(n,e){n.wu.Nt(e),Qa(n).jo(e)}function x9(n){n.wu=new XP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Qa(n).start(),n._u.iu()}function A9(n){return wo(n)&&!Qa(n).Do()&&n.hu.size>0}function wo(n){return J(n).lu.size===0}function i2(n){n.wu=void 0}async function X7(n){n.hu.forEach((e,t)=>{S9(n,e)})}async function J7(n,e){i2(n),A9(n)?(n._u.uu(e),x9(n)):n._u.set("Unknown")}async function Z7(n,e,t){if(n._u.set("Online"),e instanceof jT&&e.state===2&&e.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.hu.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.hu.delete(o),i.wu.removeTarget(o))}(n,e)}catch(i){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gd(n,i)}else if(e instanceof Oh?n.wu.Ut(e):e instanceof GT?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(re.min()))try{const i=await XT(n.localStore);t.compareTo(i)>=0&&await function(r,s){const o=r.wu.Yt(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const l=r.hu.get(c);l&&r.hu.set(c,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const c=r.hu.get(a);if(!c)return;r.hu.set(a,c.withResumeToken(Rt.EMPTY_BYTE_STRING,c.snapshotVersion)),n2(r,a);const l=new Ts(c.target,a,1,c.sequenceNumber);S9(r,l)}),r.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(i){U("RemoteStore","Failed to raise snapshot:",i),await gd(n,i)}}async function gd(n,e,t){if(!Eu(e))throw e;n.lu.add(1),await Cu(n),n._u.set("Offline"),t||(t=()=>XT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{U("RemoteStore","Retrying IndexedDB access"),await t(),n.lu.delete(1),await V0(n)})}function r2(n,e){return e().catch(t=>gd(n,t,e))}async function q0(n){const e=J(n),t=Or(e);let i=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;eO(e);)try{const r=await $7(e.localStore,i);if(r===null){e.au.length===0&&t.ko();break}i=r.batchId,tO(e,r)}catch(r){await gd(e,r)}s2(e)&&o2(e)}function eO(n){return wo(n)&&n.au.length<10}function tO(n,e){n.au.push(e);const t=Or(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function s2(n){return wo(n)&&!Or(n).Do()&&n.au.length>0}function o2(n){Or(n).start()}async function nO(n){Or(n).Xo()}async function iO(n){const e=Or(n);for(const t of n.au)e.Ho(t.mutations)}async function rO(n,e,t){const i=n.au.shift(),r=E9.from(i,e,t);await r2(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await q0(n)}async function sO(n,e){e&&Or(n).zo&&await async function(t,i){if(r=i.code,WP(r)&&r!==b.ABORTED){const s=t.au.shift();Or(t).No(),await r2(t,()=>t.remoteSyncer.rejectFailedWrite(s.batchId,i)),await q0(t)}var r}(n,e),s2(n)&&o2(n)}async function Pw(n,e){const t=J(n);t.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");const i=wo(t);t.lu.add(3),await Cu(t),i&&t._u.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),await V0(t)}async function oO(n,e){const t=J(n);e?(t.lu.delete(2),await V0(t)):e||(t.lu.add(2),await Cu(t),t._u.set("Unknown"))}function Qa(n){return n.mu||(n.mu=function(e,t,i){const r=J(e);return r.tu(),new W7(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:X7.bind(null,n),Jr:J7.bind(null,n),Go:Z7.bind(null,n)}),n.fu.push(async e=>{e?(n.mu.No(),A9(n)?x9(n):n._u.set("Unknown")):(await n.mu.stop(),i2(n))})),n.mu}function Or(n){return n.gu||(n.gu=function(e,t,i){const r=J(e);return r.tu(),new K7(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:nO.bind(null,n),Jr:sO.bind(null,n),Yo:iO.bind(null,n),Jo:rO.bind(null,n)}),n.fu.push(async e=>{e?(n.gu.No(),await q0(n)):(await n.gu.stop(),n.au.length>0&&(U("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))})),n.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new R9(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function D9(n,e){if(Dr("AsyncQueue",`${e}: ${n}`),Eu(n))return new M(b.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||B.comparator(t.key,i.key):(t,i)=>B.comparator(t.key,i.key),this.keyedMap=Nc(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.yu=new Xe(B.comparator)}track(e){const t=e.doc.key,i=this.yu.get(t);i?e.type!==0&&i.type===3?this.yu=this.yu.insert(t,e):e.type===3&&i.type!==1?this.yu=this.yu.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.yu=this.yu.remove(t):e.type===1&&i.type===2?this.yu=this.yu.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Y():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,i)=>{e.push(i)}),e}}class ma{constructor(e,t,i,r,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,t,i,r){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new ma(e,t,Yo.emptySet(t),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&L0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.Iu=void 0,this.listeners=[]}}class cO{constructor(){this.queries=new Ha(e=>ST(e),L0),this.onlineState="Unknown",this.Tu=new Set}}async function N9(n,e){const t=J(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new aO),r)try{s.Iu=await t.onListen(i)}catch(o){const a=D9(o,`Initialization of query '${bm(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&O9(t)}async function P9(n,e){const t=J(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return t.queries.delete(i),t.onUnlisten(i)}function lO(n,e){const t=J(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.listeners)a.Au(r)&&(i=!0);o.Iu=r}}i&&O9(t)}function uO(n,e,t){const i=J(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function O9(n){n.Tu.forEach(e=>{e.next()})}class M9{constructor(e,t,i){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ma(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){if(!e.fromCache)return!0;const i=t!=="Offline";return(!this.options.Du||!i)&&(!e.docs.isEmpty()||t==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Su(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.key=e}}class c2{constructor(e){this.key=e}}class hO{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=oe(),this.mutatedKeys=oe(),this.Lu=xT(e),this.Uu=new Yo(this.Lu)}get qu(){return this.Fu}Ku(e,t){const i=t?t.Gu:new Ow,r=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const d=r.get(u),p=k9(this.query,h)?h:null,m=!!d&&this.mutatedKeys.has(d.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;d&&p?d.data.isEqual(p.data)?m!==_&&(i.track({type:3,doc:p}),y=!0):this.Qu(d,p)||(i.track({type:2,doc:p}),y=!0,(c&&this.Lu(p,c)>0||l&&this.Lu(p,l)<0)&&(a=!0)):!d&&p?(i.track({type:0,doc:p}),y=!0):d&&!p&&(i.track({type:1,doc:d}),y=!0,(c||l)&&(a=!0)),y&&(p?(o=o.add(p),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Uu:o,Gu:i,Oi:a,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((l,u)=>function(h,d){const p=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return p(h)-p(d)}(l.type,u.type)||this.Lu(l.doc,u.doc)),this.ju(i);const o=t?this.Wu():[],a=this.Bu.size===0&&this.current?1:0,c=a!==this.$u;return this.$u=a,s.length!==0||c?{snapshot:new ma(this.query,e.Uu,r,s,e.mutatedKeys,a===0,c,!1),zu:o}:{zu:o}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Ow,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=oe(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const t=[];return e.forEach(i=>{this.Bu.has(i)||t.push(new c2(i))}),this.Bu.forEach(i=>{e.has(i)||t.push(new a2(i))}),t}Ju(e){this.Fu=e.ji,this.Bu=oe();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return ma.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class dO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class fO{constructor(e){this.key=e,this.Xu=!1}}class pO{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Ha(a=>ST(a),L0),this.ec=new Map,this.nc=new Set,this.sc=new Xe(B.comparator),this.ic=new Map,this.rc=new I9,this.oc={},this.uc=new Map,this.cc=pa.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function mO(n,e){const t=TO(n);let i,r;const s=t.tc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const o=await U7(t.localStore,Us(e));t.isPrimaryClient&&e2(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await gO(t,e,i,a==="current")}return r}async function gO(n,e,t,i){n.hc=(u,h,d)=>async function(p,m,_,y){let x=m.view.Ku(_);x.Oi&&(x=await Rw(p.localStore,m.query,!1).then(({documents:O})=>m.view.Ku(O,x)));const N=y&&y.targetChanges.get(m.targetId),A=m.view.applyChanges(x,p.isPrimaryClient,N);return Lw(p,m.targetId,A.zu),A.snapshot}(n,u,h,d);const r=await Rw(n.localStore,e,!0),s=new hO(e,r.ji),o=s.Ku(r.documents),a=Tu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline"),c=s.applyChanges(o,n.isPrimaryClient,a);Lw(n,t,c.zu);const l=new dO(e,t,s);return n.tc.set(e,l),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),c.snapshot}async function yO(n,e){const t=J(n),i=t.tc.get(e),r=t.ec.get(i.targetId);if(r.length>1)return t.ec.set(i.targetId,r.filter(s=>!L0(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||await Cm(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),t2(t.remoteStore,i.targetId),Sm(t,i.targetId)}).catch(bu)):(Sm(t,i.targetId),await Cm(t.localStore,i.targetId,!0))}async function _O(n,e,t){const i=CO(n);try{const r=await function(s,o){const a=J(s),c=Qe.now(),l=o.reduce((d,p)=>d.add(p.key),oe());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let p=Hi(),m=oe();return a.Ui.getEntries(d,l).next(_=>{p=_,p.forEach((y,x)=>{x.isValidDocument()||(m=m.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,p)).next(_=>{u=_;const y=[];for(const x of o){const N=GP(x,u.get(x.key).overlayedDocument);N!=null&&y.push(new Qr(x.key,N,ET(N.value.mapValue),ci.exists(!0)))}return a.mutationQueue.addMutationBatch(d,c,y,o)}).next(_=>{h=_;const y=_.applyToLocalDocumentSet(u,m);return a.documentOverlayCache.saveOverlays(d,_.batchId,y)})}).then(()=>({batchId:h.batchId,changes:BT(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let c=s.oc[s.currentUser.toKey()];c||(c=new Xe(me)),c=c.insert(o,a),s.oc[s.currentUser.toKey()]=c}(i,r.batchId,t),await Su(i,r.changes),await q0(i.remoteStore)}catch(r){const s=D9(r,"Failed to persist write");t.reject(s)}}async function l2(n,e){const t=J(n);try{const i=await L7(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.ic.get(s);o&&(Ie(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Xu=!0:r.modifiedDocuments.size>0?Ie(o.Xu):r.removedDocuments.size>0&&(Ie(o.Xu),o.Xu=!1))}),await Su(t,i,e)}catch(i){await bu(i)}}function Mw(n,e,t){const i=J(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.tc.forEach((s,o)=>{const a=o.view.Eu(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=J(s);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(const h of u.listeners)h.Eu(o)&&(c=!0)}),c&&O9(a)}(i.eventManager,e),r.length&&i.Zu.Go(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wO(n,e,t){const i=J(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ic.get(e),s=r&&r.key;if(s){let o=new Xe(B.comparator);o=o.insert(s,Et.newNoDocument(s,re.min()));const a=oe().add(s),c=new U0(re.min(),new Map,new Ye(me),o,a);await l2(i,c),i.sc=i.sc.remove(s),i.ic.delete(e),L9(i)}else await Cm(i.localStore,e,!1).then(()=>Sm(i,e,t)).catch(bu)}async function vO(n,e){const t=J(n),i=e.batch.batchId;try{const r=await M7(t.localStore,e);h2(t,i,null),u2(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Su(t,r)}catch(r){await bu(r)}}async function kO(n,e,t){const i=J(n);try{const r=await function(s,o){const a=J(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a.mutationQueue.lookupMutationBatch(c,o).next(u=>(Ie(u!==null),l=u.keys(),a.mutationQueue.removeMutationBatch(c,u))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>a.localDocuments.getDocuments(c,l))})}(i.localStore,e);h2(i,e,t),u2(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Su(i,r)}catch(r){await bu(r)}}function u2(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function h2(n,e,t){const i=J(n);let r=i.oc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.oc[i.currentUser.toKey()]=r}}function Sm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ec.get(e))n.tc.delete(i),t&&n.Zu.lc(i,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(i=>{n.rc.containsKey(i)||d2(n,i)})}function d2(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);t!==null&&(t2(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),L9(n))}function Lw(n,e,t){for(const i of t)i instanceof a2?(n.rc.addReference(i.key,e),bO(n,i)):i instanceof c2?(U("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,e),n.rc.containsKey(i.key)||d2(n,i.key)):Y()}function bO(n,e){const t=e.key,i=t.path.canonicalString();n.sc.get(t)||n.nc.has(i)||(U("SyncEngine","New document in limbo: "+t),n.nc.add(i),L9(n))}function L9(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new B(Te.fromString(e)),i=n.cc.next();n.ic.set(i,new fO(t)),n.sc=n.sc.insert(t,i),e2(n.remoteStore,new Ts(Us(M0(t.path)),i,2,m9.ot))}}async function Su(n,e,t){const i=J(n),r=[],s=[],o=[];i.tc.isEmpty()||(i.tc.forEach((a,c)=>{o.push(i.hc(c,e,t).then(l=>{if(l){i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),r.push(l);const u=C9.Vi(c.targetId,l);s.push(u)}}))}),await Promise.all(o),i.Zu.Go(r),await async function(a,c){const l=J(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>T.forEach(c,h=>T.forEach(h.Pi,d=>l.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>T.forEach(h.vi,d=>l.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!Eu(u))throw u;U("LocalStore","Failed to update sequence numbers: "+u)}for(const u of c){const h=u.targetId;if(!u.fromCache){const d=l.$i.get(h),p=d.snapshotVersion,m=d.withLastLimboFreeSnapshotVersion(p);l.$i=l.$i.insert(h,m)}}}(i.localStore,s))}async function EO(n,e){const t=J(n);if(!t.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());const i=await YT(t.localStore,e);t.currentUser=e,function(r,s){r.uc.forEach(o=>{o.forEach(a=>{a.reject(new M(b.CANCELLED,s))})}),r.uc.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Su(t,i.Ki)}}function IO(n,e){const t=J(n),i=t.ic.get(e);if(i&&i.Xu)return oe().add(i.key);{let r=oe();const s=t.ec.get(e);if(!s)return r;for(const o of s){const a=t.tc.get(o);r=r.unionWith(a.view.qu)}return r}}function TO(n){const e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=l2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wO.bind(null,e),e.Zu.Go=lO.bind(null,e.eventManager),e.Zu.lc=uO.bind(null,e.eventManager),e}function CO(n){const e=J(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kO.bind(null,e),e}class SO{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=B0(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,t){return null}gc(e,t){return null}wc(e){return O7(this.persistence,new N7,e.initialUser,this.wt)}_c(e){return new R7(T9.Ms,this.wt)}dc(e){return new V7}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class xO{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Mw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=EO.bind(null,this.syncEngine),await oO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new cO}createDatastore(e){const t=B0(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new z7(r));var r;return function(s,o,a,c){return new H7(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>Mw(this.syncEngine,a,0),o=Nw.V()?new Nw:new q7,new Y7(t,i,r,s,o);var t,i,r,s,o}createSyncEngine(e,t){return function(i,r,s,o,a,c,l){const u=new pO(i,r,s,o,a,c);return l&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=J(e);U("RemoteStore","RemoteStore shutting down."),t.lu.add(5),await Cu(t),t.du.shutdown(),t._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=wT.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{U("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(U("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=D9(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function RO(n,e){n.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");const t=await n.getConfiguration();await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await YT(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}async function DO(n,e){n.asyncQueue.verifyOperationInProgress();const t=await NO(n);U("FirestoreClient","Initializing OnlineComponentProvider");const i=await n.getConfiguration();await e.initialize(t,i),n.setCredentialChangeListener(r=>Pw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Pw(e.remoteStore,s)),n.onlineComponents=e}async function NO(n){return n.offlineComponents||(U("FirestoreClient","Using default OfflineComponentProvider"),await RO(n,new SO)),n.offlineComponents}async function f2(n){return n.onlineComponents||(U("FirestoreClient","Using default OnlineComponentProvider"),await DO(n,new xO)),n.onlineComponents}function PO(n){return f2(n).then(e=>e.syncEngine)}async function yd(n){const e=await f2(n),t=e.eventManager;return t.onListen=mO.bind(null,e.syncEngine),t.onUnlisten=yO.bind(null,e.syncEngine),t}function OO(n,e,t={}){const i=new $i;return n.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,c){const l=new F9({next:h=>{s.enqueueAndForget(()=>P9(r,u));const d=h.docs.has(o);!d&&h.fromCache?c.reject(new M(b.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?c.reject(new M(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new M9(M0(o.path),l,{includeMetadataChanges:!0,Du:!0});return N9(r,u)}(await yd(n),n.asyncQueue,e,t,i)),i.promise}function MO(n,e,t={}){const i=new $i;return n.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,c){const l=new F9({next:h=>{s.enqueueAndForget(()=>P9(r,u)),h.fromCache&&a.source==="server"?c.reject(new M(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new M9(o,l,{includeMetadataChanges:!0,Du:!0});return N9(r,u)}(await yd(n),n.asyncQueue,e,t,i)),i.promise}const Fw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n,e,t){if(!t)throw new M(b.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LO(n,e,t,i){if(e===!0&&i===!0)throw new M(b.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $w(n){if(!B.isDocumentKey(n))throw new M(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Uw(n){if(B.isDocumentKey(n))throw new M(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function G0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y()}function li(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new M(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=G0(n);throw new M(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function FO(n,e){if(e<=0)throw new M(b.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){var t;if(e.host===void 0){if(e.ssl!==void 0)throw new M(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,LO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bw({}),this._settingsFrozen=!1,e instanceof da?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new M(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new da(r.options.projectId)}(e))}get app(){if(!this._app)throw new M(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bw(e),e.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new oP;switch(t.type){case"gapi":const i=t.client;return Ie(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new lP(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new M(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fw.get(e);t&&(U("ComponentProvider","Removing Datastore"),Fw.delete(e),t.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Yr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Yr(this.firestore,e,this._query)}}class Ir extends Yr{constructor(e,t,i){super(e,t,M0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new B(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function kl(n,e,...t){if(n=k(n),p2("collection","path",e),n instanceof $9){const i=Te.fromString(e,...t);return Uw(i),new Ir(n,null,i)}{if(!(n instanceof Jt||n instanceof Ir))throw new M(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Te.fromString(e,...t));return Uw(i),new Ir(n.firestore,null,i)}}function j0(n,e,...t){if(n=k(n),arguments.length===1&&(e=wT.I()),p2("doc","path",e),n instanceof $9){const i=Te.fromString(e,...t);return $w(i),new Jt(n,null,new B(i))}{if(!(n instanceof Jt||n instanceof Ir))throw new M(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Te.fromString(e,...t));return $w(i),new Jt(n.firestore,n instanceof Ir?n.converter:null,new B(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new JT(this,"async_queue_retry"),this.Kc=()=>{const t=gp();t&&U("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=gp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=gp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new $i;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}async jc(){if(this.Mc.length!==0){try{await this.Mc[0](),this.Mc.shift(),this.So.reset()}catch(e){if(!Eu(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Mc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(i=>{this.Bc=i,this.Lc=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(i);throw Dr("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Lc=!1,i))));return this.Oc=t,t}enqueueAfterDelay(e,t,i){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const r=R9.createAndSchedule(this,e,t,i,s=>this.Wc(s));return this.$c.push(r),r}Gc(){this.Bc&&Y()}verifyOperationInProgress(){}async zc(){let e;do e=this.Oc,await e;while(e!==this.Oc)}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Vw(n){return function(e,t){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of t)if(r in i&&typeof i[r]=="function")return!0;return!1}(n,["next","error","complete"])}class Bs extends $9{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new $O,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||m2(this),this._firestoreClient.terminate()}}function UO(n=l0()){return tr(n,"firestore").getImmediate()}function z0(n){return n._firestoreClient||m2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function m2(n){var e;const t=n._freezeSettings(),i=function(r,s,o,a){return new vP(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,t);n._firestoreClient=new AO(n._authCredentials,n._appCheckCredentials,n._queue,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ga(Rt.fromBase64String(e))}catch(t){throw new M(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ga(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=/^__.*__$/;class VO{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}class g2{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function y2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class V9{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.wt=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new V9(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.sa(e),r}ia(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.Xc(),r}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return _d(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if(y2(this.Zc)&&BO.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class qO{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=i||B0(e)}aa(e,t,i,r=!1){return new V9({Zc:e,methodName:t,ca:i,path:Ot.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function q9(n){const e=n._freezeSettings(),t=B0(n._databaseId);return new qO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GO(n,e,t,i,r,s={}){const o=n.aa(s.merge||s.mergeFields?2:0,e,t,r);G9("Data must be an object, but it was:",o,i);const a=_2(i,o);let c,l;if(s.merge)c=new Rn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=xm(e,h,t);if(!o.contains(d))throw new M(b.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);v2(u,d)||u.push(d)}c=new Rn(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new VO(new an(a),c,l)}class K0 extends U9{_toFieldTransform(e){if(e.Zc!==2)throw e.Zc===1?e.oa(`${this._methodName}() can only appear at the top level of your update data`):e.oa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof K0}}function jO(n,e,t,i){const r=n.aa(1,e,t);G9("Data must be an object, but it was:",r,i);const s=[],o=an.empty();_o(i,(c,l)=>{const u=j9(e,c,t);l=k(l);const h=r.ia(u);if(l instanceof K0)s.push(u);else{const d=xu(l,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new Rn(s);return new g2(o,a,r.fieldTransforms)}function zO(n,e,t,i,r,s){const o=n.aa(1,e,t),a=[xm(e,i,t)],c=[r];if(s.length%2!=0)throw new M(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(xm(e,s[d])),c.push(s[d+1]);const l=[],u=an.empty();for(let d=a.length-1;d>=0;--d)if(!v2(l,a[d])){const p=a[d];let m=c[d];m=k(m);const _=o.ia(p);if(m instanceof K0)l.push(p);else{const y=xu(m,_);y!=null&&(l.push(p),u.set(p,y))}}const h=new Rn(l);return new g2(u,h,o.fieldTransforms)}function WO(n,e,t,i=!1){return xu(t,n.aa(i?4:3,e))}function xu(n,e){if(w2(n=k(n)))return G9("Unsupported field value:",e,n),_2(n,e);if(n instanceof U9)return function(t,i){if(!y2(i.Zc))throw i.oa(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.oa(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const o of t){let a=xu(o,i.ra(s));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if((t=k(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return FP(i.wt,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const r=Qe.fromDate(t);return{timestampValue:md(i.wt,r)}}if(t instanceof Qe){const r=new Qe(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:md(i.wt,r)}}if(t instanceof B9)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ga)return{bytesValue:zT(i.wt,t._byteString)};if(t instanceof Jt){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:b9(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.oa(`Unsupported field value: ${G0(t)}`)}(n,e)}function _2(n,e){const t={};return vT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(n,(i,r)=>{const s=xu(r,e.ea(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function w2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof B9||n instanceof ga||n instanceof Jt||n instanceof U9)}function G9(n,e,t){if(!w2(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const i=G0(t);throw i==="an object"?e.oa(n+" a custom object"):e.oa(n+" "+i)}}function xm(n,e,t){if((e=k(e))instanceof W0)return e._internalPath;if(typeof e=="string")return j9(n,e);throw _d("Field path arguments must be of type string or ",n,!1,void 0,t)}const KO=new RegExp("[~\\*/\\[\\]]");function j9(n,e,t){if(e.search(KO)>=0)throw _d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new W0(...e.split("."))._internalPath}catch{throw _d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _d(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new M(b.INVALID_ARGUMENT,a+n+c)}function v2(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(H0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HO extends k2{data(){return super.data()}}function H0(n,e){return typeof e=="string"?j9(n,e):e instanceof W0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class b2 extends k2{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(H0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Mh extends b2{data(e={}){return super.data(e)}}class E2{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Mh(this._firestore,this._userDataWriter,i.key,i,new Pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new M(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new Mh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Pc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new Mh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Pc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,l=-1;return o.type!==0&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),l=s.indexOf(o.doc.key)),{type:QO(o.type),doc:a,oldIndex:c,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new M(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z9{}function wd(n,...e){for(const t of e)n=t._apply(n);return n}class YO extends z9{constructor(e,t,i){super(),this.fa=e,this.da=t,this._a=i,this.type="where"}_apply(e){const t=q9(e.firestore),i=function(r,s,o,a,c,l,u){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new M(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Gw(u,l);const p=[];for(const m of u)p.push(qw(a,r,m));h={arrayValue:{values:p}}}else h=qw(a,r,u)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Gw(u,l),h=WO(o,s,u,l==="in"||l==="not-in");const d=Qt.create(c,l,h);return function(p,m){if(m.ht()){const y=v9(p);if(y!==null&&!y.isEqual(m.field))throw new M(b.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${y.toString()}' and '${m.field.toString()}'`);const x=w9(p);x!==null&&C2(p,m.field,x)}const _=function(y,x){for(const N of y.filters)if(x.indexOf(N.op)>=0)return N.op;return null}(p,function(y){switch(y){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(m.op));if(_!==null)throw _===m.op?new M(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${m.op.toString()}' filter.`):new M(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${m.op.toString()}' filters with '${_.toString()}' filters.`)}(r,d),d}(e._query,"where",t,e.firestore._databaseId,this.fa,this.da,this._a);return new Yr(e.firestore,e.converter,function(r,s){const o=r.filters.concat([s]);return new Ka(r.path,r.collectionGroup,r.explicitOrderBy.slice(),o,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}function XO(n,e,t){const i=e,r=H0("where",n);return new YO(r,i,t)}class JO extends z9{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(i.startAt!==null)throw new M(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new M(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Qo(r,s);return function(a,c){if(w9(a)===null){const l=v9(a);l!==null&&C2(a,l,c.field)}}(i,o),o}(e._query,this.fa,this.wa);return new Yr(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Ka(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function W9(n,e="asc"){const t=e,i=H0("orderBy",n);return new JO(i,t)}class ZO extends z9{constructor(e,t,i){super(),this.type=e,this.ma=t,this.ga=i}_apply(e){return new Yr(e.firestore,e.converter,CT(e._query,this.ma,this.ga))}}function T2(n){return FO("limit",n),new ZO("limit",n,"F")}function qw(n,e,t){if(typeof(t=k(t))=="string"){if(t==="")throw new M(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TT(e)&&t.indexOf("/")!==-1)throw new M(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Te.fromString(t));if(!B.isDocumentKey(i))throw new M(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gw(n,new B(i))}if(t instanceof Jt)return gw(n,t._key);throw new M(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${G0(t)}.`)}function Gw(n,e){if(!Array.isArray(n)||n.length===0)throw new M(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new M(b.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function C2(n,e,t){if(!t.isEqual(e))throw new M(b.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{convertValue(e,t="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Y()}}convertObject(e,t){const i={};return _o(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new B9(qe(e.latitude),qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=bT(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const t=Pr(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Te.fromString(e);Ie(QT(i));const r=new da(i.get(1),i.get(3)),s=new B(i.popFirst(5));return r.isEqual(t)||Dr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n){n=li(n,Jt);const e=li(n.firestore,Bs);return OO(z0(e),n._key).then(t=>R2(e,n,t))}class K9 extends eM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function nM(n){n=li(n,Yr);const e=li(n.firestore,Bs),t=z0(e),i=new K9(e);return I2(n._query),MO(t,n._query).then(r=>new E2(e,i,n,r))}function iM(n,e,t,...i){n=li(n,Jt);const r=li(n.firestore,Bs),s=q9(r);let o;return o=typeof(e=k(e))=="string"||e instanceof W0?zO(s,"updateDoc",n._key,e,t,i):jO(s,"updateDoc",n._key,e),A2(r,[o.toMutation(n._key,ci.exists(!0))])}function x2(n,e){const t=li(n.firestore,Bs),i=j0(n),r=tM(n.converter,e);return A2(t,[GO(q9(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,ci.exists(!1))]).then(()=>i)}function rM(n,...e){var t,i,r;n=k(n);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Vw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Vw(e[o])){const h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let c,l,u;if(n instanceof Jt)l=li(n.firestore,Bs),u=M0(n._key.path),c={next:h=>{e[o]&&e[o](R2(l,n,h))},error:e[o+1],complete:e[o+2]};else{const h=li(n,Yr);l=li(h.firestore,Bs),u=h._query;const d=new K9(l);c={next:p=>{e[o]&&e[o](new E2(l,d,h,p))},error:e[o+1],complete:e[o+2]},I2(n._query)}return function(h,d,p,m){const _=new F9(m),y=new M9(d,_,p);return h.asyncQueue.enqueueAndForget(async()=>N9(await yd(h),y)),()=>{_.Tc(),h.asyncQueue.enqueueAndForget(async()=>P9(await yd(h),y))}}(z0(l),u,a,c)}function A2(n,e){return function(t,i){const r=new $i;return t.asyncQueue.enqueueAndForget(async()=>_O(await PO(t),i,r)),r.promise}(z0(n),e)}function R2(n,e,t){const i=t.docs.get(e._key),r=new K9(n);return new b2(n,r,e._key,i,new Pc(t.hasPendingWrites,t.fromCache),e.converter)}(function(n,e=!0){(function(t){Wa=t})(fn),Ue(new fe("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=new Bs(r,new aP(t.getProvider("auth-internal")),new hP(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC")),_e(uw,"3.4.12",n),_e(uw,"3.4.12","esm2017")})();var sM="firebase",oM="9.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_e(sM,oM,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="firebasestorage.googleapis.com",N2="storageBucket",aM=2*60*1e3,cM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le extends Ce{constructor(e,t){super(yp(e),`Firebase Storage: ${t} (${yp(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Le.prototype)}_codeEquals(e){return yp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function yp(n){return"storage/"+n}function H9(){const n="An unknown error occurred, please check the error payload for server response.";return new Le("unknown",n)}function lM(n){return new Le("object-not-found","Object '"+n+"' does not exist.")}function uM(n){return new Le("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hM(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Le("unauthenticated",n)}function dM(){return new Le("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function fM(n){return new Le("unauthorized","User does not have permission to access '"+n+"'.")}function pM(){return new Le("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function P2(){return new Le("canceled","User canceled the upload/download.")}function mM(n){return new Le("invalid-url","Invalid URL '"+n+"'.")}function gM(n){return new Le("invalid-default-bucket","Invalid default bucket '"+n+"'.")}function yM(){return new Le("no-default-bucket","No default bucket found. Did you set the '"+N2+"' property when initializing the app?")}function O2(){return new Le("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function _M(){return new Le("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function wM(){return new Le("no-download-url","The given file does not have any download URLs.")}function Am(n){return new Le("invalid-argument",n)}function M2(){return new Le("app-deleted","The Firebase app was deleted.")}function vM(n){return new Le("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jc(n,e){return new Le("invalid-format","String does not match format '"+n+"': "+e)}function pc(n){throw new Le("internal-error","Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=yn.makeFromUrl(e,t)}catch{return new yn(e,"")}if(i.path==="")return i;throw gM(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function l(O){O.path_=decodeURIComponent(O.path)}const u="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${u}/b/${r}/o${d}`,"i"),m={bucket:1,path:3},_=t===D2?"(?:storage.googleapis.com|storage.cloud.google.com)":t,y="([^?#]*)",x=new RegExp(`^https?://${_}/${r}/${y}`,"i"),A=[{regex:a,indices:c,postModify:s},{regex:p,indices:m,postModify:l},{regex:x,indices:{bucket:1,path:2},postModify:l}];for(let O=0;O<A.length;O++){const W=A[O],V=W.regex.exec(e);if(V){const $=V[W.indices.bucket];let pe=V[W.indices.path];pe||(pe=""),i=new yn($,pe),W.postModify(i);break}}if(i==null)throw mM(e);return i}}class kM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...y){l||(l=!0,e.apply(null,y))}function h(y){r=setTimeout(()=>{r=null,n(p,c())},y)}function d(){s&&clearTimeout(s)}function p(y,...x){if(l){d();return}if(y){d(),u.call(null,y,...x);return}if(c()||o){d(),u.call(null,y,...x);return}i<64&&(i*=2);let A;a===1?(a=2,A=0):A=(i+Math.random())*1e3,h(A)}let m=!1;function _(y){m||(m=!0,d(),!l&&(r!==null?(y||(a=2),clearTimeout(r),h(0)):y||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},t),_}function EM(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(n){return n!==void 0}function TM(n){return typeof n=="function"}function CM(n){return typeof n=="object"&&!Array.isArray(n)}function Q0(n){return typeof n=="string"||n instanceof String}function jw(n){return Q9()&&n instanceof Blob}function Q9(){return typeof Blob!="undefined"}function zw(n,e,t,i){if(i<e)throw Am(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Am(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function L2(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cs;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Cs||(Cs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,t,i,r,s,o,a,c,l,u,h){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,p)=>{this.resolve_=d,this.reject_=p,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new dh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Cs.NO_ERROR,c=s.getStatus();if(!a||this.isRetryStatusCode_(c)){const u=s.getErrorCode()===Cs.ABORT;i(!1,new dh(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;i(!0,new dh(l,s))})},t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());IM(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=H9();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(r.canceled){const c=this.appDelete_?M2():P2();o(c)}else{const c=pM();o(c)}};this.canceled_?t(!1,new dh(!1,null,!0)):this.backoffId_=bM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&EM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=this.additionalRetryCodes_.indexOf(e)!==-1;return t||r||s}}class dh{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function xM(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function AM(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function RM(n,e){e&&(n["X-Firebase-GMPID"]=e)}function DM(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function NM(n,e,t,i,r,s){const o=L2(n.urlParams),a=n.url+o,c=Object.assign({},n.headers);return RM(c,e),xM(c,t),AM(c,s),DM(c,i),new SM(a,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function OM(...n){const e=PM();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(Q9())return new Blob(n);throw new Le("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function MM(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(n){return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _p{constructor(e,t){this.data=e,this.contentType=t||null}}function FM(n,e){switch(n){case ni.RAW:return new _p(F2(e));case ni.BASE64:case ni.BASE64URL:return new _p($2(n,e));case ni.DATA_URL:return new _p(UM(e),BM(e))}throw H9()}function F2(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=i,o=n.charCodeAt(++t);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function $M(n){let e;try{e=decodeURIComponent(n)}catch{throw jc(ni.DATA_URL,"Malformed data URL.")}return F2(e)}function $2(n,e){switch(n){case ni.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw jc(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ni.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw jc(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=LM(e)}catch{throw jc(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class U2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw jc(ni.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=VM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function UM(n){const e=new U2(n);return e.base64?$2(ni.BASE64,e.rest):$M(e.rest)}function BM(n){return new U2(n).contentType}function VM(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){let i=0,r="";jw(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(jw(this.data_)){const i=this.data_,r=MM(i,e,t);return r===null?null:new gr(r)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new gr(i,!0)}}static getBlob(...e){if(Q9()){const t=e.map(i=>i instanceof gr?i.data_:i);return new gr(OM.apply(null,t))}else{const t=e.map(o=>Q0(o)?FM(ni.RAW,o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new gr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){let e;try{e=JSON.parse(n)}catch{return null}return CM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function GM(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function V2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(n,e){return e}class Bt{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||jM}}let fh=null;function zM(n){return!Q0(n)||n.length<2?n:V2(n)}function q2(){if(fh)return fh;const n=[];n.push(new Bt("bucket")),n.push(new Bt("generation")),n.push(new Bt("metageneration")),n.push(new Bt("name","fullPath",!0));function e(s,o){return zM(o)}const t=new Bt("name");t.xform=e,n.push(t);function i(s,o){return o!==void 0?Number(o):o}const r=new Bt("size");return r.xform=i,n.push(r),n.push(new Bt("timeCreated")),n.push(new Bt("updated")),n.push(new Bt("md5Hash",null,!0)),n.push(new Bt("cacheControl",null,!0)),n.push(new Bt("contentDisposition",null,!0)),n.push(new Bt("contentEncoding",null,!0)),n.push(new Bt("contentLanguage",null,!0)),n.push(new Bt("contentType",null,!0)),n.push(new Bt("metadata","customMetadata",!0)),fh=n,fh}function WM(n,e){function t(){const i=n.bucket,r=n.fullPath,s=new yn(i,r);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function KM(n,e,t){const i={};i.type="file";const r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,e[o.server])}return WM(i,n),i}function G2(n,e,t){const i=B2(e);return i===null?null:KM(n,i,t)}function HM(n,e,t,i){const r=B2(e);if(r===null||!Q0(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const u=n.bucket,h=n.fullPath,d="/b/"+o(u)+"/o/"+o(h),p=Au(d,t,i),m=L2({alt:"media",token:l});return p+m})[0]}function j2(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class Ya{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(n){if(!n)throw H9()}function Y9(n,e){function t(i,r){const s=G2(n,r,e);return Bi(s!==null),s}return t}function QM(n,e){function t(i,r){const s=G2(n,r,e);return Bi(s!==null),HM(s,r,n.host,n._protocol)}return t}function Ru(n){function e(t,i){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=dM():r=hM():t.getStatus()===402?r=uM(n.bucket):t.getStatus()===403?r=fM(n.path):r=i,r.serverResponse=i.serverResponse,r}return e}function z2(n){const e=Ru(n);function t(i,r){let s=e(i,r);return i.getStatus()===404&&(s=lM(n.path)),s.serverResponse=r.serverResponse,s}return t}function YM(n,e,t){const i=e.fullServerUrl(),r=Au(i,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new Ya(r,s,Y9(n,t),o);return a.errorHandler=z2(e),a}function XM(n,e,t){const i=e.fullServerUrl(),r=Au(i,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new Ya(r,s,QM(n,t),o);return a.errorHandler=z2(e),a}function JM(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function W2(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=JM(null,e)),i}function ZM(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let A="";for(let O=0;O<2;O++)A=A+Math.random().toString().slice(2);return A}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=W2(e,i,r),u=j2(l,t),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+c+"--",p=gr.getBlob(h,i,d);if(p===null)throw O2();const m={name:l.fullPath},_=Au(s,n.host,n._protocol),y="POST",x=n.maxUploadRetryTime,N=new Ya(_,y,Y9(n,t),x);return N.urlParams=m,N.headers=o,N.body=p.uploadData(),N.errorHandler=Ru(e),N}class vd{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function X9(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Bi(!1)}return Bi(!!t&&(e||["active"]).indexOf(t)!==-1),t}function eL(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o=W2(e,i,r),a={name:o.fullPath},c=Au(s,n.host,n._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=j2(o,t),d=n.maxUploadRetryTime;function p(_){X9(_);let y;try{y=_.getResponseHeader("X-Goog-Upload-URL")}catch{Bi(!1)}return Bi(Q0(y)),y}const m=new Ya(c,l,p,d);return m.urlParams=a,m.headers=u,m.body=h,m.errorHandler=Ru(e),m}function tL(n,e,t,i){const r={"X-Goog-Upload-Command":"query"};function s(l){const u=X9(l,["active","final"]);let h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Bi(!1)}h||Bi(!1);const d=Number(h);return Bi(!isNaN(d)),new vd(d,i.size(),u==="final")}const o="POST",a=n.maxUploadRetryTime,c=new Ya(t,o,s,a);return c.headers=r,c.errorHandler=Ru(e),c}const Ww=256*1024;function nL(n,e,t,i,r,s,o,a){const c=new vd(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=i.size()),i.size()!==c.total)throw _M();const l=c.total-c.current;let u=l;r>0&&(u=Math.min(u,r));const h=c.current,d=h+u,m={"X-Goog-Upload-Command":u===l?"upload, finalize":"upload","X-Goog-Upload-Offset":`${c.current}`},_=i.slice(h,d);if(_===null)throw O2();function y(O,W){const V=X9(O,["active","final"]),$=c.current+u,pe=i.size();let we;return V==="final"?we=Y9(e,s)(O,W):we=null,new vd($,pe,V==="final",we)}const x="POST",N=e.maxUploadRetryTime,A=new Ya(t,x,y,N);return A.headers=m,A.body=_.uploadData(),A.progressCallback=a||null,A.errorHandler=Ru(n),A}const rn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wp(n){switch(n){case"running":case"pausing":case"canceling":return rn.RUNNING;case"paused":return rn.PAUSED;case"success":return rn.SUCCESS;case"canceled":return rn.CANCELED;case"error":return rn.ERROR;default:return rn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,t,i){if(TM(e)||t!=null||i!=null)this.next=e,this.error=t!=null?t:void 0,this.complete=i!=null?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class rL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw pc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sL extends rL{initXhr(){this.xhr_.responseType="text"}}function $o(){return new sL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=q2(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=eL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,$o,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=tL(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,$o,t,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ww*this._chunkMultiplier,t=new vd(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=nL(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const a=this._ref.storage._makeRequest(o,$o,r,s);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ww*this._chunkMultiplier<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=YM(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,$o,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=ZM(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,$o,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=P2(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=wp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new iL(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(wp(this._state)){case rn.SUCCESS:Do(this._resolve.bind(null,this.snapshot))();break;case rn.CANCELED:case rn.ERROR:const t=this._reject;Do(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(wp(this._state)){case rn.RUNNING:case rn.PAUSED:e.next&&Do(e.next.bind(e,this.snapshot))();break;case rn.SUCCESS:e.complete&&Do(e.complete.bind(e))();break;case rn.CANCELED:case rn.ERROR:e.error&&Do(e.error.bind(e,this._error))();break;default:e.error&&Do(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t){this._service=e,t instanceof yn?this._location=t:this._location=yn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vs(e,t)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return V2(this._location.path)}get storage(){return this._service}get parent(){const e=qM(this._location.path);if(e===null)return null;const t=new yn(this._location.bucket,e);return new Vs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw vM(e)}}function aL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new oL(n,new gr(e),t)}function cL(n){n._throwIfRoot("getDownloadURL");const e=XM(n.storage,n._location,q2());return n.storage.makeRequestWithTokens(e,$o).then(t=>{if(t===null)throw wM();return t})}function lL(n,e){const t=GM(n._location.path,e),i=new yn(n._location.bucket,t);return new Vs(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n){return/^[A-Za-z]+:\/\//.test(n)}function hL(n,e){return new Vs(n,e)}function K2(n,e){if(n instanceof J9){const t=n;if(t._bucket==null)throw yM();const i=new Vs(t,t._bucket);return e!=null?K2(i,e):i}else return e!==void 0?lL(n,e):n}function dL(n,e){if(e&&uL(e)){if(n instanceof J9)return hL(n,e);throw Am("To use ref(service, url), the first argument must be a Storage instance.")}else return K2(n,e)}function Kw(n,e){const t=e==null?void 0:e[N2];return t==null?null:yn.makeFromBucketSpec(t,n)}class J9{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=D2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aM,this._maxUploadRetryTime=cM,this._requests=new Set,r!=null?this._bucket=yn.makeFromBucketSpec(r,this._host):this._bucket=Kw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=Kw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vs(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new kM(M2());{const s=NM(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()}}const Hw="@firebase/storage",Qw="0.9.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="storage";function Nse(n,e,t){return n=k(n),aL(n,e,t)}function Pse(n){return n=k(n),cL(n)}function Ose(n,e){return n=k(n),dL(n,e)}function fL(n=l0(),e){return n=k(n),tr(n,H2).getImmediate({identifier:e})}function pL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new J9(t,i,r,e,fn)}function mL(){Ue(new fe(H2,pL,"PUBLIC").setMultipleInstances(!0)),_e(Hw,Qw,""),_e(Hw,Qw,"esm2017")}mL();const gL={apiKey:"AIzaSyDrAEizOXHcCXYrQa96w6TxfddOS2Yb0tU",authDomain:"gdsc-dju.firebaseapp.com",databaseURL:"https://gdsc-dju-default-rtdb.firebaseio.com",projectId:"gdsc-dju",storageBucket:"gdsc-dju.appspot.com",messagingSenderId:"487063212251",appId:"1:487063212251:web:82d233e5e10f2b0aca3cfe",measurementId:"G-10NGEVTBHD"},Q2=jR(gL),Mse=fL(Q2),Mr=UO(Q2),Y0=r8();new xi;const Yw=()=>{const n=Fa(),[e,t]=He(""),[i,r]=He(""),[s,o]=He(""),a=u=>{u.key==="Enter"&&c()},c=()=>{try{zD(Y0,i,e).then(u=>{u.user&&n("/admin")})}catch(u){switch(u){case"auth/email-already-in-use":return o("\uC774\uBBF8 \uC0AC\uC6A9 \uC911\uC778 \uC774\uBA54\uC77C\uC785\uB2C8\uB2E4.");case"auth/invalid-email":return o("\uD574\uB2F9 \uC774\uBA54\uC77C \uC8FC\uC18C\uB85C \uB4F1\uB85D\uB41C \uACC4\uC815\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");case"operation-not-allowed":return o("\uC774\uBA54\uC77C \uAC00\uC785\uC774 \uC911\uC9C0\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");case"auth/weak-password":return o("\uBE44\uBC00\uBC88\uD638\uB97C 6\uC790\uB9AC \uC774\uC0C1 \uC785\uB825\uD558\uC138\uC694.");case"auth/user-not-found":return o("\uC62C\uBC14\uB974\uC9C0 \uC54A\uC740 \uC720\uC800\uC815\uBCF4\uC785\uB2C8\uB2E4.");case"auth/wrong-password":return o("\uC62C\uBC14\uB974\uC9C0 \uC54A\uC740 \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4.")}}},l=u=>{const{target:{name:h,value:d}}=u;h==="email"?r(d):h==="password"&&t(d)};return R(h6,{children:[f(d6,{children:f(f6,{children:f(O6,{})})}),f(p6,{children:R(m6,{children:[R(rs,{align:"center",children:[f(g6,{src:d0}),f(R_,{border:"bold",children:"GDSC"}),f(R_,{children:"Daejin Univ."})]}),f(rs,{align:"center",children:f(v6,{children:"\uB85C\uADF8\uC778"})}),R(rs,{direction:"column",children:[f(x_,{children:"\uC774\uBA54\uC77C \uC8FC\uC18C"}),f(A_,{type:"email",name:"email",onKeyPress:a,onChange:l,placeholder:"gdsc@gmail.com"})]}),R(rs,{direction:"column",children:[f(x_,{children:"\uBE44\uBC00\uBC88\uD638"}),f(A_,{type:"password",name:"password",onKeyPress:a,onChange:l})]}),f(y6,{children:s}),f(_6,{children:f(w6,{onClick:()=>{c()},children:"\uB85C\uADF8\uC778"})}),R(rs,{align:"center",children:[f(D_,{}),f(k6,{children:"\uB610\uB294"}),f(D_,{})]}),f(rs,{children:f(yL,{})}),f(rs,{children:f(_L,{})})]})})]})},yL=()=>R(SE,{children:[f(xE,{src:b6}),f(Kh,{weight:"bold",children:"Google"}),f(Kh,{children:"\uB85C \uACC4\uC18D"})]}),_L=()=>R(SE,{children:[f(xE,{src:E6}),f(Kh,{weight:"bold",children:"Github"}),f(Kh,{children:"\uB85C \uACC4\uC18D"})]}),wL=()=>R(dE,{children:[f(Bo,{path:"/*",element:f(Yw,{})}),f(Bo,{path:"/in",element:f(Yw,{})})]}),vL=g(ee.h1)`
  font-size: ${n=>n.theme.fontSize.h2};
  font-weight: 800;
  color: ${n=>n.theme.colors.grey800};
  word-break: keep-all;
  margin-bottom: 10px;
  @media (max-width: ${n=>n.theme.windowSize.tablet}px) {
    font-size: ${n=>n.theme.fontSize.h2};
  }
  @media (max-width: 500px) {
    font-size: ${n=>n.theme.fontSize.h3};
  }
`,Lse=g(ee.h2)`
  font-size: 1.7rem;
  font-weight: 400;
  color: ${n=>n.theme.colors.grey600};
  margin-bottom: 10px;
  @media (max-width: 500px) {
    font-size: 1.6rem;
  }
`,Fse=g(ee.h3)`
  font-size: ${({theme:n})=>n.fontSize.h6};
  font-weight: 700;
  color: ${n=>n.theme.colors.grey800};
  margin-bottom: 10px;
  @media (max-width: 500px) {
    font-size: ${({theme:n})=>n.fontSize.h6};
  }
`,kL=g(ee.p)`
  font-size: ${({theme:n})=>n.fontSize.body1};
  color: ${n=>n.theme.colors.grey800};
  padding-bottom: 20px;
  line-height: 1.5;
`,bL=g.div`
  position: relative;
  display: flex;
  min-height: calc(100vh - 160px);
  min-width: 100vw;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`,EL=g.div`
  position: absolute;
  display: flex;
  align-items: center;
  flex-direction: column;
  top: 200px;
  max-width: 500px;
  min-width: 370px;
  padding: 0 20px;
`,IL=0,TL=60,CL="5.1.20",SL=[{id:"precomp_1",layers:[{ty:4,nm:"mobil-01",ip:0,st:0,ind:15,hix:17,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[8.77850341796875,18.371490478515625,0]},p:{s:!0,x:{a:0,k:1202.935},y:{a:0,k:357.911}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[769.249,285.846],[769.198,276.024],[770.954,273.276],[772.9129999999999,274.802],[773.1679999999999,282.79200000000003],[773.6509999999998,296.533],[773.9819999999999,308.492],[771.6919999999999,310.019],[770.1649999999998,307.88100000000003],[764.9749999999998,309.61100000000005],[758.7909999999998,306.761],[756.4249999999998,299.738],[758.1299999999999,291.926],[763.4469999999999,286.71],[767.7729999999999,285.743]],i:[[-.4759999999999991,-.06700000000000728],[0,0],[-1.1709999999999354,0],[-.13599999999996726,-1.016999999999996],[-.10199999999997544,-4.886000000000024],[-.2199999999999136,-4.274999999999977],[0,-3.6970000000000027],[1.5259999999999536,0],[0,1.4249999999999545],[2.00100000000009,0],[1.5789999999999509,1.900000000000034],[0,2.782000000000039],[-1.1380000000000337,2.4259999999999877],[-2.408999999999992,1.052000000000021],[-1.3910000000000764,0]],o:[[0,0],[0,-1.8319999999999936],[1.1709999999999354,0],[.06799999999998363,.4409999999999741],[.10199999999997544,4.884999999999991],[.2199999999999136,4.274999999999977],[0,1.0179999999999723],[-1.0190000000000055,0],[-1.4589999999999463,1.1539999999999964],[-2.544999999999959,0],[-1.5769999999999982,-1.899000000000001],[0,-2.7819999999999823],[1.1359999999999673,-2.4250000000000114],[1.4930000000000518,-.6440000000000055],[.5090000000001282,.0020000000000095497]]}}},{ty:"sh",ks:{a:0,k:{c:!0,v:[[769.529,292.793],[768.638,291.11400000000003],[767.543,290.40200000000004],[766.144,290.27500000000003],[764.16,290.886],[762.1759999999999,292.87],[760.5469999999999,298.646],[761.7429999999999,303.583],[765.1519999999999,305.49100000000004],[768.6379999999999,303.30300000000005],[769.91,297.70500000000004]],i:[[.2540000000000191,.7300000000000182],[.3389999999999418,.38999999999998636],[.38999999999998636,.08499999999997954],[.5430000000000064,0],[.7800000000000864,-.40699999999998226],[.54200000000003,-.9159999999999968],[0,-2.018000000000029],[-.7980000000000018,-1.2730000000000246],[-1.4750000000000227,0],[-.8479999999999563,1.4590000000000032],[0,2.2730000000000246]],o:[[-.25499999999999545,-.728999999999985],[-.34000000000003183,-.38999999999998636],[-.38999999999998636,-.08400000000000318],[-.5430000000000064,0],[-.7809999999999491,.40699999999998226],[-1.086999999999989,1.8330000000000268],[0,2.0190000000000055],[.7970000000000255,1.2719999999999914],[1.4750000000000227,0],[.8479999999999563,-1.4580000000000268],[.0009999999999763531,-2.545000000000016]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1697.959,-612.815]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:14,hix:16,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[8.62646484375,12.239501953125,0]},p:{s:!0,x:{a:0,k:1181.816},y:{a:0,k:363.739}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[736.018,308.086],[735.457,287.42400000000004],[736.119,285.84600000000006],[737.442,285.23600000000005],[739.325,286.61000000000007],[739.528,289.4600000000001],[746.399,285.8470000000001],[752.71,300.2490000000001],[752.71,304.2440000000001],[752.404,308.13700000000006],[750.216,309.66400000000004],[748.994,308.03600000000006],[749.0450000000001,305.18600000000004],[748.6640000000001,297.12000000000006],[747.926,293.68500000000006],[745.1270000000001,290.93700000000007],[741.565,292.76900000000006],[740.2420000000001,297.4510000000001],[739.8860000000001,307.47600000000006],[739.1220000000001,309.1050000000001],[737.2900000000001,309.7150000000001]],i:[[0,1.0860000000000127],[0,0],[-.4410000000000309,.4079999999999586],[-.4410000000000309,0],[-.17000000000007276,-.9159999999999968],[0,-.9840000000000373],[-2.7479999999999336,0],[0,-9.600999999999999],[0,-1.781000000000006],[.20300000000008822,-.8139999999999645],[1.2210000000000036,0],[0,1.0860000000000127],[0,0],[.2540000000000191,1.4419999999999504],[.23700000000008004,.8489999999999895],[1.2889999999999873,0],[.6770000000000209,-1.2210000000000036],[.1349999999999909,-1.7980000000000018],[0,-3.526999999999987],[.5099999999999909,-.4070000000000391],[.7129999999999654,0]],o:[[0,0],[0,-.6440000000000055],[.44000000000005457,-.40699999999998226],[1.0850000000000364,0],[.1349999999999909,.9159999999999968],[1.8319999999999936,-2.4080000000000155],[4.206000000000017,0],[0,.8829999999999814],[0,1.781000000000006],[-.2380000000000564,1.0179999999999723],[-.8139999999999645,0],[0,0],[0,-3.9350000000000023],[-.25499999999999545,-1.440999999999974],[-.5769999999999982,-1.8319999999999936],[-1.6970000000000027,0],[-.7469999999999573,1.322999999999979],[-.2380000000000564,3.1549999999999727],[0,.6789999999999736],[-.5090000000000146,.40699999999998226],[-.8490000000000464,-.00100000000009004]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1676.991,-624.776]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:13,hix:15,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[9.00799560546875,12.2139892578125,0]},p:{s:!0,x:{a:0,k:1159.958},y:{a:0,k:364.324}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[714.49,286.432],[715.839,285.84700000000004],[716.907,286.10100000000006],[717.365,286.5590000000001],[717.544,287.2720000000001],[717.2379999999999,294.4220000000001],[718.002,301.7000000000001],[719.6809999999999,305.7970000000001],[723.1669999999999,304.2700000000001],[726.1949999999999,301.0640000000001],[725.5849999999999,288.4940000000001],[726.2719999999999,286.6620000000001],[727.9259999999999,285.8990000000001],[729.5029999999999,288.0360000000001],[730.0369999999999,298.7740000000001],[731.132,307.83300000000014],[731.2339999999999,308.7740000000001],[730.5469999999999,309.7920000000001],[728.766,310.2750000000001],[727.3149999999999,309.0530000000001],[726.8059999999999,306.0000000000001],[719.6299999999999,309.7150000000001],[716.6279999999999,308.4430000000001],[714.5409999999999,304.9820000000001],[713.218,297.04300000000006],[713.625,287.88200000000006]],i:[[-.4410000000000309,.38999999999998636],[-.4580000000000837,0],[-.2540000000000191,-.16900000000003956],[-.05099999999993088,-.13500000000004775],[-.06899999999995998,-.33899999999999864],[0,-2.1200000000000045],[-.5090000000000146,-2.7309999999999945],[-.61099999999999,0],[-1.4080000000000155,1.0179999999999723],[-.6100000000000136,1.1200000000000045],[0,3.4939999999999714],[-.45799999999997,.5090000000000146],[-.6449999999999818,0],[0,-1.4250000000000114],[-.3550000000000182,-4.75],[-.37400000000002365,-1.289000000000044],[0,-.35599999999999454],[.45799999999997,-.3219999999999459],[.7279999999999518,0],[.23699999999996635,.8149999999999977],[.2720000000000482,1.356999999999971],[2.408999999999992,0],[.8819999999999482,.8480000000000132],[.5090000000000146,1.4600000000000364],[0,2.4770000000000323],[-.27100000000007185,3.6310000000000286]],o:[[.44000000000005457,-.38999999999998636],[.4580000000000837,0],[.25499999999999545,.17000000000001592],[.051000000000044565,.1360000000000241],[-.2039999999999509,2.646000000000015],[0,2.120999999999981],[.5090000000000146,2.7309999999999945],[.91700000000003,0],[1.407000000000039,-1.0179999999999723],[-.4070000000000391,-4.886000000000024],[0,-.7119999999999891],[.45799999999997,-.5090000000000146],[1.0510000000000446,0],[0,2.408999999999992],[.35599999999999454,4.75],[.06700000000000728,.27199999999999136],[0,.35599999999999454],[-.45799999999997,.32200000000000273],[-.7300000000000182,0],[-.06799999999998363,-.6779999999999973],[-2.375,2.4769999999999754],[-1.1190000000000282,0],[-.8830000000000382,-.8480000000000132],[-.8830000000000382,-2.8149999999999977],[0,-2.475999999999999],[.1349999999999909,-.5760000000000787]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1654.753,-625.386]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:12,hix:14,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[8.855010986328125,11.88299560546875,0]},p:{s:!0,x:{a:0,k:1139.5},y:{a:0,k:364.094}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[702.226,285.948],[708.257,289.459],[710.6229999999999,297.882],[708.2059999999999,306.254],[701.7929999999999,309.714],[695.3549999999999,306.177],[692.9129999999999,298.314],[695.1519999999999,289.459]],i:[[-3.1219999999999573,0],[-1.5779999999999745,-2.341000000000008],[0,-3.274000000000001],[1.6100000000000136,-2.3070000000000164],[2.663000000000011,0],[1.629000000000019,2.3589999999999804],[0,2.8840000000000146],[-1.4940000000000282,2.2060000000000173]],o:[[2.4429999999999836,0],[1.5769999999999982,2.341000000000008],[0,3.274000000000001],[-1.6119999999999663,2.3079999999999927],[-2.663000000000011,0],[-1.629000000000019,-2.358000000000004],[0,-3.697999999999979],[1.594000000000051,-2.339999999999975]]}}},{ty:"sh",ks:{a:0,k:{c:!0,v:[[701.615,290.121],[698.1030000000001,292.35999999999996],[696.729,297.09299999999996],[698.255,302.996],[701.716,305.032],[706.144,302.03],[706.551,298.46799999999996]],i:[[3.2899999999999636,0],[.91599999999994,-1.4919999999999618],[0,-1.6619999999999777],[-1.016999999999939,-1.3559999999999945],[-1.2899999999999636,0],[-.6449999999999818,2.0020000000000095],[0,1.4250000000000114]],o:[[-1.4249999999999545,0],[-.9160000000000537,1.4940000000000282],[0,2.5790000000000077],[1.0190000000000055,1.3570000000000277],[2.3070000000000164,0],[.27099999999995816,-.9490000000000123],[.0009999999999763531,-5.5639999999999645]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1634.448,-625.487]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:11,hix:13,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[8.373016357421875,18.218994140625,0]},p:{s:!0,x:{a:0,k:1120.186},y:{a:0,k:357.759}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[681.896,274.014],[683.27,273.35200000000003],[685.967,273.276],[689.452,273.886],[690.827,276.329],[689.35,278.161],[687.62,277.627],[685.788,277.093],[683.6510000000001,279.23],[683.5480000000001,282.36],[683.5480000000001,286.253],[687.1100000000001,286.253],[689.3490000000002,287.83099999999996],[686.2950000000002,290.06999999999994],[685.1760000000002,290.1209999999999],[683.6500000000002,290.06999999999994],[684.1080000000002,297.32199999999995],[684.4630000000002,307.47499999999997],[683.6500000000002,309.104],[681.9700000000003,309.714],[680.5960000000002,308.086],[680.2400000000002,299.18],[679.7310000000002,290.071],[674.3870000000002,289.15500000000003],[674.0810000000001,288.23900000000003],[675.1760000000002,286.509],[677.6950000000002,286.10200000000003],[679.7310000000001,286.10200000000003],[680.6470000000002,275.82200000000006]],i:[[-.52699999999993,.38999999999998636],[-.3910000000000764,.05099999999998772],[-1.4080000000000155,0],[-.9160000000000537,-.4070000000000391],[0,-1.2210000000000036],[.9839999999999236,0],[.9500000000000455,.35599999999999454],[.27099999999995816,0],[.23699999999996635,-1.4250000000000114],[0,-1.5779999999999745],[0,-1.0179999999999723],[0,0],[0,-.9839999999999804],[2.0359999999999445,-.06699999999995043],[.44000000000005457,0],[.5759999999999081,.033999999999991815],[-.2379999999999427,-3.4770000000000323],[0,-3.290999999999997],[.54200000000003,-.4070000000000391],[.5759999999999081,0],[0,1.0860000000000127],[.23699999999996635,2.8840000000000146],[.10199999999997544,3.1889999999999645],[.5090000000000146,.61099999999999],[0,.37400000000002365],[-.7309999999999945,.27199999999999136],[-.9510000000000218,0],[-.4069999999999254,0],[-.5090000000000146,1.322999999999979]],o:[[.5249999999999773,-.38999999999998636],[.38999999999998636,-.05099999999998772],[1.407000000000039,0],[.9160000000000537,.4070000000000391],[0,1.22199999999998],[-.20299999999997453,0],[-.9500000000000455,-.35599999999999454],[-1.1879999999999882,0],[-.06799999999998363,.5090000000000146],[0,1.5779999999999745],[0,0],[1.4930000000000518,.06799999999998363],[0,1.4250000000000114],[-.30499999999995,.033999999999991815],[-.4410000000000309,0],[.06700000000000728,1.3570000000000277],[.23599999999999,3.4780000000000086],[0,.6789999999999736],[-.5439999999999827,.40699999999998226],[-.9160000000000537,0],[0,-3.0539999999999736],[-.23699999999996635,-2.8829999999999814],[-3.0539999999999736,0],[-.20299999999997453,-.2370000000000232],[0,-.882000000000005],[.7290000000000418,-.271000000000015],[.9510000000000218,0],[.10199999999997544,-5.528999999999996],[.306999999999789,-.8160000000000878]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1615.615,-612.815]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:10,hix:12,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[8.8544921875,18.16748046875,0]},p:{s:!0,x:{a:0,k:1090.746},y:{a:0,k:357.808}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[647.009,285.897],[649.554,285.948],[650.521,285.897],[650.521,275.464],[651.386,273.988],[652.9119999999999,273.377],[654.0579999999999,273.83500000000004],[654.4399999999998,275.26000000000005],[654.3879999999998,285.845],[660.3429999999998,285.641],[661.8689999999998,287.422],[661.0799999999998,289.40700000000004],[659.4009999999998,290.119],[657.6449999999999,290.17],[654.5409999999998,290.119],[654.9739999999998,298.36400000000003],[655.6609999999998,306.32800000000003],[655.7639999999998,308.66900000000004],[655.2029999999997,309.40700000000004],[653.4219999999998,309.71200000000005],[652.0989999999998,308.49100000000004],[650.7249999999998,290.17],[647.2139999999998,290.221],[644.1599999999999,288.44]],i:[[-1.9010000000000673,0],[0,0],[-.06899999999995998,.033999999999991815],[0,0],[-.5430000000000064,.40800000000001546],[-.47499999999990905,0],[-.2899999999999636,-.3050000000000068],[.03300000000001546,-.6440000000000055],[0,-6.411999999999978],[0,0],[0,-1.1870000000000118],[.5259999999999536,-.4410000000000309],[.5929999999999609,-.03300000000001546],[.5760000000000218,0],[0,0],[-.28899999999998727,-4.105000000000018],[-.16999999999995907,-1.2029999999999745],[.10099999999999909,-.35599999999999454],[.2720000000000482,-.1349999999999909],[.7459999999999809,0],[.1349999999999909,.8140000000000214],[.23700000000008004,7.770000000000039],[2.034999999999968,0],[0,1.1879999999999882]],o:[[0,0],[.5760000000000218,0],[0,0],[.03300000000001546,-.5760000000000218],[.54200000000003,-.40699999999998226],[.47500000000002274,0],[.2880000000000109,.3050000000000068],[-.033999999999991815,.6449999999999818],[0,0],[1.018000000000029,0],[0,.8829999999999814],[-.5259999999999536,.4409999999999741],[-.5950000000000273,.033999999999991815],[0,0],[0,1.391999999999996],[.2880000000000109,4.105000000000018],[.16999999999995907,1.204999999999984],[-.1029999999999518,.35599999999999454],[-.4410000000000309,.20400000000000773],[-.7459999999999809,0],[-.6789999999999736,-4.444000000000017],[-.30499999999995,.033999999999991815],[-2.0359999999999445,0],[-.0009999999998626663,-1.6940000000000168]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1585.694,-612.917]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:9,hix:11,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[8.855010986328125,11.88299560546875,0]},p:{s:!0,x:{a:0,k:1071.509},y:{a:0,k:364.094}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[634.235,285.948],[640.266,289.459],[642.632,297.882],[640.2149999999999,306.254],[633.8019999999999,309.714],[627.3639999999999,306.177],[624.9219999999999,298.314],[627.161,289.459]],i:[[-3.1219999999999573,0],[-1.5779999999999745,-2.341000000000008],[0,-3.274000000000001],[1.6100000000000136,-2.3070000000000164],[2.663000000000011,0],[1.629000000000019,2.3589999999999804],[0,2.8840000000000146],[-1.4940000000000282,2.2060000000000173]],o:[[2.4429999999999836,0],[1.5769999999999982,2.341000000000008],[0,3.274000000000001],[-1.6119999999999663,2.3079999999999927],[-2.663000000000011,0],[-1.629000000000019,-2.358000000000004],[0,-3.697999999999979],[1.5950000000000273,-2.339999999999975]]}}},{ty:"sh",ks:{a:0,k:{c:!0,v:[[633.625,290.121],[630.113,292.35999999999996],[628.739,297.09299999999996],[630.265,302.996],[633.726,305.032],[638.154,302.03],[638.561,298.46799999999996]],i:[[3.2899999999999636,0],[.91599999999994,-1.4919999999999618],[0,-1.6619999999999777],[-1.016999999999939,-1.3559999999999945],[-1.2899999999999636,0],[-.6449999999999818,2.0020000000000095],[0,1.4250000000000114]],o:[[-1.4249999999999545,0],[-.9160000000000537,1.4940000000000282],[0,2.5790000000000077],[1.0190000000000055,1.3570000000000277],[2.3070000000000164,0],[.27099999999995816,-.9490000000000123],[.0009999999999763531,-5.5639999999999645]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1566.457,-625.487]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:8,hix:10,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[8.62646484375,12.239501953125,0]},p:{s:!0,x:{a:0,k:1049.957},y:{a:0,k:363.739}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[604.159,308.086],[603.598,287.42400000000004],[604.26,285.84600000000006],[605.583,285.23600000000005],[607.466,286.61000000000007],[607.669,289.4600000000001],[614.54,285.8470000000001],[620.851,300.2490000000001],[620.851,304.2440000000001],[620.545,308.13700000000006],[618.357,309.66400000000004],[617.135,308.03600000000006],[617.186,305.18600000000004],[616.8050000000001,297.12000000000006],[616.067,293.68500000000006],[613.268,290.93700000000007],[609.706,292.76900000000006],[608.383,297.4510000000001],[608.027,307.47600000000006],[607.263,309.1050000000001],[605.431,309.7150000000001]],i:[[0,1.0860000000000127],[0,0],[-.4410000000000309,.4079999999999586],[-.4410000000000309,0],[-.17000000000007276,-.9159999999999968],[0,-.9840000000000373],[-2.7479999999999336,0],[0,-9.600999999999999],[0,-1.781000000000006],[.20300000000008822,-.8139999999999645],[1.2210000000000036,0],[0,1.0860000000000127],[0,0],[.2540000000000191,1.4419999999999504],[.23700000000008004,.8489999999999895],[1.2889999999999873,0],[.6770000000000209,-1.2210000000000036],[.1349999999999909,-1.7980000000000018],[0,-3.526999999999987],[.5099999999999909,-.4070000000000391],[.7129999999999654,0]],o:[[0,0],[0,-.6440000000000055],[.44000000000005457,-.40699999999998226],[1.0850000000000364,0],[.1349999999999909,.9159999999999968],[1.8319999999999936,-2.4080000000000155],[4.206000000000017,0],[0,.8829999999999814],[0,1.781000000000006],[-.2380000000000564,1.0179999999999723],[-.8139999999999645,0],[0,0],[0,-3.9350000000000023],[-.25499999999999545,-1.440999999999974],[-.5769999999999982,-1.8319999999999936],[-1.6970000000000027,0],[-.7469999999999573,1.322999999999979],[-.2380000000000564,3.1549999999999727],[0,.6789999999999736],[-.5090000000000146,.40699999999998226],[-.84800000000007,-.00100000000009004]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1545.132,-624.776]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:7,hix:9,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[9.1099853515625,11.884506225585938,0]},p:{s:!0,x:{a:0,k:1016.192},y:{a:0,k:364.249}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[577.595,286.101],[582.735,287.679],[585.177,291.573],[583.193,296.05199999999996],[577.9,298.67299999999994],[573.626,298.87699999999995],[575.814,304.57699999999994],[577.188,305.13699999999994],[582.48,303.12699999999995],[585.534,301.11699999999996],[586.756,301.87999999999994],[587.5699999999999,303.30499999999995],[584.3639999999999,307.12199999999996],[580.9279999999999,309.08099999999996],[577.1879999999999,309.86999999999995],[570.6729999999999,304.16999999999996],[569.3499999999999,296.43399999999997],[571.3349999999999,289.157]],i:[[-2.850999999999999,0],[-1.629000000000019,-1.0509999999999877],[0,-1.5439999999999827],[1.3230000000000928,-1.4420000000000073],[2.205000000000041,-.3059999999999832],[1.899000000000001,0],[-1.0860000000000127,-.9159999999999968],[-.5779999999999745,0],[-1.4250000000000682,1.3410000000000082],[-.61099999999999,0],[-.5430000000000064,-.5089999999999577],[0,-.4399999999999977],[2.1370000000000573,-1.6620000000000346],[1.3400000000000318,-.5249999999999773],[1.1520000000000437,0],[1.3909999999999627,3.8000000000000114],[0,2.8170000000000073],[-1.322999999999979,2.034999999999968]],o:[[1.7980000000000018,0],[1.629000000000019,1.052000000000021],[0,1.5439999999999827],[-1.322999999999979,1.4420000000000073],[-.9500000000000455,.1360000000000241],[.3730000000000473,2.8840000000000146],[.33799999999996544,.37400000000002365],[2.102999999999952,0],[1.4260000000000446,-1.339999999999975],[.27099999999995816,0],[.54200000000003,.5090000000000146],[0,.882000000000005],[-.9500000000000455,.7810000000000059],[-1.3410000000000082,.5260000000000105],[-2.951999999999998,0],[-.8830000000000382,-2.341000000000008],[0,-2.8149999999999977],[1.322999999999979,-2.034999999999968]]}}},{ty:"sh",ks:{a:0,k:{c:!0,v:[[577.849,289.612],[574.541,291.8],[573.5740000000001,295.26],[580.6980000000001,291.74899999999997]],i:[[1.899000000000001,0],[.91599999999994,-1.45799999999997],[.30499999999995,-1.7969999999999686],[0,2.341000000000008]],o:[[-1.2899999999999636,0],[-.34000000000003183,.5090000000000146],[4.749000000000024,0],[-11368683772161603e-29,-1.4239999999999782]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1510.885,-625.641]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:6,hix:8,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[8.981536865234375,19.746002197265625,0]},p:{s:!0,x:{a:0,k:995.199},y:{a:0,k:372.059}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[562.226,307.577],[557.594,309.714],[552.7600000000001,307.984],[548.4850000000001,297.85699999999997],[551.4370000000001,289.282],[558.7140000000002,286.04999999999995],[564.6170000000002,289.00199999999995],[565.9910000000002,296.83899999999994],[565.8890000000002,301.01199999999994],[566.1680000000002,309.17999999999995],[566.4480000000002,317.04299999999995],[564.2850000000002,323.48099999999994],[557.6950000000002,325.5419999999999],[552.3000000000002,324.4219999999999],[549.5520000000001,321.8269999999999],[550.1370000000002,320.1989999999999],[551.4860000000002,319.6389999999999],[554.9210000000002,320.7589999999999],[558.7640000000001,321.8789999999999],[562.4280000000001,315.8739999999999]],i:[[.13400000000001455,1.5269999999999868],[1.8659999999999854,0],[1.3559999999999945,1.1539999999999964],[0,4.545999999999992],[-1.969000000000051,2.1549999999999727],[-2.883000000000038,0],[-1.0510000000000446,-1.9680000000000177],[0,-3.4939999999999714],[0,0],[-.18600000000003547,-3.4780000000000086],[0,-1.7649999999999864],[1.4420000000000073,-1.375],[2.951000000000022,0],[1.83299999999997,.7459999999999809],[0,.9830000000000041],[-.3910000000000764,.37299999999999045],[-.5090000000000146,0],[-1.780999999999949,-.7470000000000141],[-.7809999999999491,0],[0,4.002999999999986]],o:[[-1.22199999999998,1.4250000000000114],[-1.8659999999999854,0],[-2.850999999999999,-2.204999999999984],[0,-3.562000000000012],[1.9669999999999845,-2.1539999999999964],[2.883000000000038,0],[.9160000000000537,1.7300000000000182],[0,0],[0,1.9680000000000177],[.18700000000001182,3.4769999999999754],[0,2.916999999999973],[-1.4420000000000073,1.375],[-1.7649999999999864,0],[-1.8319999999999936,-.7470000000000141],[0,-.7119999999999891],[.38999999999998636,-.37400000000002365],[.5090000000000146,0],[1.780999999999949,.7459999999999809],[2.4420000000000073,0],[.0009999999998626663,-4.004999999999882]]}}},{ty:"sh",ks:{a:0,k:{c:!0,v:[[562.175,296.813],[561.0799999999999,291.622],[557.645,290.12100000000004],[553.8779999999999,292.259],[552.453,297.67900000000003],[553.802,302.89500000000004],[557.9490000000001,304.82900000000006],[561.5620000000001,302.43700000000007]],i:[[0,2.4610000000000127],[.7300000000000182,1.0009999999999764],[1.5599999999999454,0],[.9500000000000455,-1.4259999999999877],[0,-2.1890000000000214],[-.900000000000091,-1.2889999999999873],[-1.8660000000000991,0],[-.5430000000000064,1.5949999999999704]],o:[[0,-2.459000000000003],[-.7290000000000418,-1],[-1.5620000000000118,0],[-.9500000000000455,1.4250000000000114],[0,2.1890000000000214],[.8980000000000246,1.2900000000000205],[1.865000000000009,0],[.4089999999998781,-1.289000000000044]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1490.019,-625.589]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:5,hix:7,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[8.85504150390625,12.162017822265625,0]},p:{s:!0,x:{a:0,k:973.595},y:{a:0,k:364.323}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[541.869,285.897],[544.1080000000001,289.71299999999997],[544.1080000000001,290.578],[544.0060000000001,294.14],[543.9540000000001,297.448],[544.7180000000001,308.94899999999996],[542.1220000000001,310.22099999999995],[541.3850000000001,310.22099999999995],[540.5710000000001,309.7629999999999],[540.5200000000001,308.6429999999999],[540.3930000000001,307.1669999999999],[534.1840000000002,309.66099999999994],[527.0080000000002,298.56699999999995],[529.3230000000002,289.25399999999996],[535.9650000000003,286.099],[540.0360000000003,286.812]],i:[[-.7810000000000628,0],[0,-2.5439999999999827],[0,-.3050000000000068],[0,0],[0,-1.0849999999999795],[0,0],[1.7309999999999945,0],[.38900000000001,0],[.15199999999992997,.30600000000004],[-.11899999999991451,.4420000000000073],[.20299999999997453,.5430000000000064],[2.5779999999999745,0],[0,7.396000000000015],[-1.5440000000000964,2.103999999999985],[-2.8850000000001046,0],[-1.356999999999971,-.47500000000002274]],o:[[1.4919999999999618,0],[0,.27199999999999136],[0,0],[-.033999999999991815,1.1200000000000045],[0,0],[0,.8480000000000132],[-.10199999999997544,0],[-.3909999999999627,0],[-.15200000000004366,-.3050000000000068],[.11800000000005184,-.4399999999999977],[-1.5620000000000118,1.663000000000011],[-4.783999999999992,0],[0,-4.105000000000018],[1.5430000000000064,-2.1030000000000086],[1.3559999999999945,0],[.4419999999996662,-.6090000000000373]]}}},{ty:"sh",ks:{a:0,k:{c:!0,v:[[536.576,290.528],[532.25,292.208],[530.825,298.36600000000004],[534.8960000000001,305.898],[537.263,304.93100000000004],[539.07,302.74300000000005],[540.037,296.73800000000006],[539.248,292.00500000000005]],i:[[1.2549999999999955,0],[.9500000000000455,-1.1200000000000045],[0,-2.98599999999999],[-2.715000000000032,0],[-.8650000000000091,.6449999999999818],[-.34000000000003183,.8139999999999645],[0,2.1719999999999686],[.5249999999999773,.9839999999999804]],o:[[-1.933999999999969,0],[-.9500000000000455,1.1200000000000045],[0,5.021000000000015],[.7129999999999654,0],[.8640000000000327,-.6440000000000055],[.6440000000000055,-1.8319999999999936],[0,-2.1709999999999923],[-.5260000000000673,-.9840000000000373]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1468.542,-625.437]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-01",ip:0,st:0,ind:4,hix:6,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[9.54150390625,16.819503784179688,0]},p:{s:!0,x:{a:0,k:951.076},y:{a:0,k:359.108}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-01 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[504.158,304.473],[503.803,290.3],[504.057,278.72200000000004],[506.296,276.559],[511.538,276.02500000000003],[519.604,278.086],[522.8860000000001,284.168],[521.97,289.689],[519.6800000000001,292.97200000000004],[513.0640000000001,294.70200000000006],[508.12700000000007,294.19300000000004],[508.3310000000001,307.01800000000003],[506.55000000000007,309.66400000000004],[505.12500000000006,309.25700000000006],[504.7180000000001,308.6720000000001],[504.51400000000007,308.13700000000006],[504.3620000000001,307.5520000000001],[504.28600000000006,306.86500000000007],[504.21000000000004,306.15200000000004]],i:[[0,.6100000000000136],[0,5.954000000000008],[-.17000000000001592,1.7649999999999864],[-1.322999999999979,.35599999999999454],[-2.1720000000000255,0],[-2.187999999999988,-1.3739999999999668],[0,-2.680000000000007],[.6100000000000136,-1.4750000000000227],[.91599999999994,-.7130000000000223],[2.9180000000000064,0],[2.0370000000000346,.34000000000003183],[.03300000000001546,-1.76400000000001],[1.1519999999999868,0],[.20300000000003138,.27199999999999136],[.06700000000000728,.11899999999997135],[.06700000000000728,.23799999999999955],[.03299999999995862,.1519999999999868],[.016000000000019554,.3050000000000068],[.03300000000001546,.1710000000000491]],o:[[-.2370000000000232,-3.494000000000028],[0,-5.954000000000008],[.17000000000001592,-1.0849999999999795],[1.322999999999979,-.35599999999999454],[3.187999999999988,0],[2.187999999999988,1.3739999999999668],[0,2.2060000000000173],[-.6100000000000136,1.475999999999999],[-1.4930000000000518,1.1539999999999964],[-1.2559999999999718,0],[.17000000000001592,6.786000000000001],[-.033999999999991815,1.7649999999999864],[-.7470000000000141,0],[-.20400000000000773,-.271000000000015],[-.06799999999998363,-.1190000000000282],[-.06799999999998363,-.2370000000000232],[-.033999999999991815,-.15300000000002],[-.01799999999997226,-.3059999999999832],[-.03400000000004866,-.5090000000000714]]}}},{ty:"sh",ks:{a:0,k:{c:!0,v:[[518.663,284.294],[516.424,281.037],[511.64,279.84099999999995],[508.078,280.299],[507.875,285.82],[508.078,290.375],[509.96099999999996,290.63],[512.226,290.782],[513.498,290.757],[514.7700000000001,290.604],[516.1190000000001,290.17199999999997],[517.1370000000002,289.35799999999995],[518.0020000000002,288.18799999999993]],i:[[0,1.3740000000000236],[1.4920000000000755,.7980000000000018],[1.6960000000000264,0],[.6779999999999973,-.30600000000004],[0,-1.6790000000000305],[-.13599999999996726,-1.3570000000000277],[-.33899999999999864,-.06799999999998363],[-.6280000000000427,0],[-.22000000000002728,.016999999999995907],[-.6270000000000664,.08600000000001273],[-.27300000000002456,.20300000000003138],[-.40800000000001546,.33899999999999864],[-.16999999999995907,.4410000000000309]],o:[[0,-1.3740000000000236],[-1.4940000000000282,-.7970000000000255],[-1.6970000000000027,0],[-.1360000000000241,2.0020000000000095],[0,1.6800000000000068],[.9159999999999968,.10199999999997544],[.882000000000005,.10199999999997544],[.6280000000000427,0],[.22100000000000364,-.016999999999995907],[.6269999999999527,-.08400000000000318],[.27099999999995816,-.20400000000000773],[.4070000000000391,-.33899999999999864],[.43899999999985084,-1.2219999999999231]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.2196078431372549,.2196078431372549,.2196078431372549,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1445.338,-615.565]},r:{a:0,k:0}}]}],op:120}]},{id:"precomp_2",layers:[{ty:4,nm:"mobil-02",ip:0,st:0,ind:5,hix:21,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[27.98248291015625,61.103004455566406,0]},p:{s:!0,x:{a:0,k:633.07},y:{a:0,k:132.472}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-02 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[729.803,187.837],[711.086,188.938],[694.572,184.90099999999998],[690.168,167.378],[692.187,137.74399999999997],[696.683,113.98199999999997],[706.499,106.36699999999998],[712.187,110.58699999999997],[712.187,114.07299999999998],[711.085,120.86199999999998],[706.682,166.91899999999998],[706.866,172.42399999999998],[715.765,173.158],[729.986,172.057],[730.353,161.69],[730.5369999999999,150.772],[731.8209999999999,144.534],[738.151,142.69899999999998],[744.757,144.534],[746.1329999999999,149.57999999999998],[745.5819999999999,162.975],[745.0309999999998,220.316],[736.9579999999999,228.573],[736.2239999999998,228.573],[729.4349999999998,217.38],[729.4349999999998,207.28799999999998]],i:[[0,0],[8.073999999999955,0],[2.9360000000000355,2.693000000000012],[0,8.990999999999985],[-1.3479999999999563,10.76600000000002],[-1.6509999999999536,5.076999999999998],[-4.893000000000029,0],[-.4900000000000091,-2.8119999999999976],[0,-1.588000000000008],[.7350000000000136,-2.936000000000007],[0,-9.175000000000011],[-.1229999999999336,-1.4679999999999893],[-3.7329999999999472,0],[-5.751999999999953,.7340000000000089],[0,4.343999999999994],[-.12400000000002365,2.936000000000007],[-.7340000000000373,1.2239999999999895],[-3.48599999999999,0],[-.9180000000000064,-1.2220000000000084],[0,-2.1389999999999816],[.3670000000000755,-6.7900000000000205],[0,-31.437000000000012],[5.381999999999948,0],[.2440000000000282,0],[0,7.463000000000022],[0,0]],o:[[-4.403999999999996,.7340000000000089],[-8.072999999999979,0],[-2.937000000000012,-2.688999999999993],[0,-8.990999999999985],[1.3450000000000273,-10.763000000000005],[1.6509999999999536,-5.075000000000003],[3.3029999999999973,0],[0,.7339999999999947],[0,1.590999999999994],[-2.9360000000000355,21.531999999999996],[0,2.201999999999998],[2.201999999999998,.4900000000000091],[3.729000000000042,0],[.24300000000005184,-2.5689999999999884],[0,-4.341000000000008],[.12000000000000455,-2.936000000000007],[.7329999999999472,-1.2220000000000084],[3.48599999999999,0],[.91700000000003,1.2239999999999895],[0,2.141999999999996],[-.3669999999999618,6.788999999999987],[0,5.5049999999999955],[-.24699999999995725,0],[-4.525999999999954,0],[0,0],[0,0]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,1]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[0,0,0,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1144.241,-177.736]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-02",ip:0,st:0,ind:4,hix:20,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[35.230987548828125,61.012001037597656,0]},p:{s:!0,x:{a:0,k:557.197},y:{a:0,k:132.564}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-02 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[607.047,170.405],[615.855,127.101],[627.782,112.055],[645.0300000000001,106.55000000000001],[668.426,125.17500000000001],[677.509,169.39700000000002],[669.069,211.78400000000002],[645.2149999999999,228.574]],i:[[0,38.78],[-5.871999999999957,12.477000000000004],[-5.018000000000029,3.6699999999999875],[-6.485000000000014,0],[-6.05499999999995,-12.415000000000006],[0,-17.064999999999998],[5.625,-11.193000000000012],[10.275000000000091,0]],o:[[0,-16.39099999999999],[2.9360000000000355,-6.358999999999995],[5.014999999999986,-3.6700000000000017],[9.54200000000003,0],[6.05600000000004,12.417000000000002],[0,17.064999999999998],[-5.628000000000043,11.193000000000012],[-25.44699999999989,-.0020000000000095497]]}}},{ty:"sh",ks:{a:0,k:{c:!0,v:[[643.378,211.691],[654.48,204.81],[660.6270000000001,189.39600000000002],[662.278,167.193],[658.6080000000001,138.11],[653.0110000000001,124.62300000000002],[643.9280000000001,119.57700000000001],[631.6340000000001,128.20100000000002],[622.4590000000002,169.67000000000002],[628.7900000000002,199.121]],i:[[-5.5049999999999955,0],[-2.9990000000000236,4.586999999999989],[-1.100999999999999,5.688999999999993],[0,9.115000000000009],[2.4449999999999363,10.275000000000006],[2.505999999999972,3.3659999999999997],[3.5470000000000255,0],[3.423000000000002,-5.749000000000009],[0,-17.24799999999999],[-4.221000000000004,-8.377999999999986]],o:[[4.403999999999996,0],[2.995999999999981,-4.586999999999989],[1.100999999999999,-5.687999999999988],[0,-9.111999999999995],[-1.2250000000000227,-5.625],[-2.5090000000000146,-3.3629999999999995],[-4.770999999999958,0],[-6.118000000000052,10.399000000000001],[0,11.256],[4.220999999999776,8.381]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[0,0,0,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-1061.12,-177.919]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"mobil-02",ip:0,st:0,ind:3,hix:19,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[27.9820556640625,61.103004455566406,0]},p:{s:!0,x:{a:0,k:482.055},y:{a:0,k:132.472}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"mobil-02 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[578.789,187.837],[560.072,188.938],[543.558,184.90099999999998],[539.154,167.378],[541.172,137.74399999999997],[545.668,113.98199999999997],[555.484,106.36699999999998],[561.173,110.58699999999997],[561.173,114.07299999999998],[560.071,120.86199999999998],[555.667,166.91899999999998],[555.851,172.42399999999998],[564.751,173.158],[578.972,172.057],[579.338,161.69],[579.5219999999999,150.772],[580.8059999999999,144.534],[587.136,142.69899999999998],[593.742,144.534],[595.1179999999999,149.57999999999998],[594.5669999999999,162.975],[594.0169999999999,220.316],[585.944,228.573],[585.2099999999999,228.573],[578.4209999999999,217.38],[578.4209999999999,207.28799999999998]],i:[[0,0],[8.073999999999955,0],[2.9360000000000355,2.693000000000012],[0,8.990999999999985],[-1.34699999999998,10.76600000000002],[-1.6509999999999536,5.076999999999998],[-4.893000000000029,0],[-.4900000000000091,-2.8119999999999976],[0,-1.588000000000008],[.7350000000000136,-2.936000000000007],[0,-9.175000000000011],[-.1229999999999336,-1.4679999999999893],[-3.7329999999999472,0],[-5.751999999999953,.7340000000000089],[0,4.343999999999994],[-.1229999999999336,2.936000000000007],[-.7340000000000373,1.2239999999999895],[-3.48599999999999,0],[-.91700000000003,-1.2220000000000084],[0,-2.1389999999999816],[.3670000000000755,-6.7900000000000205],[0,-31.437000000000012],[5.380999999999972,0],[.2440000000000282,0],[0,7.463000000000022],[0,0]],o:[[-4.403999999999996,.7340000000000089],[-8.073999999999955,0],[-2.937000000000012,-2.688999999999993],[0,-8.990999999999985],[1.3460000000000036,-10.763000000000005],[1.6509999999999536,-5.075000000000003],[3.3029999999999973,0],[0,.7339999999999947],[0,1.590999999999994],[-2.9360000000000355,21.531999999999996],[0,2.201999999999998],[2.201999999999998,.4900000000000091],[3.729000000000042,0],[.24300000000005184,-2.5689999999999884],[0,-4.341000000000008],[.12000000000000455,-2.936000000000007],[.7340000000000373,-1.2220000000000084],[3.4869999999999663,0],[.91700000000003,1.2239999999999895],[0,2.141999999999996],[-.36599999999998545,6.788999999999987],[0,5.5049999999999955],[-.24699999999995725,0],[-4.527000000000044,0],[0,0],[0,0]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[0,0,0,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-993.227,-177.736]},r:{a:0,k:0}}]}],op:120}]}],xL=[{ty:4,nm:"404-04",ip:0,st:0,ind:6,hix:1,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[640,400,0]},p:{s:!0,x:{a:1,k:[{t:0,s:[640],e:[670],i:{x:[.515],y:[.955]},o:{x:[.455],y:[.03]}},{t:60,s:[670],e:[640],i:{x:[.515],y:[.955]},o:{x:[.455],y:[.03]}},{t:120}]},y:{a:0,k:448.79125976562506}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100]}},shapes:[{ty:"gr",nm:"404-04 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[910.946698233865,619.9788614289478],[876.586698233865,585.6188614289476],[876.586698233865,511.3388614289477],[832.226698233865,466.9788614289477],[741.586698233865,466.9788614289477],[741.586698233865,457.0988614289477],[735.466698233865,450.9788614289477],[722.586698233865,450.9788614289477],[722.586698233865,450.75186142894773],[706.813698233865,434.9788614289477],[639.586698233865,434.9788614289477],[639.586698233865,508.9788614289477],[706.813698233865,508.9788614289477],[722.586698233865,493.2058614289477],[722.586698233865,492.9788614289477],[735.466698233865,492.9788614289477],[741.586698233865,486.8588614289477],[741.586698233865,476.9788614289477],[832.226698233865,476.9788614289477],[866.586698233865,511.3388614289477],[866.586698233865,585.6178614289477],[910.946698233865,629.9778614289478],[1279.5866982338648,629.9778614289478],[1279.5866982338648,619.9778614289478],[910.946698233865,619.9778614289478]],i:[[0,0],[0,18.94600000000014],[0,0],[24.460000000000036,0],[0,0],[0,0],[3.3799999999999955,0],[0,0],[0,0],[8.711000000000013,0],[0,0],[0,0],[0,0],[0,8.711000000000013],[0,0],[0,0],[0,3.3799999999999955],[0,0],[0,0],[0,-18.946000000000026],[0,0],[-24.460000000000036,0],[0,0],[0,0],[0,0]],o:[[-18.946000000000026,0],[0,0],[0,-24.45999999999998],[0,0],[0,0],[0,-3.3799999999999955],[0,0],[0,0],[0,-8.711000000000013],[0,0],[0,0],[0,0],[8.711000000000013,0],[0,0],[0,0],[3.3799999999999955,0],[0,0],[0,0],[18.946000000000026,0],[0,0],[0,24.460000000000036],[0,0],[0,0],[0,0],[0,0]]}}},{ty:"sh",ks:{a:0,k:{c:!0,v:[[910.946698233865,619.9788614289478]],i:[[0,0]],o:[[0,0]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.14901960784313725,.14901960784313725,.14901960784313725,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[0,0]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"404-03",ip:0,st:0,ind:5,hix:2,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[640,400,0]},p:{s:!0,x:{a:1,k:[{t:0,s:[640.0004808820297],e:[613],i:{x:[.515],y:[.955]},o:{x:[.455],y:[.03]}},{t:60,s:[613],e:[643],i:{x:[.515],y:[.955]},o:{x:[.455],y:[.03]}},{t:120}]},y:{a:0,k:458.13}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},shapes:[{ty:"gr",nm:"404-03 shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[676,481],[640,481],[640,446],[675.954,446],[679.789,443.317],[675.999,438],[639.999,438],[639.999,426.5],[572.7710000000001,426.5],[556.999,442.272],[556.999,442.38599999999997],[556.885,442.49999999999994],[544.12,442.49999999999994],[538,448.61999999999995],[538,458],[447.247,458],[413,423.753],[413,349.24699999999996],[368.753,305],[0,305],[0,315],[368.753,315],[403,349.247],[403,423.754],[447.247,468],[538,468],[538,478.38],[544.12,484.5],[556.997,484.5],[557,484.503],[572.886,500.5],[640,500.5],[640,489],[675.954,489],[679.789,486.317]],i:[[2.6359999999999673,0],[0,0],[0,0],[0,0],[-.5230000000000246,1.6329999999999814],[2.6359999999999673,0],[0,0],[0,0],[0,0],[0,-8.70999999999998],[0,0],[.06299999999998818,0],[0,0],[0,-3.3799999999999955],[0,0],[0,0],[0,18.913999999999987],[0,0],[24.437000000000012,0],[0,0],[0,0],[0,0],[0,-18.913999999999987],[0,0],[-24.437000000000012,0],[0,0],[0,0],[-3.3799999999999955,0],[0,0],[0,-.0020000000000095497],[-8.810999999999922,0],[0,0],[0,0],[0,0],[-.5230000000000246,1.6329999999999814]],o:[[0,0],[0,0],[0,0],[1.7140000000000555,0],[.8859999999999673,-2.766999999999996],[0,0],[0,0],[0,0],[-8.711000000000013,0],[0,0],[0,.06299999999998818],[0,0],[-3.3799999999999955,0],[0,0],[0,0],[-18.913999999999987,0],[0,0],[0,-24.436999999999955],[0,0],[0,0],[0,0],[18.913999999999987,0],[0,0],[0,24.43599999999998],[0,0],[0,0],[0,3.3799999999999955],[0,0],[.0019999999999527063,0],[-.05999999999994543,8.824999999999989],[0,0],[0,0],[0,0],[1.7140000000000555,0],[.8870000000000573,-2.768000000000029]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.14901960784313725,.14901960784313725,.14901960784313725,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[0,0]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"cling bawah",ip:0,st:0,ind:4,hix:3,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[51.38800048828125,19.694000244140625,0]},p:{s:!0,x:{a:0,k:640},y:{a:0,k:602.444}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:1,k:[{t:0,s:[0,0],e:[100,100],i:{x:[.515,.515],y:[.955,.955]},o:{x:[.455,.455],y:[.03,.03]}},{t:40,s:[100,100],e:[100,100],i:{x:[1,1],y:[1,1]},o:{x:[0,0],y:[0,0]}},{t:60,s:[100,100],e:[0,0],i:{x:[.515,.515],y:[.955,.955]},o:{x:[.455,.455],y:[.03,.03]}},{t:100}]}},shapes:[{ty:"gr",nm:"cling bawah shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[660.565,532.565],[660.565,532.565],[660.565,539.6360000000001],[680.364,559.4350000000001],[687.4350000000001,559.4350000000001],[687.4350000000001,559.4350000000001],[687.4350000000001,552.364],[667.6360000000001,532.565]],i:[[1.9529999999999745,-1.9530000000000882],[0,0],[-1.9529999999999745,-1.9529999999999745],[0,0],[-1.9529999999999745,1.9529999999999745],[0,0],[1.9529999999999745,1.9529999999999745],[0,0]],o:[[0,0],[-1.9529999999999745,1.9529999999999745],[0,0],[1.9529999999999745,1.9529999999999745],[0,0],[1.9529999999999745,-1.9529999999999745],[0,0],[-1.9530000000000882,-1.9530000000000882]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.14901960784313725,.14901960784313725,.14901960784313725,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-586.612,-530.612]},r:{a:0,k:0}}]},{ty:"gr",nm:"cling bawah shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[639,532],[639,532],[634,537],[634,565],[639,570],[639,570],[644,565],[644,537]],i:[[2.7609999999999673,0],[0,0],[0,-2.7609999999999673],[0,0],[-2.7609999999999673,0],[0,0],[0,2.7609999999999673],[0,0]],o:[[0,0],[-2.7609999999999673,0],[0,0],[0,2.7609999999999673],[0,0],[2.7609999999999673,0],[0,0],[0,-2.7609999999999673]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.14901960784313725,.14901960784313725,.14901960784313725,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-586.612,-530.612]},r:{a:0,k:0}}]},{ty:"gr",nm:"cling bawah shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[615.435,532.565],[615.435,532.565],[608.3639999999999,532.565],[588.5649999999999,552.364],[588.5649999999999,559.4350000000001],[588.5649999999999,559.4350000000001],[595.636,559.4350000000001],[615.435,539.6360000000001]],i:[[1.9530000000000882,1.9529999999999745],[0,0],[1.9529999999999745,-1.9529999999999745],[0,0],[-1.9529999999999745,-1.9529999999999745],[0,0],[-1.9529999999999745,1.9529999999999745],[0,0]],o:[[0,0],[-1.9529999999999745,-1.9529999999999745],[0,0],[-1.9529999999999745,1.9529999999999745],[0,0],[1.9529999999999745,1.9529999999999745],[0,0],[1.9530000000000882,-1.9530000000000882]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.14901960784313725,.14901960784313725,.14901960784313725,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-586.612,-530.612]},r:{a:0,k:0}}]}],op:120},{ty:4,nm:"cling atas",ip:0,st:0,ind:3,hix:4,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[51.38800048828125,19.694000244140625,0]},p:{s:!0,x:{a:0,k:640},y:{a:0,k:438.5694885253906}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:1,k:[{t:0,s:[0,0],e:[100,100],i:{x:[.515,.515],y:[.955,.955]},o:{x:[.455,.455],y:[.03,.03]}},{t:40,s:[100,100],e:[100,100],i:{x:[1,1],y:[1,1]},o:{x:[0,0],y:[0,0]}},{t:60,s:[100,100],e:[0,0],i:{x:[.515,.515],y:[.955,.955]},o:{x:[.455,.455],y:[.03,.03]}},{t:100}]}},shapes:[{ty:"gr",nm:"cling atas shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[662.565,394.435],[662.565,394.435],[662.565,387.364],[682.364,367.565],[689.4350000000001,367.565],[689.4350000000001,367.565],[689.4350000000001,374.636],[669.6360000000001,394.435]],i:[[1.9529999999999745,1.9529999999999745],[0,0],[-1.9529999999999745,1.9530000000000314],[0,0],[-1.9529999999999745,-1.9529999999999745],[0,0],[1.9529999999999745,-1.9530000000000314],[0,0]],o:[[0,0],[-1.9529999999999745,-1.9529999999999745],[0,0],[1.9529999999999745,-1.9529999999999745],[0,0],[1.9529999999999745,1.9529999999999745],[0,0],[-1.9530000000000882,1.9529999999999745]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.14901960784313725,.14901960784313725,.14901960784313725,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-588.612,-357]},r:{a:0,k:0}}]},{ty:"gr",nm:"cling atas shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[641,395],[641,395],[636,390],[636,362],[641,357],[641,357],[646,362],[646,390]],i:[[2.7609999999999673,0],[0,0],[0,2.761000000000024],[0,0],[-2.7609999999999673,0],[0,0],[0,-2.761000000000024],[0,0]],o:[[0,0],[-2.7609999999999673,0],[0,0],[0,-2.761000000000024],[0,0],[2.7609999999999673,0],[0,0],[0,2.761000000000024]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.14901960784313725,.14901960784313725,.14901960784313725,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-588.612,-357]},r:{a:0,k:0}}]},{ty:"gr",nm:"cling atas shape group",it:[{ty:"sh",ks:{a:0,k:{c:!0,v:[[617.435,394.435],[617.435,394.435],[610.3639999999999,394.435],[590.5649999999999,374.636],[590.5649999999999,367.565],[590.5649999999999,367.565],[597.636,367.565],[617.435,387.364]],i:[[1.9530000000000882,-1.9529999999999745],[0,0],[1.9529999999999745,1.9529999999999745],[0,0],[-1.9529999999999745,1.9530000000000314],[0,0],[-1.9529999999999745,-1.9529999999999745],[0,0]],o:[[0,0],[-1.9529999999999745,1.9529999999999745],[0,0],[-1.9529999999999745,-1.9529999999999745],[0,0],[1.9529999999999745,-1.9529999999999745],[0,0],[1.9530000000000882,1.9530000000000314]]}}},{ty:"st",o:{a:0,k:0},w:{a:0,k:0},c:{a:0,k:[0,0,0,0]},lc:3,lj:1,ml:1},{ty:"fl",o:{a:0,k:100},r:1,c:{a:0,k:[.14901960784313725,.14901960784313725,.14901960784313725,1]}},{ty:"tr",o:{a:0,k:100},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},p:{a:0,k:[-588.612,-357]},r:{a:0,k:0}}]}],op:120},{ty:0,nm:"instance:precomp_1",refId:"precomp_1",ind:2,ip:120,st:0,hix:5,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[135.08950366210934,26.132746337890637,0]},p:{s:!0,x:{a:0,k:640},y:{a:1,k:[{t:0,s:[317.92377221679686],e:[287.924],i:{x:[.515],y:[.955]},o:{x:[.455],y:[.03]}},{t:60,s:[287.924],e:[317.924],i:{x:[.515],y:[.955]},o:{x:[.455],y:[.03]}},{t:120}]}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},w:270,h:52,op:120,hidden:0},{ty:0,nm:"instance:precomp_2",refId:"precomp_2",ind:1,ip:120,st:0,hix:18,ks:{o:{a:0,k:100},or:{a:0,k:[0,0,0]},a:{a:0,k:[103.4897692871094,61.10350274658202,0]},p:{s:!0,x:{a:0,k:640.0000000000001},y:{a:1,k:[{t:0,s:[194.16],e:[164.16],i:{x:[.515],y:[.955]},o:{x:[.455],y:[.03]}},{t:60,s:[164.16],e:[194.16],i:{x:[.515],y:[.955]},o:{x:[.455],y:[.03]}},{t:120}]}},rx:{a:0,k:0},ry:{a:0,k:0},rz:{a:0,k:0},s:{a:0,k:[100,100,100]}},w:207,h:122,op:120,hidden:0}],AL=120,RL=1280,DL=800;var NL={ip:IL,fr:TL,v:CL,assets:SL,layers:xL,op:AL,w:RL,h:DL};const PL=()=>{const n=uo(null);return ht(()=>void fE.loadAnimation({container:n.current,renderer:"svg",loop:!0,autoplay:!0,animationData:NL}),[]),f("div",{ref:n})},OL=({error:n})=>R(bL,{children:[R(EL,{children:[f(vL,{children:"\uC5B4\uB518\uAC00 \uBB38\uC81C\uAC00 \uC0DD\uACBC\uC5B4\uC694"}),f(kL,{children:n==null?void 0:n.message})]}),f(PL,{})]});g.div`
  margin-top: 15px;
`;g.div`
  width: 100%;
`;g.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
`;g.div`
  margin-right: 10px;
`;g.div`
  background: white;
`;g.button`
  border-style: none;
  border-radius: 10px;
  font-size: 1.4rem;
  color: white;
  transition: 0.3s;
  transition-delay: 0.3ms;
  transform-style: initial;
  cursor: pointer;
  background: ${n=>n.theme.colors.tossBlue};
  padding: 7px 20px;
  align-items: center;
  :hover {
    background: ${n=>n.theme.colors.tossBlueActive};
  }
  @media (max-width: 500px) {
    padding: 7px 13px;
    font-size: 1.3rem;
  }
`;g.div`
  display: flex;
  flex-direction: row;
  margin-top: 10px;
`;const ML=g.nav`
  position: sticky;
  top: 0;
  z-index: 999;
  height: 60px;
  width: 100%;
  background: ${n=>n.theme.colors.white};
`,LL=g.nav`
  display: flex;
  align-items: center;
`,FL=g.div`
  color: ${n=>n.theme.colors.grey700};
  font-size: 1.4rem;
  font-weight: bold;
  white-space: nowrap;
  margin-left: 20px;
  @media (max-width: 500px) {
    font-size: 1.3rem;
  }
  &:hover {
    cursor: pointer;
  }
`;g.div`
  display: flex;
  flex-direction: row;
  margin-top: 10px;
  align-items: center;
  transition: 0.3s;
  transition-delay: 0.3ms;
  transform-style: initial;
`;g.div`
  display: flex;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  opacity: 50%;
  background: ${n=>n.theme.colors.grey500};
  z-index: 999;
`;const $L=g(ee.div)`
  position: fixed;
  right: 3%;
  top: 60px;
  justify-content: center;
  display: flex;
  flex-direction: column;
  text-align: center;
  background: white;
  padding: 5px 5px;
  border: 1px solid ${({theme:n})=>n.colors.grey200};
  border-radius: 10px;
`,Xw=g(ee.button)`
  font-size: 1.6rem;
  padding: 5px 15px;
  border: 0 solid;
  border-radius: 5px;
  background-color: white;
`,UL=n=>{const{isOpen:e,setIsOpen:t}=n,[i,r]=Lt(po),s=Fa(),o=uo(null),a={cursor:"pointer",backgroundColor:"#E5E8EB"},c=c0(l=>{const u=l.target,h=document.getElementsByClassName("username")[0];e&&u.contains(h||u)&&(t(!1),document.removeEventListener("click",c))},[e]);return ht(()=>{e&&setTimeout(()=>document.addEventListener("click",c),0)},[e]),f(er,{children:e&&R($L,{ref:o,layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[f(Xw,{layout:!0,whileHover:a,onClick:async()=>{t(!1),await KD(Y0),s("/auth")},children:"\uB85C\uADF8\uC544\uC6C3"}),f(Xw,{layout:!0,whileHover:a,onClick:()=>{t(!1),r({...i,[vt.ADMIN_SIGN_UP]:!0})},children:"\uD68C\uC6D0\uAC00\uC785"})]})})},BL="adminUser",VL={uid:"",name:"",nickname:"",phoneNumber:""},X0=La({key:BL,default:VL}),qL=()=>{const n=ho(),[e,t]=He(!1),[i]=Lt(X0);return He(n.pathname),f(ML,{children:f(gE,{children:R(yE,{children:[f(Ng,{children:f(Dg,{children:R(_E,{to:"/admin",children:[f(wE,{src:d0,alt:"GDSC-Chapter-Logo"}),f(vE,{children:"GDSC"}),f(bE,{children:"Daejin "}),f(kE,{children:"Admin"})]})})}),R(LL,{children:[f(UL,{isOpen:e,setIsOpen:t}),R(FL,{onClick:()=>t(!e),children:["Hi ",i.nickname]})]})]})})})};var GL=Zi(qL);const jL=g.div`
  background: ${({theme:n})=>n.colors.grey50};
  min-height: 100%;
  padding: 30px 30px;
  overflow: scroll;
`,zL=g.div`
  -webkit-box-flex: 1;
  flex-grow: 1;
  height: 100%;
  position: relative;
  overflow: hidden;
`,Y2=g.div`
  height: calc(100vh - 70px - 82px);
  display: flex;
  overflow: hidden;
`,WL=g.div`
  width: 225px;
  height: 100%;
  border-right: 1px solid ${({theme:n})=>n.colors.grey300};
  flex-shrink: 0;
  padding-top: 35px;
  position: relative;
`,KL=g.div`
  display: flex;
  -webkit-box-align: center;
  align-items: center;
  position: relative;
  padding-left: 30px;
  height: 40px;
  cursor: pointer;
  &:hover {
    #bar {
      height: 20px;
    }
  }
`,HL=g.div`
  display: flex;
  -webkit-box-align: center;
  align-items: center;
  position: relative;
  padding-left: 60px;
  height: 40px;
  cursor: pointer;
  &:hover {
    #bar {
      height: 20px;
    }
  }
`,QL=g.div`
  position: absolute;
  left: 0;
  width: 4px;
  background: ${({theme:n})=>n.colors.googleBlue};
  border-radius: 0 3px 3px 0;
  height: 0;
  transition: all 0.2s ease-in-out;
  ${({isCurrent:n})=>n&&ue`
      height: 40px;
    `}
`,Jw=g.div`
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey700};
  font-weight: 500;
  transition: all 0.2s ease-in-out;
  ${({isCurrent:n})=>n&&ue`
      color: ${({theme:e})=>e.colors.googleBlue};
    `}
  &:hover {
    cursor: pointer;
    color: ${({theme:n})=>n.colors.googleBlue};
  }
`;class YL{constructor(){In(this,"API");In(this,"FIREBASE_API");In(this,"getMemberNickname",()=>Ii.get(`${this.API}/api/member/onBoarding/nickname`));In(this,"postOnboardingMembers",e=>Ii.post(`${this.API}/api/member/onBoarding/join`,e));In(this,"getRecruitStatus",()=>Ii.get(`${this.API}/api/support/limit`));In(this,"putRecruitStatus",e=>Ii.put(`${this.API}/api/admin/v1/support/limit/update`,e));In(this,"postMemberWarning",e=>Ii.post(`${this.API}/api/admin/v1/warning`,e));In(this,"putMemberRole",e=>Ii.post(`${this.API}/api/admin/v1/update/role`,e));In(this,"getAdminUser",e=>Ii.get(`${this.FIREBASE_API}/documents/adminUsers/${e}`));In(this,"getApplicants",()=>Ii.get(`${this.FIREBASE_API}/documents/applicants`));In(this,"getChapterEvents",()=>Ii.get("https://gdsc.community.dev/api/event/?chapter=1833"));this.API="https://gdsc-dju.com",this.FIREBASE_API="https://firestore.googleapis.com/v1/projects/gdsc-dju/databases/(default)"}}var X2=new YL;const XL="recruitment",JL="recruitmentSelector",ZL={home:!0,frontend:!0,backend:!0,android:!0,design:!0,ml:!0,beginner:!0},J0=La({key:XL,default:ZL});FR({key:JL,get:async()=>(await X2.getRecruitStatus()).data.data,set:({set:n},e)=>{n(J0,e)}});const eF={home:"Home",frontend:"Frontend Developer",backend:"Backend Developer",android:"Android Developer",beginner:"Beginner",design:"Designer",ml:"Machine Learning"},tF=[{label:"\uD648",route:"/admin"},{label:"\uBA64\uBC84 \uAD00\uB9AC",route:"/admin/member"},{label:"\uC9C0\uC6D0\uC790 \uAD00\uB9AC",route:"/admin/recruit"},{label:"\uC774\uBA54\uC77C",route:"/admin/email"},{label:"\uC774\uBA54\uC77C \uB85C\uADF8",route:"/admin/email-log"}],nF=()=>{const n=ho(),e=Fa(),t=a=>{e(a)};ru(J0);const[i,r]=Ag(),s=a=>{r({type:a})},o=Object.keys(eF);return f(WL,{children:tF.map(a=>{const c=n.pathname===a.route,l=n.pathname.includes("/admin/recruit"),u=a.label==="\uC9C0\uC6D0\uC790 \uAD00\uB9AC";return R(fo,{children:[R(KL,{onClick:()=>t(a.route),children:[f(QL,{isCurrent:c,id:"bar"}),f(Jw,{isCurrent:c,children:a.label})]},a.route),u&&l&&o.map(h=>{const d=i.get("type")===h;return f(HL,{onClick:()=>s(h),children:f(Jw,{isCurrent:d,children:h})},h)})]})})})};var iF=Zi(nF);const $se=g.div`
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  width: 100%;
  z-index: 3;
`,rF=g.div`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  column-gap: 6px;
  flex-direction: row-reverse;
  margin-top: 10px;
`,sF=g.p`
  font-size: ${n=>n.theme.fontSize.body2};
  color: ${n=>n.theme.colors.grey600};
  min-width: 80px;
  margin-bottom: 6px;
`,Use=g.div`
  display: flex;
  flex-direction: row;
`,oF=g.h5`
  font-size: ${n=>n.theme.fontSize.h6};
  color: ${n=>n.theme.colors.grey900};
  margin-bottom: 12px;
`,aF=g(ee.div)`
  margin: 0 auto;
  background: ${({theme:n})=>n.colors.background};
  border-radius: 10px;
  box-shadow: 5px 5px 5px 5px rgba(0, 0, 0, 0.1);
  padding: 20px 30px;
  display: flex;
  flex-direction: column;
  z-index: 999;
`,cF=g(ee.div)`
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
`,Bse=g.div`
  margin-right: 10px;
`,Z9=({children:n,outsideClick:e,trigger:t=!0})=>{const i=uo(null),r=c0(s=>{i.current&&!i.current.contains(s.target)&&e(s.target)},[e]);return ht(()=>(t&&setTimeout(()=>document.addEventListener("click",r),0),()=>{document.removeEventListener("click",r)}),[r,t]),f(ee.div,{ref:i,children:n})},J2={active:{opacity:1,scale:1,y:0,transition:{duration:.5}},unActive:{opacity:0,scale:0,y:200,transition:{duration:.5}}},lF=g.input`
  padding: 0 18px;
  margin: 2px 0;
  border: 0;
  border-radius: 10px;
  height: 48px;
  font-size: ${n=>n.theme.fontSize.body1};
  outline: none;
  width: 100%;
  flex-grow: 1;
  background: none;
  font-weight: 400;
  box-sizing: border-box;
  color: ${n=>n.theme.colors.grey700};
  &::placeholder {
    color: ${n=>n.theme.colors.grey400};
    font-weight: 300;
  }
  ${n=>n.disabled&&ue`
      background: ${e=>e.theme.colors.grey100};
      color: ${e=>e.theme.colors.grey400};
    `}
`,Vse=g.div`
  color: ${n=>n.theme.colors.grey500};
  cursor: pointer;
  overflow: hidden;
  white-space: nowrap;
  flex-grow: 1;
  font-weight: 300;
  font-size: ${n=>n.theme.fontSize.body1};
  padding: 0 18px;
`,uF=g.div`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 1px auto 0;
  height: 48px;
  border: none;
  outline: none;
  appearance: none;
  border-radius: 10px;
  box-shadow: inset 0 0 0 1px ${n=>n.theme.colors.grey300};
  cursor: auto;
  &:hover {
    box-shadow: inset 0 0 0 2px ${n=>n.theme.colors.tossBlue200};
    ${n=>n.error&&ue`
        box-shadow: inset 0 0 0 2px ${n.theme.colors.tossRed};
      `}
  }
  .formInput:focus {
    box-shadow: inset 0 0 0 2px ${n=>n.theme.colors.tossBlue500};
    ${n=>n.error&&ue`
        box-shadow: inset 0 0 0 2px ${n.theme.colors.tossRed}!important;
      `}
  }
  ${({disabled:n})=>!n&&ue`
      &:hover {
        box-shadow: none;
      }
    `}
  ${({error:n})=>n&&ue`
      box-shadow: inset 0 0 0 2px ${({theme:e})=>e.colors.tossRed};
    `}
  transition: 0.3s;
`,qse=g.div`
  height: 20px;
  width: 20px;
  margin: 0 -8px 0 18px;
  display: flex;
  align-items: center;
  cursor: pointer;
`,Gse=g.div`
  height: 20px;
  display: flex;
  align-items: center;
  color: ${n=>n.theme.colors.tossRed};
  font-size: ${n=>n.theme.fontSize.body2};
  padding-left: 5px;
`,Zw=g.input`
  padding: 0 14px;
  margin: 2px 0;
  border: 0;
  border-radius: 10px;
  height: 50px;
  font-size: ${n=>n.theme.fontSize.body1};
  outline: none;
  flex-grow: 1;
  background: none;
  font-weight: 400;
  color: ${n=>n.theme.colors.grey700};
  box-sizing: border-box;
  box-shadow: inset 0 0 0 1px ${n=>n.theme.colors.grey300};
  cursor: text;
  &::placeholder {
    color: ${n=>n.theme.colors.grey400};
    font-weight: 300;
  }
  &:hover {
    box-shadow: inset 0 0 0 2px ${n=>n.theme.colors.tossBlue200};
    ${n=>n.error&&ue`
        box-shadow: inset 0 0 0 2px ${n.theme.colors.tossRed};
      `}
  }
  &:focus {
    box-sizing: border-box;
    box-shadow: inset 0 0 0 2px ${n=>n.theme.colors.tossBlue500};
    ${n=>n.error&&ue`
        box-shadow: inset 0 0 0 2px ${n.theme.colors.tossRed}!important;
      `}
  }
  ${n=>n.disabled&&ue`
      background: ${e=>e.theme.colors.grey100};
      &:hover {
        box-shadow: inset 0 0 0 1px ${e=>e.theme.colors.grey300};
        cursor: not-allowed;
      }
    `}
  ${n=>n.error&&ue`
      box-shadow: inset 0 0 0 2px ${n.theme.colors.tossRed};
    `}
  transition: 0.3s;
`,hF=g.button`
  display: flex;
  align-items: center;
  justify-content: center;
  border: 0 solid ${n=>n.theme.colors.grey300};
  font-size: ${n=>n.theme.fontSize.body2};
  padding: 10px 30px;
  cursor: pointer;
  box-shadow: 0 2px 12px rgba(25, 31, 40, 0.08);
  border-radius: 10px;
  color: ${({theme:n})=>n.colors.white};
  ${({border:n})=>n&&ue`
      border: 1px solid ${n};
    `}
  ${({disable:n})=>n&&ue`
      cursor: not-allowed;
      opacity: 0.5;
    `}
  ${({size:n})=>n==="large"&&ue`
      padding: 8px 86px;
    `}
  ${({background:n})=>n&&ue`
      background: ${({theme:e})=>e.colors[n]};
    `}
  ${({color:n})=>n&&ue`
      color: ${({theme:e})=>e.colors[n]};
    `}
`,ya=({text:n,color:e,disable:t,onClick:i,type:r})=>f(hF,{color:e?"white":"grey900",border:e||"white",background:e||"white",disable:t,onClick:i,type:r,children:n}),dF=g(ee.div)`
  margin: 0 auto;
  background: #fff;
  border-radius: 10px;
  box-shadow: 5px 5px 5px 5px rgba(0, 0, 0, 0.1);
  padding: 20px 30px;
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  gap: 8px;
`,fF=()=>{const[n,e]=Lt(po),[t,i]=He(""),[r,s]=He(""),[o,a]=He(""),c=u=>{const{name:h,value:d}=u.target;h==="email"?i(d):h==="password"&&s(d)},l=async u=>{u.preventDefault(),jD(Y0,t,r).then(h=>{e({...n,[vt.ADMIN_SIGN_UP]:!1})}).catch(h=>{h.code=="auth/email-already-in-use"?a("\uC774\uBBF8 \uC0AC\uC6A9 \uC911\uC778 \uC774\uBA54\uC77C\uC785\uB2C8\uB2E4."):h.code=="auth/invalid-email"?a("\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uC774\uBA54\uC77C\uC785\uB2C8\uB2E4."):h.code=="operation-not-allowed"?a("\uC774\uBA54\uC77C \uAC00\uC785\uC774 \uC911\uC9C0\uB418\uC5C8\uC2B5\uB2C8\uB2E4."):h.code=="auth/weak-password"?a("\uBE44\uBC00\uBC88\uD638\uB97C 6\uC790\uB9AC \uC774\uC0C1 \uC785\uB825\uD558\uC138\uC694."):h.code=="auth/user-not-found"?a("\uC62C\uBC14\uB974\uC9C0 \uC54A\uC740 \uC720\uC800\uC815\uBCF4\uC785\uB2C8\uB2E4."):h.code=="auth/wrong-password"&&a("\uC62C\uBC14\uB974\uC9C0 \uC54A\uC740 \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4.")})};return f(er,{children:n.adminSignUp&&f(cF,{children:f(Z9,{outsideClick:()=>e({...n,[vt.ADMIN_SIGN_UP]:!1}),children:R(dF,{variants:J2,exit:"unActive",animate:"active",initial:"unActive",children:[f(Zw,{onChange:c,name:"email",placeholder:"\uC774\uBA54\uC77C"}),f(Zw,{onChange:c,name:"password",placeholder:"\uBE44\uBC00\uBC88\uD638"}),f("div",{children:o}),f(ya,{text:"\uD68C\uC6D0\uAC00\uC785",color:"tossBlue",onClick:l})]})})})})},pF=g.div`
  width: 36px;
  height: 18px;
  background-color: ${n=>n.theme.colors.grey700};
  display: flex;
  justify-content: flex-start;
  border: 1px solid transparent;
  border-color: ${n=>n.theme.colors.grey700};
  border-radius: 50px;
  padding: 3px;
  cursor: pointer;
  &[data-isOn='true'] {
    justify-content: flex-end;
    background-color: ${n=>n.theme.colors.tossBlue};
  }
`,mF=g(ee.div)`
  width: 18px;
  height: 18px;
  background-color: white;
  border-radius: 40px;
`,Z2=g.div`
  display: flex;
  justify-content: flex-end;
  width: 100%;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px;
  height: 70px;
  box-sizing: border-box;
  flex-direction: row;
`,gF=g.div`
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
`,yF=g.div`
  display: flex;
  flex-direction: row;
  margin: 10px 10px;
`,eC=g.div`
  position: relative;
  display: flex;
  flex-direction: row;
  width: 100%;
  height: 100%;
  margin: 0 auto;
  min-width: 320px;
  flex: 1;
`,_F=g(ee.div)`
  display: flex;
  flex-direction: row;
  padding: 10px 20px;
  justify-content: space-between;
  box-shadow: ${({theme:n})=>n.colors.boxShadow100};
  border-radius: 10px;
  box-sizing: border-box;
  align-items: center;
  cursor: pointer;
  height: 50px;
  width: 400px;
  background: ${({theme:n})=>n.colors.white};
`,ev=g(ee.div)`
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey900};
  min-width: 50px;
  max-width: 70px;
  white-space: nowrap;
  overflow: hidden;
  display: block;
  text-overflow: ellipsis;
`,wF=g(ee.div)`
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey900};
  text-overflow: ellipsis;
  width: 150px;
  white-space: nowrap;
  overflow: hidden;
  display: block;
`,vF=g.div`
  padding: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  ${({color:n})=>n&&ue`
      color: ${({theme:e})=>e.colors[n]};
      background: ${({theme:e})=>e.colors.white};
      border: 1px solid ${({theme:e})=>e.colors[n]};
    `}
  font-size: ${({theme:n})=>n.fontSize.body3};
  width: fit-content;
  border-radius: 4px;
  ${({disable:n})=>n&&ue`
      color: ${({theme:e})=>e.colors.grey400};
      background: ${({theme:e})=>e.colors.white};
      border: 1px solid ${({theme:e})=>e.colors.grey400};
    `}
`,tv={DOCS:{color:"googleBlue",text:"\uC11C\uB958\uC2EC\uC0AC"},INTERVIEW:{color:"googleYellow",text:"\uC778\uD130\uBDF0"},REJECTED_DOCS:{color:"orange900",text:"\uC11C\uB958 \uBD88\uD569\uACA9"},REJECTED_INTERVIEW:{color:"googleRed",text:"\uBA74\uC811 \uBD88\uD569\uACA9"},HIRED:{color:"googleGreen",text:"\uCD5C\uC885\uD569\uACA9"}},Qn=({status:n,disable:e})=>f(fo,{children:n&&f(vF,{color:tv[n].color,disable:e,children:tv[n].text})}),kF=({name:n,email:e,position:t,status:i,id:r})=>R(_F,{layoutId:`card-${r}`,children:[f(ev,{children:n}),f(ev,{children:t.split(" ")[0]}),f(wF,{children:e}),f(Qn,{status:i})]}),bF=g.div`
  display: flex;
  justify-content: center;
  width: 25%;
  margin-bottom: 1%;
  @media (max-width: 2450px) {
    width: 25%;
  }
  @media (max-width: 1950px) {
    width: 33.33%;
  }
  @media (max-width: 1525px) {
    width: 50%;
  }
  @media (max-width: 1100px) {
    width: 100%;
  }
`,EF=g.section`
  display: flex;
  flex-wrap: wrap;
  width: 100%;
  box-sizing: border-box;
`,IF=g.div`
  display: flex;
  align-items: center;
  flex-direction: column;
  flex-wrap: wrap;
  gap: 10px;
  padding: 0 20px;
  width: 100%;
  margin: 0 auto;
  box-sizing: border-box;
`,TF=g.div`
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.1);
  z-index: 1000;
`,CF=g(ee.div)`
  background: ${({theme:n})=>n.colors.white};
  display: flex;
  align-items: center;

  width: 1300px;
  height: 800px;
  border-radius: 20px;
`,SF=g.div`
  background: ${({theme:n})=>n.colors.grey100};
  height: 100%;
  width: 280px;
  padding: 10px 10px;
  box-sizing: border-box;
  border-radius: 20px 0 0 20px;
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  gap: 10px;
`,xF=g.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  height: 100%;
`,AF=g.div`
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 0 14px;
  flex-wrap: wrap;
  gap: 5px;
  border-bottom: 1px solid ${({theme:n})=>n.colors.grey300};
`,RF=g.div`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: row;
`,DF=g.div`
  padding: 20px 18px;
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  gap: 14px;
  border: 1px solid ${({theme:n})=>n.colors.grey300};
  border-radius: 14px;
  justify-content: flex-start;
  background: ${({theme:n})=>n.colors.white};
`,NF=g.div`
  width: 100%;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
`,PF=g(ee.p)`
  font-size: ${({theme:n})=>n.fontSize.body1};
  color: ${({theme:n})=>n.colors.grey900};
  font-weight: bold;
`,Ti=g.div`
  display: flex;
  flex-direction: row;
`,Vt=g(ee.p)`
  font-size: ${({theme:n})=>n.fontSize.body3};
  color: ${({theme:n})=>n.colors.grey900};
  min-width: 60px;
  max-width: 150px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
`,vp=g.a`
  font-size: ${({theme:n})=>n.fontSize.body3};
  color: ${({theme:n})=>n.colors.tossBlue};
  min-width: 60px;
  max-width: 150px;
  text-decoration: none;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
`,OF=g.section`
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  row-gap: 10px;
  gap: 10px;
`,mc=g.div`
  display: flex;
  height: fit-content;
`,MF=g.div`
  width: 100%;
  padding: 20px;
  height: 760px;
  box-sizing: border-box;
  overflow: scroll;
`,LF=g.div`
  font-size: ${({theme:n})=>n.fontSize.h7};
  color: ${({theme:n})=>n.colors.grey900};
  margin-bottom: 6px;
`,FF=g(ee.p)`
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey800};
  margin-bottom: 20px;
`;var $F="/assets/Clear.a34de3c3.svg";const UF=g.button`
  display: flex;
  justify-content: center;
  align-items: center;
  background: ${({theme:n})=>n.colors.white};
  width: 30px;
  height: 30px;
  border-radius: 7px;
  border: 1px solid ${({theme:n})=>n.colors.grey50};
  cursor: pointer;
  &:hover {
    background: ${({theme:n})=>n.colors.grey200};
  }
`,BF=g.img`
  height: 16px;
`,VF=({onClick:n})=>f(UF,{onClick:n,children:f(BF,{src:$F})}),qF=(n,e)=>e.some(t=>n instanceof t);let nv,iv;function GF(){return nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jF(){return iv||(iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tC=new WeakMap,Rm=new WeakMap,nC=new WeakMap,kp=new WeakMap,ey=new WeakMap;function zF(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Vi(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&tC.set(t,n)}).catch(()=>{}),ey.set(e,n),e}function WF(n){if(Rm.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Rm.set(n,e)}let Dm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function KF(n){Dm=n(Dm)}function HF(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(bp(this),e,...t);return nC.set(i,e.sort?e.sort():[e]),Vi(i)}:jF().includes(n)?function(...e){return n.apply(bp(this),e),Vi(tC.get(this))}:function(...e){return Vi(n.apply(bp(this),e))}}function QF(n){return typeof n=="function"?HF(n):(n instanceof IDBTransaction&&WF(n),qF(n,GF())?new Proxy(n,Dm):n)}function Vi(n){if(n instanceof IDBRequest)return zF(n);if(kp.has(n))return kp.get(n);const e=QF(n);return e!==n&&(kp.set(n,e),ey.set(e,n)),e}const bp=n=>ey.get(n);function Du(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=Vi(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Vi(o.result),c.oldVersion,c.newVersion,Vi(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}function Xo(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Vi(t).then(()=>{})}const YF=["get","getKey","getAll","getAllKeys","count"],XF=["put","add","delete","clear"],Ep=new Map;function rv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ep.get(e))return Ep.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=XF.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||YF.includes(t)))return;const s=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let l=c.store;return i&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),r&&c.done]))[0]};return Ep.set(e,s),s}KF(n=>({...n,get:(e,t,i)=>rv(e,t)||n.get(e,t,i),has:(e,t)=>!!rv(e,t)||n.has(e,t)}));const iC="@firebase/installations",ty="0.5.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=1e4,sC=`w:${ty}`,oC="FIS_v2",JF="https://firebaseinstallations.googleapis.com/v1",ZF=60*60*1e3,e$="installations",t$="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},qs=new tn(e$,t$,n$);function aC(n){return n instanceof Ce&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC({projectId:n}){return`${JF}/projects/${n}/installations`}function lC(n){return{token:n.token,requestStatus:2,expiresIn:r$(n.expiresIn),creationTime:Date.now()}}async function uC(n,e){const i=(await e.json()).error;return qs.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function hC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function i$(n,{refreshToken:e}){const t=hC(n);return t.append("Authorization",s$(e)),t}async function dC(n){const e=await n();return e.status>=500&&e.status<600?n():e}function r$(n){return Number(n.replace("s","000"))}function s$(n){return`${oC} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o$({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=cC(n),r=hC(n),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&r.append("x-firebase-client",l)}const o={fid:t,authVersion:oC,appId:n.appId,sdkVersion:sC},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await dC(()=>fetch(i,a));if(c.ok){const l=await c.json();return{fid:l.fid||t,registrationStatus:2,refreshToken:l.refreshToken,authToken:lC(l.authToken)}}else throw await uC("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a$(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$=/^[cdef][\w-]{21}$/,Nm="";function l$(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=u$(n);return c$.test(t)?t:Nm}catch{return Nm}}function u$(n){return a$(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Map;function mC(n,e){const t=Z0(n);gC(t,e),h$(t,e)}function gC(n,e){const t=pC.get(n);if(!!t)for(const i of t)i(e)}function h$(n,e){const t=d$();t&&t.postMessage({key:n,fid:e}),f$()}let ws=null;function d$(){return!ws&&"BroadcastChannel"in self&&(ws=new BroadcastChannel("[Firebase] FID Change"),ws.onmessage=n=>{gC(n.data.key,n.data.fid)}),ws}function f$(){pC.size===0&&ws&&(ws.close(),ws=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$="firebase-installations-database",m$=1,Gs="firebase-installations-store";let Ip=null;function ny(){return Ip||(Ip=Du(p$,m$,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Gs)}}})),Ip}async function kd(n,e){const t=Z0(n),r=(await ny()).transaction(Gs,"readwrite"),s=r.objectStore(Gs),o=await s.get(t);return await s.put(e,t),await r.done,(!o||o.fid!==e.fid)&&mC(n,e.fid),e}async function yC(n){const e=Z0(n),i=(await ny()).transaction(Gs,"readwrite");await i.objectStore(Gs).delete(e),await i.done}async function ef(n,e){const t=Z0(n),r=(await ny()).transaction(Gs,"readwrite"),s=r.objectStore(Gs),o=await s.get(t),a=e(o);return a===void 0?await s.delete(t):await s.put(a,t),await r.done,a&&(!o||o.fid!==a.fid)&&mC(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iy(n){let e;const t=await ef(n.appConfig,i=>{const r=g$(i),s=y$(n,r);return e=s.registrationPromise,s.installationEntry});return t.fid===Nm?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function g$(n){const e=n||{fid:l$(),registrationStatus:0};return _C(e)}function y$(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(qs.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=_$(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:w$(n)}:{installationEntry:e}}async function _$(n,e){try{const t=await o$(n,e);return kd(n.appConfig,t)}catch(t){throw aC(t)&&t.customData.serverCode===409?await yC(n.appConfig):await kd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function w$(n){let e=await sv(n.appConfig);for(;e.registrationStatus===1;)await fC(100),e=await sv(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await iy(n);return i||t}return e}function sv(n){return ef(n,e=>{if(!e)throw qs.create("installation-not-found");return _C(e)})}function _C(n){return v$(n)?{fid:n.fid,registrationStatus:0}:n}function v$(n){return n.registrationStatus===1&&n.registrationTime+rC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k$({appConfig:n,heartbeatServiceProvider:e},t){const i=b$(n,t),r=i$(n,t),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&r.append("x-firebase-client",l)}const o={installation:{sdkVersion:sC,appId:n.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await dC(()=>fetch(i,a));if(c.ok){const l=await c.json();return lC(l)}else throw await uC("Generate Auth Token",c)}function b$(n,{fid:e}){return`${cC(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ry(n,e=!1){let t;const i=await ef(n.appConfig,s=>{if(!wC(s))throw qs.create("not-registered");const o=s.authToken;if(!e&&T$(o))return s;if(o.requestStatus===1)return t=E$(n,e),s;{if(!navigator.onLine)throw qs.create("app-offline");const a=S$(s);return t=I$(n,a),a}});return t?await t:i.authToken}async function E$(n,e){let t=await ov(n.appConfig);for(;t.authToken.requestStatus===1;)await fC(100),t=await ov(n.appConfig);const i=t.authToken;return i.requestStatus===0?ry(n,e):i}function ov(n){return ef(n,e=>{if(!wC(e))throw qs.create("not-registered");const t=e.authToken;return x$(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function I$(n,e){try{const t=await k$(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await kd(n.appConfig,i),t}catch(t){if(aC(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await yC(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await kd(n.appConfig,i)}throw t}}function wC(n){return n!==void 0&&n.registrationStatus===2}function T$(n){return n.requestStatus===2&&!C$(n)}function C$(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+ZF}function S$(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function x$(n){return n.requestStatus===1&&n.requestTime+rC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A$(n){const e=n,{installationEntry:t,registrationPromise:i}=await iy(e);return i?i.catch(console.error):ry(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R$(n,e=!1){const t=n;return await D$(t),(await ry(t,e)).token}async function D$(n){const{registrationPromise:e}=await iy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(n){if(!n||!n.options)throw Tp("App Configuration");if(!n.name)throw Tp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Tp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Tp(n){return qs.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="installations",P$="installations-internal",O$=n=>{const e=n.getProvider("app").getImmediate(),t=N$(e),i=tr(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},M$=n=>{const e=n.getProvider("app").getImmediate(),t=tr(e,vC).getImmediate();return{getId:()=>A$(t),getToken:r=>R$(t,r)}};function L$(){Ue(new fe(vC,O$,"PUBLIC")),Ue(new fe(P$,M$,"PRIVATE"))}L$();_e(iC,ty);_e(iC,ty,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="analytics",F$="firebase_id",$$="origin",U$=60*1e3,B$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kC="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt=new Ei("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function V$(n,e){const t=document.createElement("script");t.src=`${kC}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function q$(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function G$(n,e,t,i,r,s){const o=i[r];try{if(o)await e[o];else{const c=(await bC(t)).find(l=>l.measurementId===r);c&&await e[c.appId]}}catch(a){xt.error(a)}n("config",r,s)}async function j$(n,e,t,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await bC(t);for(const c of o){const l=a.find(h=>h.measurementId===c),u=l&&e[l.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",i,r||{})}catch(s){xt.error(s)}}function z$(n,e,t,i){async function r(s,o,a){try{s==="event"?await j$(n,e,t,o,a):s==="config"?await G$(n,e,t,i,o,a):s==="consent"?n("consent","update",a):n("set",o)}catch(c){xt.error(c)}}return r}function W$(n,e,t,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=z$(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}function K$(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(kC))return e;return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},Dn=new tn("analytics","Analytics",H$);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$=30,Y$=1e3;class X${constructor(e={},t=Y$){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const EC=new X$;function J$(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Z$(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:J$(i)},s=B$.replace("{app-id}",t),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Dn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function eU(n,e=EC,t){const{appId:i,apiKey:r,measurementId:s}=n.options;if(!i)throw Dn.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Dn.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new iU;return setTimeout(async()=>{a.abort()},t!==void 0?t:U$),IC({appId:i,apiKey:r,measurementId:s},o,a,e)}async function IC(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=EC){var s,o;const{appId:a,measurementId:c}=n;try{await tU(i,e)}catch(l){if(c)return xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${(s=l)===null||s===void 0?void 0:s.message}]`),{appId:a,measurementId:c};throw l}try{const l=await Z$(n);return r.deleteThrottleMetadata(a),l}catch(l){const u=l;if(!nU(u)){if(r.deleteThrottleMetadata(a),c)return xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw l}const h=Number((o=u==null?void 0:u.customData)===null||o===void 0?void 0:o.httpStatus)===503?Yh(t,r.intervalMillis,Q$):Yh(t,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return r.setThrottleMetadata(a,d),xt.debug(`Calling attemptFetch again in ${h} millis`),IC(n,d,i,r)}}function tU(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(Dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nU(n){if(!(n instanceof Ce)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class iU{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function rU(n,e,t,i,r){if(r&&r.global){n("event",t,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});n("event",t,o)}}async function sU(n,e,t,i){if(i&&i.global)return n("set",{screen_name:t}),Promise.resolve();{const r=await e;n("config",r,{update:!0,screen_name:t})}}async function oU(n,e,t,i){if(i&&i.global)return n("set",{user_id:t}),Promise.resolve();{const r=await e;n("config",r,{update:!0,user_id:t})}}async function aU(n,e,t,i){if(i&&i.global){const r={};for(const s of Object.keys(t))r[`user_properties.${s}`]=t[s];return n("set",r),Promise.resolve()}else{const r=await e;n("config",r,{update:!0,user_properties:t})}}async function cU(n,e){const t=await n;window[`ga-disable-${t}`]=!e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(){var n;if(kn())try{await p0()}catch(e){return xt.warn(Dn.create("indexeddb-unavailable",{errorInfo:(n=e)===null||n===void 0?void 0:n.toString()}).message),!1}else return xt.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function uU(n,e,t,i,r,s,o){var a;const c=eU(n);c.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&xt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>xt.error(p)),e.push(c);const l=lU().then(p=>{if(p)return i.getId()}),[u,h]=await Promise.all([c,l]);K$()||V$(s,u.measurementId),r("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[$$]="firebase",d.update=!0,h!=null&&(d[F$]=h),r("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.app=e}_delete(){return delete qi[this.app.options.appId],Promise.resolve()}}let qi={},cv=[];const lv={};let Lh="dataLayer",TC="gtag",uv,Nu,Pm=!1;function dU(n){if(Pm)throw Dn.create("already-initialized");n.dataLayerName&&(Lh=n.dataLayerName),n.gtagName&&(TC=n.gtagName)}function fU(){const n=[];if(mo()&&n.push("This is a browser extension environment."),m0()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=Dn.create("invalid-analytics-context",{errorInfo:e});xt.warn(t.message)}}function pU(n,e,t){fU();const i=n.options.appId;if(!i)throw Dn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dn.create("no-api-key");if(qi[i]!=null)throw Dn.create("already-exists",{id:i});if(!Pm){q$(Lh);const{wrappedGtag:s,gtagCore:o}=W$(qi,cv,lv,Lh,TC);Nu=s,uv=o,Pm=!0}return qi[i]=uU(n,cv,lv,e,uv,Lh,t),new hU(n)}async function mU(){if(mo()||!m0()||!kn())return!1;try{return await p0()}catch{return!1}}function gU(n,e,t){n=k(n),sU(Nu,qi[n.app.options.appId],e,t).catch(i=>xt.error(i))}function yU(n,e,t){n=k(n),oU(Nu,qi[n.app.options.appId],e,t).catch(i=>xt.error(i))}function _U(n,e,t){n=k(n),aU(Nu,qi[n.app.options.appId],e,t).catch(i=>xt.error(i))}function wU(n,e){n=k(n),cU(qi[n.app.options.appId],e).catch(t=>xt.error(t))}function CC(n,e,t,i){n=k(n),rU(Nu,qi[n.app.options.appId],e,t,i).catch(r=>xt.error(r))}const hv="@firebase/analytics",dv="0.8.0";function vU(){Ue(new fe(av,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return pU(i,r,t)},"PUBLIC")),Ue(new fe("analytics-internal",n,"PRIVATE")),_e(hv,dv),_e(hv,dv,"esm2017");function n(e){try{const t=e.getProvider(av).getImmediate();return{logEvent:(i,r,s)=>CC(t,i,r,s)}}catch(t){throw Dn.create("interop-component-reg-failed",{reason:t})}}}vU();const kU="@firebase/analytics-compat",bU="0.1.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,i){CC(this._delegate,e,t,i)}setCurrentScreen(e,t){gU(this._delegate,e,t)}setUserId(e,t){yU(this._delegate,e,t)}setUserProperties(e,t){_U(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){wU(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Om;(function(n){n.ADD_SHIPPING_INFO="add_shipping_info",n.ADD_PAYMENT_INFO="add_payment_info",n.ADD_TO_CART="add_to_cart",n.ADD_TO_WISHLIST="add_to_wishlist",n.BEGIN_CHECKOUT="begin_checkout",n.CHECKOUT_PROGRESS="checkout_progress",n.EXCEPTION="exception",n.GENERATE_LEAD="generate_lead",n.LOGIN="login",n.PAGE_VIEW="page_view",n.PURCHASE="purchase",n.REFUND="refund",n.REMOVE_FROM_CART="remove_from_cart",n.SCREEN_VIEW="screen_view",n.SEARCH="search",n.SELECT_CONTENT="select_content",n.SELECT_ITEM="select_item",n.SELECT_PROMOTION="select_promotion",n.SET_CHECKOUT_OPTION="set_checkout_option",n.SHARE="share",n.SIGN_UP="sign_up",n.TIMING_COMPLETE="timing_complete",n.VIEW_CART="view_cart",n.VIEW_ITEM="view_item",n.VIEW_ITEM_LIST="view_item_list",n.VIEW_PROMOTION="view_promotion",n.VIEW_SEARCH_RESULTS="view_search_results"})(Om||(Om={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU=n=>{const e=n.getProvider("app-compat").getImmediate(),t=n.getProvider("analytics").getImmediate();return new SC(e,t)};function IU(){const n={Analytics:SC,settings:dU,isSupported:mU,EventName:Om};Ze.INTERNAL.registerComponent(new fe("analytics-compat",EU,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}IU();Ze.registerVersion(kU,bU);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new Map,TU={activated:!1,tokenObservers:[]},CU={initialized:!1,enabled:!1};function ft(n){return xC.get(n)||TU}function zn(n,e){xC.set(n,e)}function tf(){return CU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="https://content-firebaseappcheck.googleapis.com/v1",SU="exchangeRecaptchaV3Token",xU="exchangeRecaptchaEnterpriseToken",AU="exchangeDebugToken",fv={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},RU=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new We,await NU(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new We,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}function NU(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Yt=new tn("appCheck","AppCheck",PU);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(n=!1){var e;return n?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function AC(n){if(!ft(n).activated)throw Yt.create("use-before-activation",{appName:n.name})}function oy(n){const e=Math.round(n/1e3),t=Math.floor(e/(3600*24)),i=Math.floor((e-t*3600*24)/3600),r=Math.floor((e-t*3600*24-i*3600)/60),s=e-t*3600*24-i*3600-r*60;let o="";return t&&(o+=ph(t)+"d:"),i&&(o+=ph(i)+"h:"),o+=ph(r)+"m:"+ph(s)+"s",o}function ph(n){return n===0?"00":n>=10?n.toString():"0"+n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ay({url:n,body:e},t){var i,r;const s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&(s["X-Firebase-Client"]=p)}const a={method:"POST",body:JSON.stringify(e),headers:s};let c;try{c=await fetch(n,a)}catch(p){throw Yt.create("fetch-network-error",{originalErrorMessage:(i=p)===null||i===void 0?void 0:i.message})}if(c.status!==200)throw Yt.create("fetch-status-error",{httpStatus:c.status});let l;try{l=await c.json()}catch(p){throw Yt.create("fetch-parse-error",{originalErrorMessage:(r=p)===null||r===void 0?void 0:r.message})}const u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Yt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const h=Number(u[1])*1e3,d=Date.now();return{token:l.token,expireTimeMillis:d+h,issuedAtTimeMillis:d}}function OU(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${sy}/projects/${t}/apps/${i}:${SU}?key=${r}`,body:{recaptcha_v3_token:e}}}function MU(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${sy}/projects/${t}/apps/${i}:${xU}?key=${r}`,body:{recaptcha_enterprise_token:e}}}function LU(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${sy}/projects/${t}/apps/${i}:${AU}?key=${r}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="firebase-app-check-database",$U=1,bl="firebase-app-check-store",RC="debug-token";let mh=null;function DC(){return mh||(mh=new Promise((n,e)=>{var t;try{const i=indexedDB.open(FU,$U);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;e(Yt.create("storage-open",{originalErrorMessage:(s=r.target.error)===null||s===void 0?void 0:s.message}))},i.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(bl,{keyPath:"compositeKey"})}}}catch(i){e(Yt.create("storage-open",{originalErrorMessage:(t=i)===null||t===void 0?void 0:t.message}))}}),mh)}function UU(n){return PC(OC(n))}function BU(n,e){return NC(OC(n),e)}function VU(n){return NC(RC,n)}function qU(){return PC(RC)}async function NC(n,e){const i=(await DC()).transaction(bl,"readwrite"),s=i.objectStore(bl).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var l;a(Yt.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}async function PC(n){const t=(await DC()).transaction(bl,"readonly"),r=t.objectStore(bl).get(n);return new Promise((s,o)=>{r.onsuccess=a=>{const c=a.target.result;s(c?c.value:void 0)},t.onerror=a=>{var c;o(Yt.create("storage-get",{originalErrorMessage:(c=a.target.error)===null||c===void 0?void 0:c.message}))}})}function OC(n){return`${n.options.appId}-${n.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=new Ei("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(n){if(kn()){let e;try{e=await UU(n)}catch(t){El.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}}function pv(n,e){return kn()?BU(n,e).catch(t=>{El.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}async function jU(){let n;try{n=await qU()}catch{}if(n)return n;{const e=Y6();return VU(e).catch(t=>El.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return tf().enabled}async function LC(){const n=tf();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function zU(){const n=U6(),e=tf();if(e.initialized=!0,typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&n.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const t=new We;e.token=t,typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?t.resolve(n.FIREBASE_APPCHECK_DEBUG_TOKEN):t.resolve(jU())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU={error:"UNKNOWN_ERROR"};function KU(n){return f0.encodeString(JSON.stringify(n),!1)}async function Ed(n,e=!1){const t=n.app;AC(t);const i=ft(t);let r=i.token,s;if(!r){const c=await i.cachedTokenPromise;c&&Id(c)&&(r=c)}if(!e&&r&&Id(r))return{token:r.token};let o=!1;if(MC()){i.exchangeTokenPromise||(i.exchangeTokenPromise=ay(LU(t,await LC()),n.heartbeatServiceProvider).then(l=>(i.exchangeTokenPromise=void 0,l)),o=!0);const c=await i.exchangeTokenPromise;return await pv(t,c),zn(t,Object.assign(Object.assign({},i),{token:c})),{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(c=>(i.exchangeTokenPromise=void 0,c)),o=!0),r=await i.exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?El.warn(c.message):El.error(c),s=c}let a;return r?(a={token:r.token},zn(t,Object.assign(Object.assign({},i),{token:r})),await pv(t,r)):a=QU(s),o&&FC(t,a),a}function cy(n,e,t,i){const{app:r}=n,s=ft(r),o={next:t,error:i,type:e};if(zn(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&Id(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),mv(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>mv(n))}function ly(n,e){const t=ft(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),zn(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function mv(n){const{app:e}=n,t=ft(e);let i=t.tokenRefresher;i||(i=HU(n),zn(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function HU(n){const{app:e}=n;return new DU(async()=>{const t=ft(e);let i;if(t.token?i=await Ed(n,!0):i=await Ed(n),i.error)throw i.error},()=>!0,()=>{const t=ft(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5;const r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},fv.RETRIAL_MIN_WAIT,fv.RETRIAL_MAX_WAIT)}function FC(n,e){const t=ft(n).tokenObservers;for(const i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Id(n){return n.expireTimeMillis-Date.now()>0}function QU(n){return{token:KU(WU),error:n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ft(this.app);for(const t of e)ly(this.app,t.next);return Promise.resolve()}}function XU(n,e){return new YU(n,e)}function JU(n){return{getToken:e=>Ed(n,e),addTokenListener:e=>cy(n,"INTERNAL",e),removeTokenListener:e=>ly(n.app,e)}}const ZU="@firebase/app-check",eB="0.5.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="https://www.google.com/recaptcha/api.js",nB="https://www.google.com/recaptcha/enterprise.js";function iB(n,e){const t=ft(n),i=new We;zn(n,Object.assign(Object.assign({},t),{reCAPTCHAState:{initialized:i}}));const r=$C(n),s=bd(!1);return s?Td(n,e,s,r,i):oB(()=>{const o=bd(!1);if(!o)throw new Error("no recaptcha");Td(n,e,o,r,i)}),i.promise}function rB(n,e){const t=ft(n),i=new We;zn(n,Object.assign(Object.assign({},t),{reCAPTCHAState:{initialized:i}}));const r=$C(n),s=bd(!0);return s?Td(n,e,s,r,i):aB(()=>{const o=bd(!0);if(!o)throw new Error("no recaptcha");Td(n,e,o,r,i)}),i.promise}function Td(n,e,t,i,r){t.ready(()=>{sB(n,e,t,i),r.resolve(t)})}function $C(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}async function UC(n){AC(n);const t=await ft(n).reCAPTCHAState.initialized.promise;return new Promise((i,r)=>{const s=ft(n).reCAPTCHAState;t.ready(()=>{i(t.execute(s.widgetId,{action:"fire_app_check"}))})})}function sB(n,e,t,i){const r=t.render(i,{sitekey:e,size:"invisible"}),s=ft(n);zn(n,Object.assign(Object.assign({},s),{reCAPTCHAState:Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:r})}))}function oB(n){const e=document.createElement("script");e.src=tB,e.onload=n,document.head.appendChild(e)}function aB(n){const e=document.createElement("script");e.src=nB,e.onload=n,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e;VC(this._throttleData);const t=await UC(this._app).catch(r=>{throw Yt.create("recaptcha-error")});let i;try{i=await ay(OU(this._app,t),this._heartbeatServiceProvider)}catch(r){throw r.code==="fetch-status-error"?(this._throttleData=BC(Number((e=r.customData)===null||e===void 0?void 0:e.httpStatus),this._throttleData),Yt.create("throttled",{time:oy(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,i}initialize(e){this._app=e,this._heartbeatServiceProvider=tr(e,"heartbeat"),iB(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof Il?this._siteKey===e._siteKey:!1}}class nf{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e;VC(this._throttleData);const t=await UC(this._app).catch(r=>{throw Yt.create("recaptcha-error")});let i;try{i=await ay(MU(this._app,t),this._heartbeatServiceProvider)}catch(r){throw r.code==="fetch-status-error"?(this._throttleData=BC(Number((e=r.customData)===null||e===void 0?void 0:e.httpStatus),this._throttleData),Yt.create("throttled",{time:oy(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,i}initialize(e){this._app=e,this._heartbeatServiceProvider=tr(e,"heartbeat"),rB(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof nf?this._siteKey===e._siteKey:!1}}class Tl{constructor(e){this._customProviderOptions=e}async getToken(){const e=await this._customProviderOptions.getToken(),t=G6(e.token),i=t!==null&&t<Date.now()&&t>0?t*1e3:Date.now();return Object.assign(Object.assign({},e),{issuedAtTimeMillis:i})}initialize(e){this._app=e}isEqual(e){return e instanceof Tl?this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString():!1}}function BC(n,e){if(n===404||n===403)return{backoffCount:1,allowRequestsAfter:Date.now()+RU,httpStatus:n};{const t=e?e.backoffCount:0,i=Yh(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+i,httpStatus:n}}}function VC(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw Yt.create("throttled",{time:oy(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(n=l0(),e){n=k(n);const t=tr(n,"app-check");if(tf().initialized||zU(),MC()&&LC().then(r=>console.log(`App Check debug token: ${r}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return r;throw Yt.create("already-initialized",{appName:n.name})}const i=t.initialize({options:e});return lB(n,e.provider,e.isTokenAutoRefreshEnabled),ft(n).isTokenAutoRefreshEnabled&&cy(i,"INTERNAL",()=>{}),i}function lB(n,e,t){const i=ft(n),r=Object.assign(Object.assign({},i),{activated:!0});r.provider=e,r.cachedTokenPromise=GU(n).then(s=>(s&&Id(s)&&(zn(n,Object.assign(Object.assign({},ft(n)),{token:s})),FC(n,{token:s.token})),s)),r.isTokenAutoRefreshEnabled=t===void 0?n.automaticDataCollectionEnabled:t,zn(n,r),r.provider.initialize(n)}function uB(n,e){const t=n.app,i=ft(t);i.tokenRefresher&&(e===!0?i.tokenRefresher.start():i.tokenRefresher.stop()),zn(t,Object.assign(Object.assign({},i),{isTokenAutoRefreshEnabled:e}))}async function hB(n,e){const t=await Ed(n,e);if(t.error)throw t.error;return{token:t.token}}function dB(n,e,t,i){let r=()=>{},s=()=>{};return e.next!=null?r=e.next.bind(e):r=e,e.error!=null?s=e.error.bind(e):t&&(s=t),cy(n,"EXTERNAL",r,s),()=>ly(n.app,r)}const fB="app-check",gv="app-check-internal";function pB(){Ue(new fe(fB,n=>{const e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return XU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gv).initialize()})),Ue(new fe(gv,n=>{const e=n.getProvider("app-check").getImmediate();return JU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),_e(ZU,eB)}pB();const mB="@firebase/app-check-compat",gB="0.2.11";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB={["use-before-activation"]:"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."},Cp=new tn("appCheck","AppCheck",yB);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e){this.app=e}activate(e,t){let i;typeof e=="string"?i=new Il(e):e instanceof nf||e instanceof Il||e instanceof Tl?i=e:i=new Tl({getToken:e.getToken}),this._delegate=cB(this.app,{provider:i,isTokenAutoRefreshEnabled:t})}setTokenAutoRefreshEnabled(e){if(!this._delegate)throw Cp.create("use-before-activation",{appName:this.app.name});uB(this._delegate,e)}getToken(e){if(!this._delegate)throw Cp.create("use-before-activation",{appName:this.app.name});return hB(this._delegate,e)}onTokenChanged(e,t,i){if(!this._delegate)throw Cp.create("use-before-activation",{appName:this.app.name});return dB(this._delegate,e,t)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=n=>{const e=n.getProvider("app-compat").getImmediate();return new _B(e)};function vB(){Ze.INTERNAL.registerComponent(new fe("appCheck-compat",wB,"PUBLIC").setServiceProps({ReCaptchaEnterpriseProvider:nf,ReCaptchaV3Provider:Il,CustomProvider:Tl}))}vB();Ze.registerVersion(mB,gB);const gc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},No={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kB(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function qC(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bB=kB,EB=qC,GC=new tn("auth","Firebase",qC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Ei("@firebase/auth");function Fh(n,...e){yv.logLevel<=Q.ERROR&&yv.error(`Auth (${fn}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,...e){throw uy(n,...e)}function At(n,...e){return uy(n,...e)}function jC(n,e,t){const i=Object.assign(Object.assign({},EB()),{[e]:t});return new tn("auth","Firebase",i).create(e,{appName:n.name})}function Xa(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Dt(n,"argument-error"),jC(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function uy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return GC.create(n,...e)}function C(n,e,...t){if(!n)throw uy(e,...t)}function ii(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fh(e),new Error(e)}function Wn(n,e){n||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map;function _n(n){Wn(n instanceof Function,"Expected a class definition");let e=_v.get(n);return e?(Wn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,_v.set(n,e),e)}function IB(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(_n);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hy(){return wv()==="http:"||wv()==="https:"}function wv(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hy()||mo()||"connection"in navigator)?navigator.onLine:!0}function CB(){if(typeof navigator=="undefined")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wn(t>e,"Short delay should be less than long delay!"),this.isMobile=Ba()||go()}get(){return TB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(n,e){Wn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB=new Pu(3e4,6e4);function et(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function gt(n,e,t,i,r={}){return WC(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Mn(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),zC.fetch()(KC(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function WC(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},SB),e);try{const r=new AB(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Oc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oc(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Oc(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Oc(n,"user-disabled",o);const u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw jC(n,u,l);Dt(n,u)}}catch(r){if(r instanceof Ce)throw r;Dt(n,"network-request-failed")}}async function nr(n,e,t,i,r={}){const s=await gt(n,e,t,i,r);return"mfaPendingCredential"in s&&Dt(n,"multi-factor-auth-required",{_serverResponse:s}),s}function KC(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?dy(n.config,r):`${n.config.apiScheme}://${r}`}class AB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(At(this.auth,"network-request-failed")),xB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Oc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=At(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(n,e){return gt(n,"POST","/v1/accounts:delete",e)}async function DB(n,e){return gt(n,"POST","/v1/accounts:update",e)}async function NB(n,e){return gt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(n){if(!!n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PB(n,e=!1){const t=k(n),i=await t.getIdToken(e),r=rf(i);C(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:zc(Sp(r.auth_time)),issuedAtTime:zc(Sp(r.iat)),expirationTime:zc(Sp(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Sp(n){return Number(n)*1e3}function rf(n){var e;const[t,i,r]=n.split(".");if(t===void 0||i===void 0||r===void 0)return Fh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Hh(i);return s?JSON.parse(s):(Fh("Failed to decode base64 JWT payload"),null)}catch(s){return Fh("Caught error parsing JWT payload as JSON",(e=s)===null||e===void 0?void 0:e.toString()),null}}function OB(n){const e=rf(n);return C(e,"internal-error"),C(typeof e.exp!="undefined","internal-error"),C(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ce&&MB(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function MB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(t){((e=t)===null||e===void 0?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zc(this.lastLoginAt),this.creationTime=zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(n){var e;const t=n.auth,i=await n.getIdToken(),r=await Qi(n,NB(t,{idToken:i}));C(r==null?void 0:r.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UB(s.providerUserInfo):[],a=$B(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new HC(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function FB(n){const e=k(n);await Sl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $B(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function UB(n){return n.map(e=>{var{providerId:t}=e,i=Va(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BB(n,e){const t=await WC(n,{},async()=>{const i=Mn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=KC(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zC.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){C(e.idToken,"internal-error"),C(typeof e.idToken!="undefined","internal-error"),C(typeof e.refreshToken!="undefined","internal-error");const t="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):OB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return C(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await BB(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new xl;return i&&(C(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(C(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(C(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(n,e){C(typeof n=="string"||typeof n=="undefined","internal-error",{appName:e})}class Ss{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Va(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new HC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Qi(this,this.stsTokenManager.getToken(this.auth,e));return C(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PB(this,e)}reload(){return FB(this)}_assign(e){this!==e&&(C(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){C(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Sl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Qi(this,RB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,l,u;const h=(i=t.displayName)!==null&&i!==void 0?i:void 0,d=(r=t.email)!==null&&r!==void 0?r:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,y=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,x=(l=t.createdAt)!==null&&l!==void 0?l:void 0,N=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:A,emailVerified:O,isAnonymous:W,providerData:V,stsTokenManager:$}=t;C(A&&$,e,"internal-error");const pe=xl.fromJSON(this.name,$);C(typeof A=="string",e,"internal-error"),lr(h,e.name),lr(d,e.name),C(typeof O=="boolean",e,"internal-error"),C(typeof W=="boolean",e,"internal-error"),lr(p,e.name),lr(m,e.name),lr(_,e.name),lr(y,e.name),lr(x,e.name),lr(N,e.name);const we=new Ss({uid:A,auth:e,email:d,emailVerified:O,displayName:h,isAnonymous:W,photoURL:m,phoneNumber:p,tenantId:_,stsTokenManager:pe,createdAt:x,lastLoginAt:N});return V&&Array.isArray(V)&&(we.providerData=V.map(Ao=>Object.assign({},Ao))),y&&(we._redirectEventId=y),we}static async _fromIdTokenResponse(e,t,i=!1){const r=new xl;r.updateFromServerResponse(t);const s=new Ss({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Sl(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}QC.type="NONE";const _a=QC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(n,e,t){return`firebase:${n}:${e}:${t}`}class Jo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=xs(this.userKey,r.apiKey,s),this.fullPersistenceKey=xs("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ss._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Jo(_n(_a),e,i);const r=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=r[0]||_n(_a);const o=xs(i,e.config.apiKey,e.name);let a=null;for(const l of t)try{const u=await l._get(o);if(u){const h=Ss._fromJSON(e,u);l!==s&&(a=h),s=l;break}}catch{}const c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Jo(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Jo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZC(e))return"Blackberry";if(eS(e))return"Webos";if(fy(e))return"Safari";if((e.includes("chrome/")||XC(e))&&!e.includes("edge/"))return"Chrome";if(Ou(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function YC(n=ie()){return/firefox\//i.test(n)}function fy(n=ie()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XC(n=ie()){return/crios\//i.test(n)}function JC(n=ie()){return/iemobile/i.test(n)}function Ou(n=ie()){return/android/i.test(n)}function ZC(n=ie()){return/blackberry/i.test(n)}function eS(n=ie()){return/webos/i.test(n)}function Ja(n=ie()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VB(n=ie()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function qB(n=ie()){var e;return Ja(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GB(){return ou()&&document.documentMode===10}function tS(n=ie()){return Ja(n)||Ou(n)||eS(n)||ZC(n)||/windows phone/i.test(n)||JC(n)}function jB(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n,e=[]){let t;switch(n){case"Browser":t=vv(ie());break;case"Worker":t=`${vv(ie())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fn}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){var t;if(this.auth.currentUser===e)return;const i=[];try{for(const r of this.queue)await r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(t=r)===null||t===void 0?void 0:t.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e,t,i){this.app=e,this.heartbeatServiceProvider=t,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kv(this),this.idTokenSubscription=new kv(this),this.beforeStateQueue=new zB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GC,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_n(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Jo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c==null?void 0:c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return C(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){var t;try{await Sl(e)}catch(i){if(((t=i)===null||t===void 0?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?k(e):null;return t&&C(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&C(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_n(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tn("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_n(e)||this._popupRedirectResolver;C(t,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[_n(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return C(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof t=="function"?e.addObserver(t,i,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return C(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(t["X-Firebase-Client"]=i),t}}function pt(n){return k(n)}class kv{constructor(e){this.auth=e,this.observer=null,this.addObserver=FE(t=>this.observer=t)}get next(){return C(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function KB(n,e,t){const i=pt(n);C(i._canInitEmulator,i,"emulator-config-failed"),C(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(t!=null&&t.disableWarnings),s=iS(e),{host:o,port:a}=HB(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||QB()}function iS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function HB(n){const e=iS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:bv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:bv(o)}}}function bv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function QB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,t){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(n,e){return gt(n,"POST","/v1/accounts:resetPassword",et(n,e))}async function sS(n,e){return gt(n,"POST","/v1/accounts:update",e)}async function YB(n,e){return gt(n,"POST","/v1/accounts:update",et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(n,e){return nr(n,"POST","/v1/accounts:signInWithPassword",et(n,e))}async function sf(n,e){return gt(n,"POST","/v1/accounts:sendOobCode",et(n,e))}async function JB(n,e){return sf(n,e)}async function ZB(n,e){return sf(n,e)}async function eV(n,e){return sf(n,e)}async function tV(n,e){return sf(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV(n,e){return nr(n,"POST","/v1/accounts:signInWithEmailLink",et(n,e))}async function iV(n,e){return nr(n,"POST","/v1/accounts:signInWithEmailLink",et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends Za{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Al(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Al(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if((t==null?void 0:t.email)&&(t==null?void 0:t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return XB(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return nV(e,{email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return sS(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return iV(e,{idToken:t,email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(n,e){return nr(n,"POST","/v1/accounts:signInWithIdp",et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV="http://localhost";class gi extends Za{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Va(t,["providerId","signInMethod"]);if(!i||!r)return null;const o=new gi(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Gi(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Gi(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gi(e,t)}buildRequest(){const e={requestUri:rV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mn(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV(n,e){return gt(n,"POST","/v1/accounts:sendVerificationCode",et(n,e))}async function oV(n,e){return nr(n,"POST","/v1/accounts:signInWithPhoneNumber",et(n,e))}async function aV(n,e){const t=await nr(n,"POST","/v1/accounts:signInWithPhoneNumber",et(n,e));if(t.temporaryProof)throw Oc(n,"account-exists-with-different-credential",t);return t}const cV={USER_NOT_FOUND:"user-not-found"};async function lV(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return nr(n,"POST","/v1/accounts:signInWithPhoneNumber",et(n,t),cV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Za{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new As({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new As({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return oV(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return aV(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return lV(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!t&&!r&&!s?null:new As({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hV(n){const e=Un(ti(n)).link,t=e?Un(ti(e)).deep_link_id:null,i=Un(ti(n)).deep_link_id;return(i?Un(ti(i)).link:null)||i||t||e||n}class of{constructor(e){var t,i,r,s,o,a;const c=Un(ti(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(i=c.oobCode)!==null&&i!==void 0?i:null,h=uV((r=c.mode)!==null&&r!==void 0?r:null);C(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=hV(e);try{return new of(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.providerId=Xr.PROVIDER_ID}static credential(e,t){return Al._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=of.parseLink(t);return C(i,"argument-error"),Al._fromEmailAndCode(e,i.code,i.tenantId)}}Xr.PROVIDER_ID="password";Xr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends ir{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zo extends ec{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return C("providerId"in t&&"signInMethod"in t,"argument-error"),gi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return C(e.idToken||e.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Zo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Zo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:o,providerId:a}=e;if(!i&&!r&&!t&&!s||!a)return null;try{return new Zo(a)._credential({idToken:t,accessToken:i,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends ec{constructor(){super("facebook.com")}static credential(e){return gi._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yn.credential(e.oauthAccessToken)}catch{return null}}}Yn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gi._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Xn.credential(t,i)}catch{return null}}}Xn.GOOGLE_SIGN_IN_METHOD="google.com";Xn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends ec{constructor(){super("github.com")}static credential(e){return gi._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jn.credential(e.oauthAccessToken)}catch{return null}}}Jn.GITHUB_SIGN_IN_METHOD="github.com";Jn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="http://localhost";class wa extends Za{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Gi(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Gi(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=t;return!i||!r||!s||i!==r?null:new wa(i,s)}static _create(e,t){return new wa(e,t)}buildRequest(){return{requestUri:dV,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="saml.";class Cd extends ir{constructor(e){C(e.startsWith(fV),"argument-error"),super(e)}static credentialFromResult(e){return Cd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Cd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=wa.fromJSON(e);return C(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:i}=e;if(!t||!i)return null;try{return wa._create(i,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends ec{constructor(){super("twitter.com")}static credential(e,t){return gi._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Zn.credential(t,i)}catch{return null}}}Zn.TWITTER_SIGN_IN_METHOD="twitter.com";Zn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(n,e){return nr(n,"POST","/v1/accounts:signUp",et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const s=await Ss._fromIdTokenResponse(e,i,r),o=Ev(i);return new Nn({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=Ev(i);return new Nn({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function Ev(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(n){var e;const t=pt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Nn({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await oS(t,{returnSecureToken:!0}),r=await Nn._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends Ce{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Sd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Sd(e,t,i,r)}}function aS(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Sd._fromErrorAndOperation(n,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(n,e){const t=k(n);await af(!0,t,e);const{providerUserInfo:i}=await DB(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),r=cS(i||[]);return t.providerData=t.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function py(n,e,t=!1){const i=await Qi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Nn._forOperation(n,"link",i)}async function af(n,e,t){await Sl(e);const i=cS(e.providerData),r=n===!1?"provider-already-linked":"no-such-provider";C(i.has(t)===n,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(n,e,t=!1){var i;const{auth:r}=n,s="reauthenticate";try{const o=await Qi(n,aS(r,s,e,n),t);C(o.idToken,r,"internal-error");const a=rf(o.idToken);C(a,r,"internal-error");const{sub:c}=a;return C(n.uid===c,r,"user-mismatch"),Nn._forOperation(n,s,o)}catch(o){throw((i=o)===null||i===void 0?void 0:i.code)==="auth/user-not-found"&&Dt(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(n,e,t=!1){const i="signIn",r=await aS(n,i,e),s=await Nn._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}async function cf(n,e){return uS(pt(n),e)}async function hS(n,e){const t=k(n);return await af(!1,t,e.providerId),py(t,e)}async function dS(n,e){return lS(k(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(n,e){return nr(n,"POST","/v1/accounts:signInWithCustomToken",et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(n,e){const t=pt(n),i=await gV(t,{token:e,returnSecureToken:!0}),r=await Nn._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?my._fromServerResponse(e,t):Dt(e,"internal-error")}}class my extends lf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new my(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n,e,t){var i;C(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),C(typeof t.dynamicLinkDomain=="undefined"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(C(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(C(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(n,e,t){const i=k(n),r={requestType:"PASSWORD_RESET",email:e};t&&uf(i,r,t),await ZB(i,r)}async function wV(n,e,t){await rS(k(n),{oobCode:e,newPassword:t})}async function vV(n,e){await YB(k(n),{oobCode:e})}async function fS(n,e){const t=k(n),i=await rS(t,{oobCode:e}),r=i.requestType;switch(C(r,t,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":C(i.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":C(i.mfaInfo,t,"internal-error");default:C(i.email,t,"internal-error")}let s=null;return i.mfaInfo&&(s=lf._fromServerResponse(pt(t),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function kV(n,e){const{data:t}=await fS(k(n),e);return t.email}async function bV(n,e,t){const i=pt(n),r=await oS(i,{returnSecureToken:!0,email:e,password:t}),s=await Nn._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}function EV(n,e,t){return cf(k(n),Xr.credential(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(n,e,t){const i=k(n),r={requestType:"EMAIL_SIGNIN",email:e};C(t.handleCodeInApp,i,"argument-error"),t&&uf(i,r,t),await eV(i,r)}function TV(n,e){const t=of.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function CV(n,e,t){const i=k(n),r=Xr.credentialWithLink(e,t||Cl());return C(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),cf(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SV(n,e){return gt(n,"POST","/v1/accounts:createAuthUri",et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(n,e){const t=hy()?Cl():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:r}=await SV(k(n),i);return r||[]}async function AV(n,e){const t=k(n),i=await n.getIdToken(),r={requestType:"VERIFY_EMAIL",idToken:i};e&&uf(t.auth,r,e);const{email:s}=await JB(t.auth,r);s!==n.email&&await n.reload()}async function RV(n,e,t){const i=k(n),r=await n.getIdToken(),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:r,newEmail:e};t&&uf(i.auth,s,t);const{email:o}=await tV(i.auth,s);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DV(n,e){return gt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=k(n),s={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Qi(i,DV(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function PV(n,e){return pS(k(n),e,null)}function OV(n,e){return pS(k(n),null,e)}async function pS(n,e,t){const{auth:i}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await Qi(n,sS(i,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(n){var e,t;if(!n)return null;const{providerId:i}=n,r=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(n==null?void 0:n.idToken)){const o=(t=(e=rf(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ea(s,a)}}if(!i)return null;switch(i){case"facebook.com":return new LV(s,r);case"github.com":return new FV(s,r);case"google.com":return new $V(s,r);case"twitter.com":return new UV(s,r,n.screenName||null);case"custom":case"anonymous":return new ea(s,null);default:return new ea(s,i,r)}}class ea{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}}class mS extends ea{constructor(e,t,i,r){super(e,t,i),this.username=r}}class LV extends ea{constructor(e,t){super(e,"facebook.com",t)}}class FV extends mS{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class $V extends ea{constructor(e,t){super(e,"google.com",t)}}class UV extends mS{constructor(e,t,i){super(e,"twitter.com",t,i)}}function BV(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:MV(t)}class vs{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new vs("enroll",e)}static _fromMfaPendingCredential(e){return new vs("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,i;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return vs._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return vs._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t,i){this.session=e,this.hints=t,this.signInResolver=i}static _fromError(e,t){const i=pt(e),r=t.customData._serverResponse,s=(r.mfaInfo||[]).map(a=>lf._fromServerResponse(i,a));C(r.mfaPendingCredential,i,"internal-error");const o=vs._fromMfaPendingCredential(r.mfaPendingCredential);return new gy(o,s,async a=>{const c=await a._process(i,o);delete r.mfaInfo,delete r.mfaPendingCredential;const l=Object.assign(Object.assign({},r),{idToken:c.idToken,refreshToken:c.refreshToken});switch(t.operationType){case"signIn":const u=await Nn._fromIdTokenResponse(i,t.operationType,l);return await i._updateCurrentUser(u.user),u;case"reauthenticate":return C(t.user,i,"internal-error"),Nn._forOperation(t.user,t.operationType,l);default:Dt(i,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function VV(n,e){var t;const i=k(n),r=e;return C(e.customData.operationType,i,"argument-error"),C((t=r.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,i,"argument-error"),gy._fromError(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(n,e){return gt(n,"POST","/v2/accounts/mfaEnrollment:start",et(n,e))}function GV(n,e){return gt(n,"POST","/v2/accounts/mfaEnrollment:finalize",et(n,e))}function jV(n,e){return gt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",et(n,e))}class yy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(i=>lf._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new yy(e)}async getSession(){return vs._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const i=e,r=await this.getSession(),s=await Qi(this.user,i._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){var t;const i=typeof e=="string"?e:e.uid,r=await this.user.getIdToken(),s=await Qi(this.user,jV(this.user.auth,{idToken:r,mfaEnrollmentId:i}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==i),await this.user._updateTokensIfNecessary(s);try{await this.user.reload()}catch(o){if(((t=o)===null||t===void 0?void 0:t.code)!=="auth/user-token-expired")throw o}}}const xp=new WeakMap;function zV(n){const e=k(n);return xp.has(e)||xp.set(e,yy._fromUser(e)),xp.get(e)}const xd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xd,"1"),this.storage.removeItem(xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(){const n=ie();return fy(n)||Ja(n)}const KV=1e3,HV=10;class yS extends gS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=WV()&&jB(),this.fallbackToPolling=tS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const i=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!t)return}const r=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);GB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,HV):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},KV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yS.type="LOCAL";const _y=yS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S extends gS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_S.type="SESSION";const js=_S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(n){return Promise.all(n.map(async e=>{try{const t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new hf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async l=>l(t.origin,s)),c=await QV(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const l=Mu("",20);r.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(){return window}function XV(n){ze().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(){return typeof ze().WorkerGlobalScope!="undefined"&&typeof ze().importScripts=="function"}async function JV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function eq(){return wy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="firebaseLocalStorageDb",tq=1,Ad="firebaseLocalStorage",vS="fbase_key";class Lu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function df(n,e){return n.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function nq(){const n=indexedDB.deleteDatabase(wS);return new Lu(n).toPromise()}function Mm(){const n=indexedDB.open(wS,tq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ad,{keyPath:vS})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ad)?e(i):(i.close(),await nq(),e(await Mm()))})})}async function Iv(n,e,t){const i=df(n,!0).put({[vS]:e,value:t});return new Lu(i).toPromise()}async function iq(n,e){const t=df(n,!1).get(e),i=await new Lu(t).toPromise();return i===void 0?null:i.value}function Tv(n,e){const t=df(n,!0).delete(e);return new Lu(t).toPromise()}const rq=800,sq=3;class kS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>sq)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hf._getInstance(eq()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await JV(),!this.activeServiceWorker)return;this.sender=new YV(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);!i||((e=i[0])===null||e===void 0?void 0:e.fulfilled)&&((t=i[0])===null||t===void 0?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await Iv(e,xd,"1"),await Tv(e,xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Iv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>iq(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Tv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=df(r,!1).getAll();return new Lu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kS.type="LOCAL";const Rl=kS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(n,e){return gt(n,"POST","/v2/accounts/mfaSignIn:start",et(n,e))}function aq(n,e){return gt(n,"POST","/v2/accounts/mfaSignIn:finalize",et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cq(n){return(await gt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}function bS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=At("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",lq().appendChild(i)})}function ES(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uq=500,hq=6e4,gh=1e12;class dq{constructor(e){this.auth=e,this.counter=gh,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new fq(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;const i=e||gh;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;const i=e||gh;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const i=e||gh;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""}}class fq{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;C(r,"argument-error",{appName:t}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=pq(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},hq)},uq))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function pq(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=ES("rcb"),mq=new Pu(3e4,6e4),gq="https://www.google.com/recaptcha/api.js?";class yq{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ze().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return C(_q(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(ze().grecaptcha):new Promise((i,r)=>{const s=ze().setTimeout(()=>{r(At(e,"network-request-failed"))},mq.get());ze()[Ap]=()=>{ze().clearTimeout(s),delete ze()[Ap];const a=ze().grecaptcha;if(!a){r(At(e,"internal-error"));return}const c=a.render;a.render=(l,u)=>{const h=c(l,u);return this.counter++,h},this.hostLanguage=t,i(a)};const o=`${gq}?${Mn({onload:Ap,render:"explicit",hl:t})}`;bS(o).catch(()=>{clearTimeout(s),r(At(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=ze().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function _q(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class wq{async load(e){return new dq(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="recaptcha",vq={theme:"light",type:"image"};class kq{constructor(e,t=Object.assign({},vq),i){this.parameters=t,this.type=IS,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pt(i),this.isInvisible=this.parameters.size==="invisible",C(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment");const r=typeof e=="string"?document.getElementById(e):e;C(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wq:new yq,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(r=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),r(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){C(!this.parameters.sitekey,this.auth,"argument-error"),C(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),C(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=ze()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){C(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){C(hy()&&!wy(),this.auth,"internal-error"),await bq(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await cq(this.auth);C(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return C(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function bq(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=As._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Eq(n,e,t){const i=pt(n),r=await ff(i,e,k(t));return new vy(r,s=>cf(i,s))}async function Iq(n,e,t){const i=k(n);await af(!1,i,"phone");const r=await ff(i.auth,e,k(t));return new vy(r,s=>hS(i,s))}async function Tq(n,e,t){const i=k(n),r=await ff(i.auth,e,k(t));return new vy(r,s=>dS(i,s))}async function ff(n,e,t){var i;const r=await t.verify();try{C(typeof r=="string",n,"argument-error"),C(t.type===IS,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return C(o.type==="enroll",n,"internal-error"),(await qV(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{C(o.type==="signin",n,"internal-error");const a=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return C(a,n,"missing-multi-factor-info"),(await oq(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await sV(n,{phoneNumber:s.phoneNumber,recaptchaToken:r});return o}}finally{t._reset()}}async function Cq(n,e){await py(k(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.providerId=qn.PROVIDER_ID,this.auth=pt(e)}verifyPhoneNumber(e,t){return ff(this.auth,e,k(t))}static credential(e,t){return As._fromVerification(e,t)}static credentialFromResult(e){const t=e;return qn.credentialFromTaggedObject(t)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:i}=e;return t&&i?As._fromTokenResponse(t,i):null}}qn.PROVIDER_ID="phone";qn.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(n,e){return e?_n(e):(C(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky extends Za{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Sq(n){return uS(n.auth,new ky(n),n.bypassAuthState)}function xq(n){const{auth:e,user:t}=n;return C(t,e,"internal-error"),lS(t,new ky(n),n.bypassAuthState)}async function Aq(n){const{auth:e,user:t}=n;return C(t,e,"internal-error"),py(t,new ky(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sq;case"linkViaPopup":case"linkViaRedirect":return Aq;case"reauthViaPopup":case"reauthViaRedirect":return xq;default:Dt(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq=new Pu(2e3,1e4);async function Dq(n,e,t){const i=pt(n);Xa(n,e,ir);const r=vo(i,t);return new Pi(i,"signInViaPopup",e,r).executeNotNull()}async function Nq(n,e,t){const i=k(n);Xa(i.auth,e,ir);const r=vo(i.auth,t);return new Pi(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function Pq(n,e,t){const i=k(n);Xa(i.auth,e,ir);const r=vo(i.auth,t);return new Pi(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class Pi extends TS{constructor(e,t,i,r,s){super(e,t,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Pi.currentPopupAction&&Pi.currentPopupAction.cancel(),Pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return C(e,this.auth,"internal-error"),e}async onExecution(){Wn(this.filter.length===1,"Popup operations only handle one event");const e=Mu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(At(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(At(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(At(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,Rq.get())};e()}}Pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq="pendingRedirect",Wc=new Map;class Mq extends TS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Wc.get(this.auth._key());if(!e){try{const i=await Lq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Wc.set(this.auth._key(),e)}return this.bypassAuthState||Wc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Lq(n,e){const t=SS(e),i=CS(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}async function by(n,e){return CS(n)._set(SS(e),"true")}function Fq(){Wc.clear()}function Ey(n,e){Wc.set(n._key(),e)}function CS(n){return _n(n._redirectPersistence)}function SS(n){return xs(Oq,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(n,e,t){return Uq(n,e,t)}async function Uq(n,e,t){const i=pt(n);Xa(n,e,ir);const r=vo(i,t);return await by(r,i),r._openRedirect(i,e,"signInViaRedirect")}function Bq(n,e,t){return Vq(n,e,t)}async function Vq(n,e,t){const i=k(n);Xa(i.auth,e,ir);const r=vo(i.auth,t);await by(r,i.auth);const s=await xS(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function qq(n,e,t){return Gq(n,e,t)}async function Gq(n,e,t){const i=k(n);Xa(i.auth,e,ir);const r=vo(i.auth,t);await af(!1,i,e.providerId),await by(r,i.auth);const s=await xS(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function jq(n,e){return await pt(n)._initializationPromise,pf(n,e,!1)}async function pf(n,e,t=!1){const i=pt(n),r=vo(i,e),o=await new Mq(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function xS(n){const e=Mu(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq=10*60*1e3;class AS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Wq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!RS(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(At(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zq&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cv(e))}saveEventToCache(e){this.cachedEventUids.add(Cv(e)),this.lastProcessedEventTime=Date.now()}}function Cv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function RS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Wq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(n,e={}){return gt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hq=/^https?/;async function Qq(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DS(n);for(const t of e)try{if(Yq(t))return}catch{}Dt(n,"unauthorized-domain")}function Yq(n){const e=Cl(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!Hq.test(t))return!1;if(Kq.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq=new Pu(3e4,6e4);function Sv(){const n=ze().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Jq(n){return new Promise((e,t)=>{var i,r,s;function o(){Sv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sv(),t(At(n,"network-request-failed"))},timeout:Xq.get()})}if(!((r=(i=ze().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ze().gapi)===null||s===void 0)&&s.load)o();else{const a=ES("iframefcb");return ze()[a]=()=>{gapi.load?o():t(At(n,"network-request-failed"))},bS(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw $h=null,e})}let $h=null;function Zq(n){return $h=$h||Jq(n),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=new Pu(5e3,15e3),tG="__/auth/iframe",nG="emulator/auth/iframe",iG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sG(n){const e=n.config;C(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dy(e,nG):`https://${n.config.authDomain}/${tG}`,i={apiKey:e.apiKey,appName:n.name,v:fn},r=rG.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Mn(i).slice(1)}`}async function oG(n){const e=await Zq(n),t=ze().gapi;return C(t,n,"internal-error"),e.open({where:document.body,url:sG(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iG,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=At(n,"network-request-failed"),a=ze().setTimeout(()=>{s(o)},eG.get());function c(){ze().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cG=500,lG=600,uG="_blank",hG="http://localhost";class xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dG(n,e,t,i=cG,r=lG){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},aG),{width:i.toString(),height:r.toString(),top:s,left:o}),l=ie().toLowerCase();t&&(a=XC(l)?uG:t),YC(l)&&(e=e||hG,c.scrollbars="yes");const u=Object.entries(c).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(qB(l)&&a!=="_self")return fG(e||"",a),new xv(null);const h=window.open(e||"",a,u);C(h,n,"popup-blocked");try{h.focus()}catch{}return new xv(h)}function fG(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG="__/auth/handler",mG="emulator/auth/handler";function Lm(n,e,t,i,r,s){C(n.config.authDomain,n,"auth-domain-config-required"),C(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:fn,eventId:r};if(e instanceof ir){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ol(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,l]of Object.entries(s||{}))o[c]=l}if(e instanceof ec){const c=e.getScopes().filter(l=>l!=="");c.length>0&&(o.scopes=c.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];return`${gG(n)}?${Mn(a).slice(1)}`}function gG({config:n}){return n.emulator?dy(n,mG):`https://${n.authDomain}/${pG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="webStorageSupport";class yG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=js,this._completeRedirectFn=pf,this._overrideRedirectResult=Ey}async _openPopup(e,t,i,r){var s;Wn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=Lm(e,t,i,Cl(),r);return dG(e,o,Mu())}async _openRedirect(e,t,i,r){return await this._originValidation(e),XV(Lm(e,t,i,Cl(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Wn(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await oG(e),i=new AS(e);return t.register("authEvent",r=>(C(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rp,{type:Rp},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Rp];o!==void 0&&t(!!o),Dt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Qq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tS()||fy()||Ja()}}const _G=yG;class wG{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return ii("unexpected MultiFactorSessionType")}}}class Iy extends wG{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Iy(e)}_finalizeEnroll(e,t,i){return GV(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return aq(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class NS{constructor(){}static assertion(e){return Iy._fromCredential(e)}}NS.FACTOR_ID="phone";var Av="@firebase/auth",Rv="0.20.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{var r;e(((r=i)===null||r===void 0?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){C(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function bG(n){Ue(new fe("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=i.options;return((a,c)=>{C(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),C(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const l={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nS(n)},u=new WB(a,c,l);return IB(u,t),u})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ue(new fe("auth-internal",e=>{const t=pt(e.getProvider("auth").getImmediate());return(i=>new vG(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_e(Av,Rv,kG(n)),_e(Av,Rv,"esm2017")}bG("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EG=2e3;async function IG(n,e,t){var i;const{BuildInfo:r}=zs();Wn(e.sessionId,"AuthEvent did not contain a session ID");const s=await AG(e.sessionId),o={};return Ja()?o.ibi=r.packageName:Ou()?o.apn=r.packageName:Dt(n,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=s,Lm(n,t,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,o)}async function TG(n){const{BuildInfo:e}=zs(),t={};Ja()?t.iosBundleId=e.packageName:Ou()?t.androidPackageName=e.packageName:Dt(n,"operation-not-supported-in-this-environment"),await DS(n,t)}function CG(n){const{cordova:e}=zs();return new Promise(t=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(n):r=e.InAppBrowser.open(n,VB()?"_blank":"_system","location=yes"),t(r)})})}async function SG(n,e,t){const{cordova:i}=zs();let r=()=>{};try{await new Promise((s,o)=>{let a=null;function c(){var h;s();const d=(h=i.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof d=="function"&&d(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function l(){a||(a=window.setTimeout(()=>{o(At(n,"redirect-cancelled-by-user"))},EG))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&l()}e.addPassiveListener(c),document.addEventListener("resume",l,!1),Ou()&&document.addEventListener("visibilitychange",u,!1),r=()=>{e.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{r()}}function xG(n){var e,t,i,r,s,o,a,c,l,u;const h=zs();C(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),C(typeof((t=h==null?void 0:h.BuildInfo)===null||t===void 0?void 0:t.packageName)!="undefined",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),C(typeof((s=(r=(i=h==null?void 0:h.cordova)===null||i===void 0?void 0:i.plugins)===null||r===void 0?void 0:r.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),C(typeof((c=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),C(typeof((u=(l=h==null?void 0:h.cordova)===null||l===void 0?void 0:l.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function AG(n){const e=RG(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}function RG(n){if(Wn(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder!="undefined")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let i=0;i<n.length;i++)t[i]=n.charCodeAt(i);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG=20;class NG extends AS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function PG(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:LG(),postBody:null,tenantId:n.tenantId,error:At(n,"no-auth-event")}}function OG(n,e){return Fm()._set($m(n),e)}async function Dv(n){const e=await Fm()._get($m(n));return e&&await Fm()._remove($m(n)),e}function MG(n,e){var t,i;const r=$G(e);if(r.includes("/__/auth/callback")){const s=Uh(r),o=s.firebaseError?FG(decodeURIComponent(s.firebaseError)):null,a=(i=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||i===void 0?void 0:i[1],c=a?At(a):null;return c?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:r,postBody:null}}return null}function LG(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<DG;t++){const i=Math.floor(Math.random()*e.length);n.push(e.charAt(i))}return n.join("")}function Fm(){return _n(_y)}function $m(n){return xs("authEvent",n.config.apiKey,n.name)}function FG(n){try{return JSON.parse(n)}catch{return null}}function $G(n){const e=Uh(n),t=e.link?decodeURIComponent(e.link):void 0,i=Uh(t).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Uh(r).link||r||i||t||n}function Uh(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Un(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UG=500;class BG{constructor(){this._redirectPersistence=js,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=pf,this._overrideRedirectResult=Ey}async _initialize(e){const t=e._key();let i=this.eventManagers.get(t);return i||(i=new NG(e),this.eventManagers.set(t,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Dt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,i,r){xG(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),Fq(),await this._originValidation(e);const o=PG(e,i,r);await OG(e,o);const a=await IG(e,o,t),c=await CG(a);return SG(e,s,c)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=TG(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=zs(),o=setTimeout(async()=>{await Dv(e),t.onEvent(Nv())},UG),a=async u=>{clearTimeout(o);const h=await Dv(e);let d=null;h&&(u==null?void 0:u.url)&&(d=MG(h,u.url)),t.onEvent(d||Nv())};typeof i!="undefined"&&typeof i.subscribe=="function"&&i.subscribe(null,a);const c=r,l=`${s.packageName.toLowerCase()}://`;zs().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(l)&&a({url:u}),typeof c=="function")try{c(u)}catch(h){console.error(h)}}}}const VG=BG;function Nv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:At("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qG(n,e){pt(n)._logFramework(e)}var GG="@firebase/auth-compat",jG="0.2.18";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG=1e3;function Kc(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function WG(){return Kc()==="http:"||Kc()==="https:"}function PS(n=ie()){return!!((Kc()==="file:"||Kc()==="ionic:"||Kc()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function KG(){return go()||Og()}function HG(){return ou()&&(document==null?void 0:document.documentMode)===11}function QG(n=ie()){return/Edge\/\d+/.test(n)}function YG(n=ie()){return HG()||QG(n)}function OS(){try{const n=self.localStorage,e=Mu();if(n)return n.setItem(e,"1"),n.removeItem(e),YG()?kn():!0}catch{return Ty()&&kn()}return!1}function Ty(){return typeof global!="undefined"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dp(){return(WG()||mo()||PS())&&!KG()&&OS()&&!Ty()}function MS(){return PS()&&typeof document!="undefined"}async function XG(){return MS()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},zG);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function JG(){return typeof window!="undefined"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn={LOCAL:"local",NONE:"none",SESSION:"session"},yc=C,LS="persistence";function ZG(n,e){if(yc(Object.values(mn).includes(e),n,"invalid-persistence-type"),go()){yc(e!==mn.SESSION,n,"unsupported-persistence-type");return}if(Og()){yc(e===mn.NONE,n,"unsupported-persistence-type");return}if(Ty()){yc(e===mn.NONE||e===mn.LOCAL&&kn(),n,"unsupported-persistence-type");return}yc(e===mn.NONE||OS(),n,"unsupported-persistence-type")}async function Um(n){await n._initializationPromise;const e=FS(),t=xs(LS,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function ej(n,e){const t=FS();if(!t)return[];const i=xs(LS,n,e);switch(t.getItem(i)){case mn.NONE:return[_a];case mn.LOCAL:return[Rl,js];case mn.SESSION:return[js];default:return[]}}function FS(){var n;try{return((n=JG())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=C;class vr{constructor(){this.browserResolver=_n(_G),this.cordovaResolver=_n(VG),this.underlyingResolver=null,this._redirectPersistence=js,this._completeRedirectFn=pf,this._overrideRedirectResult=Ey}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,i,r)}async _openRedirect(e,t,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,i,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return MS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return tj(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await XG();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n){return n.unwrap()}function nj(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(n){return US(n)}function rj(n,e){var t,i;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if(((i=e)===null||i===void 0?void 0:i.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new sj(n,VV(n,e))}else if(r){const s=US(e),o=e;s&&(o.credential=s,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function US(n){const{_tokenResponse:e}=n instanceof Ce?n.customData:n;if(!e)return null;if(!(n instanceof Ce)&&"temporaryProof"in e&&"phoneNumber"in e)return qn.credentialFromResult(n);const t=e.providerId;if(!t||t===gc.PASSWORD)return null;let i;switch(t){case gc.GOOGLE:i=Xn;break;case gc.FACEBOOK:i=Yn;break;case gc.GITHUB:i=Jn;break;case gc.TWITTER:i=Zn;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:c}=e;return!s&&!o&&!r&&!a?null:a?t.startsWith("saml.")?wa._create(t,a):gi._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:r,accessToken:s}):new Zo(t).credential({idToken:r,accessToken:s,rawNonce:c})}return n instanceof Ce?i.credentialFromError(n):i.credentialFromResult(n)}function sn(n,e){return e.catch(t=>{throw t instanceof Ce&&rj(n,t),t}).then(t=>{const i=t.operationType,r=t.user;return{operationType:i,credential:ij(t),additionalUserInfo:BV(t),user:Oi.getOrCreate(r)}})}async function Bm(n,e){const t=await e;return{verificationId:t.verificationId,confirm:i=>sn(n,t.confirm(i))}}class sj{constructor(e,t){this.resolver=t,this.auth=nj(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return sn($S(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this._delegate=e,this.multiFactor=zV(e)}static getOrCreate(e){return Oi.USER_MAP.has(e)||Oi.USER_MAP.set(e,new Oi(e)),Oi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return sn(this.auth,hS(this._delegate,e))}async linkWithPhoneNumber(e,t){return Bm(this.auth,Iq(this._delegate,e,t))}async linkWithPopup(e){return sn(this.auth,Pq(this._delegate,e,vr))}async linkWithRedirect(e){return await Um(pt(this.auth)),qq(this._delegate,e,vr)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return sn(this.auth,dS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Bm(this.auth,Tq(this._delegate,e,t))}reauthenticateWithPopup(e){return sn(this.auth,Nq(this._delegate,e,vr))}async reauthenticateWithRedirect(e){return await Um(pt(this.auth)),Bq(this._delegate,e,vr)}sendEmailVerification(e){return AV(this._delegate,e)}async unlink(e){return await mV(this._delegate,e),this}updateEmail(e){return PV(this._delegate,e)}updatePassword(e){return OV(this._delegate,e)}updatePhoneNumber(e){return Cq(this._delegate,e)}updateProfile(e){return NV(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return RV(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oi.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=C;class Vm{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;_c(i,"invalid-api-key",{appName:e.name}),_c(i,"invalid-api-key",{appName:e.name});const r=typeof window!="undefined"?vr:void 0;this._delegate=t.initialize({options:{persistence:oj(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(bB),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){KB(this._delegate,e,t)}applyActionCode(e){return vV(this._delegate,e)}checkActionCode(e){return fS(this._delegate,e)}confirmPasswordReset(e,t){return wV(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return sn(this._delegate,bV(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return xV(this._delegate,e)}isSignInWithEmailLink(e){return TV(this._delegate,e)}async getRedirectResult(){_c(Dp(),this._delegate,"operation-not-supported-in-this-environment");const e=await jq(this._delegate,vr);return e?sn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){qG(this._delegate,e)}onAuthStateChanged(e,t,i){const{next:r,error:s,complete:o}=Pv(e,t,i);return this._delegate.onAuthStateChanged(r,s,o)}onIdTokenChanged(e,t,i){const{next:r,error:s,complete:o}=Pv(e,t,i);return this._delegate.onIdTokenChanged(r,s,o)}sendSignInLinkToEmail(e,t){return IV(this._delegate,e,t)}sendPasswordResetEmail(e,t){return _V(this._delegate,e,t||void 0)}async setPersistence(e){ZG(this._delegate,e);let t;switch(e){case mn.SESSION:t=js;break;case mn.LOCAL:t=await _n(Rl)._isAvailable()?Rl:_y;break;case mn.NONE:t=_a;break;default:return Dt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return sn(this._delegate,pV(this._delegate))}signInWithCredential(e){return sn(this._delegate,cf(this._delegate,e))}signInWithCustomToken(e){return sn(this._delegate,yV(this._delegate,e))}signInWithEmailAndPassword(e,t){return sn(this._delegate,EV(this._delegate,e,t))}signInWithEmailLink(e,t){return sn(this._delegate,CV(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Bm(this._delegate,Eq(this._delegate,e,t))}async signInWithPopup(e){return _c(Dp(),this._delegate,"operation-not-supported-in-this-environment"),sn(this._delegate,Dq(this._delegate,e,vr))}async signInWithRedirect(e){return _c(Dp(),this._delegate,"operation-not-supported-in-this-environment"),await Um(this._delegate),$q(this._delegate,e,vr)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return kV(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Vm.Persistence=mn;function Pv(n,e,t){let i=n;typeof n!="function"&&({next:i,error:e,complete:t}=n);const r=i;return{next:o=>r(o&&Oi.getOrCreate(o)),error:e,complete:t}}function oj(n,e){const t=ej(n,e);if(typeof self!="undefined"&&!t.includes(Rl)&&t.push(Rl),typeof window!="undefined")for(const i of[_y,js])t.includes(i)||t.push(i);return t.includes(_a)||t.push(_a),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.providerId="phone",this._delegate=new qn($S(Ze.auth()))}static credential(e,t){return qn.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Cy.PHONE_SIGN_IN_METHOD=qn.PHONE_SIGN_IN_METHOD;Cy.PROVIDER_ID=qn.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=C;class cj{constructor(e,t,i=Ze.app()){var r;aj((r=i.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new kq(e,t,i.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="auth-compat";function uj(n){n.INTERNAL.registerComponent(new fe(lj,e=>{const t=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new Vm(t,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:No.EMAIL_SIGNIN,PASSWORD_RESET:No.PASSWORD_RESET,RECOVER_EMAIL:No.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:No.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:No.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:No.VERIFY_EMAIL}},EmailAuthProvider:Xr,FacebookAuthProvider:Yn,GithubAuthProvider:Jn,GoogleAuthProvider:Xn,OAuthProvider:Zo,SAMLAuthProvider:Cd,PhoneAuthProvider:Cy,PhoneMultiFactorGenerator:NS,RecaptchaVerifier:cj,TwitterAuthProvider:Zn,Auth:Vm,AuthCredential:Za,Error:Ce}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(GG,jG)}uj(Ze);const Ov="@firebase/database",Mv="0.13.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BS="";function VS(n){BS=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ke(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:sl(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Kn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=function(n){try{if(typeof window!="undefined"&&typeof window[n]!="undefined"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hj(e)}}catch{}return new dj},ks=qS("localStorage"),qm=qS("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new Ei("@firebase/database"),GS=function(){let n=1;return function(){return n++}}(),jS=function(n){const e=Q6(n),t=new W6;t.update(e);const i=t.digest();return f0.encodeByteArray(i)},Fu=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Fu.apply(null,i):typeof i=="object"?e+=Ke(i):e+=i,e+=" "}return e};let Rs=null,Lv=!0;const zS=function(n,e){S(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(ta.logLevel=Q.VERBOSE,Rs=ta.log.bind(ta),e&&qm.set("logging_enabled",!0)):typeof n=="function"?Rs=n:(Rs=null,qm.remove("logging_enabled"))},at=function(...n){if(Lv===!0&&(Lv=!1,Rs===null&&qm.get("logging_enabled")===!0&&zS(!0)),Rs){const e=Fu.apply(null,n);Rs(e)}},$u=function(n){return function(...e){at(n,...e)}},Gm=function(...n){const e="FIREBASE INTERNAL ERROR: "+Fu(...n);ta.error(e)},yi=function(...n){const e=`FIREBASE FATAL ERROR: ${Fu(...n)}`;throw ta.error(e),new Error(e)},$t=function(...n){const e="FIREBASE WARNING: "+Fu(...n);ta.warn(e)},fj=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$t("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mf=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},pj=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Yi="[MIN_NAME]",_i="[MAX_NAME]",ko=function(n,e){if(n===e)return 0;if(n===Yi||e===_i)return-1;if(e===Yi||n===_i)return 1;{const t=Rd(n),i=Rd(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},mj=function(n,e){return n===e?0:n<e?-1:1},wc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Ke(e))},Sy=function(n){if(typeof n!="object"||n===null)return Ke(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Ke(e[i]),t+=":",t+=Sy(n[e[i]]);return t+="}",t},WS=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function mt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const KS=function(n){S(!mf(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let r,s,o,a,c;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));const l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(r?1:0),l.reverse();const u=l.join("");let h="";for(c=0;c<64;c+=8){let d=parseInt(u.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},gj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},yj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function _j(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const wj=new RegExp("^-?(0*)\\d{1,10}$"),HS=-2147483648,xy=2147483647,Rd=function(n){if(wj.test(n)){const e=Number(n);if(e>=HS&&e<=xy)return e}return null},tc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw $t("Exception was thrown by user callback.",t),e},Math.floor(0))}},vj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hc=function(n,e){const t=setTimeout(n,e);return typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){$t(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(at("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$t(e)}}class na{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}na.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="5",QS="v",YS="s",XS="r",JS="f",ZS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ex="ls",tx="p",jm="ac",nx="websocket",ix="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t,i,r,s=!1,o="",a=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ks.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ks.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Ej(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function sx(n,e,t){S(typeof e=="string","typeof type must == string"),S(typeof t=="object","typeof params must == object");let i;if(e===nx)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===ix)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Ej(n)&&(t.ns=n.namespace);const r=[];return mt(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.counters_={}}incrementCounter(e,t=1){Kn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return L6(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np={},Pp={};function Ry(n){const e=n.toString();return Np[e]||(Np[e]=new Ij),Np[e]}function Tj(n,e){const t=n.toString();return Pp[t]||(Pp[t]=e()),Pp[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&tc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="start",Sj="close",xj="pLPCommand",Aj="pRTLPCB",ox="id",ax="pw",cx="ser",Rj="cb",Dj="seg",Nj="ts",Pj="d",Oj="dframe",lx=1870,ux=30,Mj=lx-ux,Lj=25e3,Fj=3e4;class kr{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$u(e),this.stats_=Ry(t),this.urlFn=c=>(this.appCheckToken&&(c[jm]=this.appCheckToken),sx(t,ix,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Cj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Fj)),pj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dy((...s)=>{const[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Fv)this.id=a,this.password=c;else if(o===Sj)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[Fv]="t",i[cx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Rj]=this.scriptTagHolder.uniqueCallbackIdentifier),i[QS]=Ay,this.transportSessionId&&(i[YS]=this.transportSessionId),this.lastSessionId&&(i[ex]=this.lastSessionId),this.applicationId&&(i[tx]=this.applicationId),this.appCheckToken&&(i[jm]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&ZS.test(location.hostname)&&(i[XS]=JS);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){kr.forceAllow_=!0}static forceDisallow(){kr.forceDisallow_=!0}static isAvailable(){return kr.forceAllow_?!0:!kr.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!gj()&&!yj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Ke(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=DE(t),r=WS(i,Mj);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[Oj]="t",i[ox]=e,i[ax]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Ke(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Dy{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=GS(),window[xj+this.uniqueCallbackIdentifier]=e,window[Aj+this.uniqueCallbackIdentifier]=t,this.myIFrame=Dy.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){at("frame writing exception"),a.stack&&at(a.stack),at(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||at("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ox]=this.myID,e[ax]=this.myPW,e[cx]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ux+i.length<=lx;){const o=this.pendingSegs.shift();i=i+"&"+Dj+r+"="+o.seg+"&"+Nj+r+"="+o.ts+"&"+Pj+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(Lj)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{at("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=16384,Uj=45e3;let Dd=null;typeof MozWebSocket!="undefined"?Dd=MozWebSocket:typeof WebSocket!="undefined"&&(Dd=WebSocket);class Tn{constructor(e,t,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$u(this.connId),this.stats_=Ry(t),this.connURL=Tn.connectionURL_(t,o,a,r,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,r,s){const o={};return o[QS]=Ay,typeof location!="undefined"&&location.hostname&&ZS.test(location.hostname)&&(o[XS]=JS),t&&(o[YS]=t),i&&(o[ex]=i),r&&(o[jm]=r),s&&(o[tx]=s),sx(e,nx,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ks.set("previous_websocket_failure",!0);try{let i;ME(),this.mySock=new Dd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Tn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Dd!==null&&!Tn.forceDisallow_}static previouslyFailed(){return ks.isInMemoryStorage||ks.get("previous_websocket_failure")===!0}markConnectionHealthy(){ks.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=sl(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=Ke(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=WS(t,$j);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Uj))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Tn.responsesRequiredToBeHealthy=2;Tn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[kr,Tn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Tn&&Tn.isAvailable();let i=t&&!Tn.previouslyFailed();if(e.webSocketOnly&&(t||$t("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Tn];else{const r=this.transports_=[];for(const s of va.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);va.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}va.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=6e4,Vj=5e3,qj=10*1024,Gj=100*1024,Op="t",$v="d",jj="s",Uv="r",zj="e",Bv="o",Vv="a",qv="n",Gv="p",Wj="h";class Kj{constructor(e,t,i,r,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$u("c:"+this.id+":"),this.transportManager_=new va(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Hc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Gj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Op in e){const t=e[Op];t===Vv?this.upgradeIfSecondaryHealthy_():t===Uv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Bv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=wc("t",e),i=wc("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Gv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Vv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:qv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=wc("t",e),i=wc("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=wc(Op,e);if($v in e){const i=e[$v];if(t===Wj)this.onHandshake_(i);else if(t===qv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===jj?this.onConnectionShutdown_(i):t===Uv?this.onReset_(i):t===zj?Gm("Server Error: "+i):t===Bv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gm("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ay!==i&&$t("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Hc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Bj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Vj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Gv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ks.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.allowedEvents_=e,this.listeners_={},S(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){S(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends dx{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Ba()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Nd}getInitialEvent(e){return S(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=32,zv=768;class ge{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function de(){return new ge("")}function te(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Lr(n){return n.pieces_.length-n.pieceNum_}function ve(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ge(n.pieces_,e)}function Ny(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Hj(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Dl(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function fx(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ge(e,0)}function Ae(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof ge)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new ge(t,0)}function ne(n){return n.pieceNum_>=n.pieces_.length}function Xt(n,e){const t=te(n),i=te(e);if(t===null)return e;if(t===i)return Xt(ve(n),ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Qj(n,e){const t=Dl(n,0),i=Dl(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=ko(t[r],i[r]);if(s!==0)return s}return t.length===i.length?0:t.length<i.length?-1:1}function Py(n,e){if(Lr(n)!==Lr(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Cn(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Lr(n)>Lr(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Yj{constructor(e,t){this.errorPrefix_=t,this.parts_=Dl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=g0(this.parts_[i]);px(this)}}function Xj(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=g0(e),px(n)}function Jj(n){const e=n.parts_.pop();n.byteLength_-=g0(e),n.parts_.length>0&&(n.byteLength_-=1)}function px(n){if(n.byteLength_>zv)throw new Error(n.errorPrefix_+"has a key path longer than "+zv+" bytes ("+n.byteLength_+").");if(n.parts_.length>jv)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jv+") or object contains a cycle "+cs(n))}function cs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends dx{constructor(){super(["visible"]);let e,t;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(t="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Oy}getInitialEvent(e){return S(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=1e3,Zj=60*5*1e3,Wv=30*1e3,ez=1.3,tz=3e4,nz="server_kill",Kv=3;class ji extends hx{constructor(e,t,i,r,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=ji.nextPersistentConnectionId_++,this.log_=$u("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vc,this.maxReconnectDelay_=Zj,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!ME())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Oy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Nd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const r=++this.requestNumber_,s={r,a:e,b:t};this.log_(Ke(s)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const t=new We,i={p:e._path.toString(),q:e._queryObject},r={action:"g",request:i,onComplete:o=>{const a=o.d;o.s==="ok"?t.resolve(a):t.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,l=a.s;ji.warnOnListenWarnings_(c,t),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Kn(e,"w")){const i=Ns(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();$t(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||z6(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Wv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=j6(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,t)}sendUnlisten_(e,t,i,r){this.log_("Unlisten on "+e+" for "+t);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,r){const s={p:t,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,t,i,r){this.putInternal("p",e,t,i,r)}merge(e,t,i,r){this.putInternal("m",e,t,i,r)}putInternal(e,t,i,r,s){this.initConnection_();const o={p:t,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ke(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Gm("Unrecognized action received from server: "+Ke(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>tz&&(this.reconnectDelay_=vc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ez)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ji.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,i())},l=function(h){S(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?at("getToken() completed but was canceled"):(at("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new Kj(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,p=>{$t(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(nz)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&$t(h),c())}}}interrupt(e){at("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){at("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ol(this.interruptReasons_)&&(this.reconnectDelay_=vc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(s=>Sy(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const i=new ge(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(t),s.delete(t),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,t){at("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Kv&&(this.reconnectDelay_=Wv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){at("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Kv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+BS.replace(/\./g,"-")]=1,Ba()?e["framework.cordova"]=1:go()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Nd.getInstance().currentlyOnline();return ol(this.interruptReasons_)&&e}}ji.nextPersistentConnectionId_=0;ji.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new se(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new se(Yi,e),r=new se(Yi,t);return this.compare(i,r)!==0}minPost(){return se.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh;class mx extends gf{static get __EMPTY_NODE(){return yh}static set __EMPTY_NODE(e){yh=e}compare(e,t){return ko(e.name,t.name)}isDefinedOn(e){throw Ua("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return se.MIN}maxPost(){return new se(_i,yh)}makePost(e,t){return S(typeof e=="string","KeyIndex indexValue must always be a string."),new se(e,yh)}toString(){return".key"}}const ui=new mx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class st{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i!=null?i:st.RED,this.left=r!=null?r:ln.EMPTY_NODE,this.right=s!=null?s:ln.EMPTY_NODE}copy(e,t,i,r,s){return new st(e!=null?e:this.key,t!=null?t:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ln.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,r;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return ln.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}st.RED=!0;st.BLACK=!1;class iz{copy(e,t,i,r,s){return this}insert(e,t,i){return new st(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ln{constructor(e,t=ln.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ln(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,st.BLACK,null,null))}remove(e){return new ln(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,st.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _h(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _h(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _h(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _h(this.root_,null,this.comparator_,!0,e)}}ln.EMPTY_NODE=new iz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(n,e){return ko(n.name,e.name)}function My(n,e){return ko(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zm;function sz(n){zm=n}const gx=function(n){return typeof n=="number"?"number:"+KS(n):"string:"+n},yx=function(n){if(n.isLeafNode()){const e=n.val();S(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Kn(e,".sv"),"Priority must be a string or number.")}else S(n===zm||n.isEmpty(),"priority of unexpected type.");S(n===zm||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hv;class tt{constructor(e,t=tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yx(this.priorityNode_)}static set __childrenNodeConstructor(e){Hv=e}static get __childrenNodeConstructor(){return Hv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new tt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ne(e)?this:te(e)===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=te(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(S(i!==".priority"||Lr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+gx(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=KS(this.value_):e+=this.value_,this.lazyHash_=jS(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===tt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof tt.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,r=tt.VALUE_TYPE_ORDER.indexOf(t),s=tt.VALUE_TYPE_ORDER.indexOf(i);return S(r>=0,"Unknown leaf type: "+t),S(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _x,wx;function oz(n){_x=n}function az(n){wx=n}class cz extends gf{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?ko(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return se.MIN}maxPost(){return new se(_i,new tt("[PRIORITY-POST]",wx))}makePost(e,t){const i=_x(e);return new se(t,new tt("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ee=new cz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=Math.log(2);class uz{constructor(e){const t=s=>parseInt(Math.log(s)/lz,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Pd=function(n,e,t,i){n.sort(e);const r=function(c,l){const u=l-c;let h,d;if(u===0)return null;if(u===1)return h=n[c],d=t?t(h):h,new st(d,h.node,st.BLACK,null,null);{const p=parseInt(u/2,10)+c,m=r(c,p),_=r(p+1,l);return h=n[p],d=t?t(h):h,new st(d,h.node,st.BLACK,m,_)}},s=function(c){let l=null,u=null,h=n.length;const d=function(m,_){const y=h-m,x=h;h-=m;const N=r(y+1,x),A=n[y],O=t?t(A):A;p(new st(O,A.node,_,null,N))},p=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){const _=c.nextBitIsOne(),y=Math.pow(2,c.count-(m+1));_?d(y,st.BLACK):(d(y,st.BLACK),d(y,st.RED))}return u},o=new uz(n.length),a=s(o);return new ln(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mp;const Po={};class Mi{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return S(Po&&Ee,"ChildrenNode.ts has not been loaded"),Mp=Mp||new Mi({".priority":Po},{".priority":Ee}),Mp}get(e){const t=Ns(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ln?t:null}hasIndex(e){return Kn(this.indexSet_,e.toString())}addIndex(e,t){S(e!==ui,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(se.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Pd(i,e.getCompare()):a=Po;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Mi(u,l)}addToIndexes(e,t){const i=Qh(this.indexes_,(r,s)=>{const o=Ns(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),r===Po)if(o.isDefinedOn(e.node)){const a=[],c=t.getIterator(se.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Pd(a,o.getCompare())}else return Po;else{const a=t.get(e.name);let c=r;return a&&(c=c.remove(new se(e.name,a))),c.insert(e,e.node)}});return new Mi(i,this.indexSet_)}removeFromIndexes(e,t){const i=Qh(this.indexes_,r=>{if(r===Po)return r;{const s=t.get(e.name);return s?r.remove(new se(e.name,s)):r}});return new Mi(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc;class q{constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yx(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kc||(kc=new q(new ln(My),null,Mi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kc}updatePriority(e){return this.children_.isEmpty()?this:new q(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?kc:t}}getChild(e){const t=te(e);return t===null?this:this.getImmediateChild(t).getChild(ve(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(S(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new se(e,t);let r,s;t.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?kc:this.priorityNode_;return new q(r,o,s)}}updateChild(e,t){const i=te(e);if(i===null)return t;{S(te(e)!==".priority"||Lr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(ve(e),t);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,r=0,s=!0;if(this.forEachChild(Ee,(o,a)=>{t[o]=a.val(e),i++,s&&q.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+gx(this.getPriority().val())+":"),this.forEachChild(Ee,(t,i)=>{const r=i.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":jS(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new se(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new se(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new se(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,se.Wrap);let s=r.peek();for(;s!=null&&t.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,se.Wrap);let s=r.peek();for(;s!=null&&t.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Uu?-1:0}withIndex(e){if(e===ui||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new q(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ui||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Ee),r=t.getIterator(Ee);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ui?null:this.indexMap_.get(e.toString())}}q.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class hz extends q{constructor(){super(new ln(My),q.EMPTY_NODE,Mi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return q.EMPTY_NODE}isEmpty(){return!1}}const Uu=new hz;Object.defineProperties(se,{MIN:{value:new se(Yi,q.EMPTY_NODE)},MAX:{value:new se(_i,Uu)}});mx.__EMPTY_NODE=q.EMPTY_NODE;tt.__childrenNodeConstructor=q;sz(Uu);az(Uu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=!0;function De(n,e=null){if(n===null)return q.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),S(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new tt(t,De(e))}if(!(n instanceof Array)&&dz){const t=[];let i=!1;if(mt(n,(o,a)=>{if(o.substring(0,1)!=="."){const c=De(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),t.push(new se(o,c)))}}),t.length===0)return q.EMPTY_NODE;const s=Pd(t,rz,o=>o.name,My);if(i){const o=Pd(t,Ee.getCompare());return new q(s,De(e),new Mi({".priority":o},{".priority":Ee}))}else return new q(s,De(e),Mi.Default)}else{let t=q.EMPTY_NODE;return mt(n,(i,r)=>{if(Kn(n,i)&&i.substring(0,1)!=="."){const s=De(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(De(e))}}oz(De);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly extends gf{constructor(e){super(),this.indexPath_=e,S(!ne(e)&&te(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?ko(e.name,t.name):s}makePost(e,t){const i=De(e),r=q.EMPTY_NODE.updateChild(this.indexPath_,i);return new se(t,r)}maxPost(){const e=q.EMPTY_NODE.updateChild(this.indexPath_,Uu);return new se(_i,e)}toString(){return Dl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz extends gf{compare(e,t){const i=e.node.compareTo(t.node);return i===0?ko(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return se.MIN}maxPost(){return se.MAX}makePost(e,t){const i=De(e);return new se(t,i)}toString(){return".value"}}const Fy=new fz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wm="-",vx="z",kx=786,pz=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let r;const s=new Array(8);for(r=7;r>=0;r--)s[r]=ka.charAt(t%64),t=Math.floor(t/64);S(t===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=ka.charAt(e[r]);return S(o.length===20,"nextPushId: Length should be 20."),o}}(),Qv=function(n){if(n===""+xy)return Wm;const e=Rd(n);if(e!=null)return""+(e+1);const t=new Array(n.length);for(let o=0;o<t.length;o++)t[o]=n.charAt(o);if(t.length<kx)return t.push(Wm),t.join("");let i=t.length-1;for(;i>=0&&t[i]===vx;)i--;if(i===-1)return _i;const r=t[i],s=ka.charAt(ka.indexOf(r)+1);return t[i]=s,t.slice(0,i+1).join("")},Yv=function(n){if(n===""+HS)return Yi;const e=Rd(n);if(e!=null)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return t[t.length-1]===Wm?t.length===1?""+xy:(delete t[t.length-1],t.join("")):(t[t.length-1]=ka.charAt(ka.indexOf(t[t.length-1])-1),t.join("")+vx.repeat(kx-t.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n){return{type:"value",snapshotNode:n}}function ba(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Nl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Pl(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function mz(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){S(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(Nl(t,a)):S(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ba(t,i)):o.trackChildChange(Pl(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Ee,(r,s)=>{t.hasChild(r)||i.trackChildChange(Nl(r,s))}),t.isLeafNode()||t.forEachChild(Ee,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(Pl(r,s,o))}else i.trackChildChange(ba(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?q.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.indexedFilter_=new $y(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ol.getStartPost_(e),this.endPost_=Ol.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,o){return this.matches(new se(t,i))||(i=q.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=q.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(q.EMPTY_NODE);const s=this;return t.forEachChild(Ee,(o,a)=>{s.matches(new se(o,a))||(r=r.updateImmediateChild(o,q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e){this.rangedFilter_=new Ol(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new se(t,i))||(i=q.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=q.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let c;if(this.reverse_?c=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:c=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,c)r=r.updateImmediateChild(a.name,a.node),o++;else break}}else{r=t.withIndex(this.index_),r=r.updatePriority(q.EMPTY_NODE);let s,o,a,c;if(this.reverse_){c=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const h=this.index_.getCompare();a=(d,p)=>h(p,d)}else c=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let l=0,u=!1;for(;c.hasNext();){const h=c.getNext();!u&&a(s,h)<=0&&(u=!0),u&&l<this.limit_&&a(h,o)<=0?l++:r=r.updateImmediateChild(h.name,q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,p)=>h(p,d)}else o=this.index_.getCompare();const a=e;S(a.numChildren()===this.limit_,"");const c=new se(t,i),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){const h=a.getImmediateChild(t);let d=r.getChildAfterChild(this.index_,l,this.reverse_);for(;d!=null&&(d.name===t||a.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);const p=d==null?1:o(d,c);if(u&&!i.isEmpty()&&p>=0)return s!=null&&s.trackChildChange(Pl(t,i,h)),a.updateImmediateChild(t,i);{s!=null&&s.trackChildChange(Nl(t,h));const _=a.updateImmediateChild(t,q.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(ba(d.name,d.node)),_.updateImmediateChild(d.name,d.node)):_}}else return i.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Nl(l.name,l.node)),s.trackChildChange(ba(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(l.name,q.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ee}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yi}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_i}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ee}copy(){const e=new yf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yz(n){return n.loadsAllData()?new $y(n.getIndex()):n.hasLimit()?new gz(n):new Ol(n)}function _z(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function wz(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function Km(n,e,t){const i=n.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,t!=null?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function vz(n,e,t){let i;if(n.index_===ui)typeof e=="string"&&(e=Qv(e)),i=Km(n,e,t);else{let r;t==null?r=_i:r=Qv(t),i=Km(n,e,r)}return i.startAfterSet_=!0,i}function Hm(n,e,t){const i=n.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,t!==void 0?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function kz(n,e,t){let i,r;return n.index_===ui?(typeof e=="string"&&(e=Yv(e)),r=Hm(n,e,t)):(t==null?i=Yi:i=Yv(t),r=Hm(n,e,i)),r.endBeforeSet_=!0,r}function _f(n,e){const t=n.copy();return t.index_=e,t}function Xv(n){const e={};if(n.isDefault())return e;let t;return n.index_===Ee?t="$priority":n.index_===Fy?t="$value":n.index_===ui?t="$key":(S(n.index_ instanceof Ly,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Ke(t),n.startSet_&&(e.startAt=Ke(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+Ke(n.indexStartName_))),n.endSet_&&(e.endAt=Ke(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+Ke(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Jv(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ee&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends hx{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=$u("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(S(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Od.getListenId_(e,i),a={};this.listens_[o]=a;const c=Xv(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let h=u;if(l===404&&(h=null,l=null),l===null&&this.onDataUpdate_(s,h,!1,i),Ns(this.listens_,o)===a){let d;l?l===401?d="permission_denied":d="rest_error:"+l:d="ok",r(d,null)}})}unlisten(e,t){const i=Od.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Xv(e._queryParams),i=e._path.toString(),r=new We;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Mn(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=sl(a.responseText)}catch{$t("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&$t("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(){this.rootNode_=q.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(){return{value:null,children:new Map}}function nc(n,e,t){if(ne(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=te(e);n.children.has(i)||n.children.set(i,Md());const r=n.children.get(i);e=ve(e),nc(r,e,t)}}function Qm(n,e){if(ne(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ee,(i,r)=>{nc(n,new ge(i),r)}),Qm(n,e)}}else if(n.children.size>0){const t=te(e);return e=ve(e),n.children.has(t)&&Qm(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function Ym(n,e,t){n.value!==null?t(e,n.value):Ez(n,(i,r)=>{const s=new ge(e.toString()+"/"+i);Ym(r,s,t)})}function Ez(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&mt(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=10*1e3,Tz=30*1e3,Cz=5*60*1e3;class Sz{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Iz(e);const i=Zv+(Tz-Zv)*Math.random();Hc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;mt(e,(r,s)=>{s>0&&Kn(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),Hc(this.reportStats_.bind(this),Math.floor(Math.random()*2*Cz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bn||(Bn={}));function Uy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function By(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Vy(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Bn.ACK_USER_WRITE,this.source=Uy()}operationForChild(e){if(ne(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ge(e));return new Ld(de(),t,this.revert)}}else return S(te(this.path)===e,"operationForChild called for unrelated child."),new Ld(ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t){this.source=e,this.path=t,this.type=Bn.LISTEN_COMPLETE}operationForChild(e){return ne(this.path)?new Ml(this.source,de()):new Ml(this.source,ve(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Bn.OVERWRITE}operationForChild(e){return ne(this.path)?new Ws(this.source,de(),this.snap.getImmediateChild(e)):new Ws(this.source,ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Bn.MERGE}operationForChild(e){if(ne(this.path)){const t=this.children.subtree(new ge(e));return t.isEmpty()?null:t.value?new Ws(this.source,de(),t.value):new Ea(this.source,de(),t)}else return S(te(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ea(this.source,ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ne(e))return this.isFullyInitialized()&&!this.filtered_;const t=te(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Az(n,e,t,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(mz(o.childName,o.snapshotNode))}),bc(n,r,"child_removed",e,i,t),bc(n,r,"child_added",e,i,t),bc(n,r,"child_moved",s,i,t),bc(n,r,"child_changed",e,i,t),bc(n,r,"value",e,i,t),r}function bc(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,c)=>Dz(n,a,c)),o.forEach(a=>{const c=Rz(n,a,s);r.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function Rz(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Dz(n,e,t){if(e.childName==null||t.childName==null)throw Ua("Should only compare child_ events.");const i=new se(e.childName,e.snapshotNode),r=new se(t.childName,t.snapshotNode);return n.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n,e){return{eventCache:n,serverCache:e}}function Qc(n,e,t,i){return wf(new Fr(e,t,i),n.serverCache)}function Ex(n,e,t,i){return wf(n.eventCache,new Fr(e,t,i))}function Fd(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ks(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp;const Nz=()=>(Lp||(Lp=new ln(mj)),Lp);class ke{constructor(e,t=Nz()){this.value=e,this.children=t}static fromObject(e){let t=new ke(null);return mt(e,(i,r)=>{t=t.set(new ge(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:de(),value:this.value};if(ne(e))return null;{const i=te(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(ve(e),t);return s!=null?{path:Ae(new ge(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ne(e))return this;{const t=te(e),i=this.children.get(t);return i!==null?i.subtree(ve(e)):new ke(null)}}set(e,t){if(ne(e))return new ke(t,this.children);{const i=te(e),s=(this.children.get(i)||new ke(null)).set(ve(e),t),o=this.children.insert(i,s);return new ke(this.value,o)}}remove(e){if(ne(e))return this.children.isEmpty()?new ke(null):new ke(null,this.children);{const t=te(e),i=this.children.get(t);if(i){const r=i.remove(ve(e));let s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new ke(null):new ke(this.value,s)}else return this}}get(e){if(ne(e))return this.value;{const t=te(e),i=this.children.get(t);return i?i.get(ve(e)):null}}setTree(e,t){if(ne(e))return t;{const i=te(e),s=(this.children.get(i)||new ke(null)).setTree(ve(e),t);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new ke(this.value,o)}}fold(e){return this.fold_(de(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Ae(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,de(),t)}findOnPath_(e,t,i){const r=this.value?i(t,this.value):!1;if(r)return r;if(ne(e))return null;{const s=te(e),o=this.children.get(s);return o?o.findOnPath_(ve(e),Ae(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,de(),t)}foreachOnPath_(e,t,i){if(ne(e))return this;{this.value&&i(t,this.value);const r=te(e),s=this.children.get(r);return s?s.foreachOnPath_(ve(e),Ae(t,r),i):new ke(null)}}foreach(e){this.foreach_(de(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Ae(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.writeTree_=e}static empty(){return new Gn(new ke(null))}}function Yc(n,e,t){if(ne(e))return new Gn(new ke(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=Xt(r,e);return s=s.updateChild(o,t),new Gn(n.writeTree_.set(r,s))}else{const r=new ke(t),s=n.writeTree_.setTree(e,r);return new Gn(s)}}}function Xm(n,e,t){let i=n;return mt(t,(r,s)=>{i=Yc(i,Ae(e,r),s)}),i}function ek(n,e){if(ne(e))return Gn.empty();{const t=n.writeTree_.setTree(e,new ke(null));return new Gn(t)}}function Jm(n,e){return bo(n,e)!=null}function bo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Xt(t.path,e)):null}function tk(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ee,(i,r)=>{e.push(new se(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new se(i,r.value))}),e}function Tr(n,e){if(ne(e))return n;{const t=bo(n,e);return t!=null?new Gn(new ke(t)):new Gn(n.writeTree_.subtree(e))}}function Zm(n){return n.writeTree_.isEmpty()}function Ia(n,e){return Ix(de(),n.writeTree_,e)}function Ix(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=Ix(Ae(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Ae(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n,e){return xx(e,n)}function Pz(n,e,t,i,r){S(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Yc(n.visibleWrites,e,t)),n.lastWriteId=i}function Oz(n,e,t,i){S(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=Xm(n.visibleWrites,e,t),n.lastWriteId=i}function Mz(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function Lz(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);S(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Fz(a,i.path)?r=!1:Cn(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return $z(n),!0;if(i.snap)n.visibleWrites=ek(n.visibleWrites,i.path);else{const a=i.children;mt(a,c=>{n.visibleWrites=ek(n.visibleWrites,Ae(i.path,c))})}return!0}else return!1}function Fz(n,e){if(n.snap)return Cn(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Cn(Ae(n.path,t),e))return!0;return!1}function $z(n){n.visibleWrites=Tx(n.allWrites,Uz,de()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Uz(n){return n.visible}function Tx(n,e,t){let i=Gn.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)Cn(t,o)?(a=Xt(t,o),i=Yc(i,a,s.snap)):Cn(o,t)&&(a=Xt(o,t),i=Yc(i,de(),s.snap.getChild(a)));else if(s.children){if(Cn(t,o))a=Xt(t,o),i=Xm(i,a,s.children);else if(Cn(o,t))if(a=Xt(o,t),ne(a))i=Xm(i,de(),s.children);else{const c=Ns(s.children,te(a));if(c){const l=c.getChild(ve(a));i=Yc(i,de(),l)}}}else throw Ua("WriteRecord should have .snap or .children")}}return i}function Cx(n,e,t,i,r){if(!i&&!r){const s=bo(n.visibleWrites,e);if(s!=null)return s;{const o=Tr(n.visibleWrites,e);if(Zm(o))return t;if(t==null&&!Jm(o,de()))return null;{const a=t||q.EMPTY_NODE;return Ia(o,a)}}}else{const s=Tr(n.visibleWrites,e);if(!r&&Zm(s))return t;if(!r&&t==null&&!Jm(s,de()))return null;{const o=function(l){return(l.visible||r)&&(!i||!~i.indexOf(l.writeId))&&(Cn(l.path,e)||Cn(e,l.path))},a=Tx(n.allWrites,o,e),c=t||q.EMPTY_NODE;return Ia(a,c)}}}function Bz(n,e,t){let i=q.EMPTY_NODE;const r=bo(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ee,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=Tr(n.visibleWrites,e);return t.forEachChild(Ee,(o,a)=>{const c=Ia(Tr(s,new ge(o)),a);i=i.updateImmediateChild(o,c)}),tk(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=Tr(n.visibleWrites,e);return tk(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Vz(n,e,t,i,r){S(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ae(e,t);if(Jm(n.visibleWrites,s))return null;{const o=Tr(n.visibleWrites,s);return Zm(o)?r.getChild(t):Ia(o,r.getChild(t))}}function qz(n,e,t,i){const r=Ae(e,t),s=bo(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){const o=Tr(n.visibleWrites,r);return Ia(o,i.getNode().getImmediateChild(t))}else return null}function Gz(n,e){return bo(n.visibleWrites,e)}function jz(n,e,t,i,r,s,o){let a;const c=Tr(n.visibleWrites,e),l=bo(c,de());if(l!=null)a=l;else if(t!=null)a=Ia(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let p=d.getNext();for(;p&&u.length<r;)h(p,i)!==0&&u.push(p),p=d.getNext();return u}else return[]}function zz(){return{visibleWrites:Gn.empty(),allWrites:[],lastWriteId:-1}}function $d(n,e,t,i){return Cx(n.writeTree,n.treePath,e,t,i)}function qy(n,e){return Bz(n.writeTree,n.treePath,e)}function nk(n,e,t,i){return Vz(n.writeTree,n.treePath,e,t,i)}function Ud(n,e){return Gz(n.writeTree,Ae(n.treePath,e))}function Wz(n,e,t,i,r,s){return jz(n.writeTree,n.treePath,e,t,i,r,s)}function Gy(n,e,t){return qz(n.writeTree,n.treePath,e,t)}function Sx(n,e){return xx(Ae(n.treePath,e),n.writeTree)}function xx(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;S(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),S(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,Pl(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,Nl(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,ba(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,Pl(i,e.snapshotNode,r.oldSnap));else throw Ua("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const Ax=new Hz;class jy{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Fr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gy(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ks(this.viewCache_),s=Wz(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qz(n){return{filter:n}}function Yz(n,e){S(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),S(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Xz(n,e,t,i,r){const s=new Kz;let o,a;if(t.type===Bn.OVERWRITE){const l=t;l.source.fromUser?o=eg(n,e,l.path,l.snap,i,r,s):(S(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ne(l.path),o=Bd(n,e,l.path,l.snap,i,r,a,s))}else if(t.type===Bn.MERGE){const l=t;l.source.fromUser?o=Zz(n,e,l.path,l.children,i,r,s):(S(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=tg(n,e,l.path,l.children,i,r,a,s))}else if(t.type===Bn.ACK_USER_WRITE){const l=t;l.revert?o=nW(n,e,l.path,i,r,s):o=eW(n,e,l.path,l.affectedTree,i,r,s)}else if(t.type===Bn.LISTEN_COMPLETE)o=tW(n,e,t.path,i,s);else throw Ua("Unknown operation type: "+t.type);const c=s.getChanges();return Jz(e,o,c),{viewCache:o,changes:c}}function Jz(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Fd(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(bx(Fd(e)))}}function Rx(n,e,t,i,r,s){const o=e.eventCache;if(Ud(i,t)!=null)return e;{let a,c;if(ne(t))if(S(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Ks(e),u=l instanceof q?l:q.EMPTY_NODE,h=qy(i,u);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const l=$d(i,Ks(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=te(t);if(l===".priority"){S(Lr(t)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const h=nk(i,t,u,c);h!=null?a=n.filter.updatePriority(u,h):a=o.getNode()}else{const u=ve(t);let h;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const d=nk(i,t,o.getNode(),c);d!=null?h=o.getNode().getImmediateChild(l).updateChild(u,d):h=o.getNode().getImmediateChild(l)}else h=Gy(i,l,e.serverCache);h!=null?a=n.filter.updateChild(o.getNode(),l,h,u,r,s):a=o.getNode()}}return Qc(e,a,o.isFullyInitialized()||ne(t),n.filter.filtersNodes())}}function Bd(n,e,t,i,r,s,o,a){const c=e.serverCache;let l;const u=o?n.filter:n.filter.getIndexedFilter();if(ne(t))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){const p=c.getNode().updateChild(t,i);l=u.updateFullNode(c.getNode(),p,null)}else{const p=te(t);if(!c.isCompleteForPath(t)&&Lr(t)>1)return e;const m=ve(t),y=c.getNode().getImmediateChild(p).updateChild(m,i);p===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),p,y,m,Ax,null)}const h=Ex(e,l,c.isFullyInitialized()||ne(t),u.filtersNodes()),d=new jy(r,h,s);return Rx(n,h,t,r,d,a)}function eg(n,e,t,i,r,s,o){const a=e.eventCache;let c,l;const u=new jy(r,e,s);if(ne(t))l=n.filter.updateFullNode(e.eventCache.getNode(),i,o),c=Qc(e,l,!0,n.filter.filtersNodes());else{const h=te(t);if(h===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),i),c=Qc(e,l,a.isFullyInitialized(),a.isFiltered());else{const d=ve(t),p=a.getNode().getImmediateChild(h);let m;if(ne(d))m=i;else{const _=u.getCompleteChild(h);_!=null?Ny(d)===".priority"&&_.getChild(fx(d)).isEmpty()?m=_:m=_.updateChild(d,i):m=q.EMPTY_NODE}if(p.equals(m))c=e;else{const _=n.filter.updateChild(a.getNode(),h,m,d,u,o);c=Qc(e,_,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function ik(n,e){return n.eventCache.isCompleteForChild(e)}function Zz(n,e,t,i,r,s,o){let a=e;return i.foreach((c,l)=>{const u=Ae(t,c);ik(e,te(u))&&(a=eg(n,a,u,l,r,s,o))}),i.foreach((c,l)=>{const u=Ae(t,c);ik(e,te(u))||(a=eg(n,a,u,l,r,s,o))}),a}function rk(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function tg(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ne(t)?l=i:l=new ke(null).setTree(t,i);const u=e.serverCache.getNode();return l.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),m=rk(n,p,d);c=Bd(n,c,new ge(h),m,r,s,o,a)}}),l.children.inorderTraversal((h,d)=>{const p=!e.serverCache.isCompleteForChild(h)&&d.value===void 0;if(!u.hasChild(h)&&!p){const m=e.serverCache.getNode().getImmediateChild(h),_=rk(n,m,d);c=Bd(n,c,new ge(h),_,r,s,o,a)}}),c}function eW(n,e,t,i,r,s,o){if(Ud(r,t)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(ne(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Bd(n,e,t,c.getNode().getChild(t),r,s,a,o);if(ne(t)){let l=new ke(null);return c.getNode().forEachChild(ui,(u,h)=>{l=l.set(new ge(u),h)}),tg(n,e,t,l,r,s,a,o)}else return e}else{let l=new ke(null);return i.foreach((u,h)=>{const d=Ae(t,u);c.isCompleteForPath(d)&&(l=l.set(u,c.getNode().getChild(d)))}),tg(n,e,t,l,r,s,a,o)}}function tW(n,e,t,i,r){const s=e.serverCache,o=Ex(e,s.getNode(),s.isFullyInitialized()||ne(t),s.isFiltered());return Rx(n,o,t,i,Ax,r)}function nW(n,e,t,i,r,s){let o;if(Ud(i,t)!=null)return e;{const a=new jy(i,e,r),c=e.eventCache.getNode();let l;if(ne(t)||te(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=$d(i,Ks(e));else{const h=e.serverCache.getNode();S(h instanceof q,"serverChildren would be complete if leaf node"),u=qy(i,h)}u=u,l=n.filter.updateFullNode(c,u,s)}else{const u=te(t);let h=Gy(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),h!=null?l=n.filter.updateChild(c,u,h,ve(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,q.EMPTY_NODE,ve(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=$d(i,Ks(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Ud(i,de())!=null,Qc(e,l,o,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new $y(i.getIndex()),s=yz(i);this.processor_=Qz(s);const o=t.serverCache,a=t.eventCache,c=r.updateFullNode(q.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(q.EMPTY_NODE,a.getNode(),null),u=new Fr(c,o.isFullyInitialized(),r.filtersNodes()),h=new Fr(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=wf(h,u),this.eventGenerator_=new xz(this.query_)}get query(){return this.query_}}function rW(n){return n.viewCache_.serverCache.getNode()}function sW(n){return Fd(n.viewCache_)}function oW(n,e){const t=Ks(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ne(e)&&!t.getImmediateChild(te(e)).isEmpty())?t.getChild(e):null}function sk(n){return n.eventRegistrations_.length===0}function aW(n,e){n.eventRegistrations_.push(e)}function ok(n,e,t){const i=[];if(t){S(e==null,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function ak(n,e,t,i){e.type===Bn.MERGE&&e.source.queryId!==null&&(S(Ks(n.viewCache_),"We should always have a full cache before handling merges"),S(Fd(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=Xz(n.processor_,r,e,t,i);return Yz(n.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Dx(n,s.changes,s.viewCache.eventCache.getNode(),null)}function cW(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ee,(s,o)=>{i.push(ba(s,o))}),t.isFullyInitialized()&&i.push(bx(t.getNode())),Dx(n,i,t.getNode(),e)}function Dx(n,e,t,i){const r=i?[i]:n.eventRegistrations_;return Az(n.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd;class Nx{constructor(){this.views=new Map}}function lW(n){S(!Vd,"__referenceConstructor has already been defined"),Vd=n}function uW(){return S(Vd,"Reference.ts has not been loaded"),Vd}function hW(n){return n.views.size===0}function zy(n,e,t,i){const r=e.source.queryId;if(r!==null){const s=n.views.get(r);return S(s!=null,"SyncTree gave us an op for an invalid query."),ak(s,e,t,i)}else{let s=[];for(const o of n.views.values())s=s.concat(ak(o,e,t,i));return s}}function Wy(n,e,t,i,r){const s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=$d(t,r?i:null),c=!1;a?c=!0:i instanceof q?(a=qy(t,i),c=!1):(a=q.EMPTY_NODE,c=!1);const l=wf(new Fr(a,c,!1),new Fr(i,r,!1));return new iW(e,l)}return o}function dW(n,e,t,i,r,s){const o=Wy(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),aW(o,t),cW(o,t)}function fW(n,e,t,i){const r=e._queryIdentifier,s=[];let o=[];const a=$r(n);if(r==="default")for(const[c,l]of n.views.entries())o=o.concat(ok(l,t,i)),sk(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{const c=n.views.get(r);c&&(o=o.concat(ok(c,t,i)),sk(c)&&(n.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!$r(n)&&s.push(new(uW())(e._repo,e._path)),{removed:s,events:o}}function Px(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Cr(n,e){let t=null;for(const i of n.views.values())t=t||oW(i,e);return t}function Ox(n,e){if(e._queryParams.loadsAllData())return kf(n);{const i=e._queryIdentifier;return n.views.get(i)}}function Mx(n,e){return Ox(n,e)!=null}function $r(n){return kf(n)!=null}function kf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd;function pW(n){S(!qd,"__referenceConstructor has already been defined"),qd=n}function mW(){return S(qd,"Reference.ts has not been loaded"),qd}let gW=1;class ck{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ke(null),this.pendingWriteTree_=zz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ky(n,e,t,i,r){return Pz(n.pendingWriteTree_,e,t,i,r),r?ic(n,new Ws(Uy(),e,t)):[]}function yW(n,e,t,i){Oz(n.pendingWriteTree_,e,t,i);const r=ke.fromObject(t);return ic(n,new Ea(Uy(),e,r))}function br(n,e,t=!1){const i=Mz(n.pendingWriteTree_,e);if(Lz(n.pendingWriteTree_,e)){let s=new ke(null);return i.snap!=null?s=s.set(de(),!0):mt(i.children,o=>{s=s.set(new ge(o),!0)}),ic(n,new Ld(i.path,s,t))}else return[]}function Bu(n,e,t){return ic(n,new Ws(By(),e,t))}function _W(n,e,t){const i=ke.fromObject(t);return ic(n,new Ea(By(),e,i))}function wW(n,e){return ic(n,new Ml(By(),e))}function vW(n,e,t){const i=Hy(n,t);if(i){const r=Qy(i),s=r.path,o=r.queryId,a=Xt(s,e),c=new Ml(Vy(o),a);return Yy(n,s,c)}else return[]}function Gd(n,e,t,i){const r=e._path,s=n.syncPointTree_.get(r);let o=[];if(s&&(e._queryIdentifier==="default"||Mx(s,e))){const a=fW(s,e,t,i);hW(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const c=a.removed;o=a.events;const l=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=n.syncPointTree_.findOnPath(r,(h,d)=>$r(d));if(l&&!u){const h=n.syncPointTree_.subtree(r);if(!h.isEmpty()){const d=IW(h);for(let p=0;p<d.length;++p){const m=d[p],_=m.query,y=Bx(n,m);n.listenProvider_.startListening(Xc(_),Ll(n,_),y.hashFn,y.onComplete)}}}!u&&c.length>0&&!i&&(l?n.listenProvider_.stopListening(Xc(e),null):c.forEach(h=>{const d=n.queryToTagMap.get(Ef(h));n.listenProvider_.stopListening(Xc(h),d)})),TW(n,c)}return o}function kW(n,e){const{syncPoint:t,serverCache:i,writesCache:r,serverCacheComplete:s}=Fx(e,n),o=Wy(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),e._queryParams.loadsAllData()?null:Ll(n,e)}function Lx(n,e,t,i){const r=Hy(n,i);if(r!=null){const s=Qy(r),o=s.path,a=s.queryId,c=Xt(o,e),l=new Ws(Vy(a),c,t);return Yy(n,o,l)}else return[]}function bW(n,e,t,i){const r=Hy(n,i);if(r){const s=Qy(r),o=s.path,a=s.queryId,c=Xt(o,e),l=ke.fromObject(t),u=new Ea(Vy(a),c,l);return Yy(n,o,u)}else return[]}function Fx(n,e){const t=n._path;let i=null,r=!1;e.syncPointTree_.foreachOnPath(t,(l,u)=>{const h=Xt(l,t);i=i||Cr(u,h),r=r||$r(u)});let s=e.syncPointTree_.get(t);s?(r=r||$r(s),i=i||Cr(s,de())):(s=new Nx,e.syncPointTree_=e.syncPointTree_.set(t,s));let o;i!=null?o=!0:(o=!1,i=q.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((u,h)=>{const d=Cr(h,de());d&&(i=i.updateImmediateChild(u,d))}));const a=Mx(s,n);if(!a&&!n._queryParams.loadsAllData()){const l=Ef(n);S(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");const u=CW();e.queryToTagMap.set(l,u),e.tagToQueryMap.set(u,l)}const c=vf(e.pendingWriteTree_,t);return{syncPoint:s,writesCache:c,serverCache:i,serverCacheComplete:o,foundAncestorDefaultView:r,viewAlreadyExists:a}}function lk(n,e,t){const{syncPoint:i,serverCache:r,writesCache:s,serverCacheComplete:o,viewAlreadyExists:a,foundAncestorDefaultView:c}=Fx(e,n);let l=dW(i,e,t,s,r,o);if(!a&&!c){const u=Ox(i,e);l=l.concat(SW(n,e,u))}return l}function bf(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Xt(o,e),l=Cr(a,c);if(l)return l});return Cx(r,e,s,t,!0)}function EW(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(l,u)=>{const h=Xt(l,t);i=i||Cr(u,h)});let r=n.syncPointTree_.get(t);r?i=i||Cr(r,de()):(r=new Nx,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=i!=null,o=s?new Fr(i,!0,!1):null,a=vf(n.pendingWriteTree_,e._path),c=Wy(r,e,a,s?o.getNode():q.EMPTY_NODE,s);return sW(c)}function ic(n,e){return $x(e,n.syncPointTree_,null,vf(n.pendingWriteTree_,de()))}function $x(n,e,t,i){if(ne(n.path))return Ux(n,e,t,i);{const r=e.get(de());t==null&&r!=null&&(t=Cr(r,de()));let s=[];const o=te(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){const l=t?t.getImmediateChild(o):null,u=Sx(i,o);s=s.concat($x(a,c,l,u))}return r&&(s=s.concat(zy(r,n,i,t))),s}}function Ux(n,e,t,i){const r=e.get(de());t==null&&r!=null&&(t=Cr(r,de()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=t?t.getImmediateChild(o):null,l=Sx(i,o),u=n.operationForChild(o);u&&(s=s.concat(Ux(u,a,c,l)))}),r&&(s=s.concat(zy(r,n,i,t))),s}function Bx(n,e){const t=e.query,i=Ll(n,t);return{hashFn:()=>(rW(e)||q.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?vW(n,t._path,i):wW(n,t._path);{const s=_j(r,t);return Gd(n,t,null,s)}}}}function Ll(n,e){const t=Ef(e);return n.queryToTagMap.get(t)}function Ef(n){return n._path.toString()+"$"+n._queryIdentifier}function Hy(n,e){return n.tagToQueryMap.get(e)}function Qy(n){const e=n.indexOf("$");return S(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ge(n.substr(0,e))}}function Yy(n,e,t){const i=n.syncPointTree_.get(e);S(i,"Missing sync point for query tag that we're tracking");const r=vf(n.pendingWriteTree_,e);return zy(i,t,r,null)}function IW(n){return n.fold((e,t,i)=>{if(t&&$r(t))return[kf(t)];{let r=[];return t&&(r=Px(t)),mt(i,(s,o)=>{r=r.concat(o)}),r}})}function Xc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(mW())(n._repo,n._path):n}function TW(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Ef(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function CW(){return gW++}function SW(n,e,t){const i=e._path,r=Ll(n,e),s=Bx(n,t),o=n.listenProvider_.startListening(Xc(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)S(!$r(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,h)=>{if(!ne(l)&&u&&$r(u))return[kf(u).query];{let d=[];return u&&(d=d.concat(Px(u).map(p=>p.query))),mt(h,(p,m)=>{d=d.concat(m)}),d}});for(let l=0;l<c.length;++l){const u=c[l];n.listenProvider_.stopListening(Xc(u),Ll(n,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Xy(t)}node(){return this.node_}}class Jy{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ae(this.path_,e);return new Jy(this.syncTree_,t)}node(){return bf(this.syncTree_,this.path_)}}const xW=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},uk=function(n,e,t){if(!n||typeof n!="object")return n;if(S(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return AW(n[".sv"],e,t);if(typeof n[".sv"]=="object")return RW(n[".sv"],e);S(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},AW=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:S(!1,"Unexpected server value: "+n)}},RW=function(n,e,t){n.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&S(!1,"Unexpected increment value: "+i);const r=e.node();if(S(r!==null&&typeof r!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},Vx=function(n,e,t,i){return e1(e,new Jy(t,n),i)},Zy=function(n,e,t){return e1(n,new Xy(e),t)};function e1(n,e,t){const i=n.getPriority().val(),r=uk(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=uk(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new tt(a,De(r)):n}else{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new tt(r))),o.forEachChild(Ee,(a,c)=>{const l=e1(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function If(n,e){let t=e instanceof ge?e:new ge(e),i=n,r=te(t);for(;r!==null;){const s=Ns(i.node.children,r)||{children:{},childCount:0};i=new t1(r,i,s),t=ve(t),r=te(t)}return i}function Eo(n){return n.node.value}function n1(n,e){n.node.value=e,ng(n)}function qx(n){return n.node.childCount>0}function DW(n){return Eo(n)===void 0&&!qx(n)}function Tf(n,e){mt(n.node.children,(t,i)=>{e(new t1(t,n,i))})}function Gx(n,e,t,i){t&&!i&&e(n),Tf(n,r=>{Gx(r,e,!0,i)}),t&&i&&e(n)}function NW(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Vu(n){return new ge(n.parent===null?n.name:Vu(n.parent)+"/"+n.name)}function ng(n){n.parent!==null&&PW(n.parent,n.name,n)}function PW(n,e,t){const i=DW(t),r=Kn(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,ng(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,ng(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OW=/[\[\].#$\/\u0000-\u001F\u007F]/,MW=/[\[\].#$\u0000-\u001F\u007F]/,Fp=10*1024*1024,Cf=function(n){return typeof n=="string"&&n.length!==0&&!OW.test(n)},jx=function(n){return typeof n=="string"&&n.length!==0&&!MW.test(n)},LW=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jx(n)},Fl=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!mf(n)||n&&typeof n=="object"&&Kn(n,".sv")},wi=function(n,e,t,i){i&&e===void 0||qu(dn(n,"value"),e,t)},qu=function(n,e,t){const i=t instanceof ge?new Yj(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+cs(i));if(typeof e=="function")throw new Error(n+"contains a function "+cs(i)+" with contents = "+e.toString());if(mf(e))throw new Error(n+"contains "+e.toString()+" "+cs(i));if(typeof e=="string"&&e.length>Fp/3&&g0(e)>Fp)throw new Error(n+"contains a string greater than "+Fp+" utf8 bytes "+cs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(mt(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Cf(o)))throw new Error(n+" contains an invalid key ("+o+") "+cs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Xj(i,o),qu(n,a,i),Jj(i)}),r&&s)throw new Error(n+' contains ".value" child '+cs(i)+" in addition to actual children.")}},FW=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=Dl(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Cf(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Qj);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&Cn(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},zx=function(n,e,t,i){if(i&&e===void 0)return;const r=dn(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];mt(e,(o,a)=>{const c=new ge(o);if(qu(r,a,Ae(t,c)),Ny(c)===".priority"&&!Fl(a))throw new Error(r+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),FW(r,s)},i1=function(n,e,t){if(!(t&&e===void 0)){if(mf(e))throw new Error(dn(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fl(e))throw new Error(dn(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Gu=function(n,e,t,i){if(!(i&&t===void 0)&&!Cf(t))throw new Error(dn(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},$l=function(n,e,t,i){if(!(i&&t===void 0)&&!jx(t))throw new Error(dn(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$W=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),$l(n,e,t,i)},Sn=function(n,e){if(te(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Wx=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Cf(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!LW(t))throw new Error(dn(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sf(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();t!==null&&!Py(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function Kx(n,e,t){Sf(n,t),Hx(n,i=>Py(i,e))}function Pn(n,e,t){Sf(n,t),Hx(n,i=>Cn(i,e)||Cn(e,i))}function Hx(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];if(r){const s=r.path;e(s)?(BW(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function BW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Rs&&at("event: "+t.toString()),tc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="repo_interrupt",VW=25;class qW{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new UW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Md(),this.transactionQueueTree_=new t1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function GW(n,e,t){if(n.stats_=Ry(n.repoInfo_),n.forceRestClient_||vj())n.server_=new Od(n.repoInfo_,(i,r,s,o)=>{hk(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dk(n,!0),0);else{if(typeof t!="undefined"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ke(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ji(n.repoInfo_,e,(i,r,s,o)=>{hk(n,i,r,s,o)},i=>{dk(n,i)},i=>{jW(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=Tj(n.repoInfo_,()=>new Sz(n.stats_,n.server_)),n.infoData_=new bz,n.infoSyncTree_=new ck({startListening:(i,r,s,o)=>{let a=[];const c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=Bu(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),r1(n,"connected",!1),n.serverSyncTree_=new ck({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{const l=o(a,c);Pn(n.eventQueue_,i._path,l)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function Yx(n){const t=n.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function ju(n){return xW({timestamp:Yx(n)})}function hk(n,e,t,i,r){n.dataUpdateCount++;const s=new ge(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const c=Qh(t,l=>De(l));o=bW(n.serverSyncTree_,s,c,r)}else{const c=De(t);o=Lx(n.serverSyncTree_,s,c,r)}else if(i){const c=Qh(t,l=>De(l));o=_W(n.serverSyncTree_,s,c)}else{const c=De(t);o=Bu(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Ta(n,s)),Pn(n.eventQueue_,a,o)}function dk(n,e){r1(n,"connected",e),e===!1&&KW(n)}function jW(n,e){mt(e,(t,i)=>{r1(n,t,i)})}function r1(n,e,t){const i=new ge("/.info/"+e),r=De(t);n.infoData_.updateSnapshot(i,r);const s=Bu(n.infoSyncTree_,i,r);Pn(n.eventQueue_,i,s)}function xf(n){return n.nextWriteId_++}function zW(n,e){const t=EW(n.serverSyncTree_,e);return t!=null?Promise.resolve(t):n.server_.get(e).then(i=>{const r=De(i).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())Bu(n.serverSyncTree_,e._path,r);else{const o=kW(n.serverSyncTree_,e);Lx(n.serverSyncTree_,e._path,r,o)}return Gd(n.serverSyncTree_,e,null).length>0&&Hs(n,"unexpected cancel events in repoGetValue"),r},i=>(Hs(n,"get for query "+Ke(e)+" failed: "+i),Promise.reject(new Error(i))))}function s1(n,e,t,i,r){Hs(n,"set",{path:e.toString(),value:t,priority:i});const s=ju(n),o=De(t,i),a=bf(n.serverSyncTree_,e),c=Zy(o,a,s),l=xf(n),u=Ky(n.serverSyncTree_,e,c,l,!0);Sf(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(d,p)=>{const m=d==="ok";m||$t("set at "+e+" failed: "+d);const _=br(n.serverSyncTree_,l,!m);Pn(n.eventQueue_,e,_),Ur(n,r,d,p)});const h=a1(n,e);Ta(n,h),Pn(n.eventQueue_,h,[])}function WW(n,e,t,i){Hs(n,"update",{path:e.toString(),value:t});let r=!0;const s=ju(n),o={};if(mt(t,(a,c)=>{r=!1,o[a]=Vx(Ae(e,a),De(c),n.serverSyncTree_,s)}),r)at("update() called with empty data.  Don't do anything."),Ur(n,i,"ok",void 0);else{const a=xf(n),c=yW(n.serverSyncTree_,e,o,a);Sf(n.eventQueue_,c),n.server_.merge(e.toString(),t,(l,u)=>{const h=l==="ok";h||$t("update at "+e+" failed: "+l);const d=br(n.serverSyncTree_,a,!h),p=d.length>0?Ta(n,e):e;Pn(n.eventQueue_,p,d),Ur(n,i,l,u)}),mt(t,l=>{const u=a1(n,Ae(e,l));Ta(n,u)}),Pn(n.eventQueue_,e,[])}}function KW(n){Hs(n,"onDisconnectEvents");const e=ju(n),t=Md();Ym(n.onDisconnect_,de(),(r,s)=>{const o=Vx(r,s,n.serverSyncTree_,e);nc(t,r,o)});let i=[];Ym(t,de(),(r,s)=>{i=i.concat(Bu(n.serverSyncTree_,r,s));const o=a1(n,r);Ta(n,o)}),n.onDisconnect_=Md(),Pn(n.eventQueue_,de(),i)}function HW(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&Qm(n.onDisconnect_,e),Ur(n,t,i,r)})}function fk(n,e,t,i){const r=De(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{s==="ok"&&nc(n.onDisconnect_,e,r),Ur(n,i,s,o)})}function QW(n,e,t,i,r){const s=De(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&nc(n.onDisconnect_,e,s),Ur(n,r,o,a)})}function YW(n,e,t,i){if(ol(t)){at("onDisconnect().update() called with empty data.  Don't do anything."),Ur(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{r==="ok"&&mt(t,(o,a)=>{const c=De(a);nc(n.onDisconnect_,Ae(e,o),c)}),Ur(n,i,r,s)})}function XW(n,e,t){let i;te(e._path)===".info"?i=lk(n.infoSyncTree_,e,t):i=lk(n.serverSyncTree_,e,t),Kx(n.eventQueue_,e._path,i)}function ig(n,e,t){let i;te(e._path)===".info"?i=Gd(n.infoSyncTree_,e,t):i=Gd(n.serverSyncTree_,e,t),Kx(n.eventQueue_,e._path,i)}function Xx(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Qx)}function JW(n){n.persistentConnection_&&n.persistentConnection_.resume(Qx)}function Hs(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),at(t,...e)}function Ur(n,e,t,i){e&&tc(()=>{if(t==="ok")e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function ZW(n,e,t,i,r,s){Hs(n,"transaction on "+e);const o={path:e,update:t,onComplete:i,status:null,order:GS(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=o1(n,e,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{qu("transaction failed: Data returned ",c,o.path),o.status=0;const l=If(n.transactionQueueTree_,e),u=Eo(l)||[];u.push(o),n1(l,u);let h;typeof c=="object"&&c!==null&&Kn(c,".priority")?(h=Ns(c,".priority"),S(Fl(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(bf(n.serverSyncTree_,e)||q.EMPTY_NODE).getPriority().val();const d=ju(n),p=De(c,h),m=Zy(p,a,d);o.currentOutputSnapshotRaw=p,o.currentOutputSnapshotResolved=m,o.currentWriteId=xf(n);const _=Ky(n.serverSyncTree_,e,m,o.currentWriteId,o.applyLocally);Pn(n.eventQueue_,e,_),Af(n,n.transactionQueueTree_)}}function o1(n,e,t){return bf(n.serverSyncTree_,e,t)||q.EMPTY_NODE}function Af(n,e=n.transactionQueueTree_){if(e||Rf(n,e),Eo(e)){const t=Zx(n,e);S(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&eK(n,Vu(e),t)}else qx(e)&&Tf(e,t=>{Af(n,t)})}function eK(n,e,t){const i=t.map(l=>l.currentWriteId),r=o1(n,e,i);let s=r;const o=r.hash();for(let l=0;l<t.length;l++){const u=t[l];S(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Xt(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{Hs(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const h=[];for(let d=0;d<t.length;d++)t[d].status=2,u=u.concat(br(n.serverSyncTree_,t[d].currentWriteId)),t[d].onComplete&&h.push(()=>t[d].onComplete(null,!0,t[d].currentOutputSnapshotResolved)),t[d].unwatcher();Rf(n,If(n.transactionQueueTree_,e)),Af(n,n.transactionQueueTree_),Pn(n.eventQueue_,e,u);for(let d=0;d<h.length;d++)tc(h[d])}else{if(l==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{$t("transaction at "+c.toString()+" failed: "+l);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=l}Ta(n,e)}},o)}function Ta(n,e){const t=Jx(n,e),i=Vu(t),r=Zx(n,t);return tK(n,r,i),i}function tK(n,e,t){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Xt(t,c.path);let u=!1,h;if(S(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,h=c.abortReason,r=r.concat(br(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=VW)u=!0,h="maxretry",r=r.concat(br(n.serverSyncTree_,c.currentWriteId,!0));else{const d=o1(n,c.path,o);c.currentInputSnapshot=d;const p=e[a].update(d.val());if(p!==void 0){qu("transaction failed: Data returned ",p,c.path);let m=De(p);typeof p=="object"&&p!=null&&Kn(p,".priority")||(m=m.updatePriority(d.getPriority()));const y=c.currentWriteId,x=ju(n),N=Zy(m,d,x);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=N,c.currentWriteId=xf(n),o.splice(o.indexOf(y),1),r=r.concat(Ky(n.serverSyncTree_,c.path,N,c.currentWriteId,c.applyLocally)),r=r.concat(br(n.serverSyncTree_,y,!0))}else u=!0,h="nodata",r=r.concat(br(n.serverSyncTree_,c.currentWriteId,!0))}Pn(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}Rf(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)tc(i[a]);Af(n,n.transactionQueueTree_)}function Jx(n,e){let t,i=n.transactionQueueTree_;for(t=te(e);t!==null&&Eo(i)===void 0;)i=If(i,t),e=ve(e),t=te(e);return i}function Zx(n,e){const t=[];return eA(n,e,t),t.sort((i,r)=>i.order-r.order),t}function eA(n,e,t){const i=Eo(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Tf(e,r=>{eA(n,r,t)})}function Rf(n,e){const t=Eo(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,n1(e,t.length>0?t:void 0)}Tf(e,i=>{Rf(n,i)})}function a1(n,e){const t=Vu(Jx(n,e)),i=If(n.transactionQueueTree_,e);return NW(i,r=>{$p(n,r)}),$p(n,i),Gx(i,r=>{$p(n,r)}),t}function $p(n,e){const t=Eo(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(S(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(br(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?n1(e,void 0):t.length=s+1,Pn(n.eventQueue_,Vu(e),r);for(let o=0;o<i.length;o++)tc(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function iK(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):$t(`Invalid query segment '${t}' in query '${n}'`)}return e}const rg=function(n,e){const t=rK(n),i=t.namespace;t.domain==="firebase.com"&&yi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&yi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||fj();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new rx(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new ge(t.pathString)}},rK=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(r=nK(n.substring(u,h)));const d=iK(n.substring(Math.min(n.length,h)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const p=e.slice(0,l);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{const m=e.indexOf(".");i=e.substring(0,m).toLowerCase(),t=e.substring(m+1),s=i}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ke(this.snapshot.exportVal())}}class nA{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new We;return HW(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Sn("OnDisconnect.remove",this._path);const e=new We;return fk(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Sn("OnDisconnect.set",this._path),wi("OnDisconnect.set",e,this._path,!1);const t=new We;return fk(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Sn("OnDisconnect.setWithPriority",this._path),wi("OnDisconnect.setWithPriority",e,this._path,!1),i1("OnDisconnect.setWithPriority",t,!1);const i=new We;return QW(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Sn("OnDisconnect.update",this._path),zx("OnDisconnect.update",e,this._path,!1);const t=new We;return YW(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return ne(this._path)?null:Ny(this._path)}get ref(){return new Ln(this._repo,this._path)}get _queryIdentifier(){const e=Jv(this._queryParams),t=Sy(e);return t==="{}"?"default":t}get _queryObject(){return Jv(this._queryParams)}isEqual(e){if(e=k(e),!(e instanceof pn))return!1;const t=this._repo===e._repo,i=Py(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Hj(this._path)}}function Df(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Jr(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ui){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Yi)throw new Error(i);if(typeof e!="string")throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==_i)throw new Error(i);if(typeof t!="string")throw new Error(r)}}else if(n.getIndex()===Ee){if(e!=null&&!Fl(e)||t!=null&&!Fl(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(S(n.getIndex()instanceof Ly||n.getIndex()===Fy,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Nf(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ln extends pn{constructor(e,t){super(e,t,new yf,!1)}get parent(){const e=fx(this._path);return e===null?null:new Ln(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Qs{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ge(e),i=Ys(this.ref,e);return new Qs(this._node.getChild(t),i,Ee)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Qs(r,Ys(this.ref,i),Ee)))}hasChild(e){const t=new ge(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function rA(n,e){return n=k(n),n._checkNotDeleted("ref"),e!==void 0?Ys(n._root,e):n._root}function pk(n,e){n=k(n),n._checkNotDeleted("refFromURL");const t=rg(e,n._repo.repoInfo_.nodeAdmin);Wx("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&yi("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),rA(n,t.path.toString())}function Ys(n,e){return n=k(n),te(n._path)===null?$W("child","path",e,!1):$l("child","path",e,!1),new Ln(n._repo,Ae(n._path,e))}function oK(n,e){n=k(n),Sn("push",n._path),wi("push",e,n._path,!0);const t=Yx(n._repo),i=pz(t),r=Ys(n,i),s=Ys(n,i);let o;return e!=null?o=c1(s,e).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function aK(n){return Sn("remove",n._path),c1(n,null)}function c1(n,e){n=k(n),Sn("set",n._path),wi("set",e,n._path,!1);const t=new We;return s1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function cK(n,e){n=k(n),Sn("setPriority",n._path),i1("setPriority",e,!1);const t=new We;return s1(n._repo,Ae(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function lK(n,e,t){if(Sn("setWithPriority",n._path),wi("setWithPriority",e,n._path,!1),i1("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new We;return s1(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}function uK(n,e){zx("update",e,n._path,!1);const t=new We;return WW(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function hK(n){return n=k(n),zW(n._repo,n).then(e=>new Qs(e,new Ln(n._repo,n._path),n._queryParams.getIndex()))}class Pf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new tA("value",this,new Qs(e.snapshotNode,new Ln(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new nA(this,e,t):null}matches(e){return e instanceof Pf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Of{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new nA(this,e,t):null}createEvent(e,t){S(e.childName!=null,"Child events should have a childName.");const i=Ys(new Ln(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new tA(e.type,this,new Qs(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Of?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function zu(n,e,t,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){const c=t,l=(u,h)=>{ig(n._repo,n,a),c(u,h)};l.userCallback=t.userCallback,l.context=t.context,t=l}const o=new iA(t,s||void 0),a=e==="value"?new Pf(o):new Of(e,o);return XW(n._repo,n,a),()=>ig(n._repo,n,a)}function sg(n,e,t,i){return zu(n,"value",e,t,i)}function mk(n,e,t,i){return zu(n,"child_added",e,t,i)}function gk(n,e,t,i){return zu(n,"child_changed",e,t,i)}function yk(n,e,t,i){return zu(n,"child_moved",e,t,i)}function _k(n,e,t,i){return zu(n,"child_removed",e,t,i)}function wk(n,e,t){let i=null;const r=t?new iA(t):null;e==="value"?i=new Pf(r):e&&(i=new Of(e,r)),ig(n._repo,n,i)}class Hn{}class sA extends Hn{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wi("endAt",this._value,e._path,!0);const t=Hm(e._queryParams,this._value,this._key);if(Nf(t),Jr(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pn(e._repo,e._path,t,e._orderByCalled)}}function dK(n,e){return Gu("endAt","key",e,!0),new sA(n,e)}class fK extends Hn{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wi("endBefore",this._value,e._path,!1);const t=kz(e._queryParams,this._value,this._key);if(Nf(t),Jr(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pn(e._repo,e._path,t,e._orderByCalled)}}function pK(n,e){return Gu("endBefore","key",e,!0),new fK(n,e)}class oA extends Hn{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wi("startAt",this._value,e._path,!0);const t=Km(e._queryParams,this._value,this._key);if(Nf(t),Jr(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new pn(e._repo,e._path,t,e._orderByCalled)}}function mK(n=null,e){return Gu("startAt","key",e,!0),new oA(n,e)}class gK extends Hn{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wi("startAfter",this._value,e._path,!1);const t=vz(e._queryParams,this._value,this._key);if(Nf(t),Jr(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new pn(e._repo,e._path,t,e._orderByCalled)}}function yK(n,e){return Gu("startAfter","key",e,!0),new gK(n,e)}class _K extends Hn{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new pn(e._repo,e._path,_z(e._queryParams,this._limit),e._orderByCalled)}}function wK(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new _K(n)}class vK extends Hn{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new pn(e._repo,e._path,wz(e._queryParams,this._limit),e._orderByCalled)}}function kK(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new vK(n)}class bK extends Hn{constructor(e){super(),this._path=e}_apply(e){Df(e,"orderByChild");const t=new ge(this._path);if(ne(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Ly(t),r=_f(e._queryParams,i);return Jr(r),new pn(e._repo,e._path,r,!0)}}function EK(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return $l("orderByChild","path",n,!1),new bK(n)}class IK extends Hn{_apply(e){Df(e,"orderByKey");const t=_f(e._queryParams,ui);return Jr(t),new pn(e._repo,e._path,t,!0)}}function TK(){return new IK}class CK extends Hn{_apply(e){Df(e,"orderByPriority");const t=_f(e._queryParams,Ee);return Jr(t),new pn(e._repo,e._path,t,!0)}}function SK(){return new CK}class xK extends Hn{_apply(e){Df(e,"orderByValue");const t=_f(e._queryParams,Fy);return Jr(t),new pn(e._repo,e._path,t,!0)}}function AK(){return new xK}class RK extends Hn{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(wi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new sA(this._value,this._key)._apply(new oA(this._value,this._key)._apply(e))}}function DK(n,e){return Gu("equalTo","key",e,!0),new RK(n,e)}function Fn(n,...e){let t=k(n);for(const i of e)t=i._apply(t);return t}lW(Ln);pW(Ln);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK="FIREBASE_DATABASE_EMULATOR_HOST",og={};let PK=!1;function OK(n,e,t,i){n.repoInfo_=new rx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}function aA(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||yi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),at("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=rg(s,r),a=o.repoInfo,c,l;typeof process!="undefined"&&process.env&&(l=process.env[NK]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=rg(s,r),a=o.repoInfo):c=!o.repoInfo.secure;const u=r&&c?new na(na.OWNER):new bj(n.name,n.options,e);Wx("Invalid Firebase Database URL",o),ne(o.path)||yi("Database URL must point to the root of a Firebase Database (not including a child path).");const h=LK(a,n,u,new kj(n.name,t));return new FK(h,n)}function MK(n,e){const t=og[e];(!t||t[n.key]!==n)&&yi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Xx(n),delete t[n.key]}function LK(n,e,t,i){let r=og[e.name];r||(r={},og[e.name]=r);let s=r[n.toURLString()];return s&&yi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new qW(n,PK,t,i),r[n.toURLString()]=s,s}class FK{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(GW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ln(this._repo,de())),this._rootInternal}_delete(){return this._rootInternal!==null&&(MK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yi("Cannot call "+e+" on a deleted database.")}}function cA(){va.IS_TRANSPORT_INITIALIZED&&$t("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function $K(){cA(),kr.forceDisallow()}function UK(){cA(),Tn.forceDisallow(),kr.forceAllow()}function BK(n,e,t,i={}){n=k(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&yi("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&yi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new na(na.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:Pg(i.mockUserToken,n.app.options.projectId);s=new na(o)}OK(r,e,t,s)}function VK(n){n=k(n),n._checkNotDeleted("goOffline"),Xx(n._repo)}function qK(n){n=k(n),n._checkNotDeleted("goOnline"),JW(n._repo)}function GK(n,e){zS(n,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(n){VS(fn),Ue(new fe("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return aA(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),_e(Ov,Mv,n),_e(Ov,Mv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zK={".sv":"timestamp"};function WK(){return zK}function KK(n){return{".sv":{increment:n}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function QK(n,e,t){var i;if(n=k(n),Sn("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=(i=t==null?void 0:t.applyLocally)!==null&&i!==void 0?i:!0,s=new We,o=(c,l,u)=>{let h=null;c?s.reject(c):(h=new Qs(u,new Ln(n._repo,n._path),Ee),s.resolve(new HK(l,h)))},a=sg(n,()=>{});return ZW(n._repo,n._path,e,o,a,r),s.promise}ji.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ji.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};jK();const YK="@firebase/database-compat",XK="0.2.3";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK=new Ei("@firebase/database-compat"),lA=function(n){const e="FIREBASE WARNING: "+n;JK.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK=function(n,e,t,i){if(!(i&&t===void 0)&&typeof t!="boolean")throw new Error(dn(n,e)+"must be a boolean.")},eH=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(dn(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e){this._delegate=e}cancel(e){G("OnDisconnect.cancel",0,1,arguments.length),rt("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){G("OnDisconnect.remove",0,1,arguments.length),rt("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){G("OnDisconnect.set",1,2,arguments.length),rt("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){G("OnDisconnect.setWithPriority",2,3,arguments.length),rt("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if(G("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,lA("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rt("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return G("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t){this._database=e,this._delegate=t}val(){return G("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return G("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return G("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return G("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return G("DataSnapshot.child",0,1,arguments.length),e=String(e),$l("DataSnapshot.child","path",e,!1),new Sr(this._database,this._delegate.child(e))}hasChild(e){return G("DataSnapshot.hasChild",1,1,arguments.length),$l("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return G("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return G("DataSnapshot.forEach",1,1,arguments.length),rt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Sr(this._database,t)))}hasChildren(){return G("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return G("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return G("DataSnapshot.ref",0,0,arguments.length),new gn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class wt{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;G("Query.on",2,4,arguments.length),rt("Query.on","callback",t,!1);const o=wt.getCancelAndContextArgs_("Query.on",i,r),a=(l,u)=>{t.call(o.context,new Sr(this.database,l),u)};a.userCallback=t,a.context=o.context;const c=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return sg(this._delegate,a,c),t;case"child_added":return mk(this._delegate,a,c),t;case"child_removed":return _k(this._delegate,a,c),t;case"child_changed":return gk(this._delegate,a,c),t;case"child_moved":return yk(this._delegate,a,c),t;default:throw new Error(dn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if(G("Query.off",0,3,arguments.length),eH("Query.off",e,!0),rt("Query.off","callback",t,!0),O_("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,wk(this._delegate,e,r)}else wk(this._delegate,e)}get(){return hK(this._delegate).then(e=>new Sr(this.database,e))}once(e,t,i,r){G("Query.once",1,4,arguments.length),rt("Query.once","callback",t,!0);const s=wt.getCancelAndContextArgs_("Query.once",i,r),o=new We,a=(l,u)=>{const h=new Sr(this.database,l);t&&t.call(s.context,h,u),o.resolve(h)};a.userCallback=t,a.context=s.context;const c=l=>{s.cancel&&s.cancel.call(s.context,l),o.reject(l)};switch(e){case"value":sg(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":mk(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":_k(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":gk(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":yk(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(dn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return G("Query.limitToFirst",1,1,arguments.length),new wt(this.database,Fn(this._delegate,wK(e)))}limitToLast(e){return G("Query.limitToLast",1,1,arguments.length),new wt(this.database,Fn(this._delegate,kK(e)))}orderByChild(e){return G("Query.orderByChild",1,1,arguments.length),new wt(this.database,Fn(this._delegate,EK(e)))}orderByKey(){return G("Query.orderByKey",0,0,arguments.length),new wt(this.database,Fn(this._delegate,TK()))}orderByPriority(){return G("Query.orderByPriority",0,0,arguments.length),new wt(this.database,Fn(this._delegate,SK()))}orderByValue(){return G("Query.orderByValue",0,0,arguments.length),new wt(this.database,Fn(this._delegate,AK()))}startAt(e=null,t){return G("Query.startAt",0,2,arguments.length),new wt(this.database,Fn(this._delegate,mK(e,t)))}startAfter(e=null,t){return G("Query.startAfter",0,2,arguments.length),new wt(this.database,Fn(this._delegate,yK(e,t)))}endAt(e=null,t){return G("Query.endAt",0,2,arguments.length),new wt(this.database,Fn(this._delegate,dK(e,t)))}endBefore(e=null,t){return G("Query.endBefore",0,2,arguments.length),new wt(this.database,Fn(this._delegate,pK(e,t)))}equalTo(e,t){return G("Query.equalTo",1,2,arguments.length),new wt(this.database,Fn(this._delegate,DK(e,t)))}toString(){return G("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return G("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(G("Query.isEqual",1,1,arguments.length),!(e instanceof wt)){const t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,rt(e,"cancel",r.cancel,!0),r.context=i,O_(e,"context",r.context,!0);else if(t)if(typeof t=="object"&&t!==null)r.context=t;else if(typeof t=="function")r.cancel=t;else throw new Error(dn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new gn(this.database,new Ln(this._delegate._repo,this._delegate._path))}}class gn extends wt{constructor(e,t){super(e,new pn(t._repo,t._path,new yf,!1)),this.database=e,this._delegate=t}getKey(){return G("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return G("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new gn(this.database,Ys(this._delegate,e))}getParent(){G("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new gn(this.database,e):null}getRoot(){return G("Reference.root",0,0,arguments.length),new gn(this.database,this._delegate.root)}set(e,t){G("Reference.set",1,2,arguments.length),rt("Reference.set","onComplete",t,!0);const i=c1(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if(G("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,lA("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Sn("Reference.update",this._delegate._path),rt("Reference.update","onComplete",t,!0);const i=uK(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){G("Reference.setWithPriority",2,3,arguments.length),rt("Reference.setWithPriority","onComplete",i,!0);const r=lK(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){G("Reference.remove",0,1,arguments.length),rt("Reference.remove","onComplete",e,!0);const t=aK(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){G("Reference.transaction",1,3,arguments.length),rt("Reference.transaction","transactionUpdate",e,!1),rt("Reference.transaction","onComplete",t,!0),ZK("Reference.transaction","applyLocally",i,!0);const r=QK(this._delegate,e,{applyLocally:i}).then(s=>new nH(s.committed,new Sr(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){G("Reference.setPriority",1,2,arguments.length),rt("Reference.setPriority","onComplete",t,!0);const i=cK(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){G("Reference.push",0,2,arguments.length),rt("Reference.push","onComplete",t,!0);const i=oK(this._delegate,e),r=i.then(o=>new gn(this.database,o));t&&r.then(()=>t(null),o=>t(o));const s=new gn(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Sn("Reference.onDisconnect",this._delegate._path),new tH(new sK(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:$K,forceLongPolling:UK}}useEmulator(e,t,i={}){BK(this._delegate,e,t,i)}ref(e){if(G("database.ref",0,1,arguments.length),e instanceof gn){const t=pk(this._delegate,e.toString());return new gn(this,t)}else{const t=rA(this._delegate,e);return new gn(this,t)}}refFromURL(e){G("database.refFromURL",1,1,arguments.length);const i=pk(this._delegate,e);return new gn(this,i)}goOffline(){return G("database.goOffline",0,0,arguments.length),VK(this._delegate)}goOnline(){return G("database.goOnline",0,0,arguments.length),qK(this._delegate)}}Ul.ServerValue={TIMESTAMP:WK(),increment:n=>KK(n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){VS(t);const o=new $E("auth-internal",new aD("database-standalone"));return o.setComponent(new fe("auth-internal",()=>i,"PRIVATE")),{instance:new Ul(aA(n,o,void 0,e,s),n),namespace:r}}var rH=Object.freeze({__proto__:null,initStandalone:iH});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH=Ul.ServerValue;function oH(n){n.INTERNAL.registerComponent(new fe("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Ul(r,i)},"PUBLIC").setServiceProps({Reference:gn,Query:wt,Database:Ul,DataSnapshot:Sr,enableLogging:GK,INTERNAL:rH,ServerValue:sH}).setMultipleInstances(!0)),n.registerVersion(YK,XK)}oH(Ze);const vk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc="9.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Ei("@firebase/firestore");function ag(){return Br.logLevel}function aH(n){Br.setLogLevel(n)}function I(n,...e){if(Br.logLevel<=Q.DEBUG){const t=e.map(l1);Br.debug(`Firestore (${rc}): ${n}`,...t)}}function Ge(n,...e){if(Br.logLevel<=Q.ERROR){const t=e.map(l1);Br.error(`Firestore (${rc}): ${n}`,...t)}}function Bl(n,...e){if(Br.logLevel<=Q.WARN){const t=e.map(l1);Br.warn(`Firestore (${rc}): ${n}`,...t)}}function l1(n){if(typeof n=="string")return n;try{return e=n,JSON.stringify(e)}catch{return n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(n="Unexpected state"){const e=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+n;throw Ge(e),new Error(e)}function z(n,e){n||F()}function cH(n,e){n||F()}function P(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class E extends Ce{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ot.UNAUTHENTICATED))}shutdown(){}}class uH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hH{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let s=new ct;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ct,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ct)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(z(typeof i.accessToken=="string"),new uA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new ot(e)}}class dH{constructor(e,t,i){this.type="FirstParty",this.user=ot.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class fH{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new dH(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pH{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mH{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=s=>{s.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,I("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(z(typeof t.token=="string"),this.p=t.token,new pH(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(n){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=gH(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function X(n,e){return n<e?-1:n>e?1:0}function Ca(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function dA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new E(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new E(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new E(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new E(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Re(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new Re(0,0))}static max(){return new j(new Re(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t,i){t===void 0?t=0:t>e.length&&F(),i===void 0?i=e.length-t:i>e.length-t&&F(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Vl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vl?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class le extends Vl{construct(e,t,i){return new le(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new E(v.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new le(t)}static emptyPath(){return new le([])}}const yH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends Vl{construct(e,t,i){return new $e(e,t,i)}static isValidIdentifier(e){return yH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new E(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new E(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new E(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new E(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(t)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.path=e}static fromPath(e){return new D(le.fromString(e))}static fromName(e){return new D(le.fromString(e).popFirst(5))}static empty(){return new D(le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new D(new le(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function cg(n){return n.fields.find(e=>e.kind===2)}function ls(n){return n.fields.filter(e=>e.kind!==2)}fA.UNKNOWN_ID=-1;class _H{constructor(e,t){this.fieldPath=e,this.kind=t}}class jd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new jd(0,En.min())}}function pA(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=j.fromTimestamp(i===1e9?new Re(t+1,0):new Re(t,i));return new En(r,D.empty(),e)}function mA(n){return new En(n.readTime,n.key,-1)}class En{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new En(j.min(),D.empty(),-1)}static max(){return new En(j.max(),D.empty(),-1)}}function u1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=D.comparator(n.documentKey,e.documentKey),t!==0?t:X(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zr(n){if(n.code!==v.FAILED_PRECONDITION||n.message!==gA)throw n;I("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new w((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof w?t:w.resolve(t)}catch(t){return w.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):w.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):w.reject(t)}static resolve(e){return new w((t,i)=>{t(e)})}static reject(e){return new w((t,i)=>{i(e)})}static waitFor(e){return new w((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=w.resolve(!1);for(const i of e)t=t.next(r=>r?w.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new w((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new w((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new ct,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Jc(e,t.error)):this.T.resolve()},this.transaction.onerror=i=>{const r=h1(i.target.error);this.T.reject(new Jc(e,r))}}static open(e,t,i,r){try{return new Mf(t,e.transaction(r,i))}catch(s){throw new Jc(t,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vH(t)}}class Vn{constructor(e,t,i){this.name=e,this.version=t,this.P=i,Vn.v(ie())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),hs(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!kn())return!1;if(Vn.S())return!0;const e=ie(),t=Vn.v(e),i=0<t&&t<10,r=Vn.D(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static S(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.C)==="YES"}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static D(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async k(e){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const o=s.target.result;t(o)},r.onblocked=()=>{i(new Jc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const o=s.target.error;o.name==="VersionError"?i(new E(v.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new E(v.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new Jc(e,o))},r.onupgradeneeded=s=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.P.O(o,r.transaction,s.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.M&&(this.db.onversionchange=t=>this.M(t)),this.db}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=Mf.open(this.db,e,s?"readonly":"readwrite",i),c=r(a).next(l=>(a.R(),l)).catch(l=>(a.abort(l),w.reject(l))).toPromise();return c.catch(()=>{}),await a.A,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(I("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class wH{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return hs(this.$.delete())}}class Jc extends E{constructor(e,t){super(v.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function es(n){return n.name==="IndexedDbTransactionError"}class vH{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(I("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),hs(i)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),hs(this.store.add(e))}get(e){return hs(this.store.get(e)).next(t=>(t===void 0&&(t=null),I("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),hs(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),hs(this.store.count())}K(e,t){const i=this.options(e,t);if(i.index||typeof this.store.getAll!="function"){const r=this.cursor(i),s=[];return this.G(r,(o,a)=>{s.push(a)}).next(()=>s)}{const r=this.store.getAll(i.range);return new w((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}j(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new w((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}W(e,t){I("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.H=!1;const r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}J(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Y(e){const t=this.cursor({});return new w((i,r)=>{t.onerror=s=>{const o=h1(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,t){const i=[];return new w((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const c=new wH(a),l=t(a.primaryKey,a.value,c);if(l instanceof w){const u=l.catch(h=>(c.done(),w.reject(h)));i.push(u)}c.isDone?r():c.U===null?a.continue():a.continue(c.U)}}).next(()=>w.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hs(n){return new w((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=h1(i.target.error);t(r)}})}let kk=!1;function h1(n){const e=Vn.v(ie());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new E("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kk||(kk=!0,setTimeout(()=>{throw i},0)),i}}return n}class kH{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}Z(e){I("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{I("IndexBackiller",`Documents written: ${await this.X.tt()}`)}catch(t){es(t)?I("IndexBackiller","Ignoring IndexedDB error during index backfill: ",t):await Zr(t)}await this.Z(1)})}}class bH{constructor(e,t){this.localStore=e,this.persistence=t}async tt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.et(t,e))}et(e,t){const i=new Set;let r=t,s=!0;return w.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return I("IndexBackiller",`Processing collection: ${o}`),this.nt(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}nt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.st(r,s)).next(a=>(I("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}st(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=mA(s);u1(o,i)>0&&(i=o)}),new En(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.it(i),this.rt=i=>t.writeSequenceNumber(i))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Io(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _A(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.ot=-1;class Oe{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new Oe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i!=null?i:bt.RED,this.left=r!=null?r:bt.EMPTY,this.right=s!=null?s:bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new bt(e!=null?e:this.key,t!=null?t:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return bt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw F();const e=this.left.check();if(e!==this.right.check())throw F();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(n,e,t,i,r){return this}insert(n,e,t){return new bt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ek(this.data.getIterator())}getIteratorFrom(e){return new Ek(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof ye)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ye(this.comparator);return t.data=e,t}}class Ek{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oo(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new vn([])}unionWith(e){let t=new ye($e.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EH(){return typeof atob!="undefined"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Je(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Je(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const IH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(n){if(z(!!n),typeof n=="string"){let e=0;const t=IH.exec(n);if(z(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pe(n.seconds),nanos:Pe(n.nanos)}}function Pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xs(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function wA(n){const e=n.mapValue.fields.__previous_value__;return d1(e)?wA(e):e}function ql(n){const e=Vr(n.mapValue.fields.__local_write_time__.timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(e,t,i,r,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class Xi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(n){return n==null}function Gl(n){return n===0&&1/n==-1/0}function vA(n){return typeof n=="number"&&Number.isInteger(n)&&!Gl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bh={nullValue:"NULL_VALUE"};function Js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d1(n)?4:kA(n)?9007199254740991:10:F()}function vi(n,e){if(n===e)return!0;const t=Js(n);if(t!==Js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ql(n).isEqual(ql(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Vr(i.timestampValue),o=Vr(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,r){return Xs(i.bytesValue).isEqual(Xs(r.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Pe(i.geoPointValue.latitude)===Pe(r.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Pe(i.integerValue)===Pe(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Pe(i.doubleValue),o=Pe(r.doubleValue);return s===o?Gl(s)===Gl(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Ca(n.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(bk(s)!==bk(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!vi(s[a],o[a])))return!1;return!0}(n,e);default:return F()}}function jl(n,e){return(n.values||[]).find(t=>vi(t,e))!==void 0}function qr(n,e){if(n===e)return 0;const t=Js(n),i=Js(e);if(t!==i)return X(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return X(n.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Pe(r.integerValue||r.doubleValue),a=Pe(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return Ik(n.timestampValue,e.timestampValue);case 4:return Ik(ql(n),ql(e));case 5:return X(n.stringValue,e.stringValue);case 6:return function(r,s){const o=Xs(r),a=Xs(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){const l=X(o[c],a[c]);if(l!==0)return l}return X(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const o=X(Pe(r.latitude),Pe(s.latitude));return o!==0?o:X(Pe(r.longitude),Pe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){const l=qr(o[c],a[c]);if(l)return l}return X(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Er.mapValue&&s===Er.mapValue)return 0;if(r===Er.mapValue)return 1;if(s===Er.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),c=s.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){const h=X(a[u],l[u]);if(h!==0)return h;const d=qr(o[a[u]],c[l[u]]);if(d!==0)return d}return X(a.length,l.length)}(n.mapValue,e.mapValue);default:throw F()}}function Ik(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return X(n,e);const t=Vr(n),i=Vr(e),r=X(t.seconds,i.seconds);return r!==0?r:X(t.nanos,i.nanos)}function ia(n){return lg(n)}function lg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Vr(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xs(n.bytesValue).toBase64():"referenceValue"in n?(t=n.referenceValue,D.fromName(t).toString()):"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=lg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${lg(i.fields[a])}`;return s+"}"}(n.mapValue):F();var e,t}function Zs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ug(n){return!!n&&"integerValue"in n}function zl(n){return!!n&&"arrayValue"in n}function Tk(n){return!!n&&"nullValue"in n}function Ck(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vh(n){return!!n&&"mapValue"in n}function Zc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Io(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Zc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function CH(n){return"nullValue"in n?Bh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zs(Xi.empty(),D.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:F()}function SH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zs(Xi.empty(),D.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Er:F()}function Sk(n,e){const t=qr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xk(n,e){const t=qr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(t)}setAll(e){let t=$e.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Zc(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());Vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Vh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Io(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new It(Zc(this.value))}}function bA(n){const e=[];return Io(n.fields,(t,i)=>{const r=new $e([t]);if(Vh(i)){const s=bA(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,t,i,r,s,o){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new be(e,0,j.min(),j.min(),It.empty(),0)}static newFoundDocument(e,t,i){return new be(e,1,t,j.min(),i,0)}static newNoDocument(e,t){return new be(e,2,t,j.min(),It.empty(),0)}static newUnknownDocument(e,t){return new be(e,3,t,j.min(),It.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new be(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function Ak(n,e=null,t=[],i=[],r=null,s=null,o=null){return new xH(n,e,t,i,r,s,o)}function eo(n){const e=P(n);if(e.ut===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+ia(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Wu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ia(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ia(i)).join(",")),e.ut=t}return e.ut}function AH(n){let e=n.path.canonicalString();return n.collectionGroup!==null&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${ia(i.value)}`;var i}).join(", ")}]`),Wu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(t)).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ia(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ia(t)).join(",")),`Target(${e})`}function Ku(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!FH(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(t=n.filters[r],i=e.filters[r],t.op!==i.op||!t.field.isEqual(i.field)||!vi(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pk(n.startAt,e.startAt)&&Pk(n.endAt,e.endAt)}function zd(n){return D.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Wd(n,e){return n.filters.filter(t=>t instanceof Tt&&t.field.isEqual(e))}function Rk(n,e,t){let i=Bh,r=!0;for(const s of Wd(n,e)){let o=Bh,a=!0;switch(s.op){case"<":case"<=":o=CH(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Bh}Sk({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Sk({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}function Dk(n,e,t){let i=Er,r=!0;for(const s of Wd(n,e)){let o=Er,a=!0;switch(s.op){case">=":case">":o=SH(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Er}xk({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];xk({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}class Tt extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.ct(e,t,i):new RH(e,t,i):t==="array-contains"?new PH(e,i):t==="in"?new OH(e,i):t==="not-in"?new MH(e,i):t==="array-contains-any"?new LH(e,i):new Tt(e,t,i)}static ct(e,t,i){return t==="in"?new DH(e,i):new NH(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.at(qr(t,this.value)):t!==null&&Js(this.value)===Js(t)&&this.at(qr(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return F()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class RH extends Tt{constructor(e,t,i){super(e,t,i),this.key=D.fromName(i.referenceValue)}matches(e){const t=D.comparator(e.key,this.key);return this.at(t)}}class DH extends Tt{constructor(e,t){super(e,"in",t),this.keys=EA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class NH extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=EA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function EA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>D.fromName(i.referenceValue))}class PH extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zl(t)&&jl(t.arrayValue,this.value)}}class OH extends Tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jl(this.value.arrayValue,t)}}class MH extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!jl(this.value.arrayValue,t)}}class LH extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>jl(this.value.arrayValue,i))}}class Gr{constructor(e,t){this.position=e,this.inclusive=t}}class ra{constructor(e,t="asc"){this.field=e,this.dir=t}}function FH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Nk(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=D.comparator(D.fromName(o.referenceValue),t.key):i=qr(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Pk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.lt=null,this.ft=null,this.startAt,this.endAt}}function IA(n,e,t,i,r,s,o,a){return new rr(n,e,t,i,r,s,o,a)}function sc(n){return new rr(n)}function $H(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function f1(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function p1(n){for(const e of n.filters)if(e.ht())return e.field;return null}function m1(n){return n.collectionGroup!==null}function Sa(n){const e=P(n);if(e.lt===null){e.lt=[];const t=p1(e),i=f1(e);if(t!==null&&i===null)t.isKeyField()||e.lt.push(new ra(t)),e.lt.push(new ra($e.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new ra($e.keyField(),s))}}}return e.lt}function On(n){const e=P(n);if(!e.ft)if(e.limitType==="F")e.ft=Ak(e.path,e.collectionGroup,Sa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Sa(e)){const o=s.dir==="desc"?"asc":"desc";t.push(new ra(s.field,o))}const i=e.endAt?new Gr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gr(e.startAt.position,e.startAt.inclusive):null;e.ft=Ak(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.ft}function TA(n,e,t){return new rr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hu(n,e){return Ku(On(n),On(e))&&n.limitType===e.limitType}function CA(n){return`${eo(On(n))}|lt:${n.limitType}`}function hg(n){return`Query(target=${AH(On(n))}; limitType=${n.limitType})`}function g1(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return t.collectionGroup!==null?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):D.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&function(t,i){return!(t.startAt&&!function(r,s,o){const a=Nk(r,s,o);return r.inclusive?a<=0:a<0}(t.startAt,Sa(t),i)||t.endAt&&!function(r,s,o){const a=Nk(r,s,o);return r.inclusive?a>=0:a>0}(t.endAt,Sa(t),i))}(n,e)}function SA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xA(n){return(e,t)=>{let i=!1;for(const r of Sa(n)){const s=UH(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function UH(n,e,t){const i=n.field.isKeyField()?D.comparator(e.key,t.key):function(r,s,o){const a=s.data.field(r),c=o.data.field(r);return a!==null&&c!==null?qr(a,c):F()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return F()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gl(e)?"-0":e}}function RA(n){return{integerValue:""+n}}function DA(n,e){return vA(e)?RA(e):AA(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this._=void 0}}function BH(n,e,t){return n instanceof xa?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof to?PA(n,e):n instanceof no?OA(n,e):function(i,r){const s=NA(i,r),o=Ok(s)+Ok(i._t);return ug(s)&&ug(i._t)?RA(o):AA(i.wt,o)}(n,e)}function VH(n,e,t){return n instanceof to?PA(n,e):n instanceof no?OA(n,e):t}function NA(n,e){return n instanceof Aa?ug(t=e)||function(i){return!!i&&"doubleValue"in i}(t)?e:{integerValue:0}:null;var t}class xa extends Lf{}class to extends Lf{constructor(e){super(),this.elements=e}}function PA(n,e){const t=MA(e);for(const i of n.elements)t.some(r=>vi(r,i))||t.push(i);return{arrayValue:{values:t}}}class no extends Lf{constructor(e){super(),this.elements=e}}function OA(n,e){let t=MA(e);for(const i of n.elements)t=t.filter(r=>!vi(r,i));return{arrayValue:{values:t}}}class Aa extends Lf{constructor(e,t){super(),this.wt=e,this._t=t}}function Ok(n){return Pe(n.integerValue||n.doubleValue)}function MA(n){return zl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.field=e,this.transform=t}}function qH(n,e){return n.field.isEqual(e.field)&&function(t,i){return t instanceof to&&i instanceof to||t instanceof no&&i instanceof no?Ca(t.elements,i.elements,vi):t instanceof Aa&&i instanceof Aa?vi(t._t,i._t):t instanceof xa&&i instanceof xa}(n.transform,e.transform)}class GH{constructor(e,t){this.version=e,this.transformResults=t}}class Ne{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ne}static exists(e){return new Ne(void 0,e)}static updateTime(e){return new Ne(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ff{}function LA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ac(n.key,Ne.none()):new oc(n.key,n.data,Ne.none());{const t=n.data,i=It.empty();let r=new ye($e.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new sr(n.key,i,new vn(r.toArray()),Ne.none())}}function jH(n,e,t){n instanceof oc?function(i,r,s){const o=i.value.clone(),a=Lk(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof sr?function(i,r,s){if(!qh(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=Lk(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(FA(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function el(n,e,t,i){return n instanceof oc?function(r,s,o,a){if(!qh(r.precondition,s))return o;const c=r.value.clone(),l=Fk(r.fieldTransforms,a,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof sr?function(r,s,o,a){if(!qh(r.precondition,s))return o;const c=Fk(r.fieldTransforms,a,s),l=s.data;return l.setAll(FA(r)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(n,e,t,i):function(r,s,o){return qh(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,e,t)}function zH(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=NA(i.transform,r||null);s!=null&&(t===null&&(t=It.empty()),t.set(i.field,s))}return t||null}function Mk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(t,i){return t===void 0&&i===void 0||!(!t||!i)&&Ca(t,i,(r,s)=>qH(r,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class oc extends Ff{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class sr extends Ff{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function FA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Lk(n,e,t){const i=new Map;z(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,VH(o,a,t[r]))}return i}function Fk(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,BH(s,o,e))}return i}class ac extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y1 extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,ce;function $A(n){switch(n){default:return F();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function UA(n){if(n===void 0)return Ge("GRPC error has no .code"),v.UNKNOWN;switch(n){case Ve.OK:return v.OK;case Ve.CANCELLED:return v.CANCELLED;case Ve.UNKNOWN:return v.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return v.INTERNAL;case Ve.UNAVAILABLE:return v.UNAVAILABLE;case Ve.UNAUTHENTICATED:return v.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case Ve.NOT_FOUND:return v.NOT_FOUND;case Ve.ALREADY_EXISTS:return v.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return v.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case Ve.ABORTED:return v.ABORTED;case Ve.OUT_OF_RANGE:return v.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return v.UNIMPLEMENTED;case Ve.DATA_LOSS:return v.DATA_LOSS;default:return F()}}(ce=Ve||(Ve={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return _A(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH=new Oe(D.comparator);function hn(){return KH}const BA=new Oe(D.comparator);function Mc(...n){let e=BA;for(const t of n)e=e.insert(t.key,t);return e}function VA(n){let e=BA;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ri(){return tl()}function qA(){return tl()}function tl(){return new ts(n=>n.toString(),(n,e)=>n.isEqual(e))}const HH=new Oe(D.comparator),QH=new ye(D.comparator);function Z(...n){let e=QH;for(const t of n)e=e.add(t);return e}const YH=new ye(X);function $f(){return YH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,Xu.createSynthesizedTargetChangeForCurrentChange(e,t)),new Yu(j.min(),i,$f(),hn(),Z())}}class Xu{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Xu(Je.EMPTY_BYTE_STRING,t,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,i,r){this.gt=e,this.removedTargetIds=t,this.key=i,this.yt=r}}class GA{constructor(e,t){this.targetId=e,this.It=t}}class jA{constructor(e,t,i=Je.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class $k{constructor(){this.Tt=0,this.Et=Bk(),this.At=Je.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Z(),t=Z(),i=Z();return this.Et.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:F()}}),new Xu(this.At,this.Rt,e,t,i)}Dt(){this.bt=!1,this.Et=Bk()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class XH{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=hn(),this.Bt=Uk(),this.Lt=new ye(X)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const i=this.Qt(t);switch(e.state){case 0:this.jt(t)&&i.Vt(e.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(e.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(i.Ot(),i.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),i.Vt(e.resumeToken));break;default:F()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((i,r)=>{this.jt(r)&&t(r)})}zt(e){const t=e.targetId,i=e.It.count,r=this.Ht(t);if(r){const s=r.target;if(zd(s))if(i===0){const o=new D(s.path);this.Kt(t,o,be.newNoDocument(o,j.min()))}else z(i===1);else this.Jt(t)!==i&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&zd(a.target)){const c=new D(a.target.path);this.$t.get(c)!==null||this.Xt(o,c)||this.Kt(o,c,be.newNoDocument(c,e))}s.vt&&(t.set(o,s.St()),s.Dt())}});let i=Z();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ht(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(i=i.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const r=new Yu(e,t,this.Lt,this.$t,i);return this.$t=hn(),this.Bt=Uk(),this.Lt=new ye(X),r}qt(e,t){if(!this.jt(e))return;const i=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,i),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,i){if(!this.jt(e))return;const r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),i&&(this.$t=this.$t.insert(t,i))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new $k,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new ye(X),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=this.Ht(e)!==null;return t||I("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new $k),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Uk(){return new Oe(D.comparator)}function Bk(){return new Oe(D.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JH=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),ZH=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class eQ{constructor(e,t){this.databaseId=e,this.dt=t}}function Wl(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zA(n,e){return n.dt?e.toBase64():e.toUint8Array()}function tQ(n,e){return Wl(n,e.toTimestamp())}function lt(n){return z(!!n),j.fromTimestamp(function(e){const t=Vr(e);return new Re(t.seconds,t.nanos)}(n))}function _1(n,e){return function(t){return new le(["projects",t.projectId,"databases",t.database])}(n).child("documents").child(e).canonicalString()}function WA(n){const e=le.fromString(n);return z(e5(e)),e}function Kl(n,e){return _1(n.databaseId,e.path)}function hi(n,e){const t=WA(e);if(t.get(1)!==n.databaseId.projectId)throw new E(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new E(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new D(HA(t))}function dg(n,e){return _1(n.databaseId,e)}function KA(n){const e=WA(n);return e.length===4?le.emptyPath():HA(e)}function Hl(n){return new le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HA(n){return z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Vk(n,e,t){return{name:Kl(n,e),fields:t.value.mapValue.fields}}function QA(n,e,t){const i=hi(n,e.name),r=lt(e.updateTime),s=new It({mapValue:{fields:e.fields}}),o=be.newFoundDocument(i,r,s);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function nQ(n,e){return"found"in e?function(t,i){z(!!i.found),i.found.name,i.found.updateTime;const r=hi(t,i.found.name),s=lt(i.found.updateTime),o=new It({mapValue:{fields:i.found.fields}});return be.newFoundDocument(r,s,o)}(n,e):"missing"in e?function(t,i){z(!!i.missing),z(!!i.readTime);const r=hi(t,i.missing),s=lt(i.readTime);return be.newNoDocument(r,s)}(n,e):F()}function iQ(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:F()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,l){return c.dt?(z(l===void 0||typeof l=="string"),Je.fromBase64String(l||"")):(z(l===void 0||l instanceof Uint8Array),Je.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=c.code===void 0?v.UNKNOWN:UA(c.code);return new E(l,c.message||"")}(o);t=new jA(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=hi(n,i.document.name),s=lt(i.document.updateTime),o=new It({mapValue:{fields:i.document.fields}}),a=be.newFoundDocument(r,s,o),c=i.targetIds||[],l=i.removedTargetIds||[];t=new Gh(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=hi(n,i.document),s=i.readTime?lt(i.readTime):j.min(),o=be.newNoDocument(r,s),a=i.removedTargetIds||[];t=new Gh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=hi(n,i.document),s=i.removedTargetIds||[];t=new Gh([],s,r,null)}else{if(!("filter"in e))return F();{e.filter;const i=e.filter;i.targetId;const r=i.count||0,s=new WH(r),o=i.targetId;t=new GA(o,s)}}return t}function Ql(n,e){let t;if(e instanceof oc)t={update:Vk(n,e.key,e.value)};else if(e instanceof ac)t={delete:Kl(n,e.key)};else if(e instanceof sr)t={update:Vk(n,e.key,e.data),updateMask:uQ(e.fieldMask)};else{if(!(e instanceof y1))return F();t={verify:Kl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof xa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof to)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof no)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Aa)return{fieldPath:s.field.canonicalString(),increment:o._t};throw F()}(0,i))),e.precondition.isNone||(t.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:tQ(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:F()}(n,e.precondition)),t}function fg(n,e){const t=e.currentDocument?function(r){return r.updateTime!==void 0?Ne.updateTime(lt(r.updateTime)):r.exists!==void 0?Ne.exists(r.exists):Ne.none()}(e.currentDocument):Ne.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,o){let a=null;if("setToServerValue"in o)z(o.setToServerValue==="REQUEST_TIME"),a=new xa;else if("appendMissingElements"in o){const l=o.appendMissingElements.values||[];a=new to(l)}else if("removeAllFromArray"in o){const l=o.removeAllFromArray.values||[];a=new no(l)}else"increment"in o?a=new Aa(s,o.increment):F();const c=$e.fromServerFormat(o.fieldPath);return new Qu(c,a)}(n,r)):[];if(e.update){e.update.name;const r=hi(n,e.update.name),s=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const c=a.fieldPaths||[];return new vn(c.map(l=>$e.fromServerFormat(l)))}(e.updateMask);return new sr(r,s,o,t,i)}return new oc(r,s,t,i)}if(e.delete){const r=hi(n,e.delete);return new ac(r,t)}if(e.verify){const r=hi(n,e.verify);return new y1(r,t)}return F()}function rQ(n,e){return n&&n.length>0?(z(e!==void 0),n.map(t=>function(i,r){let s=i.updateTime?lt(i.updateTime):lt(r);return s.isEqual(j.min())&&(s=lt(r)),new GH(s,i.transformResults||[])}(t,e))):[]}function YA(n,e){return{documents:[dg(n,e.path)]}}function XA(n,e){const t={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(t.parent=dg(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dg(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(c){if(c.length===0)return;const l=c.map(u=>function(h){if(h.op==="=="){if(Ck(h.value))return{unaryFilter:{field:Mo(h.field),op:"IS_NAN"}};if(Tk(h.value))return{unaryFilter:{field:Mo(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(Ck(h.value))return{unaryFilter:{field:Mo(h.field),op:"IS_NOT_NAN"}};if(Tk(h.value))return{unaryFilter:{field:Mo(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(h.field),op:aQ(h.op),value:h.value}}}(u));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(c){if(c.length!==0)return c.map(l=>function(u){return{field:Mo(u.field),direction:oQ(u.dir)}}(l))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=function(c,l){return c.dt||Wu(l)?l:{value:l}}(n,e.limit);var a;return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),t}function JA(n){let e=KA(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){z(i===1);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=ZA(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>function(h){return new ra(jo(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;t.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Wu(h)?null:h}(t.limit));let c=null;t.startAt&&(c=function(u){const h=!!u.before,d=u.values||[];return new Gr(d,h)}(t.startAt));let l=null;return t.endAt&&(l=function(u){const h=!u.before,d=u.values||[];return new Gr(d,h)}(t.endAt)),IA(e,r,o,s,a,"F",c,l)}function sQ(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return F()}}(0,e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZA(n){return n?n.unaryFilter!==void 0?[lQ(n)]:n.fieldFilter!==void 0?[cQ(n)]:n.compositeFilter!==void 0?n.compositeFilter.filters.map(e=>ZA(e)).reduce((e,t)=>e.concat(t)):F():[]}function oQ(n){return JH[n]}function aQ(n){return ZH[n]}function Mo(n){return{fieldPath:n.canonicalString()}}function jo(n){return $e.fromServerFormat(n.fieldPath)}function cQ(n){return Tt.create(jo(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(n.fieldFilter.op),n.fieldFilter.value)}function lQ(n){switch(n.unaryFilter.op){case"IS_NAN":const e=jo(n.unaryFilter.field);return Tt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=jo(n.unaryFilter.field);return Tt.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=jo(n.unaryFilter.field);return Tt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=jo(n.unaryFilter.field);return Tt.create(r,"!=",{nullValue:"NULL_VALUE"});default:return F()}}function uQ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function e5(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qk(e)),e=hQ(n.get(t),e);return qk(e)}function hQ(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function qk(n){return n+""}function si(n){const e=n.length;if(z(e>=2),e===2)return z(n.charAt(0)===""&&n.charAt(1)===""),le.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("",s);switch((o<0||o>t)&&F(),n.charAt(o+1)){case"":const a=n.substring(s,o);let c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=n.substring(s,o),r+="\0";break;case"":r+=n.substring(s,o+1);break;default:F()}s=o+2}return new le(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(n,e){return[n,Zt(e)]}function t5(n,e,t){return[n,Zt(e),t]}const dQ={},fQ=["prefixPath","collectionGroup","readTime","documentId"],pQ=["prefixPath","collectionGroup","documentId"],mQ=["collectionGroup","readTime","prefixPath","documentId"],gQ=["canonicalId","targetId"],yQ=["targetId","path"],_Q=["path","targetId"],wQ=["collectionId","parent"],vQ=["indexId","uid"],kQ=["uid","sequenceNumber"],bQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EQ=["indexId","uid","orderedDocumentKey"],IQ=["userId","collectionPath","documentId"],TQ=["userId","collectionPath","largestBatchId"],CQ=["userId","collectionGroup","largestBatchId"],n5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SQ=[...n5,"documentOverlays"],i5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],r5=i5,xQ=[...r5,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends yA{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function yt(n,e){const t=P(n);return Vn.N(t.ee,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&jH(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=el(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=el(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=qA();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const c=LA(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(j.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Z())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,(t,i)=>Mk(t,i))&&Ca(this.baseMutations,e.baseMutations,(t,i)=>Mk(t,i))}}class v1{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){z(e.mutations.length===i.length);let r=HH;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new v1(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t,i,r,s=j.min(),o=j.min(),a=Je.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e){this.ne=e}}function AQ(n,e){let t;if(e.document)t=QA(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=D.fromSegments(e.noDocument.path),r=ro(e.noDocument.readTime);t=be.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return F();{const i=D.fromSegments(e.unknownDocument.path),r=ro(e.unknownDocument.version);t=be.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Re(i[0],i[1]);return j.fromTimestamp(r)}(e.readTime)),t}function jk(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Kd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(r,s){return{name:Kl(r,s.key),fields:s.data.value.mapValue.fields,updateTime:Wl(r,s.version.toTimestamp())}}(n.ne,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:io(e.version)};else{if(!e.isUnknownDocument())return F();i.unknownDocument={path:t.path.toArray(),version:io(e.version)}}return i}function Kd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function io(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ro(n){const e=new Re(n.seconds,n.nanoseconds);return j.fromTimestamp(e)}function ds(n,e){const t=(e.baseMutations||[]).map(s=>fg(n.ne,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>fg(n.ne,s)),r=Re.fromMillis(e.localWriteTimeMs);return new w1(e.batchId,r,t,i)}function Lc(n){const e=ro(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ro(n.lastLimboFreeSnapshotVersion):j.min();let i;var r;return n.query.documents!==void 0?(z((r=n.query).documents.length===1),i=On(sc(KA(r.documents[0])))):i=function(s){return On(JA(s))}(n.query),new xr(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Je.fromBase64String(n.resumeToken))}function o5(n,e){const t=io(e.snapshotVersion),i=io(e.lastLimboFreeSnapshotVersion);let r;r=zd(e.target)?YA(n.ne,e.target):XA(n.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eo(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function b1(n){const e=JA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?TA(e,e.limit,"L"):e}function Up(n,e){return new k1(e.largestBatchId,fg(n.ne,e.overlayMutation))}function zk(n,e){const t=e.path.lastSegment();return[n,Zt(e.path.popLast()),t]}function Wk(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:io(i.readTime),documentKey:Zt(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQ{getBundleMetadata(e,t){return Kk(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:ro(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return Kk(e).put({bundleId:(i=t).id,createTime:io(lt(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Hk(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:b1(r.bundledQuery),readTime:ro(r.readTime)};var r})}saveNamedQuery(e,t){return Hk(e).put(function(i){return{name:i.name,readTime:io(lt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function Kk(n){return yt(n,"bundles")}function Hk(n){return yt(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){const i=t.uid||"";return new Uf(e,i)}getOverlay(e,t){return Ec(e).get(zk(this.userId,t)).next(i=>i?Up(this.wt,i):null)}getOverlays(e,t){const i=ri();return w.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const a=new k1(t,o);r.push(this.ie(e,a))}),w.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(Zt(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Ec(e).W("collectionPathOverlayIndex",a))}),w.waitFor(s)}getOverlaysForCollection(e,t,i){const r=ri(),s=Zt(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ec(e).K("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const l=Up(this.wt,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=ri();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ec(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{const h=Up(this.wt,l);s.size()<r||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}ie(e,t){return Ec(e).put(function(i,r,s){const[o,a,c]=zk(r,s.mutation.key);return{userId:r,collectionPath:a,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ql(i.ne,s.mutation)}}(this.wt,this.userId,t))}}function Ec(n){return yt(n,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Pe(e.integerValue));else if("doubleValue"in e){const i=Pe(e.doubleValue);isNaN(i)?this.ce(t,13):(this.ce(t,15),Gl(i)?t.ae(0):t.ae(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ce(t,20),typeof i=="string"?t.he(i):(t.he(`${i.seconds||""}`),t.ae(i.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Xs(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?kA(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):F()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const i=e.fields||{};this.ce(t,55);for(const r of Object.keys(i))this.le(r,t),this.oe(i[r],t)}me(e,t){const i=e.values||[];this.ce(t,50);for(const r of i)this.oe(r,t)}_e(e,t){this.ce(t,37),D.fromName(e).path.forEach(i=>{this.ce(t,60),this.ge(i,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}fs.ye=new fs;function DQ(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Qk(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=DQ(255&t[r]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}class NQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ie(i.value),i=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{const r=t.codePointAt(0);this.Ie(240|r>>>18),this.Ie(128|63&r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r)}}this.Te()}Pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=t.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}ve(e){const t=this.Ve(e),i=Qk(t);this.Se(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}De(e){const t=this.Ve(e),i=Qk(t);this.Se(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ie(e){const t=255&e;t===0?(this.xe(0),this.xe(255)):t===255?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;t===0?(this.ke(0),this.ke(255)):t===255?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class PQ{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class OQ{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Ic{constructor(){this.Me=new NQ,this.Fe=new PQ(this.Me),this.$e=new OQ(this.Me)}seed(e){this.Me.seed(e)}Be(e){return e===0?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Le(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ps(this.indexId,this.documentKey,this.arrayValue,i)}}function ss(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Yk(n.arrayValue,e.arrayValue),t!==0?t:(t=Yk(n.directionalValue,e.directionalValue),t!==0?t:D.comparator(n.documentKey,e.documentKey)))}function Yk(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MQ{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const i=t;i.ht()?this.Ke=i:this.qe.push(i)}}Ge(e){const t=cg(e);if(t!==void 0&&!this.Qe(t))return!1;const i=ls(e);let r=0,s=0;for(;r<i.length&&this.Qe(i[r]);++r);if(r===i.length)return!0;if(this.Ke!==void 0){const o=i[r];if(!this.je(this.Ke,o)||!this.We(this.Ue[s++],o))return!1;++r}for(;r<i.length;++r){const o=i[r];if(s>=this.Ue.length||!this.We(this.Ue[s++],o))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(){this.ze=new E1}addToCollectionParentIndex(e,t){return this.ze.add(t),w.resolve()}getCollectionParents(e,t){return w.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return w.resolve()}deleteFieldIndex(e,t){return w.resolve()}getDocumentsMatchingTarget(e,t){return w.resolve(null)}getIndexType(e,t){return w.resolve(0)}getFieldIndexes(e,t){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,t){return w.resolve(En.min())}getMinOffsetFromCollectionGroup(e,t){return w.resolve(En.min())}updateCollectionGroup(e,t,i){return w.resolve()}updateIndexEntries(e,t){return w.resolve()}}class E1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ye(le.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ye(le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Uint8Array(0);class FQ{constructor(e,t){this.user=e,this.databaseId=t,this.He=new E1,this.Je=new ts(i=>eo(i),(i,r)=>Ku(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const s={collectionId:i,parent:Zt(r)};return Xk(e).put(s)}return w.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[dA(t),""],!1,!0);return Xk(e).K(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(si(o.parent))}return i})}addFieldIndex(e,t){const i=kh(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(t);delete r.indexId;const s=i.add(r);if(t.indexState){const o=Cc(e);return s.next(a=>{o.put(Wk(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=kh(e),r=Cc(e),s=Tc(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Tc(e);let r=!0;const s=new Map;return w.forEach(this.Ye(t),o=>this.Xe(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Z();const a=[];return w.forEach(s,(c,l)=>{var u;I("IndexedDbIndexManager",`Using index ${u=c,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(A=>`${A.fieldPath}:${A.kind}`).join(",")}`} to execute ${eo(t)}`);const h=function(A,O){const W=cg(O);if(W===void 0)return null;for(const V of Wd(A,W.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(l,c),d=function(A,O){const W=new Map;for(const V of ls(O))for(const $ of Wd(A,V.fieldPath))switch($.op){case"==":case"in":W.set(V.fieldPath.canonicalString(),$.value);break;case"not-in":case"!=":return W.set(V.fieldPath.canonicalString(),$.value),Array.from(W.values())}return null}(l,c),p=function(A,O){const W=[];let V=!0;for(const $ of ls(O)){const pe=$.kind===0?Rk(A,$.fieldPath,A.startAt):Dk(A,$.fieldPath,A.startAt);W.push(pe.value),V&&(V=pe.inclusive)}return new Gr(W,V)}(l,c),m=function(A,O){const W=[];let V=!0;for(const $ of ls(O)){const pe=$.kind===0?Dk(A,$.fieldPath,A.endAt):Rk(A,$.fieldPath,A.endAt);W.push(pe.value),V&&(V=pe.inclusive)}return new Gr(W,V)}(l,c),_=this.Ze(c,l,p),y=this.Ze(c,l,m),x=this.tn(c,l,d),N=this.en(c.indexId,h,_,p.inclusive,y,m.inclusive,x);return w.forEach(N,A=>i.j(A,t.limit).next(O=>{O.forEach(W=>{const V=D.fromSegments(W.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return w.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,i,r,s,o,a){const c=(t!=null?t.length:1)*Math.max(i.length,s.length),l=c/(t!=null?t.length:1),u=[];for(let h=0;h<c;++h){const d=t?this.nn(t[h/l]):vh,p=this.sn(e,d,i[h%l],r),m=this.rn(e,d,s[h%l],o),_=a.map(y=>this.sn(e,d,y,!0));u.push(...this.createRange(p,m,_))}return u}sn(e,t,i,r){const s=new ps(e,D.empty(),t,i);return r?s:s.Le()}rn(e,t,i,r){const s=new ps(e,D.empty(),t,i);return r?s.Le():s}Xe(e,t){const i=new MQ(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.Ge(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2;return w.forEach(this.Ye(t),r=>this.Xe(e,r).next(s=>{s?i!==0&&s.fields.length<function(o){let a=new ye($e.comparator),c=!1;for(const l of o.filters){const u=l;u.field.isKeyField()||(u.op==="array-contains"||u.op==="array-contains-any"?c=!0:a=a.add(u.field))}for(const l of o.orderBy)l.field.isKeyField()||(a=a.add(l.field));return a.size+(c?1:0)}(r)&&(i=1):i=0})).next(()=>i)}on(e,t){const i=new Ic;for(const r of ls(e)){const s=t.data.field(r.fieldPath);if(s==null)return null;const o=i.Be(r.kind);fs.ye.re(s,o)}return i.Oe()}nn(e){const t=new Ic;return fs.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const i=new Ic;return fs.ye.re(Zs(this.databaseId,t),i.Be(function(r){const s=ls(r);return s.length===0?0:s[s.length-1].kind}(e))),i.Oe()}tn(e,t,i){if(i===null)return[];let r=[];r.push(new Ic);let s=0;for(const o of ls(e)){const a=i[s++];for(const c of r)if(this.cn(t,o.fieldPath)&&zl(a))r=this.an(r,o,a);else{const l=c.Be(o.kind);fs.ye.re(a,l)}}return this.hn(r)}Ze(e,t,i){return this.tn(e,t,i.position)}hn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Oe();return t}an(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const c=new Ic;c.seed(a.Oe()),fs.ye.re(o,c.Be(t.kind)),s.push(c)}return s}cn(e,t){return!!e.filters.find(i=>i instanceof Tt&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){const i=kh(e),r=Cc(e);return(t?i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.K()).next(s=>{const o=[];return w.forEach(s,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(l,u){const h=u?new jd(u.sequenceNumber,new En(ro(u.readTime),new D(si(u.documentKey)),u.largestBatchId)):jd.empty(),d=l.fields.map(([p,m])=>new _H($e.fromServerFormat(p),m));return new fA(l.indexId,l.collectionGroup,d,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:X(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=kh(e),s=Cc(e);return this.ln(e).next(o=>r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>w.forEach(a,c=>s.put(Wk(c.indexId,this.user,o,i)))))}updateIndexEntries(e,t){const i=new Map;return w.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?w.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),w.forEach(a,c=>this.fn(e,r,c).next(l=>{const u=this.dn(s,c);return l.isEqual(u)?w.resolve():this._n(e,s,c,l,u)}))))})}wn(e,t,i,r){return Tc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(i,t.key),documentKey:t.key.path.toArray()})}mn(e,t,i,r){return Tc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(i,t.key),t.key.path.toArray()])}fn(e,t,i){const r=Tc(e);let s=new ye(ss);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.un(i,t)])},(o,a)=>{s=s.add(new ps(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}dn(e,t){let i=new ye(ss);const r=this.on(t,e);if(r==null)return i;const s=cg(t);if(s!=null){const o=e.data.field(s.fieldPath);if(zl(o))for(const a of o.arrayValue.values||[])i=i.add(new ps(t.indexId,e.key,this.nn(a),r))}else i=i.add(new ps(t.indexId,e.key,vh,r));return i}_n(e,t,i,r,s){I("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(a,c,l,u,h){const d=a.getIterator(),p=c.getIterator();let m=Oo(d),_=Oo(p);for(;m||_;){let y=!1,x=!1;if(m&&_){const N=l(m,_);N<0?x=!0:N>0&&(y=!0)}else m!=null?x=!0:y=!0;y?(u(_),_=Oo(p)):x?(h(m),m=Oo(d)):(m=Oo(d),_=Oo(p))}}(r,s,ss,a=>{o.push(this.wn(e,t,i,a))},a=>{o.push(this.mn(e,t,i,a))}),w.waitFor(o)}ln(e){let t=1;return Cc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>ss(o,a)).filter((o,a,c)=>!a||ss(o,c[a-1])!==0);const r=[];r.push(e);for(const o of i){const a=ss(o,e),c=ss(o,t);if(a===0)r[0]=e.Le();else if(a>0&&c<0)r.push(o),r.push(o.Le());else if(c>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2)s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,vh,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,vh,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Jk)}getMinOffset(e,t){return w.mapArray(this.Ye(t),i=>this.Xe(e,i).next(r=>r||F())).next(Jk)}}function Xk(n){return yt(n,"collectionParents")}function Tc(n){return yt(n,"indexEntries")}function kh(n){return yt(n,"indexConfiguration")}function Cc(n){return yt(n,"indexState")}function Jk(n){z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;u1(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new En(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class on{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=i.J({range:o},(u,h,d)=>(a++,d.delete()));s.push(c.next(()=>{z(a===1)}));const l=[];for(const u of t.mutations){const h=t5(e,u.key.path,t.batchId);s.push(r.delete(h)),l.push(u.key)}return w.waitFor(s).next(()=>l)}function Hd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw F();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class Bf{constructor(e,t,i,r){this.userId=e,this.wt=t,this.indexManager=i,this.referenceDelegate=r,this.gn={}}static se(e,t,i,r){z(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Bf(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ur(e).J({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=Uo(e),o=ur(e);return o.add({}).next(a=>{z(typeof a=="number");const c=new w1(a,t,i,r),l=function(d,p,m){const _=m.baseMutations.map(x=>Ql(d.ne,x)),y=m.mutations.map(x=>Ql(d.ne,x));return{userId:p,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:_,mutations:y}}(this.wt,this.userId,c),u=[];let h=new ye((d,p)=>X(d.canonicalString(),p.canonicalString()));for(const d of r){const p=t5(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),u.push(o.put(l)),u.push(s.put(p,dQ))}return h.forEach(d=>{u.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.gn[a]=c.keys()}),w.waitFor(u).next(()=>c)})}lookupMutationBatch(e,t){return ur(e).get(t).next(i=>i?(z(i.userId===this.userId),ds(this.wt,i)):null)}yn(e,t){return this.gn[t]?w.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.gn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ur(e).J({index:"userMutationsIndex",range:r},(o,a,c)=>{a.userId===this.userId&&(z(a.batchId>=i),s=ds(this.wt,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ur(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ur(e).K("userMutationsIndex",t).next(i=>i.map(r=>ds(this.wt,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=jh(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Uo(e).J({range:r},(o,a,c)=>{const[l,u,h]=o,d=si(u);if(l===this.userId&&t.path.isEqual(d))return ur(e).get(h).next(p=>{if(!p)throw F();z(p.userId===this.userId),s.push(ds(this.wt,p))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ye(X);const r=[];return t.forEach(s=>{const o=jh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Uo(e).J({range:a},(l,u,h)=>{const[d,p,m]=l,_=si(p);d===this.userId&&s.path.isEqual(_)?i=i.add(m):h.done()});r.push(c)}),w.waitFor(r).next(()=>this.pn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=jh(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new ye(X);return Uo(e).J({range:o},(c,l,u)=>{const[h,d,p]=c,m=si(d);h===this.userId&&i.isPrefixOf(m)?m.length===r&&(a=a.add(p)):u.done()}).next(()=>this.pn(e,a))}pn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(ur(e).get(s).next(o=>{if(o===null)throw F();z(o.userId===this.userId),i.push(ds(this.wt,o))}))}),w.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return a5(e.ee,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),w.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return w.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Uo(e).J({range:i},(s,o,a)=>{if(s[0]===this.userId){const c=si(s[1]);r.push(c)}else a.done()}).next(()=>{z(r.length===0)})})}containsKey(e,t){return c5(e,this.userId,t)}Tn(e){return l5(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function c5(n,e,t){const i=jh(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return Uo(n).J({range:s,H:!0},(a,c,l)=>{const[u,h,d]=a;u===e&&h===r&&(o=!0),l.done()}).next(()=>o)}function ur(n){return yt(n,"mutations")}function Uo(n){return yt(n,"documentMutations")}function l5(n){return yt(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new so(0)}static Rn(){return new so(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Q{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const i=new so(t.highestTargetId);return t.highestTargetId=i.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>j.fromTimestamp(new Re(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Pn(e,r)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(i=>(i.targetCount+=1,this.Vn(t,i),this.Pn(e,i))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lo(e).delete(t.targetId)).next(()=>this.bn(e)).next(i=>(z(i.targetCount>0),i.targetCount-=1,this.Pn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return Lo(e).J((o,a)=>{const c=Lc(a);c.sequenceNumber<=t&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>w.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Lo(e).J((i,r)=>{const s=Lc(r);t(s)})}bn(e){return eb(e).get("targetGlobalKey").next(t=>(z(t!==null),t))}Pn(e,t){return eb(e).put("targetGlobalKey",t)}vn(e,t){return Lo(e).put(o5(this.wt,t))}Vn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=eo(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Lo(e).J({range:r,index:"queryTargetsIndex"},(o,a,c)=>{const l=Lc(a);Ku(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=yr(e);return t.forEach(o=>{const a=Zt(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),w.waitFor(r)}removeMatchingKeys(e,t,i){const r=yr(e);return w.forEach(t,s=>{const o=Zt(s.path);return w.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=yr(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=yr(e);let s=Z();return r.J({range:i,H:!0},(o,a,c)=>{const l=si(o[1]),u=new D(l);s=s.add(u)}).next(()=>s)}containsKey(e,t){const i=Zt(t.path),r=IDBKeyRange.bound([i],[dA(i)],!1,!0);let s=0;return yr(e).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}te(e,t){return Lo(e).get(t).next(i=>i?Lc(i):null)}}function Lo(n){return yt(n,"targets")}function eb(n){return yt(n,"targetGlobal")}function yr(n){return yt(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb([n,e],[t,i]){const r=X(n,t);return r===0?X(e,i):r}class UQ{constructor(e){this.Sn=e,this.buffer=new ye(tb),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();tb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BQ{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Nn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return this.Nn!==null}kn(e){I("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Nn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){es(t)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Zr(t)}await this.kn(3e5)})}}class VQ{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return w.resolve(un.ot);const i=new UQ(t);return this.On.forEachTarget(e,r=>i.xn(r.sequenceNumber)).next(()=>this.On.Fn(e,r=>i.xn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.On.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(I("LruGarbageCollector","Garbage collection skipped; disabled"),w.resolve(Zk)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zk):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let i,r,s,o,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,o=Date.now(),this.nthSequenceNumber(e,r))).next(h=>(i=h,a=Date.now(),this.removeTargets(e,i,t))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(l=Date.now(),ag()<=Q.DEBUG&&I("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),w.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(e,t){this.db=e,this.garbageCollector=function(i,r){return new VQ(i,r)}(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Bn(e){let t=0;return this.Fn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(i,r)=>t(r))}addReference(e,t,i){return bh(e,i)}removeReference(e,t,i){return bh(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return bh(e,t)}Un(e,t){return function(i,r){let s=!1;return l5(i).Y(o=>c5(i,o,r).next(a=>(a&&(s=!0),w.resolve(!a)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Ln(e,(o,a)=>{if(a<=t){const c=this.Un(e,o).next(l=>{if(!l)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,j.min()),yr(e).delete([0,Zt(o.path)])))});r.push(c)}}).next(()=>w.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return bh(e,t)}Ln(e,t){const i=yr(e);let r,s=un.ot;return i.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==un.ot&&t(new D(si(r)),s),s=l,r=c):s=un.ot}).next(()=>{s!==un.ot&&t(new D(si(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bh(n,e){return yr(n).put(function(t,i){return{targetId:0,path:Zt(t.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(){this.changes=new ts(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,be.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?w.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return os(e).put(i)}removeEntry(e,t,i){return os(e).delete(function(r,s){const o=r.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Kd(s),o[o.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.qn(e,i)))}getEntry(e,t){let i=be.newInvalidDocument(t);return os(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sc(t))},(r,s)=>{i=this.Kn(t,s)}).next(()=>i)}Gn(e,t){let i={size:0,document:be.newInvalidDocument(t)};return os(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sc(t))},(r,s)=>{i={document:this.Kn(t,s),size:Hd(s)}}).next(()=>i)}getEntries(e,t){let i=hn();return this.Qn(e,t,(r,s)=>{const o=this.Kn(r,s);i=i.insert(r,o)}).next(()=>i)}jn(e,t){let i=hn(),r=new Oe(D.comparator);return this.Qn(e,t,(s,o)=>{const a=this.Kn(s,o);i=i.insert(s,a),r=r.insert(s,Hd(o))}).next(()=>({documents:i,Wn:r}))}Qn(e,t,i){if(t.isEmpty())return w.resolve();let r=new ye(rb);t.forEach(c=>r=r.add(c));const s=IDBKeyRange.bound(Sc(r.first()),Sc(r.last())),o=r.getIterator();let a=o.getNext();return os(e).J({index:"documentKeyIndex",range:s},(c,l,u)=>{const h=D.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&rb(a,h)<0;)i(a,null),a=o.getNext();a&&a.isEqual(h)&&(i(a,l),a=o.hasNext()?o.getNext():null),a?u.q(Sc(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),Kd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return os(e).K(IDBKeyRange.bound(r,s,!0)).next(o=>{let a=hn();for(const c of o){const l=this.Kn(D.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);a=a.insert(l.key,l)}return a})}getAllFromCollectionGroup(e,t,i,r){let s=hn();const o=ib(t,i),a=ib(t,En.max());return os(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{const h=this.Kn(D.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(h.key,h),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new jQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return nb(e).get("remoteDocumentGlobalKey").next(t=>(z(!!t),t))}qn(e,t){return nb(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const i=AQ(this.wt,t);if(!(i.isNoDocument()&&i.version.isEqual(j.min())))return i}return be.newInvalidDocument(e)}}function h5(n){return new GQ(n)}class jQ extends u5{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new ts(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new ye((s,o)=>X(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Hn.get(s);if(t.push(this.zn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=jk(this.zn.wt,o);r=r.add(s.path.popLast()),i+=Hd(c)-a.size,t.push(this.zn.addEntry(e,s,c))}else if(i-=a.size,this.trackRemovals){const c=jk(this.zn.wt,o.convertToNoDocument(j.min()));t.push(this.zn.addEntry(e,s,c))}}),r.forEach(s=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.zn.updateMetadata(e,i)),w.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(i=>(this.Hn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:i,Wn:r})=>(r.forEach((s,o)=>{this.Hn.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function nb(n){return yt(n,"remoteDocumentGlobal")}function os(n){return yt(n,"remoteDocumentsV14")}function Sc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ib(n,e){const t=e.documentKey.path.toArray();return[n,Kd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rb(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=X(t[s],i[s]),r)return r;return r=X(t.length,i.length),r||(r=X(t[t.length-2],i[i.length-2]),r||X(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(i!==null&&el(i.mutation,r,vn.empty(),Re.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Z()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Z()){const r=ri();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Mc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=ri();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Z()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=hn();const o=tl(),a=tl();return t.forEach((c,l)=>{const u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof sr)?s=s.insert(l.key,l):u!==void 0&&(o.set(l.key,u.mutation.getFieldMask()),el(u.mutation,l,u.mutation.getFieldMask(),Re.now()))}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new zQ(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){const i=tl();let r=new Oe((o,a)=>o-a),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=t.get(c);if(l===null)return;let u=i.get(c)||vn.empty();u=a.applyToLocalView(l,u),i.set(c,u);const h=(r.get(a.batchId)||Z()).add(c);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=qA();u.forEach(d=>{if(!s.has(d)){const p=LA(t.get(d),i.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return w.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return function(r){return D.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):m1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):w.resolve(ri());let a=-1,c=s;return o.next(l=>w.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?w.resolve():this.getBaseDocument(e,u,h).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Z())).next(u=>({batchId:a,changes:VA(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new D(t)).next(i=>{let r=Mc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=Mc();return this.indexManager.getCollectionParents(e,r).next(o=>w.forEach(o,a=>{const c=function(l,u){return new rr(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(t,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,i).next(l=>{l.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(s=>{s.forEach((a,c)=>{const l=c.getKey();r.get(l)===null&&(r=r.insert(l,be.newInvalidDocument(l)))});let o=Mc();return r.forEach((a,c)=>{const l=s.get(a);l!==void 0&&el(l.mutation,c,vn.empty(),Re.now()),g1(t,c)&&(o=o.insert(a,c))}),o})}getBaseDocument(e,t,i){return i===null||i.mutation.type===1?this.remoteDocumentCache.getEntry(e,t):w.resolve(be.newInvalidDocument(t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return w.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var i;return this.Jn.set(t.id,{id:(i=t).id,version:i.version,createTime:lt(i.createTime)}),w.resolve()}getNamedQuery(e,t){return w.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,function(i){return{name:i.name,query:b1(i.bundledQuery),readTime:lt(i.readTime)}}(t)),w.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(){this.overlays=new Oe(D.comparator),this.Xn=new Map}getOverlay(e,t){return w.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ri();return w.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ie(e,t,s)}),w.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Xn.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(i)),w.resolve()}getOverlaysForCollection(e,t,i){const r=ri(),s=t.length+1,o=new D(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return w.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Oe((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=ri(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=ri(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return w.resolve(a)}ie(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new k1(t,i));let s=this.Xn.get(t);s===void 0&&(s=Z(),this.Xn.set(t,s)),this.Xn.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.Zn=new ye(it.ts),this.es=new ye(it.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const i=new it(e,t);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.rs(new it(e,t))}os(e,t){e.forEach(i=>this.removeReference(i,t))}us(e){const t=new D(new le([])),i=new it(t,e),r=new it(t,e+1),s=[];return this.es.forEachInRange([i,r],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new D(new le([])),i=new it(t,e),r=new it(t,e+1);let s=Z();return this.es.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new it(e,0),i=this.Zn.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class it{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return D.comparator(e.key,t.key)||X(e.ls,t.ls)}static ns(e,t){return X(e.ls,t.ls)||D.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new ye(it.ts)}checkEmpty(e){return w.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new w1(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.ds=this.ds.add(new it(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,t){return w.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ws(i),s=r<0?0:r;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new it(t,0),r=new it(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],o=>{const a=this._s(o.ls);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ye(X);return t.forEach(r=>{const s=new it(r,0),o=new it(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{i=i.add(a.ls)})}),w.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;D.isDocumentKey(s)||(s=s.child(""));const o=new it(new D(s),0);let a=new ye(X);return this.ds.forEachWhile(c=>{const l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.ls)),!0)},o),w.resolve(this.gs(a))}gs(e){const t=[];return e.forEach(i=>{const r=this._s(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){z(this.ys(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.ds;return w.forEach(t.mutations,r=>{const s=new it(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=i})}In(e){}containsKey(e,t){const i=new it(t,0),r=this.ds.firstAfterOrEqual(i);return w.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,w.resolve()}ys(e,t){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(e){this.ps=e,this.docs=new Oe(D.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.ps(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return w.resolve(i?i.document.mutableCopy():be.newInvalidDocument(t))}getEntries(e,t){let i=hn();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():be.newInvalidDocument(r))}),w.resolve(i)}getAllFromCollection(e,t,i){let r=hn();const s=new D(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:c}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||u1(mA(c),i)<=0||(r=r.insert(c.key,c.mutableCopy()))}return w.resolve(r)}getAllFromCollectionGroup(e,t,i,r){F()}Is(e,t){return w.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new YQ(this)}getSize(e){return w.resolve(this.size)}}class YQ extends u5{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.zn.addEntry(e,r)):this.zn.removeEntry(i)}),w.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(e){this.persistence=e,this.Ts=new ts(t=>eo(t),Ku),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Es=0,this.As=new I1,this.targetCount=0,this.Rs=so.An()}forEachTarget(e,t){return this.Ts.forEach((i,r)=>t(r)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Es&&(this.Es=t),w.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new so(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,w.resolve()}updateTargetData(e,t){return this.vn(t),w.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),w.waitFor(s).next(()=>r)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,t){const i=this.Ts.get(t)||null;return w.resolve(i)}addMatchingKeys(e,t,i){return this.As.ss(t,i),w.resolve()}removeMatchingKeys(e,t,i){this.As.os(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),w.resolve()}getMatchingKeysForTargetId(e,t){const i=this.As.hs(t);return w.resolve(i)}containsKey(e,t){return w.resolve(this.As.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,t){this.bs={},this.overlays={},this.Ps=new un(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new XQ(this),this.indexManager=new LQ,this.remoteDocumentCache=function(i){return new QQ(i)}(i=>this.referenceDelegate.Ss(i)),this.wt=new s5(t),this.Ds=new WQ(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.bs[e.toKey()];return i||(i=new HQ(t,this.referenceDelegate),this.bs[e.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,i){I("MemoryPersistence","Starting transaction:",e);const r=new JQ(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(s=>this.referenceDelegate.xs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ns(e,t){return w.or(Object.values(this.bs).map(i=>()=>i.containsKey(e,t)))}}class JQ extends yA{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.ks=new I1,this.Os=null}static Ms(e){return new Vf(e)}get Fs(){if(this.Os)return this.Os;throw F()}addReference(e,t,i){return this.ks.addReference(i,t),this.Fs.delete(i.toString()),w.resolve()}removeReference(e,t,i){return this.ks.removeReference(i,t),this.Fs.add(i.toString()),w.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),w.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Fs.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Fs,i=>{const r=D.fromPath(i);return this.$s(e,r).next(s=>{s||t.removeEntry(r,j.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(i=>{i?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return w.or([()=>w.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(e){this.wt=e}O(e,t,i,r){const s=new Mf("createOrUpgrade",t);i<1&&r>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gk,{unique:!0}),a.createObjectStore("documentMutations")}(e),sb(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=w.resolve();return i<3&&r>=3&&(i!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),sb(e)),o=o.next(()=>function(a){const c=a.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:j.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(a,c){return c.store("mutations").K().next(l=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gk,{unique:!0});const u=c.store("mutations"),h=l.map(d=>u.put(d));return w.waitFor(h)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.Bs(s))),i<6&&r>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),i<7&&r>=7&&(o=o.next(()=>this.Us(s))),i<8&&r>=8&&(o=o.next(()=>this.qs(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.Ks(s))),i<11&&r>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:IQ});c.createIndex("collectionPathOverlayIndex",TQ,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",CQ,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:fQ});c.createIndex("documentKeyIndex",pQ),c.createIndex("collectionGroupIndex",mQ)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.Qs(e,s))),i<15&&r>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:vQ}).createIndex("sequenceNumberIndex",kQ,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:bQ}).createIndex("documentKeyIndex",EQ,{unique:!1})}(e))),o}Ls(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=Hd(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Bs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.K().next(r=>w.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.K("userMutationsIndex",o).next(a=>w.forEach(a,c=>{z(c.userId===s.userId);const l=ds(this.wt,c);return a5(e,s.userId,l).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((o,a)=>{const c=new le(o),l=function(u){return[0,Zt(u)]}(c);s.push(t.get(l).next(u=>u?w.resolve():(h=>t.put({targetId:0,path:Zt(h),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>w.waitFor(s))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:wQ});const i=t.store("collectionParents"),r=new E1,s=o=>{if(r.add(o)){const a=o.lastSegment(),c=o.popLast();return i.put({collectionId:a,parent:Zt(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new le(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{const u=si(a);return s(u.popLast())}))}Ks(e){const t=e.store("targets");return t.J((i,r)=>{const s=Lc(r),o=o5(this.wt,s);return t.put(o)})}Gs(e,t){const i=t.store("remoteDocuments"),r=[];return i.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(l=o,l.document?new D(le.fromString(l.document.name).popFirst(5)):l.noDocument?D.fromSegments(l.noDocument.path):l.unknownDocument?D.fromSegments(l.unknownDocument.path):F()).path.toArray();var l;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(u))}).next(()=>w.waitFor(r))}Qs(e,t){const i=t.store("mutations"),r=h5(this.wt),s=new f5(Vf.Ms,this.wt.ne);return i.K().next(o=>{const a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:Z();ds(this.wt,c).keys().forEach(h=>u=u.add(h)),a.set(c.userId,u)}),w.forEach(a,(c,l)=>{const u=new ot(l),h=Uf.se(this.wt,u),d=s.getIndexManager(u),p=Bf.se(u,this.wt,d,s.referenceDelegate);return new d5(r,p,h,d).recalculateAndSaveOverlaysForDocumentKeys(new pg(t,un.ot),c).next()})})}}function sb(n){n.createObjectStore("targetDocuments",{keyPath:yQ}).createIndex("documentTargetsIndex",_Q,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gQ,{unique:!0}),n.createObjectStore("targetGlobal")}const Bp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class T1{constructor(e,t,i,r,s,o,a,c,l,u,h=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.js=s,this.window=o,this.document=a,this.Ws=l,this.zs=u,this.Hs=h,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=d=>Promise.resolve(),!T1.V())throw new E(v.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qQ(this,r),this.ei=t+"main",this.wt=new s5(c),this.ni=new Vn(this.ei,this.Hs,new ZQ(this.wt)),this.Vs=new $Q(this.referenceDelegate,this.wt),this.remoteDocumentCache=h5(this.wt),this.Ds=new RQ,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,u===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new E(v.FAILED_PRECONDITION,Bp);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new un(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){return this.ti=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(async()=>{this.started&&await this.ii()}))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Eh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(es(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return xc(e).get("owner").next(t=>w.resolve(this.di(t)))}_i(e){return Eh(e).delete(this.clientId)}async wi(){if(this.isPrimary&&!this.mi(this.Zs,18e5)){this.Zs=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const i=yt(t,"clientMetadata");return i.K().next(r=>{const s=this.gi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return w.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.si)for(const t of e)this.si.removeItem(this.yi(t.clientId))}}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?w.resolve(!0):xc(e).get("owner").next(t=>{if(t!==null&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new E(v.FAILED_PRECONDITION,Bp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Eh(e).K().next(i=>this.gi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&I("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),await this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new pg(e,un.ot);return this.li(t).next(()=>this._i(t))}),this.ni.close(),this.Ai()}gi(e,t){return e.filter(i=>this.mi(i.updateTimeMs,t)&&!this.pi(i.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Eh(e).K().next(t=>this.gi(t,18e5).map(i=>i.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Bf.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FQ(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Uf.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,i){I("IndexedDbPersistence","Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",s=(o=this.Hs)===15?xQ:o===14?r5:o===13?i5:o===12?SQ:o===11?n5:void F();var o;let a;return this.ni.runTransaction(e,r,s,c=>(a=new pg(c,this.Ps?this.Ps.next():un.ot),t==="readwrite-primary"?this.ai(a).next(l=>!!l||this.hi(a)).next(l=>{if(!l)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new E(v.FAILED_PRECONDITION,gA);return i(a)}).next(l=>this.fi(a).next(()=>l)):this.bi(a).next(()=>i(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}bi(e){return xc(e).get("owner").next(t=>{if(t!==null&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new E(v.FAILED_PRECONDITION,Bp)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xc(e).put("owner",t)}static V(){return Vn.V()}li(e){const t=xc(e);return t.get("owner").next(i=>this.di(i)?(I("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):w.resolve())}mi(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Ge(`Detected an update time that is in the future: ${e} > ${i}`),!1))}ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground=this.document.visibilityState==="visible")}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Js=()=>{this.Ii(),$6()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const i=((t=this.si)===null||t===void 0?void 0:t.getItem(this.yi(e)))!==null;return I("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ge("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xc(n){return yt(n,"owner")}function Eh(n){return yt(n,"clientMetadata")}function C1(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Pi=i,this.vi=r}static Vi(e,t){let i=Z(),r=Z();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new S1(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ci(e,t).next(s=>s||this.xi(e,t,r,i)).next(s=>s||this.Ni(e,t))}Ci(e,t){return w.resolve(null)}xi(e,t,i,r){return $H(t)||r.isEqual(j.min())?this.Ni(e,t):this.Di.getDocuments(e,i).next(s=>{const o=this.ki(t,s);return this.Oi(t,o,i,r)?this.Ni(e,t):(ag()<=Q.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hg(t)),this.Mi(e,o,t,pA(r,-1)))})}ki(e,t){let i=new ye(xA(e));return t.forEach((r,s)=>{g1(e,s)&&(i=i.add(s))}),i}Oi(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ni(e,t){return ag()<=Q.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",hg(t)),this.Di.getDocumentsMatchingQuery(e,t,En.min())}Mi(e,t,i,r){return this.Di.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(e,t,i,r){this.persistence=e,this.Fi=t,this.wt=r,this.$i=new Oe(X),this.Bi=new ts(s=>eo(s),Ku),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(i)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d5(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function m5(n,e,t,i){return new eY(n,e,t,i)}async function g5(n,e){const t=P(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.qi(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let c=Z();for(const l of r){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({Ki:l,removedBatchIds:o,addedBatchIds:a}))})})}function tY(n,e){const t=P(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){const u=c.batch,h=u.keys();let d=w.resolve();return h.forEach(p=>{d=d.next(()=>l.getEntry(a,p)).next(m=>{const _=c.docVersions.get(p);z(_!==null),m.version.compareTo(_)<0&&(u.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),l.addEntry(m)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=Z();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function y5(n){const e=P(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function nY(n,e){const t=P(n),i=e.snapshotVersion;let r=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Ui.newChangeBuffer({trackRemovals:!0});r=t.$i;const a=[];e.targetChanges.forEach((u,h)=>{const d=r.get(h);if(!d)return;a.push(t.Vs.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.Vs.addMatchingKeys(s,u.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(h)?p=p.withResumeToken(Je.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,i)),r=r.insert(h,p),function(m,_,y){return m.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,p,u)&&a.push(t.Vs.updateTargetData(s,p))});let c=hn(),l=Z();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(_5(s,o,e.documentUpdates).next(u=>{c=u.Gi,l=u.Qi})),!i.isEqual(j.min())){const u=t.Vs.getLastRemoteSnapshotVersion(s).next(h=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.$i=r,s))}function _5(n,e,t){let i=Z(),r=Z();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=hn();return t.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(j.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Gi:o,Qi:r}})}function iY(n,e){const t=P(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ra(n,e){const t=P(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Vs.getTargetData(i,e).next(s=>s?(r=s,w.resolve(r)):t.Vs.allocateTargetId(i).next(o=>(r=new xr(e,o,0,i.currentSequenceNumber),t.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.$i.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.$i=t.$i.insert(i.targetId,i),t.Bi.set(e,i.targetId)),i})}async function Da(n,e,t){const i=P(n),r=i.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!es(o))throw o;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.$i=i.$i.remove(e),i.Bi.delete(r.target)}function Qd(n,e,t){const i=P(n);let r=j.min(),s=Z();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){const u=P(a),h=u.Bi.get(l);return h!==void 0?w.resolve(u.$i.get(h)):u.Vs.getTargetData(c,l)}(i,o,On(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Fi.getDocumentsMatchingQuery(o,e,t?r:j.min(),t?s:Z())).next(a=>(k5(i,SA(e),a),{documents:a,ji:s})))}function w5(n,e){const t=P(n),i=P(t.Vs),r=t.$i.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.te(s,e).next(o=>o?o.target:null))}function v5(n,e){const t=P(n),i=t.Li.get(e)||j.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Ui.getAllFromCollectionGroup(r,e,pA(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(k5(t,e,r),r))}function k5(n,e,t){let i=j.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Li.set(e,i)}async function rY(n,e,t,i){const r=P(n);let s=Z(),o=hn();for(const l of t){const u=e.Wi(l.metadata.name);l.document&&(s=s.add(u));const h=e.zi(l);h.setReadTime(e.Hi(l.metadata.readTime)),o=o.insert(u,h)}const a=r.Ui.newChangeBuffer({trackRemovals:!0}),c=await Ra(r,function(l){return On(sc(le.fromString(`__bundle__/docs/${l}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",l=>_5(l,a,o).next(u=>(a.apply(l),u)).next(u=>r.Vs.removeMatchingKeysForTargetId(l,c.targetId).next(()=>r.Vs.addMatchingKeys(l,s,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,u.Gi,u.Qi)).next(()=>u.Gi)))}async function sY(n,e,t=Z()){const i=await Ra(n,On(b1(e.bundledQuery))),r=P(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=lt(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Ds.saveNamedQuery(s,e);const a=i.withResumeToken(Je.EMPTY_BYTE_STRING,o);return r.$i=r.$i.insert(a.targetId,a),r.Vs.updateTargetData(s,a).next(()=>r.Vs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Vs.addMatchingKeys(s,t,i.targetId)).next(()=>r.Ds.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n,e){return`firestore_clients_${n}_${e}`}function ab(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Vp(n,e){return`firestore_targets_${n}_${e}`}class Yd{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ji(e,t,i){const r=JSON.parse(i);let s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new E(r.error.code,r.error.message))),o?new Yd(e,t,r.state,s):(Ge("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nl{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ji(e,t){const i=JSON.parse(t);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new E(i.error.code,i.error.message))),s?new nl(e,i.state,r):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const i=JSON.parse(t);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=$f();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=vA(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new Xd(e,s):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class x1{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new x1(t.clientId,t.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mg{constructor(){this.activeTargetIds=$f()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qp{constructor(e,t,i,r,s){this.window=e,this.js=t,this.persistenceKey=i,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Oe(X),this.started=!1,this.ir=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=ob(this.persistenceKey,this.tr),this.ur=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new mg),this.cr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.lr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.dr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ri();for(const i of e){if(i===this.tr)continue;const r=this.getItem(ob(this.persistenceKey,i));if(r){const s=Xd.Ji(i,r);s&&(this.sr=this.sr.insert(s.clientId,s))}}this._r();const t=this.storage.getItem(this.lr);if(t){const i=this.wr(t);i&&this.mr(i)}for(const i of this.ir)this.nr(i);this.ir=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,i){this.yr(e,t,i),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Vp(this.persistenceKey,e));if(i){const r=nl.Ji(e,i);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vp(this.persistenceKey,e))}updateQueryState(e,t,i){this.Tr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.pr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return I("SharedClientState","READ",e,t),t}setItem(e,t){I("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){const t=e;if(t.storageArea===this.storage){if(I("SharedClientState","EVENT",t.key,t.newValue),t.key===this.rr)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.cr.test(t.key)){if(t.newValue==null){const i=this.Rr(t.key);return this.br(i,null)}{const i=this.Pr(t.key,t.newValue);if(i)return this.br(i.clientId,i)}}else if(this.ar.test(t.key)){if(t.newValue!==null){const i=this.vr(t.key,t.newValue);if(i)return this.Vr(i)}}else if(this.hr.test(t.key)){if(t.newValue!==null){const i=this.Sr(t.key,t.newValue);if(i)return this.Dr(i)}}else if(t.key===this.lr){if(t.newValue!==null){const i=this.wr(t.newValue);if(i)return this.mr(i)}}else if(t.key===this.ur){const i=function(r){let s=un.ot;if(r!=null)try{const o=JSON.parse(r);z(typeof o=="number"),s=o}catch(o){Ge("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(t.newValue);i!==un.ot&&this.sequenceNumberHandler(i)}else if(t.key===this.dr){const i=this.Cr(t.newValue);await Promise.all(i.map(r=>this.syncEngine.Nr(r)))}}}else this.ir.push(t)})}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,i){const r=new Yd(this.currentUser,e,t,i),s=ab(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Yi())}pr(e){const t=ab(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){const t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}Tr(e,t,i){const r=Vp(this.persistenceKey,e),s=new nl(e,t,i);this.setItem(r,s.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const i=this.Rr(e);return Xd.Ji(i,t)}vr(e,t){const i=this.ar.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Yd.Ji(new ot(s),r,t)}Sr(e,t){const i=this.hr.exec(e),r=Number(i[1]);return nl.Ji(r,t)}wr(e){return x1.Ji(e)}Cr(e){return JSON.parse(e)}async Vr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.kr(e.batchId,e.state,e.error);I("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const i=t?this.sr.insert(e,t):this.sr.remove(e),r=this.gr(this.sr),s=this.gr(i),o=[],a=[];return s.forEach(c=>{r.has(c)||o.push(c)}),r.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.Mr(o,a).then(()=>{this.sr=i})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=$f();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class b5{constructor(){this.Fr=new mg,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,i){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new mg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.so=t+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,i,r,s){const o=this.oo(e,t);I("RestConnection","Sending: ",o,i);const a={};return this.uo(a,r,s),this.co(e,o,a,i).then(c=>(I("RestConnection","Received: ",c),c),c=>{throw Bl("RestConnection",`${e} failed with error: `,c,"url: ",o,"request:",i),c})}ao(e,t,i,r,s,o){return this.ro(e,t,i,r,s)}uo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+rc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}oo(e,t){const i=aY[e];return`${this.so}/v1/${t}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,i,r){return new Promise((s,o)=>{const a=new _T;a.listenOnce(mT.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ko.NO_ERROR:const l=a.getResponseJson();I("Connection","XHR received:",JSON.stringify(l)),s(l);break;case Ko.TIMEOUT:I("Connection",'RPC "'+e+'" timed out'),o(new E(v.DEADLINE_EXCEEDED,"Request time out"));break;case Ko.HTTP_ERROR:const u=a.getStatus();if(I("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(p){const m=p.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(m)>=0?m:v.UNKNOWN}(h.status);o(new E(d,h.message))}else o(new E(v.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new E(v.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{I("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(r);a.send(t,"POST",c,i,15)})}ho(e,t,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fT(),o=pT(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new yT({})),this.uo(a.initMessageHeaders,t,i),Ba()||go()||PE()||ou()||OE()||mo()||(a.httpHeadersOverwriteParam="$httpHeaders");const c=r.join("");I("Connection","Creating WebChannel: "+c,a);const l=s.createWebChannel(c,a);let u=!1,h=!1;const d=new cY({jr:m=>{h?I("Connection","Not sending because WebChannel is closed:",m):(u||(I("Connection","Opening WebChannel transport."),l.open(),u=!0),I("Connection","WebChannel sending:",m),l.send(m))},Wr:()=>l.close()}),p=(m,_,y)=>{m.listen(_,x=>{try{y(x)}catch(N){setTimeout(()=>{throw N},0)}})};return p(l,wr.EventType.OPEN,()=>{h||I("Connection","WebChannel transport opened.")}),p(l,wr.EventType.CLOSE,()=>{h||(h=!0,I("Connection","WebChannel transport closed"),d.eo())}),p(l,wr.EventType.ERROR,m=>{h||(h=!0,Bl("Connection","WebChannel transport errored:",m),d.eo(new E(v.UNAVAILABLE,"The operation could not be completed")))}),p(l,wr.EventType.MESSAGE,m=>{var _;if(!h){const y=m.data[0];z(!!y);const x=y,N=x.error||((_=x[0])===null||_===void 0?void 0:_.error);if(N){I("Connection","WebChannel received error:",N);const A=N.status;let O=function(V){const $=Ve[V];if($!==void 0)return UA($)}(A),W=N.message;O===void 0&&(O=v.INTERNAL,W="Unknown error status: "+A+" with message "+N.message),h=!0,d.eo(new E(O,W)),l.close()}else I("Connection","WebChannel received:",y),d.no(y)}}),p(o,gT.STAT_EVENT,m=>{m.stat===ud.PROXY?I("Connection","Detected buffering proxy"):m.stat===ud.NOPROXY&&I("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.Zr()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(){return typeof window!="undefined"?window:null}function zh(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(n){return new eQ(n,!0)}class A1{constructor(e,t,i=1e3,r=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=i,this.fo=r,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,t-i);r>0&&I("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,t,i,r,s,o,a,c){this.js=e,this.Ao=i,this.Ro=r,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new A1(e,t)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}async Oo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,t){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():t&&t.code===v.RESOURCE_EXHAUSTED?(Ge(t.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):t&&t.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(t)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===t&&this.Uo(i,r)},i=>{e(()=>{const r=new E(v.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(e,t){const i=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uY extends I5{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=iQ(this.wt,e),i=function(r){if(!("targetChange"in r))return j.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?j.min():s.readTime?lt(s.readTime):j.min()}(e);return this.listener.Go(t,i)}Qo(e){const t={};t.database=Hl(this.wt),t.addTarget=function(r,s){let o;const a=s.target;return o=zd(a)?{documents:YA(r,a)}:{query:XA(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=zA(r,s.resumeToken):s.snapshotVersion.compareTo(j.min())>0&&(o.readTime=Wl(r,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const i=sQ(this.wt,e);i&&(t.labels=i),this.Mo(t)}jo(e){const t={};t.database=Hl(this.wt),t.removeTarget=e,this.Mo(t)}}class hY extends I5{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=rQ(e.writeResults,e.commitTime),i=lt(e.commitTime);return this.listener.Jo(i,t)}return z(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Hl(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Ql(this.wt,i))};this.Mo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new E(v.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.bo.ro(e,t,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new E(v.UNKNOWN,r.toString())})}ao(e,t,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ao(e,t,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new E(v.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class fY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Ge(t),this.su=!1):I("OnlineStateTracker",t)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pY{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(o=>{i.enqueueAndForget(async()=>{ns(this)&&(I("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=P(a);c.lu.add(4),await cc(c),c._u.set("Unknown"),c.lu.delete(4),await Zu(c)}(this))})}),this._u=new fY(i,r)}}async function Zu(n){if(ns(n))for(const e of n.fu)await e(!0)}async function cc(n){for(const e of n.fu)await e(!1)}function qf(n,e){const t=P(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),N1(t)?D1(t):uc(t).Co()&&R1(t,e))}function Yl(n,e){const t=P(n),i=uc(t);t.hu.delete(e),i.Co()&&T5(t,e),t.hu.size===0&&(i.Co()?i.ko():ns(t)&&t._u.set("Unknown"))}function R1(n,e){n.wu.Nt(e.targetId),uc(n).Qo(e)}function T5(n,e){n.wu.Nt(e),uc(n).jo(e)}function D1(n){n.wu=new XH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),uc(n).start(),n._u.iu()}function N1(n){return ns(n)&&!uc(n).Do()&&n.hu.size>0}function ns(n){return P(n).lu.size===0}function C5(n){n.wu=void 0}async function mY(n){n.hu.forEach((e,t)=>{R1(n,e)})}async function gY(n,e){C5(n),N1(n)?(n._u.uu(e),D1(n)):n._u.set("Unknown")}async function yY(n,e,t){if(n._u.set("Online"),e instanceof jA&&e.state===2&&e.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.hu.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.hu.delete(o),i.wu.removeTarget(o))}(n,e)}catch(i){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jd(n,i)}else if(e instanceof Gh?n.wu.Ut(e):e instanceof GA?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(j.min()))try{const i=await y5(n.localStore);t.compareTo(i)>=0&&await function(r,s){const o=r.wu.Yt(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const l=r.hu.get(c);l&&r.hu.set(c,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const c=r.hu.get(a);if(!c)return;r.hu.set(a,c.withResumeToken(Je.EMPTY_BYTE_STRING,c.snapshotVersion)),T5(r,a);const l=new xr(c.target,a,1,c.sequenceNumber);R1(r,l)}),r.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(i){I("RemoteStore","Failed to raise snapshot:",i),await Jd(n,i)}}async function Jd(n,e,t){if(!es(e))throw e;n.lu.add(1),await cc(n),n._u.set("Offline"),t||(t=()=>y5(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{I("RemoteStore","Retrying IndexedDB access"),await t(),n.lu.delete(1),await Zu(n)})}function S5(n,e){return e().catch(t=>Jd(n,t,e))}async function lc(n){const e=P(n),t=jr(e);let i=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;_Y(e);)try{const r=await iY(e.localStore,i);if(r===null){e.au.length===0&&t.ko();break}i=r.batchId,wY(e,r)}catch(r){await Jd(e,r)}x5(e)&&A5(e)}function _Y(n){return ns(n)&&n.au.length<10}function wY(n,e){n.au.push(e);const t=jr(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function x5(n){return ns(n)&&!jr(n).Do()&&n.au.length>0}function A5(n){jr(n).start()}async function vY(n){jr(n).Xo()}async function kY(n){const e=jr(n);for(const t of n.au)e.Ho(t.mutations)}async function bY(n,e,t){const i=n.au.shift(),r=v1.from(i,e,t);await S5(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await lc(n)}async function EY(n,e){e&&jr(n).zo&&await async function(t,i){if(r=i.code,$A(r)&&r!==v.ABORTED){const s=t.au.shift();jr(t).No(),await S5(t,()=>t.remoteSyncer.rejectFailedWrite(s.batchId,i)),await lc(t)}var r}(n,e),x5(n)&&A5(n)}async function lb(n,e){const t=P(n);t.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");const i=ns(t);t.lu.add(3),await cc(t),i&&t._u.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),await Zu(t)}async function gg(n,e){const t=P(n);e?(t.lu.delete(2),await Zu(t)):e||(t.lu.add(2),await cc(t),t._u.set("Unknown"))}function uc(n){return n.mu||(n.mu=function(e,t,i){const r=P(e);return r.tu(),new uY(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:mY.bind(null,n),Jr:gY.bind(null,n),Go:yY.bind(null,n)}),n.fu.push(async e=>{e?(n.mu.No(),N1(n)?D1(n):n._u.set("Unknown")):(await n.mu.stop(),C5(n))})),n.mu}function jr(n){return n.gu||(n.gu=function(e,t,i){const r=P(e);return r.tu(),new hY(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:vY.bind(null,n),Jr:EY.bind(null,n),Yo:kY.bind(null,n),Jo:bY.bind(null,n)}),n.fu.push(async e=>{e?(n.gu.No(),await lc(n)):(await n.gu.stop(),n.au.length>0&&(I("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))})),n.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new P1(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new E(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hc(n,e){if(Ge("AsyncQueue",`${e}: ${n}`),es(n))return new E(v.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.comparator=e?(t,i)=>e(t,i)||D.comparator(t.key,i.key):(t,i)=>D.comparator(t.key,i.key),this.keyedMap=Mc(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new sa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new sa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.yu=new Oe(D.comparator)}track(e){const t=e.doc.key,i=this.yu.get(t);i?e.type!==0&&i.type===3?this.yu=this.yu.insert(t,e):e.type===3&&i.type!==1?this.yu=this.yu.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.yu=this.yu.remove(t):e.type===1&&i.type===2?this.yu=this.yu.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):F():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Na{constructor(e,t,i,r,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,t,i,r){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new Na(e,t,sa.emptySet(t),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IY{constructor(){this.Iu=void 0,this.listeners=[]}}class TY{constructor(){this.queries=new ts(e=>CA(e),Hu),this.onlineState="Unknown",this.Tu=new Set}}async function O1(n,e){const t=P(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new IY),r)try{s.Iu=await t.onListen(i)}catch(o){const a=hc(o,`Initialization of query '${hg(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&L1(t)}async function M1(n,e){const t=P(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return t.queries.delete(i),t.onUnlisten(i)}function CY(n,e){const t=P(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.listeners)a.Au(r)&&(i=!0);o.Iu=r}}i&&L1(t)}function SY(n,e,t){const i=P(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function L1(n){n.Tu.forEach(e=>{e.next()})}class F1{constructor(e,t,i){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Na(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){if(!e.fromCache)return!0;const i=t!=="Offline";return(!this.options.Du||!i)&&(!e.docs.isEmpty()||t==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Su(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xY{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.wt=e}Wi(e){return hi(this.wt,e)}zi(e){return e.metadata.exists?QA(this.wt,e.document,!1):be.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return lt(e)}}class AY{constructor(e,t,i){this.xu=e,this.localStore=t,this.wt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=R5(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=le.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,i=new hb(this.wt);for(const r of e)if(r.metadata.queries){const s=i.Wi(r.metadata.name);for(const o of r.metadata.queries){const a=(t.get(o)||Z()).add(s);t.set(o,a)}}return t}async complete(){const e=await rY(this.localStore,new hb(this.wt),this.documents,this.xu.id),t=this.ku(this.documents);for(const i of this.queries)await sY(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:e}}}function R5(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.key=e}}class N5{constructor(e){this.key=e}}class P5{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Z(),this.mutatedKeys=Z(),this.Lu=xA(e),this.Uu=new sa(this.Lu)}get qu(){return this.Fu}Ku(e,t){const i=t?t.Gu:new ub,r=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const d=r.get(u),p=g1(this.query,h)?h:null,m=!!d&&this.mutatedKeys.has(d.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;d&&p?d.data.isEqual(p.data)?m!==_&&(i.track({type:3,doc:p}),y=!0):this.Qu(d,p)||(i.track({type:2,doc:p}),y=!0,(c&&this.Lu(p,c)>0||l&&this.Lu(p,l)<0)&&(a=!0)):!d&&p?(i.track({type:0,doc:p}),y=!0):d&&!p&&(i.track({type:1,doc:d}),y=!0,(c||l)&&(a=!0)),y&&(p?(o=o.add(p),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Uu:o,Gu:i,Oi:a,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((l,u)=>function(h,d){const p=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return p(h)-p(d)}(l.type,u.type)||this.Lu(l.doc,u.doc)),this.ju(i);const o=t?this.Wu():[],a=this.Bu.size===0&&this.current?1:0,c=a!==this.$u;return this.$u=a,s.length!==0||c?{snapshot:new Na(this.query,e.Uu,r,s,e.mutatedKeys,a===0,c,!1),zu:o}:{zu:o}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new ub,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Z(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const t=[];return e.forEach(i=>{this.Bu.has(i)||t.push(new N5(i))}),this.Bu.forEach(i=>{e.has(i)||t.push(new D5(i))}),t}Ju(e){this.Fu=e.ji,this.Bu=Z();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Na.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class RY{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class DY{constructor(e){this.key=e,this.Xu=!1}}class NY{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new ts(a=>CA(a),Hu),this.ec=new Map,this.nc=new Set,this.sc=new Oe(D.comparator),this.ic=new Map,this.rc=new I1,this.oc={},this.uc=new Map,this.cc=so.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function PY(n,e){const t=q1(n);let i,r;const s=t.tc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const o=await Ra(t.localStore,On(e));t.isPrimaryClient&&qf(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await $1(t,e,i,a==="current")}return r}async function $1(n,e,t,i){n.hc=(u,h,d)=>async function(p,m,_,y){let x=m.view.Ku(_);x.Oi&&(x=await Qd(p.localStore,m.query,!1).then(({documents:O})=>m.view.Ku(O,x)));const N=y&&y.targetChanges.get(m.targetId),A=m.view.applyChanges(x,p.isPrimaryClient,N);return yg(p,m.targetId,A.zu),A.snapshot}(n,u,h,d);const r=await Qd(n.localStore,e,!0),s=new P5(e,r.ji),o=s.Ku(r.documents),a=Xu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline"),c=s.applyChanges(o,n.isPrimaryClient,a);yg(n,t,c.zu);const l=new RY(e,t,s);return n.tc.set(e,l),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),c.snapshot}async function OY(n,e){const t=P(n),i=t.tc.get(e),r=t.ec.get(i.targetId);if(r.length>1)return t.ec.set(i.targetId,r.filter(s=>!Hu(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||await Da(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Yl(t.remoteStore,i.targetId),Pa(t,i.targetId)}).catch(Zr)):(Pa(t,i.targetId),await Da(t.localStore,i.targetId,!0))}async function MY(n,e,t){const i=G1(n);try{const r=await function(s,o){const a=P(s),c=Re.now(),l=o.reduce((d,p)=>d.add(p.key),Z());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let p=hn(),m=Z();return a.Ui.getEntries(d,l).next(_=>{p=_,p.forEach((y,x)=>{x.isValidDocument()||(m=m.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,p)).next(_=>{u=_;const y=[];for(const x of o){const N=zH(x,u.get(x.key).overlayedDocument);N!=null&&y.push(new sr(x.key,N,bA(N.value.mapValue),Ne.exists(!0)))}return a.mutationQueue.addMutationBatch(d,c,y,o)}).next(_=>{h=_;const y=_.applyToLocalDocumentSet(u,m);return a.documentOverlayCache.saveOverlays(d,_.batchId,y)})}).then(()=>({batchId:h.batchId,changes:VA(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let c=s.oc[s.currentUser.toKey()];c||(c=new Oe(X)),c=c.insert(o,a),s.oc[s.currentUser.toKey()]=c}(i,r.batchId,t),await or(i,r.changes),await lc(i.remoteStore)}catch(r){const s=hc(r,"Failed to persist write");t.reject(s)}}async function O5(n,e){const t=P(n);try{const i=await nY(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.ic.get(s);o&&(z(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Xu=!0:r.modifiedDocuments.size>0?z(o.Xu):r.removedDocuments.size>0&&(z(o.Xu),o.Xu=!1))}),await or(t,i,e)}catch(i){await Zr(i)}}function db(n,e,t){const i=P(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.tc.forEach((s,o)=>{const a=o.view.Eu(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=P(s);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(const h of u.listeners)h.Eu(o)&&(c=!0)}),c&&L1(a)}(i.eventManager,e),r.length&&i.Zu.Go(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function LY(n,e,t){const i=P(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ic.get(e),s=r&&r.key;if(s){let o=new Oe(D.comparator);o=o.insert(s,be.newNoDocument(s,j.min()));const a=Z().add(s),c=new Yu(j.min(),new Map,new ye(X),o,a);await O5(i,c),i.sc=i.sc.remove(s),i.ic.delete(e),V1(i)}else await Da(i.localStore,e,!1).then(()=>Pa(i,e,t)).catch(Zr)}async function FY(n,e){const t=P(n),i=e.batch.batchId;try{const r=await tY(t.localStore,e);B1(t,i,null),U1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await or(t,r)}catch(r){await Zr(r)}}async function $Y(n,e,t){const i=P(n);try{const r=await function(s,o){const a=P(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a.mutationQueue.lookupMutationBatch(c,o).next(u=>(z(u!==null),l=u.keys(),a.mutationQueue.removeMutationBatch(c,u))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>a.localDocuments.getDocuments(c,l))})}(i.localStore,e);B1(i,e,t),U1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await or(i,r)}catch(r){await Zr(r)}}async function UY(n,e){const t=P(n);ns(t.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(s){const o=P(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(t.localStore);if(i===-1)return void e.resolve();const r=t.uc.get(i)||[];r.push(e),t.uc.set(i,r)}catch(i){const r=hc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function U1(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function B1(n,e,t){const i=P(n);let r=i.oc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.oc[i.currentUser.toKey()]=r}}function Pa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ec.get(e))n.tc.delete(i),t&&n.Zu.lc(i,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(i=>{n.rc.containsKey(i)||M5(n,i)})}function M5(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);t!==null&&(Yl(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),V1(n))}function yg(n,e,t){for(const i of t)i instanceof D5?(n.rc.addReference(i.key,e),BY(n,i)):i instanceof N5?(I("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,e),n.rc.containsKey(i.key)||M5(n,i.key)):F()}function BY(n,e){const t=e.key,i=t.path.canonicalString();n.sc.get(t)||n.nc.has(i)||(I("SyncEngine","New document in limbo: "+t),n.nc.add(i),V1(n))}function V1(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new D(le.fromString(e)),i=n.cc.next();n.ic.set(i,new DY(t)),n.sc=n.sc.insert(t,i),qf(n.remoteStore,new xr(On(sc(t.path)),i,2,un.ot))}}async function or(n,e,t){const i=P(n),r=[],s=[],o=[];i.tc.isEmpty()||(i.tc.forEach((a,c)=>{o.push(i.hc(c,e,t).then(l=>{if(l){i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),r.push(l);const u=S1.Vi(c.targetId,l);s.push(u)}}))}),await Promise.all(o),i.Zu.Go(r),await async function(a,c){const l=P(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>w.forEach(c,h=>w.forEach(h.Pi,d=>l.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>w.forEach(h.vi,d=>l.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!es(u))throw u;I("LocalStore","Failed to update sequence numbers: "+u)}for(const u of c){const h=u.targetId;if(!u.fromCache){const d=l.$i.get(h),p=d.snapshotVersion,m=d.withLastLimboFreeSnapshotVersion(p);l.$i=l.$i.insert(h,m)}}}(i.localStore,s))}async function VY(n,e){const t=P(n);if(!t.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());const i=await g5(t.localStore,e);t.currentUser=e,function(r,s){r.uc.forEach(o=>{o.forEach(a=>{a.reject(new E(v.CANCELLED,s))})}),r.uc.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await or(t,i.Ki)}}function qY(n,e){const t=P(n),i=t.ic.get(e);if(i&&i.Xu)return Z().add(i.key);{let r=Z();const s=t.ec.get(e);if(!s)return r;for(const o of s){const a=t.tc.get(o);r=r.unionWith(a.view.qu)}return r}}async function GY(n,e){const t=P(n),i=await Qd(t.localStore,e.query,!0),r=e.view.Ju(i);return t.isPrimaryClient&&yg(t,e.targetId,r.zu),r}async function jY(n,e){const t=P(n);return v5(t.localStore,e).then(i=>or(t,i))}async function zY(n,e,t,i){const r=P(n),s=await function(o,a){const c=P(o),l=P(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",u=>l.yn(u,a).next(h=>h?c.localDocuments.getDocuments(u,h):w.resolve(null)))}(r.localStore,e);s!==null?(t==="pending"?await lc(r.remoteStore):t==="acknowledged"||t==="rejected"?(B1(r,e,i||null),U1(r,e),function(o,a){P(P(o).mutationQueue).In(a)}(r.localStore,e)):F(),await or(r,s)):I("SyncEngine","Cannot apply mutation batch with id: "+e)}async function WY(n,e){const t=P(n);if(q1(t),G1(t),e===!0&&t.ac!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),r=await fb(t,i.toArray());t.ac=!0,await gg(t.remoteStore,!0);for(const s of r)qf(t.remoteStore,s)}else if(e===!1&&t.ac!==!1){const i=[];let r=Promise.resolve();t.ec.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(Pa(t,o),Da(t.localStore,o,!0))),Yl(t.remoteStore,o)}),await r,await fb(t,i),function(s){const o=P(s);o.ic.forEach((a,c)=>{Yl(o.remoteStore,c)}),o.rc.cs(),o.ic=new Map,o.sc=new Oe(D.comparator)}(t),t.ac=!1,await gg(t.remoteStore,!1)}}async function fb(n,e,t){const i=P(n),r=[],s=[];for(const o of e){let a;const c=i.ec.get(o);if(c&&c.length!==0){a=await Ra(i.localStore,On(c[0]));for(const l of c){const u=i.tc.get(l),h=await GY(i,u);h.snapshot&&s.push(h.snapshot)}}else{const l=await w5(i.localStore,o);a=await Ra(i.localStore,l),await $1(i,L5(l),o,!1)}r.push(a)}return i.Zu.Go(s),r}function L5(n){return IA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function KY(n){const e=P(n);return P(P(e.localStore).persistence).Ri()}async function HY(n,e,t,i){const r=P(n);if(r.ac)return void I("SyncEngine","Ignoring unexpected query state notification.");const s=r.ec.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await v5(r.localStore,SA(s[0])),a=Yu.createSynthesizedRemoteEventForCurrentChange(e,t==="current");await or(r,o,a);break}case"rejected":await Da(r.localStore,e,!0),Pa(r,e,i);break;default:F()}}async function QY(n,e,t){const i=q1(n);if(i.ac){for(const r of e){if(i.ec.has(r)){I("SyncEngine","Adding an already active target "+r);continue}const s=await w5(i.localStore,r),o=await Ra(i.localStore,s);await $1(i,L5(s),o.targetId,!1),qf(i.remoteStore,o)}for(const r of t)i.ec.has(r)&&await Da(i.localStore,r,!1).then(()=>{Yl(i.remoteStore,r),Pa(i,r)}).catch(Zr)}}function q1(n){const e=P(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=O5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LY.bind(null,e),e.Zu.Go=CY.bind(null,e.eventManager),e.Zu.lc=SY.bind(null,e.eventManager),e}function G1(n){const e=P(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$Y.bind(null,e),e}function YY(n,e,t){const i=P(n);(async function(r,s,o){try{const a=await s.getMetadata();if(await function(h,d){const p=P(h),m=lt(d.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",_=>p.Ds.getBundleMetadata(_,d.id)).then(_=>!!_&&_.createTime.compareTo(m)>=0)}(r.localStore,a))return await s.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(R5(a));const c=new AY(a,r.localStore,s.wt);let l=await s.fc();for(;l;){const h=await c.Nu(l);h&&o._updateProgress(h),l=await s.fc()}const u=await c.complete();return await or(r,u.Mu,void 0),await function(h,d){const p=P(h);return p.persistence.runTransaction("Save bundle","readwrite",m=>p.Ds.saveBundleMetadata(m,d))}(r.localStore,a),o._completeWith(u.progress),Promise.resolve(u.Ou)}catch(a){return Bl("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class F5{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=Ju(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,t){return null}gc(e,t){return null}wc(e){return m5(this.persistence,new p5,e.initialUser,this.wt)}_c(e){return new f5(Vf.Ms,this.wt)}dc(e){return new b5}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $5 extends F5{constructor(e,t,i){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.yc.initialize(this,e),await G1(this.yc.syncEngine),await lc(this.yc.remoteStore),await this.persistence.ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wc(e){return m5(this.persistence,new p5,e.initialUser,this.wt)}mc(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new BQ(i,e.asyncQueue,t)}gc(e,t){const i=new bH(t,this.persistence);return new kH(e.asyncQueue,i)}_c(e){const t=C1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new T1(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,E5(),zh(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new b5}}class XY extends $5{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.yc.syncEngine;this.sharedClientState instanceof qp&&(this.sharedClientState.syncEngine={kr:zY.bind(null,t),Or:HY.bind(null,t),Mr:QY.bind(null,t),Ri:KY.bind(null,t),Nr:jY.bind(null,t)},await this.sharedClientState.start()),await this.persistence.ci(async i=>{await WY(this.yc.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}dc(e){const t=E5();if(!qp.V(t))throw new E(v.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=C1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qp(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class j1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>db(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=VY.bind(null,this.syncEngine),await gg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new TY}createDatastore(e){const t=Ju(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new lY(r));var r;return function(s,o,a,c){return new dY(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>db(this.syncEngine,a,0),o=cb.V()?new cb:new oY,new pY(t,i,r,s,o);var t,i,r,s,o}createSyncEngine(e,t){return function(i,r,s,o,a,c,l){const u=new NY(i,r,s,o,a,c);return l&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=P(e);I("RemoteStore","RemoteStore shutting down."),t.lu.add(5),await cc(t),t.du.shutdown(),t._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new ct,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(i=>{i&&i.Cu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ec.cancel()}async getMetadata(){return this.metadata.promise}async fc(){return await this.getMetadata(),this.Rc()}async Rc(){const e=await this.bc();if(e===null)return null;const t=this.Ac.decode(e),i=Number(t);isNaN(i)&&this.Pc(`length string (${t}) is not valid number`);const r=await this.vc(i);return new xY(JSON.parse(r),e.length+i)}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async bc(){for(;this.Vc()<0&&!await this.Sc(););if(this.buffer.length===0)return null;const e=this.Vc();e<0&&this.Pc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async vc(e){for(;this.buffer.length<e;)await this.Sc()&&this.Pc("Reached the end of bundle when more is expected.");const t=this.Ac.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}async Sc(){const e=await this.Ec.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new E(v.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(i,r){const s=P(i),o=Hl(s.wt)+"/documents",a={documents:r.map(h=>Kl(s.wt,h))},c=await s.ao("BatchGetDocuments",o,a,r.length),l=new Map;c.forEach(h=>{const d=nQ(s.wt,h);l.set(d.key.toString(),d)});const u=[];return r.forEach(h=>{const d=l.get(h.toString());z(!!d),u.push(d)}),u}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new ac(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{const r=D.fromPath(i);this.mutations.push(new y1(r,this.precondition(r)))}),await async function(t,i){const r=P(t),s=Hl(r.wt)+"/documents",o={writes:i.map(a=>Ql(r.wt,a))};await r.ro("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw F();t=j.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new E(v.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ne.updateTime(t):Ne.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(j.min()))throw new E(v.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ne.updateTime(t)}return Ne.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eX{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Dc=i.maxAttempts,this.So=new A1(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){this.So.Io(async()=>{const e=new ZY(this.datastore),t=this.xc(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Nc(r)}))}).catch(i=>{this.Nc(i)})})}xc(e){try{const t=this.updateFunction(e);return!Wu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||!$A(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ot.UNAUTHENTICATED,this.clientId=hA.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{I("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(I("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new E(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ct;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=hc(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function U5(n,e){n.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");const t=await n.getConfiguration();await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await g5(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}async function B5(n,e){n.asyncQueue.verifyOperationInProgress();const t=await z1(n);I("FirestoreClient","Initializing OnlineComponentProvider");const i=await n.getConfiguration();await e.initialize(t,i),n.setCredentialChangeListener(r=>lb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>lb(e.remoteStore,s)),n.onlineComponents=e}async function z1(n){return n.offlineComponents||(I("FirestoreClient","Using default OfflineComponentProvider"),await U5(n,new F5)),n.offlineComponents}async function jf(n){return n.onlineComponents||(I("FirestoreClient","Using default OnlineComponentProvider"),await B5(n,new j1)),n.onlineComponents}function V5(n){return z1(n).then(e=>e.persistence)}function W1(n){return z1(n).then(e=>e.localStore)}function q5(n){return jf(n).then(e=>e.remoteStore)}function K1(n){return jf(n).then(e=>e.syncEngine)}async function Oa(n){const e=await jf(n),t=e.eventManager;return t.onListen=PY.bind(null,e.syncEngine),t.onUnlisten=OY.bind(null,e.syncEngine),t}function nX(n){return n.asyncQueue.enqueue(async()=>{const e=await V5(n),t=await q5(n);return e.setNetworkEnabled(!0),function(i){const r=P(i);return r.lu.delete(0),Zu(r)}(t)})}function iX(n){return n.asyncQueue.enqueue(async()=>{const e=await V5(n),t=await q5(n);return e.setNetworkEnabled(!1),async function(i){const r=P(i);r.lu.add(0),await cc(r),r._u.set("Offline")}(t)})}function rX(n,e){const t=new ct;return n.asyncQueue.enqueueAndForget(async()=>async function(i,r,s){try{const o=await function(a,c){const l=P(a);return l.persistence.runTransaction("read document","readonly",u=>l.localDocuments.getDocument(u,c))}(i,r);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new E(v.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=hc(o,`Failed to get document '${r} from cache`);s.reject(a)}}(await W1(n),e,t)),t.promise}function G5(n,e,t={}){const i=new ct;return n.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,c){const l=new Gf({next:h=>{s.enqueueAndForget(()=>M1(r,u));const d=h.docs.has(o);!d&&h.fromCache?c.reject(new E(v.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?c.reject(new E(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new F1(sc(o.path),l,{includeMetadataChanges:!0,Du:!0});return O1(r,u)}(await Oa(n),n.asyncQueue,e,t,i)),i.promise}function sX(n,e){const t=new ct;return n.asyncQueue.enqueueAndForget(async()=>async function(i,r,s){try{const o=await Qd(i,r,!0),a=new P5(r,o.ji),c=a.Ku(o.documents),l=a.applyChanges(c,!1);s.resolve(l.snapshot)}catch(o){const a=hc(o,`Failed to execute query '${r} against cache`);s.reject(a)}}(await W1(n),e,t)),t.promise}function j5(n,e,t={}){const i=new ct;return n.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,c){const l=new Gf({next:h=>{s.enqueueAndForget(()=>M1(r,u)),h.fromCache&&a.source==="server"?c.reject(new E(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new F1(o,l,{includeMetadataChanges:!0,Du:!0});return O1(r,u)}(await Oa(n),n.asyncQueue,e,t,i)),i.promise}function oX(n,e){const t=new Gf(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,r){P(i).Tu.add(r),r.next()}(await Oa(n),t)),()=>{t.Tc(),n.asyncQueue.enqueueAndForget(async()=>function(i,r){P(i).Tu.delete(r)}(await Oa(n),t))}}function aX(n,e,t){const i=new ct;return n.asyncQueue.enqueueAndForget(async()=>{const r=await function(s){return jf(s).then(o=>o.datastore)}(n);new eX(n.asyncQueue,r,t,e,i).run()}),i.promise}function cX(n,e,t,i){const r=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(c,l){return new JY(c,l)}(function(c,l){if(c instanceof Uint8Array)return pb(c,l);if(c instanceof ArrayBuffer)return pb(new Uint8Array(c),l);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(t,Ju(e));n.asyncQueue.enqueueAndForget(async()=>{YY(await K1(n),r,i)})}function lX(n,e){return n.asyncQueue.enqueue(async()=>function(t,i){const r=P(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ds.getNamedQuery(s,i))}(await W1(n),e))}const mb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(n,e,t){if(!t)throw new E(v.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function z5(n,e,t,i){if(e===!0&&i===!0)throw new E(v.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gb(n){if(!D.isDocumentKey(n))throw new E(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yb(n){if(D.isDocumentKey(n))throw new E(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":F()}function he(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new E(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zf(n);throw new E(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function W5(n,e){if(e<=0)throw new E(v.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){var t;if(e.host===void 0){if(e.ssl!==void 0)throw new E(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new E(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,z5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _b({}),this._settingsFrozen=!1,e instanceof Xi?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new E(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(r.options.projectId)}(e))}get app(){if(!this._app)throw new E(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new E(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _b(e),e.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new lH;switch(t.type){case"gapi":const i=t.client;return z(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new fH(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new E(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mb.get(e);t&&(I("ComponentProvider","Removing Datastore"),mb.delete(e),t.terminate())}(this),Promise.resolve()}}function uX(n,e,t,i={}){var r;const s=(n=he(n,eh))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Bl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let o,a;if(typeof i.mockUserToken=="string")o=i.mockUserToken,a=ot.MOCK_USER;else{o=Pg(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new E(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new ot(c)}n._authCredentials=new uH(new uA(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Se(this.firestore,e,this._key)}}class Ut{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ut(this.firestore,e,this._query)}}class di extends Ut{constructor(e,t,i){super(e,t,sc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Se(this.firestore,null,new D(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function K5(n,e,...t){if(n=k(n),H1("collection","path",e),n instanceof eh){const i=le.fromString(e,...t);return yb(i),new di(n,null,i)}{if(!(n instanceof Se||n instanceof di))throw new E(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(le.fromString(e,...t));return yb(i),new di(n.firestore,null,i)}}function hX(n,e){if(n=he(n,eh),H1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new E(v.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ut(n,null,function(t){return new rr(le.emptyPath(),t)}(e))}function Zd(n,e,...t){if(n=k(n),arguments.length===1&&(e=hA.I()),H1("doc","path",e),n instanceof eh){const i=le.fromString(e,...t);return gb(i),new Se(n,null,new D(i))}{if(!(n instanceof Se||n instanceof di))throw new E(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(le.fromString(e,...t));return gb(i),new Se(n.firestore,n instanceof di?n.converter:null,new D(i))}}function H5(n,e){return n=k(n),e=k(e),(n instanceof Se||n instanceof di)&&(e instanceof Se||e instanceof di)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Q5(n,e){return n=k(n),e=k(e),n instanceof Ut&&e instanceof Ut&&n.firestore===e.firestore&&Hu(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dX{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new A1(this,"async_queue_retry"),this.Kc=()=>{const t=zh();t&&I("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=zh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new ct;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}async jc(){if(this.Mc.length!==0){try{await this.Mc[0](),this.Mc.shift(),this.So.reset()}catch(e){if(!es(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.Mc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(i=>{this.Bc=i,this.Lc=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(i);throw Ge("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Lc=!1,i))));return this.Oc=t,t}enqueueAfterDelay(e,t,i){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const r=P1.createAndSchedule(this,e,t,i,s=>this.Wc(s));return this.$c.push(r),r}Gc(){this.Bc&&F()}verifyOperationInProgress(){}async zc(){let e;do e=this.Oc,await e;while(e!==this.Oc)}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function _g(n){return function(e,t){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of t)if(r in i&&typeof i[r]=="function")return!0;return!1}(n,["next","error","complete"])}class fX{constructor(){this._progressObserver={},this._taskCompletionResolver=new ct,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pX=-1;class Me extends eh{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new dX,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Y5(this),this._firestoreClient.terminate()}}function _t(n){return n._firestoreClient||Y5(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Y5(n){var e;const t=n._freezeSettings(),i=function(r,s,o,a){return new TH(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,t);n._firestoreClient=new tX(n._authCredentials,n._appCheckCredentials,n._queue,i)}function mX(n,e){J5(n=he(n,Me));const t=_t(n),i=n._freezeSettings(),r=new j1;return X5(t,r,new $5(r,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function gX(n){J5(n=he(n,Me));const e=_t(n),t=n._freezeSettings(),i=new j1;return X5(e,i,new XY(i,t.cacheSizeBytes))}function X5(n,e,t){const i=new ct;return n.asyncQueue.enqueue(async()=>{try{await U5(n,t),await B5(n,e),i.resolve()}catch(r){const s=r;if(!function(o){return o.name==="FirebaseError"?o.code===v.FAILED_PRECONDITION||o.code===v.UNIMPLEMENTED:typeof DOMException!="undefined"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}}).then(()=>i.promise)}function yX(n){if(n._initialized&&!n._terminated)throw new E(v.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ct;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(t){if(!Vn.V())return Promise.resolve();const i=t+"main";await Vn.delete(i)}(C1(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function _X(n){return function(e){const t=new ct;return e.asyncQueue.enqueueAndForget(async()=>UY(await K1(e),t)),t.promise}(_t(n=he(n,Me)))}function wX(n){return nX(_t(n=he(n,Me)))}function vX(n){return iX(_t(n=he(n,Me)))}function kX(n,e){const t=_t(n=he(n,Me)),i=new fX;return cX(t,n._databaseId,e,i),i}function bX(n,e){return lX(_t(n=he(n,Me)),e).then(t=>t?new Ut(n,null,t.query):null)}function J5(n){if(n._initialized||n._terminated)throw new E(v.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new E(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ki(Je.fromBase64String(e))}catch(t){throw new E(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ki(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new E(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new E(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EX=/^__.*__$/;class IX{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,t,this.fieldTransforms):new oc(e,this.data,t,this.fieldTransforms)}}class Z5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new sr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function e4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}class Kf{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.wt=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Kf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.sa(e),r}ia(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.Xc(),r}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return e0(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if(e4(this.Zc)&&EX.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class TX{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=i||Ju(e)}aa(e,t,i,r=!1){return new Kf({Zc:e,methodName:t,ca:i,path:$e.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Co(n){const e=n._freezeSettings(),t=Ju(n._databaseId);return new TX(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Hf(n,e,t,i,r,s={}){const o=n.aa(s.merge||s.mergeFields?2:0,e,t,r);J1("Data must be an object, but it was:",o,i);const a=i4(i,o);let c,l;if(s.merge)c=new vn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=wg(e,h,t);if(!o.contains(d))throw new E(v.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);s4(u,d)||u.push(d)}c=new vn(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new IX(new It(a),c,l)}class th extends To{_toFieldTransform(e){if(e.Zc!==2)throw e.Zc===1?e.oa(`${this._methodName}() can only appear at the top level of your update data`):e.oa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}function t4(n,e,t){return new Kf({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Q1 extends To{_toFieldTransform(e){return new Qu(e.path,new xa)}isEqual(e){return e instanceof Q1}}class CX extends To{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=t4(this,e,!0),i=this.ha.map(s=>So(s,t)),r=new to(i);return new Qu(e.path,r)}isEqual(e){return this===e}}class SX extends To{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=t4(this,e,!0),i=this.ha.map(s=>So(s,t)),r=new no(i);return new Qu(e.path,r)}isEqual(e){return this===e}}class xX extends To{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Aa(e.wt,DA(e.wt,this.la));return new Qu(e.path,t)}isEqual(e){return this===e}}function Y1(n,e,t,i){const r=n.aa(1,e,t);J1("Data must be an object, but it was:",r,i);const s=[],o=It.empty();Io(i,(c,l)=>{const u=Z1(e,c,t);l=k(l);const h=r.ia(u);if(l instanceof th)s.push(u);else{const d=So(l,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new vn(s);return new Z5(o,a,r.fieldTransforms)}function X1(n,e,t,i,r,s){const o=n.aa(1,e,t),a=[wg(e,i,t)],c=[r];if(s.length%2!=0)throw new E(v.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(wg(e,s[d])),c.push(s[d+1]);const l=[],u=It.empty();for(let d=a.length-1;d>=0;--d)if(!s4(l,a[d])){const p=a[d];let m=c[d];m=k(m);const _=o.ia(p);if(m instanceof th)l.push(p);else{const y=So(m,_);y!=null&&(l.push(p),u.set(p,y))}}const h=new vn(l);return new Z5(u,h,o.fieldTransforms)}function n4(n,e,t,i=!1){return So(t,n.aa(i?4:3,e))}function So(n,e){if(r4(n=k(n)))return J1("Unsupported field value:",e,n),i4(n,e);if(n instanceof To)return function(t,i){if(!e4(i.Zc))throw i.oa(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.oa(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const o of t){let a=So(o,i.ra(s));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if((t=k(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return DA(i.wt,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const r=Re.fromDate(t);return{timestampValue:Wl(i.wt,r)}}if(t instanceof Re){const r=new Re(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wl(i.wt,r)}}if(t instanceof Wf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ki)return{bytesValue:zA(i.wt,t._byteString)};if(t instanceof Se){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:_1(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.oa(`Unsupported field value: ${zf(t)}`)}(n,e)}function i4(n,e){const t={};return _A(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(n,(i,r)=>{const s=So(r,e.ea(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function r4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Re||n instanceof Wf||n instanceof ki||n instanceof Se||n instanceof To)}function J1(n,e,t){if(!r4(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const i=zf(t);throw i==="an object"?e.oa(n+" a custom object"):e.oa(n+" "+i)}}function wg(n,e,t){if((e=k(e))instanceof zr)return e._internalPath;if(typeof e=="string")return Z1(n,e);throw e0("Field path arguments must be of type string or ",n,!1,void 0,t)}const AX=new RegExp("[~\\*/\\[\\]]");function Z1(n,e,t){if(e.search(AX)>=0)throw e0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zr(...e.split("."))._internalPath}catch{throw e0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function e0(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new E(v.INVALID_ARGUMENT,a+n+c)}function s4(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RX extends Xl{data(){return super.data()}}function Qf(n,e){return typeof e=="string"?Z1(n,e):e instanceof zr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ji extends Xl{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Qf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class il extends Ji{data(e={}){return super.data(e)}}class Wr{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new il(this._firestore,this._userDataWriter,i.key,i,new bs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new E(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new il(i._firestore,i._userDataWriter,o.doc.key,o.doc,new bs(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new il(i._firestore,i._userDataWriter,o.doc.key,o.doc,new bs(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,l=-1;return o.type!==0&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),l=s.indexOf(o.doc.key)),{type:DX(o.type),doc:a,oldIndex:c,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}function o4(n,e){return n instanceof Ji&&e instanceof Ji?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wr&&e instanceof Wr&&n._firestore===e._firestore&&Q5(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new E(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nh{}function hr(n,...e){for(const t of e)n=t._apply(n);return n}class NX extends nh{constructor(e,t,i){super(),this.fa=e,this.da=t,this._a=i,this.type="where"}_apply(e){const t=Co(e.firestore),i=function(r,s,o,a,c,l,u){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new E(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){vb(u,l);const p=[];for(const m of u)p.push(wb(a,r,m));h={arrayValue:{values:p}}}else h=wb(a,r,u)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||vb(u,l),h=n4(o,s,u,l==="in"||l==="not-in");const d=Tt.create(c,l,h);return function(p,m){if(m.ht()){const y=p1(p);if(y!==null&&!y.isEqual(m.field))throw new E(v.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${y.toString()}' and '${m.field.toString()}'`);const x=f1(p);x!==null&&d4(p,m.field,x)}const _=function(y,x){for(const N of y.filters)if(x.indexOf(N.op)>=0)return N.op;return null}(p,function(y){switch(y){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(m.op));if(_!==null)throw _===m.op?new E(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${m.op.toString()}' filter.`):new E(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${m.op.toString()}' filters with '${_.toString()}' filters.`)}(r,d),d}(e._query,"where",t,e.firestore._databaseId,this.fa,this.da,this._a);return new Ut(e.firestore,e.converter,function(r,s){const o=r.filters.concat([s]);return new rr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),o,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}function PX(n,e,t){const i=e,r=Qf("where",n);return new NX(r,i,t)}class OX extends nh{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(i.startAt!==null)throw new E(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new E(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new ra(r,s);return function(a,c){if(f1(a)===null){const l=p1(a);l!==null&&d4(a,l,c.field)}}(i,o),o}(e._query,this.fa,this.wa);return new Ut(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new rr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function MX(n,e="asc"){const t=e,i=Qf("orderBy",n);return new OX(i,t)}class c4 extends nh{constructor(e,t,i){super(),this.type=e,this.ma=t,this.ga=i}_apply(e){return new Ut(e.firestore,e.converter,TA(e._query,this.ma,this.ga))}}function LX(n){return W5("limit",n),new c4("limit",n,"F")}function FX(n){return W5("limitToLast",n),new c4("limitToLast",n,"L")}class l4 extends nh{constructor(e,t,i){super(),this.type=e,this.ya=t,this.pa=i}_apply(e){const t=h4(e,this.type,this.ya,this.pa);return new Ut(e.firestore,e.converter,function(i,r){return new rr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)}(e._query,t))}}function $X(...n){return new l4("startAt",n,!0)}function UX(...n){return new l4("startAfter",n,!1)}class u4 extends nh{constructor(e,t,i){super(),this.type=e,this.ya=t,this.pa=i}_apply(e){const t=h4(e,this.type,this.ya,this.pa);return new Ut(e.firestore,e.converter,function(i,r){return new rr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)}(e._query,t))}}function BX(...n){return new u4("endBefore",n,!1)}function VX(...n){return new u4("endAt",n,!0)}function h4(n,e,t,i){if(t[0]=k(t[0]),t[0]instanceof Xl)return function(r,s,o,a,c){if(!a)throw new E(v.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const l=[];for(const u of Sa(r))if(u.field.isKeyField())l.push(Zs(s,a.key));else{const h=a.data.field(u.field);if(d1(h))throw new E(v.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=u.field.canonicalString();throw new E(v.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}l.push(h)}return new Gr(l,c)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Co(n.firestore);return function(s,o,a,c,l,u){const h=s.explicitOrderBy;if(l.length>h.length)throw new E(v.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let p=0;p<l.length;p++){const m=l[p];if(h[p].field.isKeyField()){if(typeof m!="string")throw new E(v.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof m}`);if(!m1(s)&&m.indexOf("/")!==-1)throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${m}' contains a slash.`);const _=s.path.child(le.fromString(m));if(!D.isDocumentKey(_))throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const y=new D(_);d.push(Zs(o,y))}else{const _=n4(a,c,m);d.push(_)}}return new Gr(d,u)}(n._query,n.firestore._databaseId,r,e,t,i)}}function wb(n,e,t){if(typeof(t=k(t))=="string"){if(t==="")throw new E(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m1(e)&&t.indexOf("/")!==-1)throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(le.fromString(t));if(!D.isDocumentKey(i))throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Zs(n,new D(i))}if(t instanceof Se)return Zs(n,t._key);throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(t)}.`)}function vb(n,e){if(!Array.isArray(n)||n.length===0)throw new E(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new E(v.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function d4(n,e,t){if(!t.isEqual(e))throw new E(v.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qX={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{convertValue(e,t="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw F()}}convertObject(e,t){const i={};return Io(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new Wf(Pe(e.latitude),Pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=wA(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const t=Vr(e);return new Re(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=le.fromString(e);z(e5(i));const r=new Xi(i.get(1),i.get(3)),s=new D(i.popFirst(5));return r.isEqual(t)||Ge(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class GX extends e_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ki(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Co(e)}set(e,t,i){this._verifyNotCommitted();const r=_r(e,this._firestore),s=Yf(r.converter,t,i),o=Hf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Ne.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=_r(e,this._firestore);let o;return o=typeof(t=k(t))=="string"||t instanceof zr?X1(this._dataReader,"WriteBatch.update",s._key,t,i,r):Y1(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ne.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_r(e,this._firestore);return this._mutations=this._mutations.concat(new ac(t._key,Ne.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new E(v.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _r(n,e){if((n=k(n)).firestore!==e)throw new E(v.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zX(n){n=he(n,Se);const e=he(n.firestore,Me);return G5(_t(e),n._key).then(t=>t_(e,n,t))}class xo extends e_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ki(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,t)}}function WX(n){n=he(n,Se);const e=he(n.firestore,Me),t=_t(e),i=new xo(e);return rX(t,n._key).then(r=>new Ji(e,i,n._key,r,new bs(r!==null&&r.hasLocalMutations,!0),n.converter))}function KX(n){n=he(n,Se);const e=he(n.firestore,Me);return G5(_t(e),n._key,{source:"server"}).then(t=>t_(e,n,t))}function HX(n){n=he(n,Ut);const e=he(n.firestore,Me),t=_t(e),i=new xo(e);return a4(n._query),j5(t,n._query).then(r=>new Wr(e,i,n,r))}function QX(n){n=he(n,Ut);const e=he(n.firestore,Me),t=_t(e),i=new xo(e);return sX(t,n._query).then(r=>new Wr(e,i,n,r))}function YX(n){n=he(n,Ut);const e=he(n.firestore,Me),t=_t(e),i=new xo(e);return j5(t,n._query,{source:"server"}).then(r=>new Wr(e,i,n,r))}function kb(n,e,t){n=he(n,Se);const i=he(n.firestore,Me),r=Yf(n.converter,e,t);return ih(i,[Hf(Co(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Ne.none())])}function bb(n,e,t,...i){n=he(n,Se);const r=he(n.firestore,Me),s=Co(r);let o;return o=typeof(e=k(e))=="string"||e instanceof zr?X1(s,"updateDoc",n._key,e,t,i):Y1(s,"updateDoc",n._key,e),ih(r,[o.toMutation(n._key,Ne.exists(!0))])}function XX(n){return ih(he(n.firestore,Me),[new ac(n._key,Ne.none())])}function JX(n,e){const t=he(n.firestore,Me),i=Zd(n),r=Yf(n.converter,e);return ih(t,[Hf(Co(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Ne.exists(!1))]).then(()=>i)}function f4(n,...e){var t,i,r;n=k(n);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||_g(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(_g(e[o])){const h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let c,l,u;if(n instanceof Se)l=he(n.firestore,Me),u=sc(n._key.path),c={next:h=>{e[o]&&e[o](t_(l,n,h))},error:e[o+1],complete:e[o+2]};else{const h=he(n,Ut);l=he(h.firestore,Me),u=h._query;const d=new xo(l);c={next:p=>{e[o]&&e[o](new Wr(l,d,h,p))},error:e[o+1],complete:e[o+2]},a4(n._query)}return function(h,d,p,m){const _=new Gf(m),y=new F1(d,_,p);return h.asyncQueue.enqueueAndForget(async()=>O1(await Oa(h),y)),()=>{_.Tc(),h.asyncQueue.enqueueAndForget(async()=>M1(await Oa(h),y))}}(_t(l),u,a,c)}function ZX(n,e){return oX(_t(n=he(n,Me)),_g(e)?e:{next:e})}function ih(n,e){return function(t,i){const r=new ct;return t.asyncQueue.enqueueAndForget(async()=>MY(await K1(t),i,r)),r.promise}(_t(n),e)}function t_(n,e,t){const i=t.docs.get(e._key),r=new xo(n);return new Ji(n,r,e._key,i,new bs(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Co(e)}get(e){const t=_r(e,this._firestore),i=new GX(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||r.length!==1)return F();const s=r[0];if(s.isFoundDocument())return new Xl(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new Xl(this._firestore,i,t._key,null,t.converter);throw F()})}set(e,t,i){const r=_r(e,this._firestore),s=Yf(r.converter,t,i),o=Hf(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,o),this}update(e,t,i,...r){const s=_r(e,this._firestore);let o;return o=typeof(t=k(t))=="string"||t instanceof zr?X1(this._dataReader,"Transaction.update",s._key,t,i,r):Y1(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=_r(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_r(e,this._firestore),i=new xo(this._firestore);return super.get(e).then(r=>new Ji(this._firestore,i,t._key,r._document,new bs(!1,!1),t.converter))}}function tJ(n,e,t){n=he(n,Me);const i=Object.assign(Object.assign({},qX),t);return function(r){if(r.maxAttempts<1)throw new E(v.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),aX(_t(n),r=>e(new eJ(n,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nJ(){return new th("deleteField")}function iJ(){return new Q1("serverTimestamp")}function rJ(...n){return new CX("arrayUnion",n)}function sJ(...n){return new SX("arrayRemove",n)}function oJ(n){return new xX("increment",n)}(function(n,e=!0){(function(t){rc=t})(fn),Ue(new fe("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=new Me(r,new hH(t.getProvider("auth-internal")),new mH(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC")),_e(vk,"3.4.12",n),_e(vk,"3.4.12","esm2017")})();const aJ="@firebase/firestore-compat",cJ="0.1.21";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new E("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){if(typeof Uint8Array=="undefined")throw new E("unimplemented","Uint8Arrays are not available in this environment.")}function Ib(){if(!EH())throw new E("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Jl{constructor(e){this._delegate=e}static fromBase64String(e){return Ib(),new Jl(ki.fromBase64String(e))}static fromUint8Array(e){return Eb(),new Jl(ki.fromUint8Array(e))}toBase64(){return Ib(),this._delegate.toBase64()}toUint8Array(){return Eb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(n){return lJ(n,["next","error","complete"])}function lJ(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJ{enableIndexedDbPersistence(e,t){return mX(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return gX(e._delegate)}clearIndexedDbPersistence(e){return yX(e._delegate)}}class p4{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){uX(this._delegate,e,t,i)}enableNetwork(){return wX(this._delegate)}disableNetwork(){return vX(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,z5("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return _X(this._delegate)}onSnapshotsInSync(e){return ZX(this._delegate,e)}get app(){if(!this._appCompat)throw new E("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ma(this,K5(this._delegate,e))}catch(t){throw jt(t,"collection()","Firestore.collection()")}}doc(e){try{return new xn(this,Zd(this._delegate,e))}catch(t){throw jt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gt(this,hX(this._delegate,e))}catch(t){throw jt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return tJ(this._delegate,t=>e(new m4(this,t)))}batch(){return _t(this._delegate),new g4(new jX(this._delegate,e=>ih(this._delegate,e)))}loadBundle(e){return kX(this._delegate,e)}namedQuery(e){return bX(this._delegate,e).then(t=>t?new Gt(this,t):null)}}class Xf extends e_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jl(new ki(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xn.forKey(t,this.firestore,null)}}function hJ(n){aH(n)}class m4{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xf(e)}get(e){const t=Es(e);return this._delegate.get(t).then(i=>new Zl(this._firestore,new Ji(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Es(e);return i?(n_("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Es(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Es(e);return this._delegate.delete(t),this}}class g4{constructor(e){this._delegate=e}set(e,t,i){const r=Es(e);return i?(n_("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Es(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Es(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class oo{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new il(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eu(this._firestore,i),t!=null?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=oo.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new oo(e,new Xf(e),t),r.set(t,s)),s}}oo.INSTANCES=new WeakMap;class xn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xf(e)}static forPath(e,t,i){if(e.length%2!==0)throw new E("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xn(t,new Se(t._delegate,i,new D(e)))}static forKey(e,t,i){return new xn(t,new Se(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ma(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ma(this.firestore,K5(this._delegate,e))}catch(t){throw jt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=k(e),e instanceof Se?H5(this._delegate,e):!1}set(e,t){t=n_("DocumentReference.set",t);try{return t?kb(this._delegate,e,t):kb(this._delegate,e)}catch(i){throw jt(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?bb(this._delegate,e):bb(this._delegate,e,t,...i)}catch(r){throw jt(r,"updateDoc()","DocumentReference.update()")}}delete(){return XX(this._delegate)}onSnapshot(...e){const t=y4(e),i=_4(e,r=>new Zl(this.firestore,new Ji(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return f4(this._delegate,t,i)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=WX(this._delegate):(e==null?void 0:e.source)==="server"?t=KX(this._delegate):t=zX(this._delegate),t.then(i=>new Zl(this.firestore,new Ji(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new xn(this.firestore,e?this._delegate.withConverter(oo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jt(n,e,t){return n.message=n.message.replace(e,t),n}function y4(n){for(const e of n)if(typeof e=="object"&&!vg(e))return e;return{}}function _4(n,e){var t,i;let r;return vg(n[0])?r=n[0]:vg(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class Zl{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return o4(this._delegate,e._delegate)}}class eu extends Zl{data(e){const t=this._delegate.data(e);return cH(t!==void 0),t}}class Gt{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xf(e)}where(e,t,i){try{return new Gt(this.firestore,hr(this._delegate,PX(e,t,i)))}catch(r){throw jt(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Gt(this.firestore,hr(this._delegate,MX(e,t)))}catch(i){throw jt(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gt(this.firestore,hr(this._delegate,LX(e)))}catch(t){throw jt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Gt(this.firestore,hr(this._delegate,FX(e)))}catch(t){throw jt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gt(this.firestore,hr(this._delegate,$X(...e)))}catch(t){throw jt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gt(this.firestore,hr(this._delegate,UX(...e)))}catch(t){throw jt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gt(this.firestore,hr(this._delegate,BX(...e)))}catch(t){throw jt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gt(this.firestore,hr(this._delegate,VX(...e)))}catch(t){throw jt(t,"endAt()","Query.endAt()")}}isEqual(e){return Q5(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=QX(this._delegate):(e==null?void 0:e.source)==="server"?t=YX(this._delegate):t=HX(this._delegate),t.then(i=>new kg(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=y4(e),i=_4(e,r=>new kg(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return f4(this._delegate,t,i)}withConverter(e){return new Gt(this.firestore,e?this._delegate.withConverter(oo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class dJ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new eu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Gt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new dJ(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new eu(this._firestore,i))})}isEqual(e){return o4(this._delegate,e._delegate)}}class Ma extends Gt{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xn(this.firestore,e):null}doc(e){try{return e===void 0?new xn(this.firestore,Zd(this._delegate)):new xn(this.firestore,Zd(this._delegate,e))}catch(t){throw jt(t,"doc()","CollectionReference.doc()")}}add(e){return JX(this._delegate,e).then(t=>new xn(this.firestore,t))}isEqual(e){return H5(this._delegate,e._delegate)}withConverter(e){return new Ma(this.firestore,e?this._delegate.withConverter(oo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Es(n){return he(n,Se)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(...e){this._delegate=new zr(...e)}static documentId(){return new i_($e.keyField().canonicalString())}isEqual(e){return e=k(e),e instanceof zr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this._delegate=e}static serverTimestamp(){const e=iJ();return e._methodName="FieldValue.serverTimestamp",new ms(e)}static delete(){const e=nJ();return e._methodName="FieldValue.delete",new ms(e)}static arrayUnion(...e){const t=rJ(...e);return t._methodName="FieldValue.arrayUnion",new ms(t)}static arrayRemove(...e){const t=sJ(...e);return t._methodName="FieldValue.arrayRemove",new ms(t)}static increment(e){const t=oJ(e);return t._methodName="FieldValue.increment",new ms(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ={Firestore:p4,GeoPoint:Wf,Timestamp:Re,Blob:Jl,Transaction:m4,WriteBatch:g4,DocumentReference:xn,DocumentSnapshot:Zl,Query:Gt,QueryDocumentSnapshot:eu,QuerySnapshot:kg,CollectionReference:Ma,FieldPath:i_,FieldValue:ms,setLogLevel:hJ,CACHE_SIZE_UNLIMITED:pX};function pJ(n,e){n.INTERNAL.registerComponent(new fe("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},fJ)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mJ(n){pJ(n,(e,t)=>new p4(e,t,new uJ)),n.registerVersion(aJ,cJ)}mJ(Ze);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ="type.googleapis.com/google.protobuf.Int64Value",yJ="type.googleapis.com/google.protobuf.UInt64Value";function w4(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function bg(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>bg(e));if(typeof n=="function"||typeof n=="object")return w4(n,e=>bg(e));throw new Error("Data cannot be encoded in JSON: "+n)}function t0(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case gJ:case yJ:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>t0(e)):typeof n=="function"||typeof n=="object"?w4(n,e=>t0(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oa extends Ce{constructor(e,t,i){super(`${v4}/${e}`,t||""),this.details=i}}function _J(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function wJ(n,e){let t=_J(n),i=t,r;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!Tb[o])return new oa("internal","internal");t=Tb[o],i=o}const a=s.message;typeof a=="string"&&(i=a),r=s.details,r!==void 0&&(r=t0(r))}}catch{}return t==="ok"?null:new oa(t,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vJ{constructor(e,t,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||t.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}async getAuthToken(){if(!!this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(){if(this.appCheck){const e=await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(){const e=await this.getAuthToken(),t=await this.getMessagingToken(),i=await this.getAppCheckToken();return{authToken:e,messagingToken:t,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="us-central1";function kJ(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new oa("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class bJ{constructor(e,t,i,r,s=Cb,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new vJ(t,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=Cb}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function EJ(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function IJ(n,e,t){return i=>SJ(n,e,i,t||{})}function TJ(n,e,t){return i=>k4(n,e,i,t||{})}async function CJ(n,e,t,i){t["Content-Type"]="application/json";let r;try{r=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let s=null;try{s=await r.json()}catch{}return{status:r.status,json:s}}function SJ(n,e,t,i){const r=n._url(e);return k4(n,r,t,i)}async function k4(n,e,t,i){t=bg(t);const r={data:t},s={},o=await n.contextProvider.getContext();o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const a=i.timeout||7e4,c=kJ(a),l=await Promise.race([CJ(e,r,s,n.fetchImpl),c.promise,n.cancelAllRequests]);if(c.cancel(),!l)throw new oa("cancelled","Firebase Functions instance was deleted.");const u=wJ(l.status,l.json);if(u)throw u;if(!l.json)throw new oa("internal","Response is not valid JSON object.");let h=l.json.data;if(typeof h=="undefined"&&(h=l.json.result),typeof h=="undefined")throw new oa("internal","Response is missing data field.");return{data:t0(h)}}const Sb="@firebase/functions",xb="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xJ="auth-internal",AJ="app-check-internal",RJ="messaging-internal";function DJ(n,e){const t=(i,{instanceIdentifier:r})=>{const s=i.getProvider("app").getImmediate(),o=i.getProvider(xJ),a=i.getProvider(RJ),c=i.getProvider(AJ);return new bJ(s,o,a,c,r,n)};Ue(new fe(v4,t,"PUBLIC").setMultipleInstances(!0)),_e(Sb,xb,e),_e(Sb,xb,"esm2017")}function Ab(n,e,t){EJ(k(n),e,t)}function NJ(n,e,t){return IJ(k(n),e,t)}function PJ(n,e,t){return TJ(k(n),e,t)}DJ(fetch.bind(self));const OJ="@firebase/functions-compat",MJ="0.2.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return NJ(this._delegate,e,t)}httpsCallableFromURL(e,t){return PJ(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(t==null)throw new Ce("functions","No origin provided to useFunctionsEmulator()");if(t[2]==null)throw new Ce("functions","Port missing in origin provided to useFunctionsEmulator()");return Ab(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return Ab(this._delegate,e,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LJ="us-central1",FJ=(n,{instanceIdentifier:e})=>{const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("functions").getImmediate({identifier:e!=null?e:LJ});return new b4(t,i)};function $J(){const n={Functions:b4};Ze.INTERNAL.registerComponent(new fe("functions-compat",FJ,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$J();Ze.registerVersion(OJ,MJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UJ="/firebase-messaging-sw.js",BJ="/firebase-cloud-messaging-push-scope",E4="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",VJ="https://fcmregistrations.googleapis.com/v1",I4="google.c.a.c_id",qJ="google.c.a.c_l",GJ="google.c.a.ts",jJ="google.c.a.e";var Rb;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Rb||(Rb={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var tu;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(tu||(tu={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zJ(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="fcm_token_details_db",WJ=5,Db="fcm_token_object_Store";async function KJ(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(Gp))return null;let e=null;return(await Du(Gp,WJ,{upgrade:async(i,r,s,o)=>{var a;if(r<2||!i.objectStoreNames.contains(Db))return;const c=o.objectStore(Db),l=await c.index("fcmSenderId").get(n);if(await c.clear(),!!l){if(r===2){const u=l;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Ci(u.vapidKey)}}}else if(r===3){const u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ci(u.auth),p256dh:Ci(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ci(u.vapidKey)}}}else if(r===4){const u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ci(u.auth),p256dh:Ci(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ci(u.vapidKey)}}}}}})).close(),await Xo(Gp),await Xo("fcm_vapid_details_db"),await Xo("undefined"),HJ(e)?e:null}function HJ(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QJ="firebase-messaging-database",YJ=1,ao="firebase-messaging-store";let jp=null;function r_(){return jp||(jp=Du(QJ,YJ,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ao)}}})),jp}async function T4(n){const e=o_(n),i=await(await r_()).transaction(ao).objectStore(ao).get(e);if(i)return i;{const r=await KJ(n.appConfig.senderId);if(r)return await s_(n,r),r}}async function s_(n,e){const t=o_(n),r=(await r_()).transaction(ao,"readwrite");return await r.objectStore(ao).put(e,t),await r.done,e}async function XJ(n){const e=o_(n),i=(await r_()).transaction(ao,"readwrite");await i.objectStore(ao).delete(e),await i.done}function o_({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},en=new tn("messaging","Messaging",JJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZJ(n,e){var t;const i=await c_(n),r=S4(e),s={method:"POST",headers:i,body:JSON.stringify(r)};let o;try{o=await(await fetch(a_(n.appConfig),s)).json()}catch(a){throw en.create("token-subscribe-failed",{errorInfo:(t=a)===null||t===void 0?void 0:t.toString()})}if(o.error){const a=o.error.message;throw en.create("token-subscribe-failed",{errorInfo:a})}if(!o.token)throw en.create("token-subscribe-no-token");return o.token}async function eZ(n,e){var t;const i=await c_(n),r=S4(e.subscriptionOptions),s={method:"PATCH",headers:i,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${a_(n.appConfig)}/${e.token}`,s)).json()}catch(a){throw en.create("token-update-failed",{errorInfo:(t=a)===null||t===void 0?void 0:t.toString()})}if(o.error){const a=o.error.message;throw en.create("token-update-failed",{errorInfo:a})}if(!o.token)throw en.create("token-update-no-token");return o.token}async function C4(n,e){var t;const i=await c_(n),r={method:"DELETE",headers:i};try{const o=await(await fetch(`${a_(n.appConfig)}/${e}`,r)).json();if(o.error){const a=o.error.message;throw en.create("token-unsubscribe-failed",{errorInfo:a})}}catch(s){throw en.create("token-unsubscribe-failed",{errorInfo:(t=s)===null||t===void 0?void 0:t.toString()})}}function a_({projectId:n}){return`${VJ}/projects/${n}/registrations`}async function c_({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function S4({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==E4&&(r.web.applicationPubKey=i),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tZ=7*24*60*60*1e3;async function nZ(n){const e=await rZ(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ci(e.getKey("auth")),p256dh:Ci(e.getKey("p256dh"))},i=await T4(n.firebaseDependencies);if(i){if(sZ(i.subscriptionOptions,t))return Date.now()>=i.createTime+tZ?iZ(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await C4(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Nb(n.firebaseDependencies,t)}else return Nb(n.firebaseDependencies,t)}async function x4(n){const e=await T4(n.firebaseDependencies);e&&(await C4(n.firebaseDependencies,e.token),await XJ(n.firebaseDependencies));const t=await n.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function iZ(n,e){try{const t=await eZ(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await s_(n.firebaseDependencies,i),t}catch(t){throw await x4(n),t}}async function Nb(n,e){const i={token:await ZJ(n,e),createTime:Date.now(),subscriptionOptions:e};return await s_(n,i),i.token}async function rZ(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zJ(e)})}function sZ(n,e){const t=e.vapidKey===n.vapidKey,i=e.endpoint===n.endpoint,r=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&i&&r&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return oZ(e,n),aZ(e,n),cZ(e,n),e}function oZ(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r)}function aZ(n,e){!e.data||(n.data=e.data)}function cZ(n,e){var t,i,r,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const a=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(n.fcmOptions.link=a);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lZ(n){return typeof n=="object"&&!!n&&I4 in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */A4("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");A4("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function A4(n,e){const t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uZ(n){if(!n||!n.options)throw zp("App Configuration Object");if(!n.name)throw zp("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw zp(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function zp(n){return en.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=uZ(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(n){var e;try{n.swRegistration=await navigator.serviceWorker.register(UJ,{scope:BJ}),n.swRegistration.update().catch(()=>{})}catch(t){throw en.create("failed-service-worker-registration",{browserErrorMessage:(e=t)===null||e===void 0?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dZ(n,e){if(!e&&!n.swRegistration&&await R4(n),!(!e&&!!n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw en.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fZ(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=E4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(n,e){if(!navigator)throw en.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw en.create("permission-blocked");return await fZ(n,e==null?void 0:e.vapidKey),await dZ(n,e==null?void 0:e.serviceWorkerRegistration),nZ(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pZ(n,e,t){const i=mZ(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[I4],message_name:t[qJ],message_time:t[GJ],message_device_time:Math.floor(Date.now()/1e3)})}function mZ(n){switch(n){case tu.NOTIFICATION_CLICKED:return"notification_open";case tu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gZ(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===tu.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(Pb(t)):n.onMessageHandler.next(Pb(t)));const i=t.data;lZ(i)&&i[jJ]==="1"&&await pZ(n,t.messageType,i)}const Ob="@firebase/messaging",Mb="0.9.16";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yZ=n=>{const e=new hZ(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>gZ(e,t)),e},_Z=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>D4(e,i)}};function wZ(){Ue(new fe("messaging",yZ,"PUBLIC")),Ue(new fe("messaging-internal",_Z,"PRIVATE")),_e(Ob,Mb),_e(Ob,Mb,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vZ(n){if(!navigator)throw en.create("only-available-in-window");return n.swRegistration||await R4(n),x4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kZ(n,e){if(!navigator)throw en.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}async function bZ(n,e){return n=k(n),D4(n,e)}function EZ(n){return n=k(n),vZ(n)}function IZ(n,e){return n=k(n),kZ(n,e)}wZ();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",TZ="https://fcmregistrations.googleapis.com/v1",P4="FCM_MSG",CZ="google.c.a.c_id",SZ=3,xZ=1;var n0;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(n0||(n0={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var i0;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(i0||(i0={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function AZ(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="fcm_token_details_db",RZ=5,Lb="fcm_token_object_Store";async function DZ(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(Wp))return null;let e=null;return(await Du(Wp,RZ,{upgrade:async(i,r,s,o)=>{var a;if(r<2||!i.objectStoreNames.contains(Lb))return;const c=o.objectStore(Lb),l=await c.index("fcmSenderId").get(n);if(await c.clear(),!!l){if(r===2){const u=l;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Si(u.vapidKey)}}}else if(r===3){const u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Si(u.auth),p256dh:Si(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Si(u.vapidKey)}}}else if(r===4){const u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Si(u.auth),p256dh:Si(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Si(u.vapidKey)}}}}}})).close(),await Xo(Wp),await Xo("fcm_vapid_details_db"),await Xo("undefined"),NZ(e)?e:null}function NZ(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PZ="firebase-messaging-database",OZ=1,co="firebase-messaging-store";let Kp=null;function l_(){return Kp||(Kp=Du(PZ,OZ,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(co)}}})),Kp}async function u_(n){const e=d_(n),i=await(await l_()).transaction(co).objectStore(co).get(e);if(i)return i;{const r=await DZ(n.appConfig.senderId);if(r)return await h_(n,r),r}}async function h_(n,e){const t=d_(n),r=(await l_()).transaction(co,"readwrite");return await r.objectStore(co).put(e,t),await r.done,e}async function MZ(n){const e=d_(n),i=(await l_()).transaction(co,"readwrite");await i.objectStore(co).delete(e),await i.done}function d_({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LZ={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},fi=new tn("messaging","Messaging",LZ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FZ(n,e){var t;const i=await p_(n),r=M4(e),s={method:"POST",headers:i,body:JSON.stringify(r)};let o;try{o=await(await fetch(f_(n.appConfig),s)).json()}catch(a){throw fi.create("token-subscribe-failed",{errorInfo:(t=a)===null||t===void 0?void 0:t.toString()})}if(o.error){const a=o.error.message;throw fi.create("token-subscribe-failed",{errorInfo:a})}if(!o.token)throw fi.create("token-subscribe-no-token");return o.token}async function $Z(n,e){var t;const i=await p_(n),r=M4(e.subscriptionOptions),s={method:"PATCH",headers:i,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${f_(n.appConfig)}/${e.token}`,s)).json()}catch(a){throw fi.create("token-update-failed",{errorInfo:(t=a)===null||t===void 0?void 0:t.toString()})}if(o.error){const a=o.error.message;throw fi.create("token-update-failed",{errorInfo:a})}if(!o.token)throw fi.create("token-update-no-token");return o.token}async function O4(n,e){var t;const i=await p_(n),r={method:"DELETE",headers:i};try{const o=await(await fetch(`${f_(n.appConfig)}/${e}`,r)).json();if(o.error){const a=o.error.message;throw fi.create("token-unsubscribe-failed",{errorInfo:a})}}catch(s){throw fi.create("token-unsubscribe-failed",{errorInfo:(t=s)===null||t===void 0?void 0:t.toString()})}}function f_({projectId:n}){return`${TZ}/projects/${n}/registrations`}async function p_({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function M4({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==N4&&(r.web.applicationPubKey=i),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UZ=7*24*60*60*1e3;async function BZ(n){const e=await qZ(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Si(e.getKey("auth")),p256dh:Si(e.getKey("p256dh"))},i=await u_(n.firebaseDependencies);if(i){if(GZ(i.subscriptionOptions,t))return Date.now()>=i.createTime+UZ?VZ(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await O4(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Fb(n.firebaseDependencies,t)}else return Fb(n.firebaseDependencies,t)}async function Eg(n){const e=await u_(n.firebaseDependencies);e&&(await O4(n.firebaseDependencies,e.token),await MZ(n.firebaseDependencies));const t=await n.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function VZ(n,e){try{const t=await $Z(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await h_(n.firebaseDependencies,i),t}catch(t){throw await Eg(n),t}}async function Fb(n,e){const i={token:await FZ(n,e),createTime:Date.now(),subscriptionOptions:e};return await h_(n,i),i.token}async function qZ(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:AZ(e)})}function GZ(n,e){const t=e.vapidKey===n.vapidKey,i=e.endpoint===n.endpoint,r=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&i&&r&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jZ(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return zZ(e,n),WZ(e,n),KZ(e,n),e}function zZ(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r)}function WZ(n,e){!e.data||(n.data=e.data)}function KZ(n,e){var t,i,r,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const a=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(n.fcmOptions.link=a);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HZ(n){return typeof n=="object"&&!!n&&CZ in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QZ(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */L4("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");L4("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");async function YZ(n,e){const t=XZ(e,await n.firebaseDependencies.installations.getId());JZ(n,t)}function XZ(n,e){var t,i;const r={};return n.from&&(r.project_number=n.from),n.fcmMessageId&&(r.message_id=n.fcmMessageId),r.instance_id=e,n.notification?r.message_type=n0.DISPLAY_NOTIFICATION.toString():r.message_type=n0.DATA_MESSAGE.toString(),r.sdk_platform=SZ.toString(),r.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),n.collapse_key&&(r.collapse_key=n.collapse_key),r.event=xZ.toString(),!((t=n.fcmOptions)===null||t===void 0)&&t.analytics_label&&(r.analytics_label=(i=n.fcmOptions)===null||i===void 0?void 0:i.analytics_label),r}function JZ(n,e){const t={};t.event_time_ms=Math.floor(Date.now()).toString(),t.source_extension_json_proto3=JSON.stringify(e),n.logEvents.push(t)}function L4(n,e){const t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZZ(n,e){var t,i;const{newSubscription:r}=n;if(!r){await Eg(e);return}const s=await u_(e.firebaseDependencies);await Eg(e),e.vapidKey=(i=(t=s==null?void 0:s.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&i!==void 0?i:N4,await BZ(e)}async function eee(n,e){const t=iee(n);if(!t)return;e.deliveryMetricsExportedToBigQueryEnabled&&await YZ(e,t);const i=await F4();if(see(i))return oee(i,t);if(t.notification&&await aee(nee(t)),!!e&&e.onBackgroundMessageHandler){const r=jZ(t);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(r):e.onBackgroundMessageHandler.next(r)}}async function tee(n){var e,t;const i=(t=(e=n.notification)===null||e===void 0?void 0:e.data)===null||t===void 0?void 0:t[P4];if(i){if(n.action)return}else return;n.stopImmediatePropagation(),n.notification.close();const r=cee(i);if(!r)return;const s=new URL(r,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await ree(s);if(a?a=await a.focus():(a=await self.clients.openWindow(r),await QZ(3e3)),!!a)return i.messageType=i0.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,a.postMessage(i)}function nee(n){const e=Object.assign({},n.notification);return e.data={[P4]:n},e}function iee({data:n}){if(!n)return null;try{return n.json()}catch{return null}}async function ree(n){const e=await F4();for(const t of e){const i=new URL(t.url,self.location.href);if(n.host===i.host)return t}return null}function see(n){return n.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function oee(n,e){e.isFirebaseMessaging=!0,e.messageType=i0.PUSH_RECEIVED;for(const t of n)t.postMessage(e)}function F4(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function aee(n){var e;const{actions:t}=n,{maxActions:i}=Notification;return t&&i&&t.length>i&&console.warn(`This browser only supports ${i} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=n.title)!==null&&e!==void 0?e:"",n)}function cee(n){var e,t,i;const r=(t=(e=n.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&t!==void 0?t:(i=n.notification)===null||i===void 0?void 0:i.click_action;return r||(HZ(n.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lee(n){if(!n||!n.options)throw Hp("App Configuration Object");if(!n.name)throw Hp("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw Hp(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Hp(n){return fi.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=lee(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hee=n=>{const e=new uee(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return self.addEventListener("push",t=>{t.waitUntil(eee(t,e))}),self.addEventListener("pushsubscriptionchange",t=>{t.waitUntil(ZZ(t,e))}),self.addEventListener("notificationclick",t=>{t.waitUntil(tee(t))}),e};function dee(){Ue(new fe("messaging-sw",hee,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fee(n,e){if(self.document!==void 0)throw fi.create("only-available-in-sw");return n.onBackgroundMessageHandler=e,()=>{n.onBackgroundMessageHandler=null}}function pee(n,e){return n=k(n),fee(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dee();const mee="@firebase/messaging-compat",gee="0.1.16";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yee(){return self&&"ServiceWorkerGlobalScope"in self?wee():_ee()}function _ee(){return typeof window!="undefined"&&kn()&&m0()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function wee(){return kn()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class $b{constructor(e,t){this.app=e,this._delegate=t,this.app=e,this._delegate=t}async getToken(e){return bZ(this._delegate,e)}async deleteToken(){return EZ(this._delegate)}onMessage(e){return IZ(this._delegate,e)}onBackgroundMessage(e){return pee(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vee=n=>self&&"ServiceWorkerGlobalScope"in self?new $b(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging-sw").getImmediate()):new $b(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging").getImmediate()),kee={isSupported:yee};function bee(){Ze.INTERNAL.registerComponent(new fe("messaging-compat",vee,"PUBLIC").setServiceProps(kee))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bee();Ze.registerVersion(mee,gee);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="firebasestorage.googleapis.com",U4="storageBucket",Eee=2*60*1e3,Iee=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe extends Ce{constructor(e,t){super(Qp(e),`Firebase Storage: ${t} (${Qp(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fe.prototype)}_codeEquals(e){return Qp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function Qp(n){return"storage/"+n}function m_(){const n="An unknown error occurred, please check the error payload for server response.";return new Fe("unknown",n)}function Tee(n){return new Fe("object-not-found","Object '"+n+"' does not exist.")}function Cee(n){return new Fe("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function See(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Fe("unauthenticated",n)}function xee(){return new Fe("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Aee(n){return new Fe("unauthorized","User does not have permission to access '"+n+"'.")}function Ree(){return new Fe("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function B4(){return new Fe("canceled","User canceled the upload/download.")}function Dee(n){return new Fe("invalid-url","Invalid URL '"+n+"'.")}function Nee(n){return new Fe("invalid-default-bucket","Invalid default bucket '"+n+"'.")}function Pee(){return new Fe("no-default-bucket","No default bucket found. Did you set the '"+U4+"' property when initializing the app?")}function V4(){return new Fe("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Oee(){return new Fe("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Mee(){return new Fe("no-download-url","The given file does not have any download URLs.")}function aa(n){return new Fe("invalid-argument",n)}function q4(){return new Fe("app-deleted","The Firebase app was deleted.")}function G4(n){return new Fe("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rl(n,e){return new Fe("invalid-format","String does not match format '"+n+"': "+e)}function Ac(n){throw new Fe("internal-error","Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Mt.makeFromUrl(e,t)}catch{return new Mt(e,"")}if(i.path==="")return i;throw Nee(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function l(O){O.path_=decodeURIComponent(O.path)}const u="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${u}/b/${r}/o${d}`,"i"),m={bucket:1,path:3},_=t===$4?"(?:storage.googleapis.com|storage.cloud.google.com)":t,y="([^?#]*)",x=new RegExp(`^https?://${_}/${r}/${y}`,"i"),A=[{regex:a,indices:c,postModify:s},{regex:p,indices:m,postModify:l},{regex:x,indices:{bucket:1,path:2},postModify:l}];for(let O=0;O<A.length;O++){const W=A[O],V=W.regex.exec(e);if(V){const $=V[W.indices.bucket];let pe=V[W.indices.path];pe||(pe=""),i=new Mt($,pe),W.postModify(i);break}}if(i==null)throw Dee(e);return i}}class Lee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fee(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...y){l||(l=!0,e.apply(null,y))}function h(y){r=setTimeout(()=>{r=null,n(p,c())},y)}function d(){s&&clearTimeout(s)}function p(y,...x){if(l){d();return}if(y){d(),u.call(null,y,...x);return}if(c()||o){d(),u.call(null,y,...x);return}i<64&&(i*=2);let A;a===1?(a=2,A=0):A=(i+Math.random())*1e3,h(A)}let m=!1;function _(y){m||(m=!0,d(),!l&&(r!==null?(y||(a=2),clearTimeout(r),h(0)):y||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},t),_}function $ee(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uee(n){return n!==void 0}function Bee(n){return typeof n=="function"}function Vee(n){return typeof n=="object"&&!Array.isArray(n)}function Jf(n){return typeof n=="string"||n instanceof String}function Ub(n){return g_()&&n instanceof Blob}function g_(){return typeof Blob!="undefined"}function Ig(n,e,t,i){if(i<e)throw aa(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw aa(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function j4(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ds;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ds||(Ds={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qee{constructor(e,t,i,r,s,o,a,c,l,u,h){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,p)=>{this.resolve_=d,this.reject_=p,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Ih(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ds.NO_ERROR,c=s.getStatus();if(!a||this.isRetryStatusCode_(c)){const u=s.getErrorCode()===Ds.ABORT;i(!1,new Ih(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;i(!0,new Ih(l,s))})},t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());Uee(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=m_();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(r.canceled){const c=this.appDelete_?q4():B4();o(c)}else{const c=Ree();o(c)}};this.canceled_?t(!1,new Ih(!1,null,!0)):this.backoffId_=Fee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$ee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=this.additionalRetryCodes_.indexOf(e)!==-1;return t||r||s}}class Ih{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Gee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function jee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function zee(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Wee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Kee(n,e,t,i,r,s){const o=j4(n.urlParams),a=n.url+o,c=Object.assign({},n.headers);return zee(c,e),Gee(c,t),jee(c,s),Wee(c,i),new qee(a,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hee(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function Qee(...n){const e=Hee();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(g_())return new Blob(n);throw new Fe("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function Yee(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xee(n){return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yp{constructor(e,t){this.data=e,this.contentType=t||null}}function z4(n,e){switch(n){case An.RAW:return new Yp(W4(e));case An.BASE64:case An.BASE64URL:return new Yp(K4(n,e));case An.DATA_URL:return new Yp(Zee(e),ete(e))}throw m_()}function W4(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=i,o=n.charCodeAt(++t);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Jee(n){let e;try{e=decodeURIComponent(n)}catch{throw rl(An.DATA_URL,"Malformed data URL.")}return W4(e)}function K4(n,e){switch(n){case An.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw rl(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case An.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw rl(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Xee(e)}catch{throw rl(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class H4{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw rl(An.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=tte(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Zee(n){const e=new H4(n);return e.base64?K4(An.BASE64,e.rest):Jee(e.rest)}function ete(n){return new H4(n).contentType}function tte(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t){let i=0,r="";Ub(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ub(this.data_)){const i=this.data_,r=Yee(i,e,t);return r===null?null:new Ai(r)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ai(i,!0)}}static getBlob(...e){if(g_()){const t=e.map(i=>i instanceof Ai?i.data_:i);return new Ai(Qee.apply(null,t))}else{const t=e.map(o=>Jf(o)?z4(An.RAW,o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Ai(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(n){let e;try{e=JSON.parse(n)}catch{return null}return Vee(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nte(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ite(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function Q4(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rte(n,e){return e}class qt{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||rte}}let Th=null;function ste(n){return!Jf(n)||n.length<2?n:Q4(n)}function Zf(){if(Th)return Th;const n=[];n.push(new qt("bucket")),n.push(new qt("generation")),n.push(new qt("metageneration")),n.push(new qt("name","fullPath",!0));function e(s,o){return ste(o)}const t=new qt("name");t.xform=e,n.push(t);function i(s,o){return o!==void 0?Number(o):o}const r=new qt("size");return r.xform=i,n.push(r),n.push(new qt("timeCreated")),n.push(new qt("updated")),n.push(new qt("md5Hash",null,!0)),n.push(new qt("cacheControl",null,!0)),n.push(new qt("contentDisposition",null,!0)),n.push(new qt("contentEncoding",null,!0)),n.push(new qt("contentLanguage",null,!0)),n.push(new qt("contentType",null,!0)),n.push(new qt("metadata","customMetadata",!0)),Th=n,Th}function ote(n,e){function t(){const i=n.bucket,r=n.fullPath,s=new Mt(i,r);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function ate(n,e,t){const i={};i.type="file";const r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,e[o.server])}return ote(i,n),i}function Y4(n,e,t){const i=y_(e);return i===null?null:ate(n,i,t)}function cte(n,e,t,i){const r=y_(e);if(r===null||!Jf(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const u=n.bucket,h=n.fullPath,d="/b/"+o(u)+"/o/"+o(h),p=is(d,t,i),m=j4({alt:"media",token:l});return p+m})[0]}function __(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="prefixes",Vb="items";function lte(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Bb])for(const r of t[Bb]){const s=r.replace(/\/$/,""),o=n._makeStorageReference(new Mt(e,s));i.prefixes.push(o)}if(t[Vb])for(const r of t[Vb]){const s=n._makeStorageReference(new Mt(e,r.name));i.items.push(s)}return i}function ute(n,e,t){const i=y_(t);return i===null?null:lte(n,e,i)}class ar{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(n){if(!n)throw m_()}function ep(n,e){function t(i,r){const s=Y4(n,r,e);return pi(s!==null),s}return t}function hte(n,e){function t(i,r){const s=ute(n,e,r);return pi(s!==null),s}return t}function dte(n,e){function t(i,r){const s=Y4(n,r,e);return pi(s!==null),cte(s,r,n.host,n._protocol)}return t}function dc(n){function e(t,i){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=xee():r=See():t.getStatus()===402?r=Cee(n.bucket):t.getStatus()===403?r=Aee(n.path):r=i,r.serverResponse=i.serverResponse,r}return e}function tp(n){const e=dc(n);function t(i,r){let s=e(i,r);return i.getStatus()===404&&(s=Tee(n.path)),s.serverResponse=r.serverResponse,s}return t}function X4(n,e,t){const i=e.fullServerUrl(),r=is(i,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new ar(r,s,ep(n,t),o);return a.errorHandler=tp(e),a}function fte(n,e,t,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const o=e.bucketOnlyServerUrl(),a=is(o,n.host,n._protocol),c="GET",l=n.maxOperationRetryTime,u=new ar(a,c,hte(n,e.bucket),l);return u.urlParams=s,u.errorHandler=dc(e),u}function pte(n,e,t){const i=e.fullServerUrl(),r=is(i,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new ar(r,s,dte(n,t),o);return a.errorHandler=tp(e),a}function mte(n,e,t,i){const r=e.fullServerUrl(),s=is(r,n.host,n._protocol),o="PATCH",a=__(t,i),c={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,u=new ar(s,o,ep(n,i),l);return u.headers=c,u.body=a,u.errorHandler=tp(e),u}function gte(n,e){const t=e.fullServerUrl(),i=is(t,n.host,n._protocol),r="DELETE",s=n.maxOperationRetryTime;function o(c,l){}const a=new ar(i,r,o,s);return a.successCodes=[200,204],a.errorHandler=tp(e),a}function yte(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function J4(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=yte(null,e)),i}function _te(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let A="";for(let O=0;O<2;O++)A=A+Math.random().toString().slice(2);return A}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=J4(e,i,r),u=__(l,t),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+c+"--",p=Ai.getBlob(h,i,d);if(p===null)throw V4();const m={name:l.fullPath},_=is(s,n.host,n._protocol),y="POST",x=n.maxUploadRetryTime,N=new ar(_,y,ep(n,t),x);return N.urlParams=m,N.headers=o,N.body=p.uploadData(),N.errorHandler=dc(e),N}class r0{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function w_(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{pi(!1)}return pi(!!t&&(e||["active"]).indexOf(t)!==-1),t}function wte(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o=J4(e,i,r),a={name:o.fullPath},c=is(s,n.host,n._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=__(o,t),d=n.maxUploadRetryTime;function p(_){w_(_);let y;try{y=_.getResponseHeader("X-Goog-Upload-URL")}catch{pi(!1)}return pi(Jf(y)),y}const m=new ar(c,l,p,d);return m.urlParams=a,m.headers=u,m.body=h,m.errorHandler=dc(e),m}function vte(n,e,t,i){const r={"X-Goog-Upload-Command":"query"};function s(l){const u=w_(l,["active","final"]);let h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{pi(!1)}h||pi(!1);const d=Number(h);return pi(!isNaN(d)),new r0(d,i.size(),u==="final")}const o="POST",a=n.maxUploadRetryTime,c=new ar(t,o,s,a);return c.headers=r,c.errorHandler=dc(e),c}const qb=256*1024;function kte(n,e,t,i,r,s,o,a){const c=new r0(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=i.size()),i.size()!==c.total)throw Oee();const l=c.total-c.current;let u=l;r>0&&(u=Math.min(u,r));const h=c.current,d=h+u,m={"X-Goog-Upload-Command":u===l?"upload, finalize":"upload","X-Goog-Upload-Offset":`${c.current}`},_=i.slice(h,d);if(_===null)throw V4();function y(O,W){const V=w_(O,["active","final"]),$=c.current+u,pe=i.size();let we;return V==="final"?we=ep(e,s)(O,W):we=null,new r0($,pe,V==="final",we)}const x="POST",N=e.maxUploadRetryTime,A=new ar(t,x,y,N);return A.headers=m,A.body=_.uploadData(),A.progressCallback=a||null,A.errorHandler=dc(n),A}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bte={STATE_CHANGED:"state_changed"},zt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xp(n){switch(n){case"running":case"pausing":case"canceling":return zt.RUNNING;case"paused":return zt.PAUSED;case"success":return zt.SUCCESS;case"canceled":return zt.CANCELED;case"error":return zt.ERROR;default:return zt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ete{constructor(e,t,i){if(Bee(e)||t!=null||i!=null)this.next=e,this.error=t!=null?t:void 0,this.complete=i!=null?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Ite{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Ac("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Tte extends Ite{initXhr(){this.xhr_.responseType="text"}}function ei(){return new Tte}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Zf(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=wte(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ei,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=vte(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,ei,t,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=qb*this._chunkMultiplier,t=new r0(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=kte(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ei,r,s);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){qb*this._chunkMultiplier<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=X4(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ei,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=_te(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ei,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=B4(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Xp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new Ete(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Xp(this._state)){case zt.SUCCESS:Fo(this._resolve.bind(null,this.snapshot))();break;case zt.CANCELED:case zt.ERROR:const t=this._reject;Fo(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Xp(this._state)){case zt.RUNNING:case zt.PAUSED:e.next&&Fo(e.next.bind(e,this.snapshot))();break;case zt.SUCCESS:e.complete&&Fo(e.complete.bind(e))();break;case zt.CANCELED:case zt.ERROR:e.error&&Fo(e.error.bind(e,this._error))();break;default:e.error&&Fo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t){this._service=e,t instanceof Mt?this._location=t:this._location=Mt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new lo(e,t)}get root(){const e=new Mt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Q4(this._location.path)}get storage(){return this._service}get parent(){const e=nte(this._location.path);if(e===null)return null;const t=new Mt(this._location.bucket,e);return new lo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw G4(e)}}function Cte(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Z4(n,new Ai(e),t)}function Ste(n){const e={prefixes:[],items:[]};return eR(n,e).then(()=>e)}async function eR(n,e,t){const r=await tR(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await eR(n,e,r.nextPageToken)}function tR(n,e){e!=null&&typeof e.maxResults=="number"&&Ig("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=fte(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,ei)}function xte(n){n._throwIfRoot("getMetadata");const e=X4(n.storage,n._location,Zf());return n.storage.makeRequestWithTokens(e,ei)}function Ate(n,e){n._throwIfRoot("updateMetadata");const t=mte(n.storage,n._location,e,Zf());return n.storage.makeRequestWithTokens(t,ei)}function Rte(n){n._throwIfRoot("getDownloadURL");const e=pte(n.storage,n._location,Zf());return n.storage.makeRequestWithTokens(e,ei).then(t=>{if(t===null)throw Mee();return t})}function Dte(n){n._throwIfRoot("deleteObject");const e=gte(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ei)}function nR(n,e){const t=ite(n._location.path,e),i=new Mt(n._location.bucket,t);return new lo(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nte(n){return/^[A-Za-z]+:\/\//.test(n)}function Pte(n,e){return new lo(n,e)}function iR(n,e){if(n instanceof v_){const t=n;if(t._bucket==null)throw Pee();const i=new lo(t,t._bucket);return e!=null?iR(i,e):i}else return e!==void 0?nR(n,e):n}function Ote(n,e){if(e&&Nte(e)){if(n instanceof v_)return Pte(n,e);throw aa("To use ref(service, url), the first argument must be a Storage instance.")}else return iR(n,e)}function Gb(n,e){const t=e==null?void 0:e[U4];return t==null?null:Mt.makeFromBucketSpec(t,n)}function Mte(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:Pg(r,n.app.options.projectId))}class v_{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=$4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Eee,this._maxUploadRetryTime=Iee,this._requests=new Set,r!=null?this._bucket=Mt.makeFromBucketSpec(r,this._host):this._bucket=Gb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mt.makeFromBucketSpec(this._url,e):this._bucket=Gb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ig("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ig("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lo(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new Lee(q4());{const s=Kee(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()}}const jb="@firebase/storage",zb="0.9.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lte="storage";function Fte(n,e,t){return n=k(n),Cte(n,e,t)}function $te(n){return n=k(n),xte(n)}function Ute(n,e){return n=k(n),Ate(n,e)}function Bte(n,e){return n=k(n),tR(n,e)}function Vte(n){return n=k(n),Ste(n)}function qte(n){return n=k(n),Rte(n)}function Gte(n){return n=k(n),Dte(n)}function Wb(n,e){return n=k(n),Ote(n,e)}function jte(n,e){return nR(n,e)}function zte(n,e,t,i={}){Mte(n,e,t,i)}function Wte(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new v_(t,i,r,e,fn)}function Kte(){Ue(new fe(Lte,Wte,"PUBLIC").setMultipleInstances(!0)),_e(jb,zb,""),_e(jb,zb,"esm2017")}Kte();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ch(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new Ch(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(typeof t=="function"?s=o=>t(new Ch(o,this,this._ref)):s={next:t.next?o=>t.next(new Ch(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class Hb{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new zi(e,this._service))}get items(){return this._delegate.items.map(e=>new zi(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=jte(this._delegate,e);return new zi(t,this.storage)}get root(){return new zi(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new zi(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Kb(Fte(this._delegate,e,t),this)}putString(e,t=An.RAW,i){this._throwIfRoot("putString");const r=z4(t,e),s=Object.assign({},i);return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new Kb(new Z4(this._delegate,new Ai(r.data,!0),s),this)}listAll(){return Vte(this._delegate).then(e=>new Hb(e,this.storage))}list(e){return Bte(this._delegate,e||void 0).then(t=>new Hb(t,this.storage))}getMetadata(){return $te(this._delegate)}updateMetadata(e){return Ute(this._delegate,e)}getDownloadURL(){return qte(this._delegate)}delete(){return this._throwIfRoot("delete"),Gte(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw G4(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Qb(e))throw aa("ref() expected a child path but got a URL, use refFromURL instead.");return new zi(Wb(this._delegate,e),this)}refFromURL(e){if(!Qb(e))throw aa("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Mt.makeFromUrl(e,this._delegate.host)}catch{throw aa("refFromUrl() expected a valid full URL but got an invalid one.")}return new zi(Wb(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){zte(this._delegate,e,t,i)}}function Qb(n){return/^[A-Za-z]+:\/\//.test(n)}const Hte="@firebase/storage-compat",Qte="0.1.17";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yte="storage-compat";function Xte(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new rR(t,i)}function Jte(n){const e={TaskState:zt,TaskEvent:bte,StringFormat:An,Storage:rR,Reference:zi};n.INTERNAL.registerComponent(new fe(Yte,Xte,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(Hte,Qte)}Jte(Ze);const Yb="@firebase/performance",Tg="0.5.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=Tg,Zte="FB-PERF-TRACE-START",ene="FB-PERF-TRACE-STOP",Cg="FB-PERF-TRACE-MEASURE",oR="_wt_",aR="_fp",cR="_fcp",lR="_fid",uR="@firebase/performance/config",hR="@firebase/performance/configexpire",tne="performance",dR="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nne={["trace started"]:"Trace {$traceName} was started before.",["trace stopped"]:"Trace {$traceName} is not running.",["nonpositive trace startTime"]:"Trace {$traceName} startTime should be positive.",["nonpositive trace duration"]:"Trace {$traceName} duration should be positive.",["no window"]:"Window is not available.",["no app id"]:"App id is not available.",["no project id"]:"Project id is not available.",["no api key"]:"Api key is not available.",["invalid cc log"]:"Attempted to queue invalid cc event",["FB not default"]:"Performance can only start when Firebase app instance is the default one.",["RC response not ok"]:"RC response is not ok",["invalid attribute name"]:"Attribute name {$attributeName} is invalid.",["invalid attribute value"]:"Attribute value {$attributeValue} is invalid.",["invalid custom metric name"]:"Custom metric name {$customMetricName} is invalid",["invalid String merger input"]:"Input for String merger is invalid, contact support team to resolve.",["already initialized"]:"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},Pt=new tn(tne,dR,nne);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Ei(dR);bi.logLevel=Q.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp,fR;class ut{constructor(e){if(this.window=e,!e)throw Pt.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,i){!this.performance||!this.performance.measure||this.performance.measure(e,t,i)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!m0()?(bi.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):kn()?!0:(bi.info("IndexedDB is not supported by current browswer"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(r=>{for(const s of r.getEntries())t(s)}).observe({entryTypes:[e]})}static getInstance(){return Jp===void 0&&(Jp=new ut(fR)),Jp}}function ine(n){fR=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pR;function rne(n){const e=n.getId();return e.then(t=>{pR=t}),e}function k_(){return pR}function sne(n){const e=n.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(n,e){const t=n.length-e.length;if(t<0||t>1)throw Pt.create("invalid String merger input");const i=[];for(let r=0;r<n.length;r++)i.push(n.charAt(r)),e.length>r&&i.push(e.charAt(r));return i.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zp;class wn{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Xb("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Xb("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Zp===void 0&&(Zp=new wn),Zp}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ca;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(ca||(ca={}));const one=["firebase_","google_","ga_"],ane=new RegExp("^[a-zA-Z]\\w*$"),cne=40,lne=100;function une(){const n=ut.getInstance().navigator;return"serviceWorker"in n?n.serviceWorker.controller?2:3:1}function mR(){switch(ut.getInstance().document.visibilityState){case"visible":return ca.VISIBLE;case"hidden":return ca.HIDDEN;default:return ca.UNKNOWN}}function hne(){const e=ut.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function dne(n){return n.length===0||n.length>cne?!1:!one.some(t=>n.startsWith(t))&&!!n.match(ane)}function fne(n){return n.length!==0&&n.length<=lne}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.appId;if(!t)throw Pt.create("no app id");return t}function pne(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.projectId;if(!t)throw Pt.create("no project id");return t}function mne(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw Pt.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gne="0.0.1",$n={loggingEnabled:!0},yne="FIREBASE_INSTALLATIONS_AUTH";function _ne(n,e){const t=wne();return t?(Jb(t),Promise.resolve()):bne(n,e).then(Jb).then(i=>vne(i),()=>{})}function wne(){const n=ut.getInstance().localStorage;if(!n)return;const e=n.getItem(hR);if(!e||!Ene(e))return;const t=n.getItem(uR);if(!!t)try{return JSON.parse(t)}catch{return}}function vne(n){const e=ut.getInstance().localStorage;!n||!e||(e.setItem(uR,JSON.stringify(n)),e.setItem(hR,String(Date.now()+wn.getInstance().configTimeToLive*60*60*1e3)))}const kne="Could not fetch config, will use default configs";function bne(n,e){return sne(n.installations).then(t=>{const i=pne(n.app),r=mne(n.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${i}/namespaces/fireperf:fetch?key=${r}`,o=new Request(s,{method:"POST",headers:{Authorization:`${yne} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:gR(n.app),app_version:sR,sdk_version:gne})});return fetch(o).then(a=>{if(a.ok)return a.json();throw Pt.create("RC response not ok")})}).catch(()=>{bi.info(kne)})}function Jb(n){if(!n)return n;const e=wn.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=$n.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):$n.logSource&&(e.logSource=$n.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:$n.logEndPointUrl&&(e.logEndPointUrl=$n.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:$n.transportKey&&(e.transportKey=$n.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):$n.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=$n.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):$n.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=$n.tracesSamplingRate),e.logTraceAfterSampling=Zb(e.tracesSamplingRate),e.logNetworkAfterSampling=Zb(e.networkRequestsSamplingRate),n}function Ene(n){return Number(n)>Date.now()}function Zb(n){return Math.random()<=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b_=1,em;function yR(n){return b_=2,em=em||Tne(n),em}function Ine(){return b_===3}function Tne(n){return Cne().then(()=>rne(n.installations)).then(e=>_ne(n,e)).then(()=>eE(),()=>eE())}function Cne(){const n=ut.getInstance().document;return new Promise(e=>{if(n&&n.readyState!=="complete"){const t=()=>{n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function eE(){b_=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=10*1e3,Sne=5.5*1e3,_R=3,xne=1e3;let s0=_R,Ar=[],tE=!1;function Ane(){tE||(np(Sne),tE=!0)}function np(n){setTimeout(()=>{if(s0!==0){if(!Ar.length)return np(E_);Rne()}},n)}function Rne(){const n=Ar.splice(0,xne),e=n.map(i=>({source_extension_json_proto3:i.message,event_time_ms:String(i.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:wn.getInstance().logSource,log_event:e};Dne(t,n).catch(()=>{Ar=[...n,...Ar],s0--,bi.info(`Tries left: ${s0}.`),np(E_)})}function Dne(n,e){return Nne(n).then(t=>(t.ok||bi.info("Call to Firebase backend failed."),t.json())).then(t=>{const i=Number(t.nextRequestWaitMillis);let r=E_;isNaN(i)||(r=Math.max(i,r));const s=t.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(Ar=[...e,...Ar],bi.info("Retry transport request later.")),s0=_R,np(r)})}function Nne(n){const e=wn.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}function Pne(n){if(!n.eventTime||!n.message)throw Pt.create("invalid cc log");Ar=[...Ar,n]}function One(n){return(...e)=>{const t=n(...e);Pne({message:t,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tm;function wR(n,e){tm||(tm=One(Lne)),tm(n,e)}function Sh(n){const e=wn.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||!ut.getInstance().requiredApisAvailable()||n.isAuto&&mR()!==ca.VISIBLE||(Ine()?nm(n):yR(n.performanceController).then(()=>nm(n),()=>nm(n)))}function nm(n){if(!k_())return;const e=wn.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>wR(n,1),0)}function Mne(n){const e=wn.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,i=e.logEndPointUrl.split("?")[0],r=e.flTransportEndpointUrl.split("?")[0];t===i||t===r||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>wR(n,0),0)}function Lne(n,e){return e===0?Fne(n):$ne(n)}function Fne(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:vR(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function $ne(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);const t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const i={application_info:vR(n.performanceController.app),trace_metric:e};return JSON.stringify(i)}function vR(n){return{google_app_id:gR(n),app_instance_id:k_(),web_app_info:{sdk_version:sR,page_url:ut.getInstance().getUrl(),service_worker_status:une(),visibility_state:mR(),effective_connection_type:hne()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Une=100,Bne="_",Vne=[aR,cR,lR];function qne(n,e){return n.length===0||n.length>Une?!1:e&&e.startsWith(oR)&&Vne.indexOf(n)>-1||!n.startsWith(Bne)}function Gne(n){const e=Math.floor(n);return e<n&&bi.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t,i=!1,r){this.performanceController=e,this.name=t,this.isAuto=i,this.state=1,this.customAttributes={},this.counters={},this.api=ut.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${Zte}-${this.randomId}-${this.name}`,this.traceStopMark=`${ene}-${this.randomId}-${this.name}`,this.traceMeasure=r||`${Cg}-${this.randomId}-${this.name}`,r&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw Pt.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw Pt.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Sh(this)}record(e,t,i){if(e<=0)throw Pt.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Pt.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),i&&i.attributes&&(this.customAttributes=Object.assign({},i.attributes)),i&&i.metrics)for(const r of Object.keys(i.metrics))isNaN(Number(i.metrics[r]))||(this.counters[r]=Math.floor(Number(i.metrics[r])));Sh(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(qne(e,this.name))this.counters[e]=Gne(t!=null?t:0);else throw Pt.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const i=dne(e),r=fne(t);if(i&&r){this.customAttributes[e]=t;return}if(!i)throw Pt.create("invalid attribute name",{attributeName:e});if(!r)throw Pt.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,i,r){const s=ut.getInstance().getUrl();if(!s)return;const o=new Rr(e,oR+s,!0),a=Math.floor(ut.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(t[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const c="first-paint",l="first-contentful-paint";if(i){const u=i.find(d=>d.name===c);u&&u.startTime&&o.putMetric(aR,Math.floor(u.startTime*1e3));const h=i.find(d=>d.name===l);h&&h.startTime&&o.putMetric(cR,Math.floor(h.startTime*1e3)),r&&o.putMetric(lR,Math.floor(r*1e3))}Sh(o)}static createUserTimingTrace(e,t){const i=new Rr(e,t,!1,t);Sh(i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n,e){const t=e;if(!t||t.responseStart===void 0)return;const i=ut.getInstance().getTimeOrigin(),r=Math.floor((t.startTime+i)*1e3),s=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,o=Math.floor((t.responseEnd-t.startTime)*1e3),a=t.name&&t.name.split("?")[0],c={performanceController:n,url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};Mne(c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jne=5e3;function iE(n){!k_()||(setTimeout(()=>Wne(n),0),setTimeout(()=>zne(n),0),setTimeout(()=>Kne(n),0))}function zne(n){const e=ut.getInstance(),t=e.getEntriesByType("resource");for(const i of t)nE(n,i);e.setupObserver("resource",i=>nE(n,i))}function Wne(n){const e=ut.getInstance(),t=e.getEntriesByType("navigation"),i=e.getEntriesByType("paint");if(e.onFirstInputDelay){let r=setTimeout(()=>{Rr.createOobTrace(n,t,i),r=void 0},jne);e.onFirstInputDelay(s=>{r&&(clearTimeout(r),Rr.createOobTrace(n,t,i,s))})}else Rr.createOobTrace(n,t,i)}function Kne(n){const e=ut.getInstance(),t=e.getEntriesByType("measure");for(const i of t)rE(n,i);e.setupObserver("measure",i=>rE(n,i))}function rE(n,e){const t=e.name;t.substring(0,Cg.length)!==Cg&&Rr.createUserTimingTrace(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hne{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),ut.getInstance().requiredApisAvailable()?p0().then(t=>{t&&(Ane(),yR(this).then(()=>iE(this),()=>iE(this)),this.initialized=!0)}).catch(t=>{bi.info(`Environment doesn't support IndexedDB: ${t}`)}):bi.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){wn.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return wn.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){wn.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return wn.getInstance().dataCollectionEnabled}}const Qne="[DEFAULT]";function Yne(n,e){return n=k(n),new Rr(n,e)}const Xne=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),i=n.getProvider("installations-internal").getImmediate();if(t.name!==Qne)throw Pt.create("FB not default");if(typeof window=="undefined")throw Pt.create("no window");ine(window);const r=new Hne(t,i);return r._init(e),r};function Jne(){Ue(new fe("performance",Xne,"PUBLIC")),_e(Yb,Tg),_e(Yb,Tg,"esm2017")}Jne();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zne{constructor(e,t){this.app=e,this._delegate=t}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return Yne(this._delegate,e)}}const eie="@firebase/performance-compat",tie="0.1.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nie(n){n.INTERNAL.registerComponent(new fe("performance-compat",iie,"PUBLIC")),n.registerVersion(eie,tie)}function iie(n){const e=n.getProvider("app-compat").getImmediate(),t=n.getProvider("performance").getImmediate();return new Zne(e,t)}nie(Ze);const im="@firebase/remote-config",sE="0.3.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sie="remote-config";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oie={["registration-window"]:"Undefined window object. This SDK only supports usage in a browser environment.",["registration-project-id"]:"Undefined project identifier. Check Firebase app initialization.",["registration-api-key"]:"Undefined API key. Check Firebase app initialization.",["registration-app-id"]:"Undefined app identifier. Check Firebase app initialization.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",["fetch-client-network"]:"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-timeout"]:'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',["fetch-throttle"]:'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',["fetch-client-parse"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["indexed-db-unavailable"]:"Indexed DB is not supported by current browser"},cn=new tn("remoteconfig","Remote Config",oie);function aie(n,e){return n instanceof Ce&&n.code.indexOf(e)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cie=!1,lie="",oE=0,uie=["1","true","t","yes","y","on"];class rm{constructor(e,t=lie){this._source=e,this._value=t}asString(){return this._value}asBoolean(){return this._source==="static"?cie:uie.indexOf(this._value.toLowerCase())>=0}asNumber(){if(this._source==="static")return oE;let e=Number(this._value);return isNaN(e)&&(e=oE),e}getSource(){return this._source}}async function kR(n){const e=k(n),[t,i]=await Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()]);return!t||!t.config||!t.eTag||t.eTag===i?!1:(await Promise.all([e._storageCache.setActiveConfig(t.config),e._storage.setActiveConfigEtag(t.eTag)]),!0)}function bR(n){const e=k(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}async function ER(n){const e=k(n),t=new rie;setTimeout(async()=>{t.abort()},e.settings.fetchTimeoutMillis);try{await e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:t}),await e._storageCache.setLastFetchStatus("success")}catch(i){const r=aie(i,"fetch-throttle")?"throttle":"failure";throw await e._storageCache.setLastFetchStatus(r),i}}function hie(n){const e=k(n);return gie(e._storageCache.getActiveConfig(),e.defaultConfig).reduce((t,i)=>(t[i]=rh(n,i),t),{})}function die(n,e){return rh(k(n),e).asBoolean()}function fie(n,e){return rh(k(n),e).asNumber()}function pie(n,e){return rh(k(n),e).asString()}function rh(n,e){const t=k(n);t._isInitializationComplete||t._logger.debug(`A value was requested for key "${e}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const i=t._storageCache.getActiveConfig();return i&&i[e]!==void 0?new rm("remote",i[e]):t.defaultConfig&&t.defaultConfig[e]!==void 0?new rm("default",String(t.defaultConfig[e])):(t._logger.debug(`Returning static value for key "${e}". Define a default or remote value if this is unintentional.`),new rm("static"))}function mie(n,e){const t=k(n);switch(e){case"debug":t._logger.logLevel=Q.DEBUG;break;case"silent":t._logger.logLevel=Q.SILENT;break;default:t._logger.logLevel=Q.ERROR}}function gie(n={},e={}){return Object.keys(Object.assign(Object.assign({},n),e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yie{constructor(e,t,i,r){this.client=e,this.storage=t,this.storageCache=i,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const i=Date.now()-t,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}async fetch(e){const[t,i]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(i&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return i;e.eTag=i&&i.eTag;const r=await this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(r)),await Promise.all(s),r}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ie(n=navigator){return n.languages&&n.languages[0]||n.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{constructor(e,t,i,r,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=o}async fetch(e){var t,i,r;const[s,o]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,l={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:s,app_instance_id_token:o,app_id:this.appId,language_code:_ie()},h={method:"POST",headers:l,body:JSON.stringify(u)},d=fetch(c,h),p=new Promise((A,O)=>{e.signal.addEventListener(()=>{const W=new Error("The operation was aborted.");W.name="AbortError",O(W)})});let m;try{await Promise.race([d,p]),m=await d}catch(A){let O="fetch-client-network";throw((t=A)===null||t===void 0?void 0:t.name)==="AbortError"&&(O="fetch-timeout"),cn.create(O,{originalErrorMessage:(i=A)===null||i===void 0?void 0:i.message})}let _=m.status;const y=m.headers.get("ETag")||void 0;let x,N;if(m.status===200){let A;try{A=await m.json()}catch(O){throw cn.create("fetch-client-parse",{originalErrorMessage:(r=O)===null||r===void 0?void 0:r.message})}x=A.entries,N=A.state}if(N==="INSTANCE_STATE_UNSPECIFIED"?_=500:N==="NO_CHANGE"?_=304:(N==="NO_TEMPLATE"||N==="EMPTY_CONFIG")&&(x={}),_!==304&&_!==200)throw cn.create("fetch-status",{httpStatus:_});return{status:_,eTag:y,config:x}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vie(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(cn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kie(n){if(!(n instanceof Ce)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class bie{constructor(e,t){this.client=e,this.storage=t}async fetch(e){const t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:i}){await vie(e.signal,t);try{const r=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),r}catch(r){if(!kie(r))throw r;const s={throttleEndTimeMillis:Date.now()+Yh(i),backoffCount:i+1};return await this.storage.setThrottleMetadata(s),this.attemptFetch(e,s)}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eie=60*1e3,Iie=12*60*60*1e3;class Tie{constructor(e,t,i,r,s){this.app=e,this._client=t,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Eie,minimumFetchIntervalMillis:Iie},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(n,e){var t;const i=n.target.error||void 0;return cn.create(e,{originalErrorMessage:i&&((t=i)===null||t===void 0?void 0:t.message)})}const us="app_namespace_store",Cie="firebase_remote_config",Sie=1;function xie(){return new Promise((n,e)=>{var t;try{const i=indexedDB.open(Cie,Sie);i.onerror=r=>{e(Wh(r,"storage-open"))},i.onsuccess=r=>{n(r.target.result)},i.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(us,{keyPath:"compositeKey"})}}}catch(i){e(cn.create("storage-open",{originalErrorMessage:(t=i)===null||t===void 0?void 0:t.message}))}})}class Aie{constructor(e,t,i,r=xie()){this.appId=e,this.appName=t,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(e){const t=await this.openDbPromise;return new Promise((i,r)=>{var s;const a=t.transaction([us],"readonly").objectStore(us),c=this.createCompositeKey(e);try{const l=a.get(c);l.onerror=u=>{r(Wh(u,"storage-get"))},l.onsuccess=u=>{const h=u.target.result;i(h?h.value:void 0)}}catch(l){r(cn.create("storage-get",{originalErrorMessage:(s=l)===null||s===void 0?void 0:s.message}))}})}async set(e,t){const i=await this.openDbPromise;return new Promise((r,s)=>{var o;const c=i.transaction([us],"readwrite").objectStore(us),l=this.createCompositeKey(e);try{const u=c.put({compositeKey:l,value:t});u.onerror=h=>{s(Wh(h,"storage-set"))},u.onsuccess=()=>{r()}}catch(u){s(cn.create("storage-set",{originalErrorMessage:(o=u)===null||o===void 0?void 0:o.message}))}})}async delete(e){const t=await this.openDbPromise;return new Promise((i,r)=>{var s;const a=t.transaction([us],"readwrite").objectStore(us),c=this.createCompositeKey(e);try{const l=a.delete(c);l.onerror=u=>{r(Wh(u,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){r(cn.create("storage-delete",{originalErrorMessage:(s=l)===null||s===void 0?void 0:s.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rie{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),r=await e;r&&(this.lastFetchStatus=r);const s=await t;s&&(this.lastSuccessfulFetchTimestampMillis=s);const o=await i;o&&(this.activeConfig=o)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Die(){Ue(new fe(sie,n,"PUBLIC").setMultipleInstances(!0)),_e(im,sE),_e(im,sE,"esm2017");function n(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(typeof window=="undefined")throw cn.create("registration-window");if(!kn())throw cn.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=i.options;if(!s)throw cn.create("registration-project-id");if(!o)throw cn.create("registration-api-key");if(!a)throw cn.create("registration-app-id");t=t||"firebase";const c=new Aie(a,i.name,t),l=new Rie(c),u=new Ei(im);u.logLevel=Q.ERROR;const h=new wie(r,fn,t,s,o,a),d=new bie(h,c),p=new yie(d,c,l,u),m=new Tie(i,p,l,c,u);return bR(m),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nie(n){return n=k(n),await ER(n),kR(n)}async function Pie(){if(!kn())return!1;try{return await p0()}catch{return!1}}Die();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oie{constructor(e,t){this.app=e,this._delegate=t}get defaultConfig(){return this._delegate.defaultConfig}set defaultConfig(e){this._delegate.defaultConfig=e}get fetchTimeMillis(){return this._delegate.fetchTimeMillis}get lastFetchStatus(){return this._delegate.lastFetchStatus}get settings(){return this._delegate.settings}set settings(e){this._delegate.settings=e}activate(){return kR(this._delegate)}ensureInitialized(){return bR(this._delegate)}fetch(){return ER(this._delegate)}fetchAndActivate(){return Nie(this._delegate)}getAll(){return hie(this._delegate)}getBoolean(e){return die(this._delegate,e)}getNumber(e){return fie(this._delegate,e)}getString(e){return pie(this._delegate,e)}getValue(e){return rh(this._delegate,e)}setLogLevel(e){mie(this._delegate,e)}}const Mie="@firebase/remote-config-compat",Lie="0.1.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fie(n){n.INTERNAL.registerComponent(new fe("remoteConfig-compat",$ie,"PUBLIC").setMultipleInstances(!0).setServiceProps({isSupported:Pie})),n.registerVersion(Mie,Lie)}function $ie(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("remote-config").getImmediate({identifier:e});return new Oie(t,i)}Fie(Ze);var Uie="firebase",Bie="9.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ze.registerVersion(Uie,Bie,"app-compat");var Vie="firebase",qie="9.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);Ze.registerVersion(Vie,qie,"compat");Ze.firestore;function IR(n){const[e,t]=He(),i=uo(n);return ht(()=>{if(!!i.current)return rM(i.current,r=>{const s=r.docs.map(o=>({...o.data(),id:o.id}));t(s)}),()=>{}},[i]),e}const Gie=g.div`
  padding: 10px;
  width: fit-content;
  min-width: 100px;
  max-width: 200px;
  box-shadow: 0 2px 3px ${({theme:n})=>n.colors.grey300};
  margin-top: 10px;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  row-gap: 4px;
  position: relative;
  ${({isUser:n})=>n&&ue`
      background: ${({theme:e})=>e.colors.blue300};
      box-shadow: ${({theme:e})=>e.colors.boxShadow100};
    `}
`,jie=g.p`
  font-size: ${({theme:n})=>n.fontSize.body3};
  color: ${({theme:n})=>n.colors.grey900};
  font-weight: bold;
`,zie=g.p`
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey900};
`,Wie=g.p`
  font-size: ${({theme:n})=>n.fontSize.body3};
  color: ${({theme:n})=>n.colors.grey600};
`,Kie=({text:n,createdAt:e,uid:t,displayName:i,isRead:r,adminUser:s})=>{const o=new Date(e).toString().split("GMT")[0];return R(Gie,{isUser:s===t,children:[f(jie,{children:i}),f(zie,{children:n}),f(Wie,{children:o})]})};var Hie=Zi(Kie);const Qie=g.div`
  width: 400px;
  height: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
`,Yie=g.div`
  position: absolute;
  bottom: 0;
  padding: 10px;
  width: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: row;
`,Xie=g.input`
  border: 1px solid ${({theme:n})=>n.colors.grey300};
  border-radius: 7px;
  height: 36px;
  width: 100%;
  box-sizing: border-box;
  padding: 0 10px;
  margin-right: 5px;
`,Jie=g.button`
  border: 1px solid ${({theme:n})=>n.colors.blue500};
  border-radius: 7px;
  background: ${({theme:n})=>n.colors.blue500};
  padding: 3px 14px;
  cursor: pointer;
`,Zie=g.div`
  width: 100%;
  height: 700px;
  overflow-y: scroll;
  position: relative;
  padding: 10px;
  box-sizing: border-box;
`,ere=g.div`
  display: flex;
  width: 100%;
  box-sizing: border-box;
  ${({isUser:n})=>n&&ue`
      justify-content: flex-end;
    `}
`,TR=uE((n,e)=>{const{newMessages:t,adminUser:i}=n,r=[...t].reverse();return f(Zie,{children:r.map(s=>f(ere,{ref:e,isUser:i===s.uid,children:f(Hie,{...s,adminUser:i})},s.id))})});TR.displayName="ApplicantChat";const tre=({applicantId:n})=>{const[e,t]=He(""),i=uo(null),r=ru(X0),s=wd(kl(Mr,`chats-${n}`),W9("createdAt","asc"),T2(100)),o=kl(Mr,`chats-${n}`),a=IR(s),c=c0(h=>{t(h.target.value)},[]),l=async()=>{const h=e.trim();h&&(await x2(o,{text:h,createdAt:Date.now(),uid:r.uid,displayName:r.nickname,isRead:!1}),t(""))},u=h=>{h.key==="Enter"&&l()};return ht(()=>{var h;(h=i.current)==null||h.scrollIntoView({behavior:"smooth"})},[a]),f(Qie,{children:R(fo,{children:[i&&a&&f(TR,{ref:i,adminUser:r.uid,newMessages:a}),R(Yie,{children:[f(Xie,{onChange:c,value:e,onKeyPress:u}),f(Jie,{onClick:l,children:"\uC804\uC1A1"})]})]})})},nu=n=>{const e=new Date(n*1e3),t=e.getMonth()+1,i=e.getDate(),r=e.getFullYear(),s=e.getHours(),o=e.getMinutes(),a=`${s}\uC2DC ${o}\uBD84`,c=`${r} .${t} .${i} ${s}\uC2DC ${o}\uBD84`,l=`${r} .${t} .${i}`;return{time:a,fullDate:c,Y_M_D:l}},aE=2,I_={GENERATION:`${aE}`,COLLECTION:`applicants-${aE}`},nre={question1:"1. \uD65C\uC6A9\uD560 \uC218 \uC788\uB294 \uD504\uB808\uC784\uC6CC\uD06C, \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uC54C\uB824\uC8FC\uC138\uC694.",question2:"2. \uD504\uB85C\uC81D\uD2B8 \uD611\uC5C5 \uACBD\uD5D8\uC774 \uC788\uB2E4\uBA74 \uC790\uC138\uD558\uAC8C \uC54C\uB824\uC8FC\uC138\uC694.",question3:"3. \uC5B4\uB5A4 \uB9AC\uB4DC\uAC00 \uC88B\uC740 \uB9AC\uB4DC\uB77C\uACE0 \uC0DD\uAC01\uD558\uC2DC\uB294\uC9C0 \uC54C\uB824\uC8FC\uC138\uC694.",question4:"4. \uD300\uC6D0\uACFC \uAC08\uB4F1\uC0C1\uD669\uC740 \uC5B4\uB5BB\uAC8C \uD574\uACB0\uD558\uC2DC\uB098\uC694?",question5:"5. \uBCF8\uC778\uB9CC\uC758 \uACF5\uBD80\uBC29\uBC95\uC774 \uC788\uB2E4\uBA74 \uC5B4\uB5A4 \uAC83\uC774 \uC788\uB098\uC694?"},ire=n=>{const e=n.filter(o=>o.status==="DOCS"),t=n.filter(o=>o.status==="INTERVIEW"),i=n.filter(o=>o.status==="REJECTED_DOCS"),r=n.filter(o=>o.status==="REJECTED_INTERVIEW"),s=n.filter(o=>o.status==="HIRED");return{DOCS:e,INTERVIEW:t,REJECTED_DOCS:i,REJECTED_INTERVIEW:r,HIRED:s}},CR=async n=>{const e=kl(Mr,I_.COLLECTION),t=n?wd(e,XO("status","==",n)):wd(e,W9("uploadDate","desc"));return(await nM(t)).docs.map(s=>({id:s.id,...s.data()}))},rre=async n=>{const e=await S2(j0(Mr,I_.COLLECTION,n));return{id:e.id,...e.data()}},sre=()=>{const[n,e]=He(),[t,i]=Lt(po),r=()=>{i({...t,[vt.ADMIN_APPLICANT]:!1,selectedId:""})},s=async()=>{const o=await rre(t.selectedId);e(o)};return ht(()=>{s()},[t.selectedId]),f(er,{children:t.adminApplicant&&t.selectedId&&f(TF,{children:f(Z9,{outsideClick:r,children:R(CF,{variants:J2,layoutId:`card-${t.selectedId}`,children:[n&&R(SF,{children:[f(cre,{applicantData:n}),f(ore,{applicantData:n,setApplicantData:e})]}),R(xF,{children:[f(AF,{children:f(VF,{onClick:r})}),n&&R(RF,{children:[f(are,{applicantData:n}),f(tre,{applicantId:n.id})]})]})]})})})})},ore=({applicantData:n,setApplicantData:e})=>{const t=j0(Mr,I_.COLLECTION,n.id),i=c0(async r=>{await iM(t,{status:r}),e({...n,status:r})},[]);return R(OF,{children:[f(mc,{onClick:()=>i("DOCS"),children:f(Qn,{status:"DOCS",disable:n.status!=="DOCS"})}),f(mc,{onClick:()=>i("REJECTED_DOCS"),children:f(Qn,{status:"REJECTED_DOCS",disable:n.status!=="REJECTED_DOCS"})}),f(mc,{onClick:()=>i("INTERVIEW"),children:f(Qn,{status:"INTERVIEW",disable:n.status!=="INTERVIEW"})}),f(mc,{onClick:()=>i("REJECTED_INTERVIEW"),children:f(Qn,{status:"REJECTED_INTERVIEW",disable:n.status!=="REJECTED_INTERVIEW"})}),f(mc,{onClick:()=>i("HIRED"),children:f(Qn,{status:"HIRED",disable:n.status!=="HIRED"})})]})},are=({applicantData:n})=>{const e=i=>({question1:i.question1,question2:i.question2,question3:i.question3,question4:i.question4,question5:i.question5}),t=Object.keys(e(n));return f(MF,{children:t.map((i,r)=>{var s;return R("div",{children:[f(LF,{children:nre[i]}),f(FF,{children:(s=e(n)[i])!=null?s:"\uC5C6\uC74C"})]},r)})})},cre=({applicantData:n})=>{var t,i,r;function e(s){return s===""?"\uC5C6\uC74C":s.replace(/^(https?:\/\/)?(www\.)?/,"")}return R(DF,{children:[R(NF,{children:[f(PF,{children:n.name}),f(Qn,{status:n.status})]}),R(Ti,{children:[f(Vt,{children:"\uC774\uBA54\uC77C"}),f(Vt,{children:n.email})]}),R(Ti,{children:[f(Vt,{children:"\uC804\uD654\uBC88\uD638"}),f(Vt,{children:n.phoneNumber})]}),R(Ti,{children:[f(Vt,{children:"\uC804\uACF5"}),f(Vt,{children:n.major})]}),R(Ti,{children:[f(Vt,{children:"\uD559\uBC88"}),f(Vt,{children:n.studentID})]}),R(Ti,{children:[f(Vt,{children:"\uCCA8\uBD80\uD30C\uC77C"}),f(vp,{href:n.fileURL,target:"_blank",children:e((t=n.fileURL)!=null?t:"")})]}),R(Ti,{children:[f(Vt,{children:"Link0"}),f(vp,{href:n.link0,target:"_blank",children:e((i=n.link0)!=null?i:"")})]}),R(Ti,{children:[f(Vt,{children:"Link1"}),f(vp,{href:n.link1,target:"_blank",children:e((r=n.link1)!=null?r:"")})]}),R(Ti,{children:[f(Vt,{children:"\uCD94\uCC9C\uC778"}),f(Vt,{children:n.recommender==""?"\uC5C6\uC74C":n.recommender})]}),R(Ti,{children:[f(Vt,{children:"\uC9C0\uC6D0 \uC77C\uC790"}),f(Vt,{children:nu(n.uploadDate.seconds).fullDate})]})]})};var SR=Zi(sre);const lre=g.div`
  display: flex;
  align-items: center;
  width: fit-content;
`,ure=g.div`
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey700};
  display: flex;
  align-items: center;
  padding: 0 10px;
  flex-wrap: wrap;
  gap: 0 5px;
`,xR=({status:n,setStatus:e,filteredApplicants:t,setFilteredApplicants:i})=>{const r=ire(t),s={DOCS:r.DOCS.length,INTERVIEW:r.INTERVIEW.length,REJECTED_DOCS:r.REJECTED_DOCS.length,REJECTED_INTERVIEW:r.REJECTED_INTERVIEW.length,HIRED:r.HIRED.length},o=Object.keys(s),a=c=>{e(n===c?null:c)};return ht(()=>{i(n?r[n]:t)},[n]),f(lre,{children:o.map(c=>R(ure,{onClick:()=>a(c),children:[f(Qn,{status:c,disable:c!==n}),s[c]]},c))})},hre={home:"Home",frontend:"Frontend Developer",backend:"Backend Developer",android:"Android Developer",beginner:"Beginner",design:"Designer",ml:"Machine Learning"},dre=()=>{const[n,e]=Lt(po),[t,i]=He(),[r,s]=He(null),[o]=Ag(),a=o.get("type"),c=h=>{e({...n,[vt.ADMIN_APPLICANT]:!0,selectedId:h})},l=async h=>{const d=hre[a].toLowerCase();if(h){const p=[...h],m=a!=="home"?p.filter(_=>_.position.toLowerCase().includes(d)):p;await i(m)}},u=async()=>{const h=await CR(r);await l(h)};return ht(()=>{u()},[a,r,n.selectedId]),f(er,{children:R(UR,{children:[n.adminApplicant&&f(SR,{}),R(IF,{children:[R(Z2,{children:[f(fre,{currentParam:a}),t&&f(xR,{status:r,setStatus:s,filteredApplicants:t,setFilteredApplicants:i})]}),t&&f(EF,{children:t.map(h=>f(bF,{onClick:()=>c(h.id),children:f(kF,{...h})},h.id))})]})]})})},fre=({currentParam:n})=>{const[e,t]=Lt(J0),i=o=>t({...e,[o]:!e[o]}),r=o=>e[o],s={type:"spring",stiffness:700,damping:30};return f(yF,{children:f(pF,{"data-ison":r(n),onClick:()=>i(n),children:f(mF,{layout:!0,transition:s})})})};var pre=Zi(dre);const mre=()=>{const n=ru(J0),[e,t]=Ag(),i=ho();return ht(()=>{X2.putRecruitStatus(n)},[n]),ht(()=>{!e.get("type")&&t({type:"home"})},[i.pathname]),f(eC,{children:f(pre,{})})},gre=g.div`
  display: flex;
  align-items: center;
  text-align: center;
  justify-content: space-between;
  box-sizing: border-box;
  box-shadow: 0 0 10px ${({theme:n})=>n.colors.grey100};
  background: ${({theme:n})=>n.colors.white};
  padding: 12px 16px;
  height: 46px;
  border-radius: 6px;
  transition: all 0.3s ease-in-out;
  width: 480px;
  &:hover {
    background: ${({theme:n})=>n.colors.grey50};
    cursor: pointer;
  }
  ${({disabled:n})=>n&&ue`
      width: 200px;
    `}
`,yre=g.div`
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey800};
  width: 70px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
`,_re=g.div`
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey800};
  width: 60px;
  display: flex;
  white-space: nowrap;
  overflow: hidden;
`,wre=g.div`
  width: 65px;
  display: flex;
  justify-content: center;
`,vre=g.div`
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey800};
  width: 200px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
`,kre=g.input`
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid ${({theme:n})=>n.colors.grey300};
  cursor: pointer;

  &:checked {
    background: ${({theme:n})=>n.colors.googleBlue};
  }
`,cE=({id:n,name:e,email:t,status:i,position:r,checkedList:s,setCheckedList:o,disabled:a})=>{const c=a0.useRef(null);return R(gre,{disabled:a,onClick:()=>{var l;o&&o(n,!((l=c.current)!=null&&l.checked))},children:[!a&&s&&o&&f(kre,{type:"checkbox",ref:c,checked:s.has(n),onChange:l=>o(n,l.target.checked)}),!a&&f(_re,{children:e}),!a&&f(yre,{children:r}),f(vre,{children:t}),!a&&f(wre,{children:f(Qn,{status:i})})]})},bre=g(ee.div)`
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.1);
  z-index: 1000;
`,Ere=({sendEmail:n,template:e,applicants:t})=>{const[i,r]=Lt(po);return f(er,{children:i.adminEmailCheck&&f(bre,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:f(Z9,{outsideClick:()=>{r({...i,[vt.ADMIN_EMAIL_CHECK]:!1})},children:R(aF,{children:[f(oF,{children:"\uCD5C\uC885 \uC804\uC1A1 \uC804, \uD655\uC778\uD574\uC8FC\uC138\uC694."}),R(sF,{children:["\uC120\uD0DD\uD55C \uC774\uBA54\uC77C\uC740 \uCD1D ",t.length,"\uAC1C\uC5D0\uC694."]}),R(rF,{children:[f(ya,{text:"\uB3CC\uC544\uAC00\uAE30",color:"tossBlue",onClick:()=>r({...i,[vt.ADMIN_EMAIL_CHECK]:!1})}),f(ya,{text:"\uC804\uC1A1\uD558\uAE30",color:"tossRed",onClick:()=>n(e,t)})]})]})})})})},Ire=g.section`
  display: flex;
  flex-wrap: wrap;
  min-width: 450px;
  box-sizing: border-box;
  width: 100%;
`,Tre=g.div`
  width: 100%;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  height: fit-content;
  margin-bottom: 10px;
  @media (min-width: 1000px) {
    width: 100%;
  }
  @media (min-width: 1580px) {
    width: 50%;
  }
  @media (min-width: 1950px) {
    width: 33%;
  }
`,Cre=g.section`
  display: flex;
  flex-wrap: wrap;
  row-gap: 10px;
  flex-direction: column;
  overflow: scroll;
  width: 100%;
  justify-content: center;
  align-items: center;
  height: 100%;
  padding: 10px 20px;
  box-sizing: border-box;
`,Sre=g.div`
  width: 300px;
`,xre=g.div`
  font-size: ${({theme:n})=>n.fontSize.h7};
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  width: 200px;
`,Are=g.div`
  display: flex;
  align-items: center;
  flex-direction: column;
  box-sizing: border-box;
  width: 100%;
`,Rre=g.div`
  padding: 0 20px;
  display: flex;
  box-sizing: border-box;
  width: 100%;
  justify-content: flex-end;
  flex-direction: column;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px;
`,Dre=g.div`
  background: ${({theme:n})=>n.colors.grey50};
`,Nre=g.div`
  width: 240px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  row-gap: 10px;
`,Pre=g.div`
  font-size: ${({theme:n})=>n.fontSize.h7};
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  height: 50px;
  width: 100%;
  white-space: nowrap;
`,Ore=({template:n})=>{const[e,t]=Lt(pE),[i,r]=Lt(TE),s=ru(X0),[o,a]=He(),[c,l]=He(new Set),[u,h]=He(null),[d,p]=Lt(po),m=$=>{p({...d,[vt.ADMIN_APPLICANT]:!0,selectedId:$})},_=($,pe)=>{const we=new Set(c);pe?(we.add($),l(we)):!pe&&c.has($)&&(we.delete($),l(we))},y=c.size===(o==null?void 0:o.length),x=$=>{l($?new Set(o==null?void 0:o.map(pe=>pe.id)):new Set)},N=async $=>{await x2(kl(Mr,"emailLogs"),$)},A=async($,pe)=>{p({...d,[vt.ADMIN_EMAIL_CHECK]:!1}),pe.length===0&&t({...e,alertHandle:!0,alertMessage:"\uC9C0\uC6D0\uC790\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694."}),$==="\uD15C\uD50C\uB9BF\uC774 \uC5C6\uC5B4\uC694 :("?t({...e,alertHandle:!0,alertMessage:"\uD15C\uD50C\uB9BF\uC744 \uC120\uD0DD\uD558\uC9C0 \uC54A\uC558\uC5B4\uC694."}):(r({...i,load:!0}),await O($,pe))},O=async($,pe)=>{pe.map(async we=>{C_.init("RsM6o4WUsb5rzJGXG");try{const Ao=await C_.send("default_service",$,{email:we.email,name:we.name}),T_={email:we.email,name:we.name,applicantID:we.id,applicantStatus:we.status,sender:s.nickname,status:Ao.status,uploadDate:new Date};await N(T_),T_&&(t({...e,alertHandle:!0,alertMessage:"\uBA54\uC77C\uC774 \uC804\uC1A1\uB418\uC5C8\uC5B4\uC694. \uB85C\uADF8\uB97C \uD655\uC778\uD574\uC8FC\uC138\uC694."}),r({...i,load:!1}))}catch{t({...e,alertHandle:!0,alertMessage:"\uC5B4\uB518\uAC00 \uBB38\uC81C\uAC00 \uC0DD\uACBC\uC5B4\uC694. \uCF58\uC194\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694."})}})},W=async()=>{const $=await CR(u);a($)};ht(()=>{W()},[u]);const V=o==null?void 0:o.filter($=>c.has($.id));return f(er,{children:R(eC,{children:[f(SR,{}),V&&f(Ere,{applicants:V,sendEmail:A,template:n}),f(Dre,{children:R(Nre,{children:[f(Pre,{children:"\uC120\uD0DD\uD55C \uC774\uBA54\uC77C"}),V&&f(Cre,{children:V.map($=>f("div",{onDoubleClick:()=>m($.id),children:f(cE,{...$,disabled:!0})},`check-${$.id}`))})]})}),f(Are,{children:R(Rre,{children:[R(Z2,{children:[o&&f(xR,{status:u,setStatus:h,filteredApplicants:o,setFilteredApplicants:a}),R(gF,{children:[f(ya,{color:y?"tossBlueActive":"tossBlue200",text:y?"\uBAA8\uB450 \uD574\uC81C":"\uBAA8\uB450 \uC120\uD0DD",onClick:()=>x(!y),type:"button"}),f(ya,{color:"googleBlue",text:"\uC774\uBA54\uC77C \uC804\uC1A1",onClick:()=>p(()=>({...d,adminEmailCheck:!0})),type:"button"})]})]}),o&&f(Ire,{children:o.map($=>f(Tre,{onDoubleClick:()=>m($.id),children:f(cE,{...$,checkedList:c,setCheckedList:_})},$.id))})]})})]})})},o0=g.div`
  background: ${({theme:n})=>n.colors.grey400};
  width: 33%;
  height: 1px;
`,AR=g.div`
  align-items: center;
  display: flex;
  flex-direction: row;
  justify-content: center;
  box-sizing: border-box;
  padding: 6px 0;
  flex-wrap: wrap;
  gap: 20px;
  width: 100%;
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey700};
`,Mre=g.div`
  display: flex;
  align-items: center;
  flex-direction: row;
  font-size: ${({theme:n})=>n.fontSize.body2};
  color: ${({theme:n})=>n.colors.grey700};
  width: 100%;
  justify-content: space-between;
  box-sizing: border-box;
  padding: 14px 20px;
  box-shadow: 0 2px 12px 0 ${({theme:n})=>n.colors.grey300};
  border-radius: 10px;
  background: ${({theme:n})=>n.colors.white};
`,Rc=g.div`
  width: 70px;
  white-space: nowrap;
  overflow: hidden;
  display: flex;
  text-overflow: ellipsis;
  font-size: ${({theme:n})=>n.fontSize.body2};
  justify-content: center;
  ${({email:n})=>n&&ue`
      display: block;
      width: 100px;
    `}
`,Lre=g.div`
  width: 65px;
  display: flex;
  align-items: center;
  justify-content: center;
`,Fre=g.section`
  display: flex;
  flex-direction: column;
  justify-content: center;
  flex-wrap: wrap;
  max-width: 600px;
  align-items: center;
  margin: 0 auto;
  gap: 10px;
  height: fit-content;
  padding: 20px 0;
`,$re=({emailLogs:n})=>{const[e,t]=a0.useState("");return ht(()=>{n.length>0&&t(nu(n[0].uploadDate.seconds).Y_M_D)},[n]),R(Fre,{children:[e&&R(AR,{children:[f(o0,{}),e,f(o0,{})]}),n&&n.map((i,r)=>{const s=r==0?0:r-1,o=nu(n[s].uploadDate.seconds).Y_M_D;return f(Ure,{emailLog:i,lastDate:o!=null?o:""},i.id)})]})},Ure=({emailLog:n,lastDate:e})=>{const t=nu(n.uploadDate.seconds).Y_M_D;return R(fo,{children:[t!==e&&R(AR,{children:[f(o0,{}),t,f(o0,{})]}),R(Mre,{children:[f(Rc,{children:n.name}),f(Rc,{email:!0,children:n.email}),f(Rc,{children:n.sender}),f(Rc,{children:nu(n.uploadDate.seconds).time}),f(Rc,{children:n.status}),f(Lre,{children:f(Qn,{status:n.applicantStatus})})]},n.id)]})},Bre=uE(({name:n,placeholder:e,onChange:t,type:i,disabled:r,error:s},o)=>{const a=s!=null&&s!="\uD544\uC218\uC785\uB825\uB780\uC785\uB2C8\uB2E4.";return f(uF,{error:a,disabled:!r,children:f(lF,{className:"formInput",name:n,type:i,onChange:t&&t,placeholder:e,disabled:r,ref:o})})}),Vre=g.div`
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  height: 50px;
  flex-wrap: wrap;
  gap: 10px;
  width: 100%;
  margin: 20px 0;
`,qre=g.div`
  height: calc(100vh - 70px - 82px - 120px);
  overflow: scroll;
`,Gre=({template:n,setTemplate:e})=>{const t=uo(null),i=wd(kl(Mr,"emailLogs"),W9("uploadDate","desc"),T2(100)),r=IR(i);return R(fo,{children:[R(Vre,{children:[R(xre,{children:[n!=="\uD15C\uD50C\uB9BF\uC774 \uC5C6\uC5B4\uC694 :("&&"\uC120\uD0DD\uD55C \uD15C\uD50C\uB9BF ",n]}),f(Sre,{children:f(Bre,{ref:t,placeholder:"\uD15C\uD50C\uB9BF\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."})}),f(ya,{color:"googleBlue",text:"\uD15C\uD50C\uB9BF \uC120\uD0DD",onClick:()=>{var s,o;return e((o=(s=t.current)==null?void 0:s.value)!=null?o:"")}})]}),r&&r.length>0&&f(qre,{children:f($re,{emailLogs:r})})]})},jre=()=>f(Y2,{}),zre=()=>{const[n,e]=Lt(X0),[t,i]=He("\uD15C\uD50C\uB9BF\uC774 \uC5C6\uC5B4\uC694 :("),r=Fa(),s=async a=>{const c=await S2(j0(Mr,"adminUsers",a)),l=c.data();c.exists()&&e({...n,uid:a,nickname:l==null?void 0:l.nickname,name:l==null?void 0:l.name,phoneNumber:l==null?void 0:l.phoneNumber})},o=async()=>{WD(Y0,a=>{if(a)try{s(a.uid)}catch{r("/auth")}})};return ht(()=>{o()},[]),R(fo,{children:[f(fF,{}),f(GL,{}),R(Y2,{children:[f(iF,{}),f(zL,{children:f(jL,{children:R(dE,{children:[f(Bo,{path:"/*",element:f(jre,{})}),f(Bo,{path:"/recruit",element:f(mre,{})}),f(Bo,{path:"/email",element:f(Ore,{template:t})}),f(Bo,{path:"/email-log",element:f(Gre,{template:t,setTemplate:i})})]})})})]})]})},Wre=()=>f(qR,{FallbackComponent:OL,children:f(OR,{fallback:f(CE,{}),children:R(hE,{children:[f(dr,{path:"/*",element:f(u6,{})}),f(dr,{path:"/admin/*",element:f(zre,{})}),f(dr,{path:"/auth/*",element:f(wL,{})})]})})}),Kre=MR`

  @font-face {
    font-family: 'Google Sans Display';
    src:
      local("Google Sans Display"),
      url('/fonts/GoogleSansDisplay-Regular.woff2') format('woff2'),
      url('/fonts/GoogleSansDisplay-Regular.woff') format('woff'),
      url('/fonts/GoogleSansDisplay-Regular.ttf') format('truetype');
    font-weight: 400;
    font-display: swap;
    unicode-range: U+0041-005A, U+0061-007A, U+0030-0039;
  }  @font-face {
    font-family: 'Google Sans Display';
    src:
      local("Google Sans Display"),
      url('/fonts/GoogleSansDisplay-Medium.woff2') format('woff2'),
      url('/fonts/GoogleSansDisplay-Medium.woff') format('woff'),
      url('/fonts/GoogleSansDisplay-Medium.ttf') format('truetype');
    font-weight: 500;
    font-display: swap;
    unicode-range: U+0041-005A, U+0061-007A, U+0030-0039;
  }  @font-face {
    font-family: 'Google Sans Display';
    src:
      local("Google Sans Display"),
      url('/fonts/GoogleSansDisplay-Bold.woff2') format('woff2'),
      url('/fonts/GoogleSansDisplay-Bold.woff') format('woff'),
      url('/fonts/GoogleSansDisplay-Bold.ttf') format('truetype');
    font-weight: 700;
    font-display: swap;
    unicode-range: U+0041-005A, U+0061-007A, U+0030-0039;
  }
  @font-face {
    font-family: 'Spoqa Han Sans Neo';
    src:
      local('Spoqa Han Sans Neo'),
      url('/fonts/SpoqaHanSansNeo-Thin.woff2') format('woff2'),
      url('/fonts/SpoqaHanSansNeo-Thin.woff') format('woff'), 
      url('/fonts/SpoqaHanSansNeo-Thin.ttf') format('truetype');
    font-weight: 100;
    font-display: swap;
    unicode-range: U+AC00-U+D7A3;
  } @font-face {
    font-family: 'Spoqa Han Sans Neo';
    src:local('Spoqa Han Sans Neo'),
    url('/fonts/SpoqaHanSansNeo-light.woff2') format('woff2'),
    url('/fonts/SpoqaHanSansNeo-light.woff') format('woff'),
    url('/fonts/SpoqaHanSansNeo-light.ttf') format('truetype');
    font-weight: 300;
    font-display: swap;
    unicode-range: U+AC00-U+D7A3;

  }  @font-face {
    font-family: 'Spoqa Han Sans Neo';
    src:
      local('Spoqa Han Sans Neo'),
      url('/fonts/SpoqaHanSansNeo-Regular.woff2') format('woff2'),
      url('/fonts/SpoqaHanSansNeo-Regular.woff') format('woff'),
      url('/fonts/SpoqaHanSansNeo-Regular.ttf') format('truetype');
    font-weight: 400;
    font-display: swap;
    unicode-range: U+AC00-U+D7A3;
  } @font-face {
    font-family: 'Spoqa Han Sans Neo';
    src:local('Spoqa Han Sans Neo'),
    url('/fonts/SpoqaHanSansNeo-Medium.woff2') format('woff2'),
    url('/fonts/SpoqaHanSansNeo-Medium.woff') format('woff'),
    url('/fonts/SpoqaHanSansNeo-Medium.ttf') format('truetype');
    font-weight: 500;
    font-display: swap;
    unicode-range: U+AC00-U+D7A3;

  }  @font-face {
    font-family: 'Spoqa Han Sans Neo';
    src:local('Spoqa Han Sans Neo'),
    url('/fonts/SpoqaHanSansNeo-Bold.woff2') format('woff2'),
    url('/fonts/SpoqaHanSansNeo-Bold.woff') format('woff'),
    url('/fonts/SpoqaHanSansNeo-Bold.ttf') format('truetype');
    font-weight: 700;
    font-display: swap;
    unicode-range: U+AC00-U+D7A3;
  }
  * {
    margin: 0;
    font-size: 10px;
    word-break: keep-all;
    -webkit-tap-highlight-color: transparent;
    transition: color, background-color 0.3s ease-in-out;
    font-family: 'Google Sans Display','Spoqa Han Sans Neo', sans-serif;
  }
  html, body, div, span, applet, object, iframe,
  h1, h2, h3, h4, h5, h6, p, blockquote, pre,
  a, abbr, acronym, address, big, cite, code,
  del, dfn, em, img, ins, kbd, q, s, samp,
  small, strike, strong, sub, sup, tt, var,
  b, u, i, center,
  dl, dt, dd, ol, ul, li,
  fieldset, form, label, legend,
  table, caption, tbody, tfoot, thead, tr, th, td,
  article, aside, canvas, details, embed,
  figure, figcaption, footer, header, hgroup,
  menu, nav, output, ruby, section, summary,
  time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 10px;
    vertical-align: baseline;
  }
  /* HTML5 display-role reset for older browsers */
  article, aside, details, figcaption, figure,
  footer, header, hgroup, menu, nav, section {
    display: block;
  }
  
  html{
    background: ${({theme:n})=>n.colors.background};
  }
  

  a {
    text-decoration: none;
  }
  a:visited {
    text-decoration: none;
  }
  a:hover {
    text-decoration: none;
  }
  a:focus {
    text-decoration: none;
  }
  a:active {
    text-decoration: none;
  }
`,RR={desk:1024,tablet:768,mobile:500},DR={h1:"5.6rem",h2:"4.8rem",h3:"3.6rem",h4:"3.2rem",h5:"2.4rem",h6:"2.0rem",h7:"1.8rem",body1:"1.6rem",body2:"1.4rem",body3:"1.2rem",body4:"1rem"},Hre={white:"#FFF",grey50:"#F9FAFB",grey100:"#F2F4F6",grey200:"#E5E8EB",grey300:"#D1D6DB",grey400:"#B0B8C1",grey500:"#8B95A1",grey600:"#6B7684",grey700:"#4E5968",grey800:"#333D4B",grey900:"#191F28"},Qre={green100:"#E8F5E9",green200:"#C8E6C9",green300:"#A5D6A7",green400:"#81C784",green500:"#66BB6A",green600:"#4CAF50"},Yre={yellow100:"#FFF8E1",yellow200:"#FFECB3",yellow300:"#FFE082",yellow400:"#FFD54F",yellow500:"#FFCA28",yellow600:"#FFC107"},Xre={red100:"#FFEBEE",red200:"#FFCDD2",red300:"#EF9A9A",red400:"#E57373",red500:"#EF5350",red600:"#F44336",tossRed:"#f44336"},Jre={orange100:"#FFF3E0",orange200:"#FFE0B2",orange300:"#FFCC80",orange400:"#FFB74D",orange500:"#FFA726",orange600:"#FF9800",orange700:"#FB8C00",orange800:"#F57C00",orange900:"#FF740F"},Zre={blue100:"#E3F2FD",blue200:"#BBDEFB",blue300:"#90CAF9",blue400:"#64B5F6",blue500:"#42A5F5",blue600:"#2196F3",tossBlue:"#42a5f5",tossBlue500:"#3182f6",tossBlue200:"#90c2ff",tossBlueActive:"#3886f6"},ese={googleBlue:"#4285F4",googleRed:"#EA4335",googleYellow:"#FBBC04",googleGreen:"#34A853"},tse={background:"#fff",boxShadow100:"0 0.8px 2px rgba(0,0,0,0.03), 0 2.7px 6.7px rgba(0,0,0,0.05),0 12px 30px rgba(0,0,0,0.1)",boxShadow300:"0 0.8px 2px rgba(0, 0, 0, 0.03), 0 2.7px 6.7px rgba(0, 0, 0, 0.05), 0 12px 20px rgba(0, 0, 0, 0.3)",backgroundOpacity900:"rgba(255 ,255 ,255, 1)",backgroundOpacity:"rgba(255 ,255 ,255, 0)",greyOpacity50:"rgba(0, 23, 51, 0.02)",greyOpacity100:"rgba(2, 32, 71, 0.05)",greyOpacity200:"rgba(0, 27, 55, 0.1)",greyOpacity300:"rgba(0, 29, 58, 0.18)",greyOpacity400:"rgba(0, 29, 54, 0.31)",greyOpacity500:"rgba(3, 24, 50, 0.46)",greyOpacity600:"rgba(0, 19, 43, 0.58)",greyOpacity700:"rgba(3, 18, 40, 0.7)",greyOpacity800:"rgba(0, 12, 30, 0.8)",greyOpacity900:"rgba(2, 9, 19, 0.91)"},nse={...Hre,...Qre,...Yre,...Xre,...Zre,...Jre,...ese,...tse},ise={...nse},rse={white:"#191F28",grey50:"#333D4B",grey100:"#4E5968",grey200:"#6B7684",grey300:"#8B95A1",grey400:"#B0B8C1",grey500:"#D1D6DB",grey600:"#E5E8EB",grey700:"#F2F4F6",grey800:"#F9FAFB",grey900:"#FFF"},sse={green100:"#E8F5E9",green200:"#C8E6C9",green300:"#A5D6A7",green400:"#81C784",green500:"#66BB6A",green600:"#4CAF50"},ose={yellow100:"#FFF8E1",yellow200:"#FFECB3",yellow300:"#FFE082",yellow400:"#FFD54F",yellow500:"#FFCA28",yellow600:"#FFC107"},ase={red100:"#FFEBEE",red200:"#FFCDD2",red300:"#EF9A9A",red400:"#E57373",red500:"#EF5350",red600:"#F44336",tossRed:"#b71c1c"},cse={orange100:"#FFF3E0",orange200:"#FFE0B2",orange300:"#FFCC80",orange400:"#FFB74D",orange500:"#FFA726",orange600:"#FF9800",orange700:"#FB8C00",orange800:"#F57C00",orange900:"#FF740F"},lse={blue100:"#E3F2FD",blue200:"#BBDEFB",blue300:"#90CAF9",blue400:"#64B5F6",blue500:"#42A5F5",blue600:"#2196F3",tossBlue:"#42a5f5",tossBlue500:"#3182f6",tossBlue200:"#90c2ff",tossBlueActive:"#3886f6"},use={googleBlue:"#4285F4",googleRed:"#EA4335",googleYellow:"#FBBC04",googleGreen:"#34A853"},hse={background:"#22272E",boxShadow100:"0px 0.8px 2px rgba(0,0,0,.032),0px 2.7px 6.7px rgba(0,0,0,.048),0px 12px 30px rgba(0,0,0,0.1)",boxShadow300:"0px 0.8px 2px rgba(0,0,0,.032),0px 2.7px 6.7px rgba(0,0,0,.048),0px 12px 30px rgba(0,0,0,0.3)",backgroundOpacity900:"rgba(34,39,46, 1)",backgroundOpacity:"rgba(0 ,0 ,0, 0)",greyOpacity50:"rgba(255, 233, 204, 0.02)",greyOpacity100:"rgba(253, 223, 184, 0.05)",greyOpacity200:"rgba(255, 228, 200, 0.1)",greyOpacity300:"rgba(255, 226, 157, 0.18)",greyOpacity400:"rgba(255, 226, 221, 0.31)",greyOpacity500:"rgba(252, 231, 205, 0.46)",greyOpacity600:"rgba(255, 236, 212, 0.58)",greyOpacity700:"rgba(252, 237, 215, 0.7)",greyOpacity800:"rgba(255, 243, 225, 0.8)",greyOpacity900:"rgba(253, 246, 236, 0.91)"},dse={...rse,...sse,...ose,...ase,...lse,...cse,...use,...hse},fse={...dse},pse={colors:fse,windowSize:RR,fontSize:DR},mse={colors:ise,windowSize:RR,fontSize:DR};function gse(){const[n,e]=He(!0),t=ho();ht(()=>{t.pathname==="/"?e(!1):e(!0)},[t.pathname]);const{theme:i,toggleTheme:r}=t6();return R(LR,{theme:i==="light"?mse:pse,children:[f(Kre,{}),f(a3,{}),f(CE,{background:!0}),f(p3,{}),f(F3,{theme:i,toggleTheme:r}),f(Wre,{}),n&&f(h3,{})]})}var Sg={},lE=zR;Sg.createRoot=lE.createRoot,Sg.hydrateRoot=lE.hydrateRoot;Sg.createRoot(document.getElementById("root")).render(f(a0.StrictMode,{children:f(VR,{children:f($R,{children:f("div",{style:{display:"flex",flexDirection:"column",flex:"1 0 auto",minHeight:"100vh"},children:f(gse,{})})})})}));export{cF as A,Mse as B,Nse as C,Pse as D,Gse as E,fo as F,CE as G,J0 as H,qse as I,hF as J,Fse as K,kL as M,Z9 as O,O6 as S,vL as T,kl as V,su as _,R as a,h3 as b,uF as c,Vse as d,vt as e,aF as f,J2 as g,$se as h,oF as i,f as j,Use as k,ise as l,po as m,sF as n,rF as o,ya as p,Bse as q,nre as r,TE as s,pE as t,Lse as u,Zw as v,I_ as w,x2 as x,Mr as y,Ose as z};
